import{createRequire as yv}from"node:module";var bv=Object.create;var{getPrototypeOf:xv,defineProperty:DU,getOwnPropertyNames:kv}=Object;var fv=Object.prototype.hasOwnProperty;var u0=($,Q,X)=>{X=$!=null?bv(xv($)):{};let Y=Q||!$||!$.__esModule?DU(X,"default",{value:$,enumerable:!0}):X;for(let J of kv($))if(!fv.call(Y,J))DU(Y,J,{get:()=>$[J],enumerable:!0});return Y};var b=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports);var i0=($,Q)=>{for(var X in Q)DU($,X,{get:Q[X],enumerable:!0,configurable:!0,set:(Y)=>Q[X]=()=>Y})};var G6=yv(import.meta.url);var ZQ=b((Wn,xU)=>{if(typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0)xU.exports={nextTick:ME};else xU.exports=process;function ME($,Q,X,Y){if(typeof $!=="function")throw TypeError('"callback" argument must be a function');var J=arguments.length,U,G;switch(J){case 0:case 1:return process.nextTick($);case 2:return process.nextTick(function(){$.call(null,Q)});case 3:return process.nextTick(function(){$.call(null,Q,X)});case 4:return process.nextTick(function(){$.call(null,Q,X,Y)});default:U=Array(J-1),G=0;while(G<U.length)U[G++]=arguments[G];return process.nextTick(function(){$.apply(null,U)})}}});var _j=b((Hn,yj)=>{var PE={}.toString;yj.exports=Array.isArray||function($){return PE.call($)=="[object Array]"}});var SQ=b((kU,hj)=>{var gJ=G6("buffer"),A0=gJ.Buffer;function gj($,Q){for(var X in $)Q[X]=$[X]}if(A0.from&&A0.alloc&&A0.allocUnsafe&&A0.allocUnsafeSlow)hj.exports=gJ;else gj(gJ,kU),kU.Buffer=B4;function B4($,Q,X){return A0($,Q,X)}gj(A0,B4);B4.from=function($,Q,X){if(typeof $==="number")throw TypeError("Argument must not be a number");return A0($,Q,X)};B4.alloc=function($,Q,X){if(typeof $!=="number")throw TypeError("Argument must be a number");var Y=A0($);if(Q!==void 0)if(typeof X==="string")Y.fill(Q,X);else Y.fill(Q);else Y.fill(0);return Y};B4.allocUnsafe=function($){if(typeof $!=="number")throw TypeError("Argument must be a number");return A0($)};B4.allocUnsafeSlow=function($){if(typeof $!=="number")throw TypeError("Argument must be a number");return gJ.SlowBuffer($)}});var D4=b((cE)=>{function RE($){if(Array.isArray)return Array.isArray($);return hJ($)==="[object Array]"}cE.isArray=RE;function ZE($){return typeof $==="boolean"}cE.isBoolean=ZE;function SE($){return $===null}cE.isNull=SE;function TE($){return $==null}cE.isNullOrUndefined=TE;function CE($){return typeof $==="number"}cE.isNumber=CE;function bE($){return typeof $==="string"}cE.isString=bE;function xE($){return typeof $==="symbol"}cE.isSymbol=xE;function kE($){return $===void 0}cE.isUndefined=kE;function fE($){return hJ($)==="[object RegExp]"}cE.isRegExp=fE;function yE($){return typeof $==="object"&&$!==null}cE.isObject=yE;function _E($){return hJ($)==="[object Date]"}cE.isDate=_E;function gE($){return hJ($)==="[object Error]"||$ instanceof Error}cE.isError=gE;function hE($){return typeof $==="function"}cE.isFunction=hE;function mE($){return $===null||typeof $==="boolean"||typeof $==="number"||typeof $==="string"||typeof $==="symbol"||typeof $>"u"}cE.isPrimitive=mE;cE.isBuffer=G6("buffer").Buffer.isBuffer;function hJ($){return Object.prototype.toString.call($)}});var mj=b((wn,fU)=>{if(typeof Object.create==="function")fU.exports=function(Q,X){if(X)Q.super_=X,Q.prototype=Object.create(X.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}})};else fU.exports=function(Q,X){if(X){Q.super_=X;var Y=function(){};Y.prototype=X.prototype,Q.prototype=new Y,Q.prototype.constructor=Q}}});var O4=b((Kn,yU)=>{try{if(mJ=G6("util"),typeof mJ.inherits!=="function")throw"";yU.exports=mJ.inherits}catch($){yU.exports=mj()}var mJ});var uj=b((Nn,_U)=>{function JM($,Q){if(!($ instanceof Q))throw TypeError("Cannot call a class as a function")}var cj=SQ().Buffer,TQ=G6("util");function YM($,Q,X){$.copy(Q,X)}_U.exports=function(){function $(){JM(this,$),this.head=null,this.tail=null,this.length=0}return $.prototype.push=function(X){var Y={data:X,next:null};if(this.length>0)this.tail.next=Y;else this.head=Y;this.tail=Y,++this.length},$.prototype.unshift=function(X){var Y={data:X,next:this.head};if(this.length===0)this.tail=Y;this.head=Y,++this.length},$.prototype.shift=function(){if(this.length===0)return;var X=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,X},$.prototype.clear=function(){this.head=this.tail=null,this.length=0},$.prototype.join=function(X){if(this.length===0)return"";var Y=this.head,J=""+Y.data;while(Y=Y.next)J+=X+Y.data;return J},$.prototype.concat=function(X){if(this.length===0)return cj.alloc(0);var Y=cj.allocUnsafe(X>>>0),J=this.head,U=0;while(J)YM(J.data,Y,U),U+=J.data.length,J=J.next;return Y},$}();if(TQ&&TQ.inspect&&TQ.inspect.custom)_U.exports.prototype[TQ.inspect.custom]=function(){var $=TQ.inspect({length:this.length});return this.constructor.name+" "+$}});var gU=b((Vn,ij)=>{var cJ=ZQ();function UM($,Q){var X=this,Y=this._readableState&&this._readableState.destroyed,J=this._writableState&&this._writableState.destroyed;if(Y||J){if(Q)Q($);else if($){if(!this._writableState)cJ.nextTick(uJ,this,$);else if(!this._writableState.errorEmitted)this._writableState.errorEmitted=!0,cJ.nextTick(uJ,this,$)}return this}if(this._readableState)this._readableState.destroyed=!0;if(this._writableState)this._writableState.destroyed=!0;return this._destroy($||null,function(U){if(!Q&&U){if(!X._writableState)cJ.nextTick(uJ,X,U);else if(!X._writableState.errorEmitted)X._writableState.errorEmitted=!0,cJ.nextTick(uJ,X,U)}else if(Q)Q(U)}),this}function qM(){if(this._readableState)this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1;if(this._writableState)this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1}function uJ($,Q){$.emit("error",Q)}ij.exports={destroy:UM,undestroy:qM}});var lj=b((Bn,dj)=>{dj.exports=G6("util").deprecate});var mU=b((Dn,ej)=>{var O1=ZQ();ej.exports=n$;function nj($){var Q=this;this.next=null,this.entry=null,this.finish=function(){EM(Q,$)}}var GM=["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:O1.nextTick,A4;n$.WritableState=bQ;var rj=Object.create(D4());rj.inherits=O4();var zM={deprecate:lj()},oj=G6("stream"),dJ=SQ().Buffer,WM=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function HM($){return dJ.from($)}function jM($){return dJ.isBuffer($)||$ instanceof WM}var aj=gU();rj.inherits(n$,oj);function wM(){}function bQ($,Q){A4=A4||A1(),$=$||{};var X=Q instanceof A4;if(this.objectMode=!!$.objectMode,X)this.objectMode=this.objectMode||!!$.writableObjectMode;var{highWaterMark:Y,writableHighWaterMark:J}=$,U=this.objectMode?16:16384;if(Y||Y===0)this.highWaterMark=Y;else if(X&&(J||J===0))this.highWaterMark=J;else this.highWaterMark=U;this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var G=$.decodeStrings===!1;this.decodeStrings=!G,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(z){AM(Q,z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new nj(this)}bQ.prototype.getBuffer=function(){var Q=this.bufferedRequest,X=[];while(Q)X.push(Q),Q=Q.next;return X};(function(){try{Object.defineProperty(bQ.prototype,"buffer",{get:zM.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch($){}})();var iJ;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function")iJ=Function.prototype[Symbol.hasInstance],Object.defineProperty(n$,Symbol.hasInstance,{value:function($){if(iJ.call(this,$))return!0;if(this!==n$)return!1;return $&&$._writableState instanceof bQ}});else iJ=function($){return $ instanceof this};function n$($){if(A4=A4||A1(),!iJ.call(n$,this)&&!(this instanceof A4))return new n$($);if(this._writableState=new bQ($,this),this.writable=!0,$){if(typeof $.write==="function")this._write=$.write;if(typeof $.writev==="function")this._writev=$.writev;if(typeof $.destroy==="function")this._destroy=$.destroy;if(typeof $.final==="function")this._final=$.final}oj.call(this)}n$.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};function KM($,Q){var X=Error("write after end");$.emit("error",X),O1.nextTick(Q,X)}function NM($,Q,X,Y){var J=!0,U=!1;if(X===null)U=TypeError("May not write null values to stream");else if(typeof X!=="string"&&X!==void 0&&!Q.objectMode)U=TypeError("Invalid non-string/buffer chunk");if(U)$.emit("error",U),O1.nextTick(Y,U),J=!1;return J}n$.prototype.write=function($,Q,X){var Y=this._writableState,J=!1,U=!Y.objectMode&&jM($);if(U&&!dJ.isBuffer($))$=HM($);if(typeof Q==="function")X=Q,Q=null;if(U)Q="buffer";else if(!Q)Q=Y.defaultEncoding;if(typeof X!=="function")X=wM;if(Y.ended)KM(this,X);else if(U||NM(this,Y,$,X))Y.pendingcb++,J=BM(this,Y,U,$,Q,X);return J};n$.prototype.cork=function(){var $=this._writableState;$.corked++};n$.prototype.uncork=function(){var $=this._writableState;if($.corked){if($.corked--,!$.writing&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest)tj(this,$)}};n$.prototype.setDefaultEncoding=function(Q){if(typeof Q==="string")Q=Q.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Q+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+Q);return this._writableState.defaultEncoding=Q,this};function VM($,Q,X){if(!$.objectMode&&$.decodeStrings!==!1&&typeof Q==="string")Q=dJ.from(Q,X);return Q}Object.defineProperty(n$.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function BM($,Q,X,Y,J,U){if(!X){var G=VM(Q,Y,J);if(Y!==G)X=!0,J="buffer",Y=G}var z=Q.objectMode?1:Y.length;Q.length+=z;var H=Q.length<Q.highWaterMark;if(!H)Q.needDrain=!0;if(Q.writing||Q.corked){var W=Q.lastBufferedRequest;if(Q.lastBufferedRequest={chunk:Y,encoding:J,isBuf:X,callback:U,next:null},W)W.next=Q.lastBufferedRequest;else Q.bufferedRequest=Q.lastBufferedRequest;Q.bufferedRequestCount+=1}else hU($,Q,!1,z,Y,J,U);return H}function hU($,Q,X,Y,J,U,G){if(Q.writelen=Y,Q.writecb=G,Q.writing=!0,Q.sync=!0,X)$._writev(J,Q.onwrite);else $._write(J,U,Q.onwrite);Q.sync=!1}function DM($,Q,X,Y,J){if(--Q.pendingcb,X)O1.nextTick(J,Y),O1.nextTick(CQ,$,Q),$._writableState.errorEmitted=!0,$.emit("error",Y);else J(Y),$._writableState.errorEmitted=!0,$.emit("error",Y),CQ($,Q)}function OM($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}function AM($,Q){var X=$._writableState,Y=X.sync,J=X.writecb;if(OM(X),Q)DM($,X,Y,Q,J);else{var U=sj(X);if(!U&&!X.corked&&!X.bufferProcessing&&X.bufferedRequest)tj($,X);if(Y)GM(pj,$,X,U,J);else pj($,X,U,J)}}function pj($,Q,X,Y){if(!X)FM($,Q);Q.pendingcb--,Y(),CQ($,Q)}function FM($,Q){if(Q.length===0&&Q.needDrain)Q.needDrain=!1,$.emit("drain")}function tj($,Q){Q.bufferProcessing=!0;var X=Q.bufferedRequest;if($._writev&&X&&X.next){var Y=Q.bufferedRequestCount,J=Array(Y),U=Q.corkedRequestsFree;U.entry=X;var G=0,z=!0;while(X){if(J[G]=X,!X.isBuf)z=!1;X=X.next,G+=1}if(J.allBuffers=z,hU($,Q,!0,Q.length,J,"",U.finish),Q.pendingcb++,Q.lastBufferedRequest=null,U.next)Q.corkedRequestsFree=U.next,U.next=null;else Q.corkedRequestsFree=new nj(Q);Q.bufferedRequestCount=0}else{while(X){var{chunk:H,encoding:W,callback:j}=X,N=Q.objectMode?1:H.length;if(hU($,Q,!1,N,H,W,j),X=X.next,Q.bufferedRequestCount--,Q.writing)break}if(X===null)Q.lastBufferedRequest=null}Q.bufferedRequest=X,Q.bufferProcessing=!1}n$.prototype._write=function($,Q,X){X(Error("_write() is not implemented"))};n$.prototype._writev=null;n$.prototype.end=function($,Q,X){var Y=this._writableState;if(typeof $==="function")X=$,$=null,Q=null;else if(typeof Q==="function")X=Q,Q=null;if($!==null&&$!==void 0)this.write($,Q);if(Y.corked)Y.corked=1,this.uncork();if(!Y.ending)IM(this,Y,X)};function sj($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function LM($,Q){$._final(function(X){if(Q.pendingcb--,X)$.emit("error",X);Q.prefinished=!0,$.emit("prefinish"),CQ($,Q)})}function vM($,Q){if(!Q.prefinished&&!Q.finalCalled)if(typeof $._final==="function")Q.pendingcb++,Q.finalCalled=!0,O1.nextTick(LM,$,Q);else Q.prefinished=!0,$.emit("prefinish")}function CQ($,Q){var X=sj(Q);if(X){if(vM($,Q),Q.pendingcb===0)Q.finished=!0,$.emit("finish")}return X}function IM($,Q,X){if(Q.ending=!0,CQ($,Q),X)if(Q.finished)O1.nextTick(X);else $.once("finish",X);Q.ended=!0,$.writable=!1}function EM($,Q,X){var Y=$.entry;$.entry=null;while(Y){var J=Y.callback;Q.pendingcb--,J(X),Y=Y.next}Q.corkedRequestsFree.next=$}Object.defineProperty(n$.prototype,"destroyed",{get:function(){if(this._writableState===void 0)return!1;return this._writableState.destroyed},set:function($){if(!this._writableState)return;this._writableState.destroyed=$}});n$.prototype.destroy=aj.destroy;n$.prototype._undestroy=aj.undestroy;n$.prototype._destroy=function($,Q){this.end(),Q($)}});var A1=b((On,Jw)=>{var $w=ZQ(),MM=Object.keys||function($){var Q=[];for(var X in $)Q.push(X);return Q};Jw.exports=F0;var Qw=Object.create(D4());Qw.inherits=O4();var Xw=uU(),cU=mU();Qw.inherits(F0,Xw);{lJ=MM(cU.prototype);for(xQ=0;xQ<lJ.length;xQ++)if(kQ=lJ[xQ],!F0.prototype[kQ])F0.prototype[kQ]=cU.prototype[kQ]}var lJ,kQ,xQ;function F0($){if(!(this instanceof F0))return new F0($);if(Xw.call(this,$),cU.call(this,$),$&&$.readable===!1)this.readable=!1;if($&&$.writable===!1)this.writable=!1;if(this.allowHalfOpen=!0,$&&$.allowHalfOpen===!1)this.allowHalfOpen=!1;this.once("end",PM)}Object.defineProperty(F0.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function PM(){if(this.allowHalfOpen||this._writableState.ended)return;$w.nextTick(RM,this)}function RM($){$.end()}Object.defineProperty(F0.prototype,"destroyed",{get:function(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set:function($){if(this._readableState===void 0||this._writableState===void 0)return;this._readableState.destroyed=$,this._writableState.destroyed=$}});F0.prototype._destroy=function($,Q){this.push(null),this.end(),$w.nextTick(Q,$)}});var lU=b((cM)=>{var dU=SQ().Buffer,Yw=dU.isEncoding||function($){switch($=""+$,$&&$.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ZM($){if(!$)return"utf8";var Q;while(!0)switch($){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return $;default:if(Q)return;$=(""+$).toLowerCase(),Q=!0}}function SM($){var Q=ZM($);if(typeof Q!=="string"&&(dU.isEncoding===Yw||!Yw($)))throw Error("Unknown encoding: "+$);return Q||$}cM.StringDecoder=fQ;function fQ($){this.encoding=SM($);var Q;switch(this.encoding){case"utf16le":this.text=fM,this.end=yM,Q=4;break;case"utf8":this.fillLast=bM,Q=4;break;case"base64":this.text=_M,this.end=gM,Q=3;break;default:this.write=hM,this.end=mM;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=dU.allocUnsafe(Q)}fQ.prototype.write=function($){if($.length===0)return"";var Q,X;if(this.lastNeed){if(Q=this.fillLast($),Q===void 0)return"";X=this.lastNeed,this.lastNeed=0}else X=0;if(X<$.length)return Q?Q+this.text($,X):this.text($,X);return Q||""};fQ.prototype.end=kM;fQ.prototype.text=xM;fQ.prototype.fillLast=function($){if(this.lastNeed<=$.length)return $.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);$.copy(this.lastChar,this.lastTotal-this.lastNeed,0,$.length),this.lastNeed-=$.length};function iU($){if($<=127)return 0;else if($>>5===6)return 2;else if($>>4===14)return 3;else if($>>3===30)return 4;return $>>6===2?-1:-2}function TM($,Q,X){var Y=Q.length-1;if(Y<X)return 0;var J=iU(Q[Y]);if(J>=0){if(J>0)$.lastNeed=J-1;return J}if(--Y<X||J===-2)return 0;if(J=iU(Q[Y]),J>=0){if(J>0)$.lastNeed=J-2;return J}if(--Y<X||J===-2)return 0;if(J=iU(Q[Y]),J>=0){if(J>0)if(J===2)J=0;else $.lastNeed=J-3;return J}return 0}function CM($,Q,X){if((Q[0]&192)!==128)return $.lastNeed=0,"�";if($.lastNeed>1&&Q.length>1){if((Q[1]&192)!==128)return $.lastNeed=1,"�";if($.lastNeed>2&&Q.length>2){if((Q[2]&192)!==128)return $.lastNeed=2,"�"}}}function bM($){var Q=this.lastTotal-this.lastNeed,X=CM(this,$,Q);if(X!==void 0)return X;if(this.lastNeed<=$.length)return $.copy(this.lastChar,Q,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);$.copy(this.lastChar,Q,0,$.length),this.lastNeed-=$.length}function xM($,Q){var X=TM(this,$,Q);if(!this.lastNeed)return $.toString("utf8",Q);this.lastTotal=X;var Y=$.length-(X-this.lastNeed);return $.copy(this.lastChar,0,Y),$.toString("utf8",Q,Y)}function kM($){var Q=$&&$.length?this.write($):"";if(this.lastNeed)return Q+"�";return Q}function fM($,Q){if(($.length-Q)%2===0){var X=$.toString("utf16le",Q);if(X){var Y=X.charCodeAt(X.length-1);if(Y>=55296&&Y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=$[$.length-2],this.lastChar[1]=$[$.length-1],X.slice(0,-1)}return X}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=$[$.length-1],$.toString("utf16le",Q,$.length-1)}function yM($){var Q=$&&$.length?this.write($):"";if(this.lastNeed){var X=this.lastTotal-this.lastNeed;return Q+this.lastChar.toString("utf16le",0,X)}return Q}function _M($,Q){var X=($.length-Q)%3;if(X===0)return $.toString("base64",Q);if(this.lastNeed=3-X,this.lastTotal=3,X===1)this.lastChar[0]=$[$.length-1];else this.lastChar[0]=$[$.length-2],this.lastChar[1]=$[$.length-1];return $.toString("base64",Q,$.length-X)}function gM($){var Q=$&&$.length?this.write($):"";if(this.lastNeed)return Q+this.lastChar.toString("base64",0,3-this.lastNeed);return Q}function hM($){return $.toString(this.encoding)}function mM($){return $&&$.length?this.write($):""}});var uU=b((Ln,Bw)=>{var L4=ZQ();Bw.exports=b$;var iM=_j(),yQ;b$.ReadableState=jw;var Fn=G6("events").EventEmitter,zw=function($,Q){return $.listeners(Q).length},aU=G6("stream"),_Q=SQ().Buffer,dM=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function lM($){return _Q.from($)}function pM($){return _Q.isBuffer($)||$ instanceof dM}var Ww=Object.create(D4());Ww.inherits=O4();var pU=G6("util"),O$=void 0;if(pU&&pU.debuglog)O$=pU.debuglog("stream");else O$=function(){};var nM=uj(),Hw=gU(),F4;Ww.inherits(b$,aU);var nU=["error","close","destroy","pause","resume"];function rM($,Q,X){if(typeof $.prependListener==="function")return $.prependListener(Q,X);if(!$._events||!$._events[Q])$.on(Q,X);else if(iM($._events[Q]))$._events[Q].unshift(X);else $._events[Q]=[X,$._events[Q]]}function jw($,Q){yQ=yQ||A1(),$=$||{};var X=Q instanceof yQ;if(this.objectMode=!!$.objectMode,X)this.objectMode=this.objectMode||!!$.readableObjectMode;var{highWaterMark:Y,readableHighWaterMark:J}=$,U=this.objectMode?16:16384;if(Y||Y===0)this.highWaterMark=Y;else if(X&&(J||J===0))this.highWaterMark=J;else this.highWaterMark=U;if(this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new nM,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding){if(!F4)F4=lU().StringDecoder;this.decoder=new F4($.encoding),this.encoding=$.encoding}}function b$($){if(yQ=yQ||A1(),!(this instanceof b$))return new b$($);if(this._readableState=new jw($,this),this.readable=!0,$){if(typeof $.read==="function")this._read=$.read;if(typeof $.destroy==="function")this._destroy=$.destroy}aU.call(this)}Object.defineProperty(b$.prototype,"destroyed",{get:function(){if(this._readableState===void 0)return!1;return this._readableState.destroyed},set:function($){if(!this._readableState)return;this._readableState.destroyed=$}});b$.prototype.destroy=Hw.destroy;b$.prototype._undestroy=Hw.undestroy;b$.prototype._destroy=function($,Q){this.push(null),Q($)};b$.prototype.push=function($,Q){var X=this._readableState,Y;if(!X.objectMode){if(typeof $==="string"){if(Q=Q||X.defaultEncoding,Q!==X.encoding)$=_Q.from($,Q),Q="";Y=!0}}else Y=!0;return ww(this,$,Q,!1,Y)};b$.prototype.unshift=function($){return ww(this,$,null,!0,!1)};function ww($,Q,X,Y,J){var U=$._readableState;if(Q===null)U.reading=!1,sM($,U);else{var G;if(!J)G=oM(U,Q);if(G)$.emit("error",G);else if(U.objectMode||Q&&Q.length>0){if(typeof Q!=="string"&&!U.objectMode&&Object.getPrototypeOf(Q)!==_Q.prototype)Q=lM(Q);if(Y)if(U.endEmitted)$.emit("error",Error("stream.unshift() after end event"));else rU($,U,Q,!0);else if(U.ended)$.emit("error",Error("stream.push() after EOF"));else if(U.reading=!1,U.decoder&&!X)if(Q=U.decoder.write(Q),U.objectMode||Q.length!==0)rU($,U,Q,!1);else Kw($,U);else rU($,U,Q,!1)}else if(!Y)U.reading=!1}return aM(U)}function rU($,Q,X,Y){if(Q.flowing&&Q.length===0&&!Q.sync)$.emit("data",X),$.read(0);else{if(Q.length+=Q.objectMode?1:X.length,Y)Q.buffer.unshift(X);else Q.buffer.push(X);if(Q.needReadable)pJ($)}Kw($,Q)}function oM($,Q){var X;if(!pM(Q)&&typeof Q!=="string"&&Q!==void 0&&!$.objectMode)X=TypeError("Invalid non-string/buffer chunk");return X}function aM($){return!$.ended&&($.needReadable||$.length<$.highWaterMark||$.length===0)}b$.prototype.isPaused=function(){return this._readableState.flowing===!1};b$.prototype.setEncoding=function($){if(!F4)F4=lU().StringDecoder;return this._readableState.decoder=new F4($),this._readableState.encoding=$,this};var Uw=8388608;function tM($){if($>=Uw)$=Uw;else $--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++;return $}function qw($,Q){if($<=0||Q.length===0&&Q.ended)return 0;if(Q.objectMode)return 1;if($!==$)if(Q.flowing&&Q.length)return Q.buffer.head.data.length;else return Q.length;if($>Q.highWaterMark)Q.highWaterMark=tM($);if($<=Q.length)return $;if(!Q.ended)return Q.needReadable=!0,0;return Q.length}b$.prototype.read=function($){O$("read",$),$=parseInt($,10);var Q=this._readableState,X=$;if($!==0)Q.emittedReadable=!1;if($===0&&Q.needReadable&&(Q.length>=Q.highWaterMark||Q.ended)){if(O$("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended)oU(this);else pJ(this);return null}if($=qw($,Q),$===0&&Q.ended){if(Q.length===0)oU(this);return null}var Y=Q.needReadable;if(O$("need readable",Y),Q.length===0||Q.length-$<Q.highWaterMark)Y=!0,O$("length less than watermark",Y);if(Q.ended||Q.reading)Y=!1,O$("reading or ended",Y);else if(Y){if(O$("do read"),Q.reading=!0,Q.sync=!0,Q.length===0)Q.needReadable=!0;if(this._read(Q.highWaterMark),Q.sync=!1,!Q.reading)$=qw(X,Q)}var J;if($>0)J=Nw($,Q);else J=null;if(J===null)Q.needReadable=!0,$=0;else Q.length-=$;if(Q.length===0){if(!Q.ended)Q.needReadable=!0;if(X!==$&&Q.ended)oU(this)}if(J!==null)this.emit("data",J);return J};function sM($,Q){if(Q.ended)return;if(Q.decoder){var X=Q.decoder.end();if(X&&X.length)Q.buffer.push(X),Q.length+=Q.objectMode?1:X.length}Q.ended=!0,pJ($)}function pJ($){var Q=$._readableState;if(Q.needReadable=!1,!Q.emittedReadable)if(O$("emitReadable",Q.flowing),Q.emittedReadable=!0,Q.sync)L4.nextTick(Gw,$);else Gw($)}function Gw($){O$("emit readable"),$.emit("readable"),tU($)}function Kw($,Q){if(!Q.readingMore)Q.readingMore=!0,L4.nextTick(eM,$,Q)}function eM($,Q){var X=Q.length;while(!Q.reading&&!Q.flowing&&!Q.ended&&Q.length<Q.highWaterMark)if(O$("maybeReadMore read 0"),$.read(0),X===Q.length)break;else X=Q.length;Q.readingMore=!1}b$.prototype._read=function($){this.emit("error",Error("_read() is not implemented"))};b$.prototype.pipe=function($,Q){var X=this,Y=this._readableState;switch(Y.pipesCount){case 0:Y.pipes=$;break;case 1:Y.pipes=[Y.pipes,$];break;default:Y.pipes.push($);break}Y.pipesCount+=1,O$("pipe count=%d opts=%j",Y.pipesCount,Q);var J=(!Q||Q.end!==!1)&&$!==process.stdout&&$!==process.stderr,U=J?z:F;if(Y.endEmitted)L4.nextTick(U);else X.once("end",U);$.on("unpipe",G);function G(V,O){if(O$("onunpipe"),V===X){if(O&&O.hasUnpiped===!1)O.hasUnpiped=!0,j()}}function z(){O$("onend"),$.end()}var H=$P(X);$.on("drain",H);var W=!1;function j(){if(O$("cleanup"),$.removeListener("close",B),$.removeListener("finish",D),$.removeListener("drain",H),$.removeListener("error",w),$.removeListener("unpipe",G),X.removeListener("end",z),X.removeListener("end",F),X.removeListener("data",K),W=!0,Y.awaitDrain&&(!$._writableState||$._writableState.needDrain))H()}var N=!1;X.on("data",K);function K(V){O$("ondata"),N=!1;var O=$.write(V);if(O===!1&&!N){if((Y.pipesCount===1&&Y.pipes===$||Y.pipesCount>1&&Vw(Y.pipes,$)!==-1)&&!W)O$("false write response, pause",Y.awaitDrain),Y.awaitDrain++,N=!0;X.pause()}}function w(V){if(O$("onerror",V),F(),$.removeListener("error",w),zw($,"error")===0)$.emit("error",V)}rM($,"error",w);function B(){$.removeListener("finish",D),F()}$.once("close",B);function D(){O$("onfinish"),$.removeListener("close",B),F()}$.once("finish",D);function F(){O$("unpipe"),X.unpipe($)}if($.emit("pipe",X),!Y.flowing)O$("pipe resume"),X.resume();return $};function $P($){return function(){var Q=$._readableState;if(O$("pipeOnDrain",Q.awaitDrain),Q.awaitDrain)Q.awaitDrain--;if(Q.awaitDrain===0&&zw($,"data"))Q.flowing=!0,tU($)}}b$.prototype.unpipe=function($){var Q=this._readableState,X={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1){if($&&$!==Q.pipes)return this;if(!$)$=Q.pipes;if(Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,$)$.emit("unpipe",this,X);return this}if(!$){var{pipes:Y,pipesCount:J}=Q;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var U=0;U<J;U++)Y[U].emit("unpipe",this,{hasUnpiped:!1});return this}var G=Vw(Q.pipes,$);if(G===-1)return this;if(Q.pipes.splice(G,1),Q.pipesCount-=1,Q.pipesCount===1)Q.pipes=Q.pipes[0];return $.emit("unpipe",this,X),this};b$.prototype.on=function($,Q){var X=aU.prototype.on.call(this,$,Q);if($==="data"){if(this._readableState.flowing!==!1)this.resume()}else if($==="readable"){var Y=this._readableState;if(!Y.endEmitted&&!Y.readableListening){if(Y.readableListening=Y.needReadable=!0,Y.emittedReadable=!1,!Y.reading)L4.nextTick(QP,this);else if(Y.length)pJ(this)}}return X};b$.prototype.addListener=b$.prototype.on;function QP($){O$("readable nexttick read 0"),$.read(0)}b$.prototype.resume=function(){var $=this._readableState;if(!$.flowing)O$("resume"),$.flowing=!0,XP(this,$);return this};function XP($,Q){if(!Q.resumeScheduled)Q.resumeScheduled=!0,L4.nextTick(JP,$,Q)}function JP($,Q){if(!Q.reading)O$("resume read 0"),$.read(0);if(Q.resumeScheduled=!1,Q.awaitDrain=0,$.emit("resume"),tU($),Q.flowing&&!Q.reading)$.read(0)}b$.prototype.pause=function(){if(O$("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)O$("pause"),this._readableState.flowing=!1,this.emit("pause");return this};function tU($){var Q=$._readableState;O$("flow",Q.flowing);while(Q.flowing&&$.read()!==null);}b$.prototype.wrap=function($){var Q=this,X=this._readableState,Y=!1;$.on("end",function(){if(O$("wrapped end"),X.decoder&&!X.ended){var G=X.decoder.end();if(G&&G.length)Q.push(G)}Q.push(null)}),$.on("data",function(G){if(O$("wrapped data"),X.decoder)G=X.decoder.write(G);if(X.objectMode&&(G===null||G===void 0))return;else if(!X.objectMode&&(!G||!G.length))return;var z=Q.push(G);if(!z)Y=!0,$.pause()});for(var J in $)if(this[J]===void 0&&typeof $[J]==="function")this[J]=function(G){return function(){return $[G].apply($,arguments)}}(J);for(var U=0;U<nU.length;U++)$.on(nU[U],this.emit.bind(this,nU[U]));return this._read=function(G){if(O$("wrapped _read",G),Y)Y=!1,$.resume()},this};Object.defineProperty(b$.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});b$._fromList=Nw;function Nw($,Q){if(Q.length===0)return null;var X;if(Q.objectMode)X=Q.buffer.shift();else if(!$||$>=Q.length){if(Q.decoder)X=Q.buffer.join("");else if(Q.buffer.length===1)X=Q.buffer.head.data;else X=Q.buffer.concat(Q.length);Q.buffer.clear()}else X=YP($,Q.buffer,Q.decoder);return X}function YP($,Q,X){var Y;if($<Q.head.data.length)Y=Q.head.data.slice(0,$),Q.head.data=Q.head.data.slice($);else if($===Q.head.data.length)Y=Q.shift();else Y=X?UP($,Q):qP($,Q);return Y}function UP($,Q){var X=Q.head,Y=1,J=X.data;$-=J.length;while(X=X.next){var U=X.data,G=$>U.length?U.length:$;if(G===U.length)J+=U;else J+=U.slice(0,$);if($-=G,$===0){if(G===U.length)if(++Y,X.next)Q.head=X.next;else Q.head=Q.tail=null;else Q.head=X,X.data=U.slice(G);break}++Y}return Q.length-=Y,J}function qP($,Q){var X=_Q.allocUnsafe($),Y=Q.head,J=1;Y.data.copy(X),$-=Y.data.length;while(Y=Y.next){var U=Y.data,G=$>U.length?U.length:$;if(U.copy(X,X.length-$,0,G),$-=G,$===0){if(G===U.length)if(++J,Y.next)Q.head=Y.next;else Q.head=Q.tail=null;else Q.head=Y,Y.data=U.slice(G);break}++J}return Q.length-=J,X}function oU($){var Q=$._readableState;if(Q.length>0)throw Error('"endReadable()" called on non-empty stream');if(!Q.endEmitted)Q.ended=!0,L4.nextTick(GP,Q,$)}function GP($,Q){if(!$.endEmitted&&$.length===0)$.endEmitted=!0,Q.readable=!1,Q.emit("end")}function Vw($,Q){for(var X=0,Y=$.length;X<Y;X++)if($[X]===Q)return X;return-1}});var sU=b((vn,Aw)=>{Aw.exports=L0;var nJ=A1(),Ow=Object.create(D4());Ow.inherits=O4();Ow.inherits(L0,nJ);function zP($,Q){var X=this._transformState;X.transforming=!1;var Y=X.writecb;if(!Y)return this.emit("error",Error("write callback called multiple times"));if(X.writechunk=null,X.writecb=null,Q!=null)this.push(Q);Y($);var J=this._readableState;if(J.reading=!1,J.needReadable||J.length<J.highWaterMark)this._read(J.highWaterMark)}function L0($){if(!(this instanceof L0))return new L0($);if(nJ.call(this,$),this._transformState={afterTransform:zP.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,$){if(typeof $.transform==="function")this._transform=$.transform;if(typeof $.flush==="function")this._flush=$.flush}this.on("prefinish",WP)}function WP(){var $=this;if(typeof this._flush==="function")this._flush(function(Q,X){Dw($,Q,X)});else Dw(this,null,null)}L0.prototype.push=function($,Q){return this._transformState.needTransform=!1,nJ.prototype.push.call(this,$,Q)};L0.prototype._transform=function($,Q,X){throw Error("_transform() is not implemented")};L0.prototype._write=function($,Q,X){var Y=this._transformState;if(Y.writecb=X,Y.writechunk=$,Y.writeencoding=Q,!Y.transforming){var J=this._readableState;if(Y.needTransform||J.needReadable||J.length<J.highWaterMark)this._read(J.highWaterMark)}};L0.prototype._read=function($){var Q=this._transformState;if(Q.writechunk!==null&&Q.writecb&&!Q.transforming)Q.transforming=!0,this._transform(Q.writechunk,Q.writeencoding,Q.afterTransform);else Q.needTransform=!0};L0.prototype._destroy=function($,Q){var X=this;nJ.prototype._destroy.call(this,$,function(Y){Q(Y),X.emit("close")})};function Dw($,Q,X){if(Q)return $.emit("error",Q);if(X!=null)$.push(X);if($._writableState.length)throw Error("Calling transform done when ws.length != 0");if($._transformState.transforming)throw Error("Calling transform done when still transforming");return $.push(null)}});var Iw=b((In,vw)=>{vw.exports=gQ;var Fw=sU(),Lw=Object.create(D4());Lw.inherits=O4();Lw.inherits(gQ,Fw);function gQ($){if(!(this instanceof gQ))return new gQ($);Fw.call(this,$)}gQ.prototype._transform=function($,Q,X){X(null,$)}});var eU=b((Y6,rJ)=>{var $0=G6("stream");if(process.env.READABLE_STREAM==="disable"&&$0)rJ.exports=$0,Y6=rJ.exports=$0.Readable,Y6.Readable=$0.Readable,Y6.Writable=$0.Writable,Y6.Duplex=$0.Duplex,Y6.Transform=$0.Transform,Y6.PassThrough=$0.PassThrough,Y6.Stream=$0;else Y6=rJ.exports=uU(),Y6.Stream=$0||Y6,Y6.Readable=Y6,Y6.Writable=mU(),Y6.Duplex=A1(),Y6.Transform=sU(),Y6.PassThrough=Iw()});var v0=b((jP)=>{jP.base64=!0;jP.array=!0;jP.string=!0;jP.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u";jP.nodebuffer=typeof Buffer<"u";jP.uint8array=typeof Uint8Array<"u";if(typeof ArrayBuffer>"u")jP.blob=!1;else{oJ=new ArrayBuffer(0);try{jP.blob=new Blob([oJ],{type:"application/zip"}).size===0}catch($){try{Qq=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,aJ=new Qq,aJ.append(oJ),jP.blob=aJ.getBlob("application/zip").size===0}catch(Q){jP.blob=!1}}}var oJ,Qq,aJ;try{jP.nodestream=!!eU().Readable}catch($){jP.nodestream=!1}});var Xq=b((FP)=>{var OP=m$(),AP=v0(),Q0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";FP.encode=function($){var Q=[],X,Y,J,U,G,z,H,W=0,j=$.length,N=j,K=OP.getTypeOf($)!=="string";while(W<$.length){if(N=j-W,!K)X=$.charCodeAt(W++),Y=W<j?$.charCodeAt(W++):0,J=W<j?$.charCodeAt(W++):0;else X=$[W++],Y=W<j?$[W++]:0,J=W<j?$[W++]:0;U=X>>2,G=(X&3)<<4|Y>>4,z=N>1?(Y&15)<<2|J>>6:64,H=N>2?J&63:64,Q.push(Q0.charAt(U)+Q0.charAt(G)+Q0.charAt(z)+Q0.charAt(H))}return Q.join("")};FP.decode=function($){var Q,X,Y,J,U,G,z,H=0,W=0,j="data:";if($.substr(0,j.length)===j)throw Error("Invalid base64 input, it looks like a data url.");$=$.replace(/[^A-Za-z0-9+/=]/g,"");var N=$.length*3/4;if($.charAt($.length-1)===Q0.charAt(64))N--;if($.charAt($.length-2)===Q0.charAt(64))N--;if(N%1!==0)throw Error("Invalid base64 input, bad content length.");var K;if(AP.uint8array)K=new Uint8Array(N|0);else K=Array(N|0);while(H<$.length){if(J=Q0.indexOf($.charAt(H++)),U=Q0.indexOf($.charAt(H++)),G=Q0.indexOf($.charAt(H++)),z=Q0.indexOf($.charAt(H++)),Q=J<<2|U>>4,X=(U&15)<<4|G>>2,Y=(G&3)<<6|z,K[W++]=Q,G!==64)K[W++]=X;if(z!==64)K[W++]=Y}return K}});var hQ=b((Pn,Ew)=>{Ew.exports={isNode:typeof Buffer<"u",newBufferFrom:function($,Q){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from($,Q);else{if(typeof $==="number")throw Error('The "data" argument must not be a number');return new Buffer($,Q)}},allocBuffer:function($){if(Buffer.alloc)return Buffer.alloc($);else{var Q=new Buffer($);return Q.fill(0),Q}},isBuffer:function($){return Buffer.isBuffer($)},isStream:function($){return $&&typeof $.on==="function"&&typeof $.pause==="function"&&typeof $.resume==="function"}}});var Rw=b((Zn,Pw)=>{var Rn=global.MutationObserver||global.WebKitMutationObserver,Mw;Mw=function(){process.nextTick(RP)};var IP,EP,MP,PP,Jq,mQ=[];function RP(){Jq=!0;var $,Q,X=mQ.length;while(X){Q=mQ,mQ=[],$=-1;while(++$<X)Q[$]();X=mQ.length}Jq=!1}Pw.exports=ZP;function ZP($){if(mQ.push($)===1&&!Jq)Mw()}});var kw=b((Sn,xw)=>{var Zw=Rw();function I4(){}var W6={},Sw=["REJECTED"],Yq=["FULFILLED"],Tw=["PENDING"];v4=["UNHANDLED"];var v4;xw.exports=a0;function a0($){if(typeof $!=="function")throw TypeError("resolver must be a function");if(this.state=Tw,this.queue=[],this.outcome=void 0,this.handled=v4,$!==I4)Cw(this,$)}a0.prototype.finally=function($){if(typeof $!=="function")return this;var Q=this.constructor;return this.then(X,Y);function X(J){function U(){return J}return Q.resolve($()).then(U)}function Y(J){function U(){throw J}return Q.resolve($()).then(U)}};a0.prototype.catch=function($){return this.then(null,$)};a0.prototype.then=function($,Q){if(typeof $!=="function"&&this.state===Yq||typeof Q!=="function"&&this.state===Sw)return this;var X=new this.constructor(I4);if(this.handled===v4)this.handled=null;if(this.state!==Tw){var Y=this.state===Yq?$:Q;Uq(X,Y,this.outcome)}else this.queue.push(new cQ(X,$,Q));return X};function cQ($,Q,X){if(this.promise=$,typeof Q==="function")this.onFulfilled=Q,this.callFulfilled=this.otherCallFulfilled;if(typeof X==="function")this.onRejected=X,this.callRejected=this.otherCallRejected}cQ.prototype.callFulfilled=function($){W6.resolve(this.promise,$)};cQ.prototype.otherCallFulfilled=function($){Uq(this.promise,this.onFulfilled,$)};cQ.prototype.callRejected=function($){W6.reject(this.promise,$)};cQ.prototype.otherCallRejected=function($){Uq(this.promise,this.onRejected,$)};function Uq($,Q,X){Zw(function(){var Y;try{Y=Q(X)}catch(J){return W6.reject($,J)}if(Y===$)W6.reject($,TypeError("Cannot resolve promise with itself"));else W6.resolve($,Y)})}W6.resolve=function($,Q){var X=bw(SP,Q);if(X.status==="error")return W6.reject($,X.value);var Y=X.value;if(Y)Cw($,Y);else{$.state=Yq,$.outcome=Q;var J=-1,U=$.queue.length;while(++J<U)$.queue[J].callFulfilled(Q)}return $};W6.reject=function($,Q){if($.state=Sw,$.outcome=Q,$.handled===v4)Zw(function(){if($.handled===v4)process.emit("unhandledRejection",Q,$)});var X=-1,Y=$.queue.length;while(++X<Y)$.queue[X].callRejected(Q);return $};function SP($){var Q=$&&$.then;if($&&(typeof $==="object"||typeof $==="function")&&typeof Q==="function")return function(){Q.apply($,arguments)}}function Cw($,Q){var X=!1;function Y(z){if(X)return;X=!0,W6.reject($,z)}function J(z){if(X)return;X=!0,W6.resolve($,z)}function U(){Q(J,Y)}var G=bw(U);if(G.status==="error")Y(G.value)}function bw($,Q){var X={};try{X.value=$(Q),X.status="success"}catch(Y){X.status="error",X.value=Y}return X}a0.resolve=TP;function TP($){if($ instanceof this)return $;return W6.resolve(new this(I4),$)}a0.reject=CP;function CP($){var Q=new this(I4);return W6.reject(Q,$)}a0.all=bP;function bP($){var Q=this;if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(TypeError("must be an array"));var X=$.length,Y=!1;if(!X)return this.resolve([]);var J=Array(X),U=0,G=-1,z=new this(I4);while(++G<X)H($[G],G);return z;function H(W,j){Q.resolve(W).then(N,function(K){if(!Y)Y=!0,W6.reject(z,K)});function N(K){if(J[j]=K,++U===X&&!Y)Y=!0,W6.resolve(z,J)}}}a0.race=xP;function xP($){var Q=this;if(Object.prototype.toString.call($)!=="[object Array]")return this.reject(TypeError("must be an array"));var X=$.length,Y=!1;if(!X)return this.resolve([]);var J=-1,U=new this(I4);while(++J<X)G($[J]);return U;function G(z){Q.resolve(z).then(function(H){if(!Y)Y=!0,W6.resolve(U,H)},function(H){if(!Y)Y=!0,W6.reject(U,H)})}}});var E4=b((Tn,fw)=>{var qq=null;if(typeof Promise<"u")qq=Promise;else qq=kw();fw.exports={Promise:qq}});var _w=b((yw)=>{(function($,Q){if($.setImmediate)return;var X=1,Y={},J=!1,U=$.document,G;function z(O){if(typeof O!=="function")O=Function(""+O);var A=Array(arguments.length-1);for(var L=0;L<A.length;L++)A[L]=arguments[L+1];var I={callback:O,args:A};return Y[X]=I,G(X),X++}function H(O){delete Y[O]}function W(O){var{callback:A,args:L}=O;switch(L.length){case 0:A();break;case 1:A(L[0]);break;case 2:A(L[0],L[1]);break;case 3:A(L[0],L[1],L[2]);break;default:A.apply(Q,L);break}}function j(O){if(J)setTimeout(j,0,O);else{var A=Y[O];if(A){J=!0;try{W(A)}finally{H(O),J=!1}}}}function N(){G=function(O){process.nextTick(function(){j(O)})}}function K(){if($.postMessage&&!$.importScripts){var O=!0,A=$.onmessage;return $.onmessage=function(){O=!1},$.postMessage("","*"),$.onmessage=A,O}}function w(){var O="setImmediate$"+Math.random()+"$",A=function(L){if(L.source===$&&typeof L.data==="string"&&L.data.indexOf(O)===0)j(+L.data.slice(O.length))};if($.addEventListener)$.addEventListener("message",A,!1);else $.attachEvent("onmessage",A);G=function(L){$.postMessage(O+L,"*")}}function B(){var O=new MessageChannel;O.port1.onmessage=function(A){var L=A.data;j(L)},G=function(A){O.port2.postMessage(A)}}function D(){var O=U.documentElement;G=function(A){var L=U.createElement("script");L.onreadystatechange=function(){j(A),L.onreadystatechange=null,O.removeChild(L),L=null},O.appendChild(L)}}function F(){G=function(O){setTimeout(j,0,O)}}var V=Object.getPrototypeOf&&Object.getPrototypeOf($);if(V=V&&V.setTimeout?V:$,{}.toString.call($.process)==="[object process]")N();else if(K())w();else if($.MessageChannel)B();else if(U&&"onreadystatechange"in U.createElement("script"))D();else F();V.setImmediate=z,V.clearImmediate=H})(typeof self>"u"?typeof global>"u"?yw:global:self)});var m$=b((yP)=>{var t0=v0(),kP=Xq(),M4=hQ(),Gq=E4();_w();function fP($){var Q=null;if(t0.uint8array)Q=new Uint8Array($.length);else Q=Array($.length);return sJ($,Q)}yP.newBlob=function($,Q){yP.checkSupport("blob");try{return new Blob([$],{type:Q})}catch(J){try{var X=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,Y=new X;return Y.append($),Y.getBlob(Q)}catch(U){throw Error("Bug : can't construct the Blob.")}}};function uQ($){return $}function sJ($,Q){for(var X=0;X<$.length;++X)Q[X]=$.charCodeAt(X)&255;return Q}var tJ={stringifyByChunk:function($,Q,X){var Y=[],J=0,U=$.length;if(U<=X)return String.fromCharCode.apply(null,$);while(J<U){if(Q==="array"||Q==="nodebuffer")Y.push(String.fromCharCode.apply(null,$.slice(J,Math.min(J+X,U))));else Y.push(String.fromCharCode.apply(null,$.subarray(J,Math.min(J+X,U))));J+=X}return Y.join("")},stringifyByChar:function($){var Q="";for(var X=0;X<$.length;X++)Q+=String.fromCharCode($[X]);return Q},applyCanBeUsed:{uint8array:function(){try{return t0.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch($){return!1}}(),nodebuffer:function(){try{return t0.nodebuffer&&String.fromCharCode.apply(null,M4.allocBuffer(1)).length===1}catch($){return!1}}()}};function iQ($){var Q=65536,X=yP.getTypeOf($),Y=!0;if(X==="uint8array")Y=tJ.applyCanBeUsed.uint8array;else if(X==="nodebuffer")Y=tJ.applyCanBeUsed.nodebuffer;if(Y)while(Q>1)try{return tJ.stringifyByChunk($,X,Q)}catch(J){Q=Math.floor(Q/2)}return tJ.stringifyByChar($)}yP.applyFromCharCode=iQ;function eJ($,Q){for(var X=0;X<$.length;X++)Q[X]=$[X];return Q}var s0={};s0.string={string:uQ,array:function($){return sJ($,Array($.length))},arraybuffer:function($){return s0.string.uint8array($).buffer},uint8array:function($){return sJ($,new Uint8Array($.length))},nodebuffer:function($){return sJ($,M4.allocBuffer($.length))}};s0.array={string:iQ,array:uQ,arraybuffer:function($){return new Uint8Array($).buffer},uint8array:function($){return new Uint8Array($)},nodebuffer:function($){return M4.newBufferFrom($)}};s0.arraybuffer={string:function($){return iQ(new Uint8Array($))},array:function($){return eJ(new Uint8Array($),Array($.byteLength))},arraybuffer:uQ,uint8array:function($){return new Uint8Array($)},nodebuffer:function($){return M4.newBufferFrom(new Uint8Array($))}};s0.uint8array={string:iQ,array:function($){return eJ($,Array($.length))},arraybuffer:function($){return $.buffer},uint8array:uQ,nodebuffer:function($){return M4.newBufferFrom($)}};s0.nodebuffer={string:iQ,array:function($){return eJ($,Array($.length))},arraybuffer:function($){return s0.nodebuffer.uint8array($).buffer},uint8array:function($){return eJ($,new Uint8Array($.length))},nodebuffer:uQ};yP.transformTo=function($,Q){if(!Q)Q="";if(!$)return Q;yP.checkSupport($);var X=yP.getTypeOf(Q),Y=s0[X][$](Q);return Y};yP.resolve=function($){var Q=$.split("/"),X=[];for(var Y=0;Y<Q.length;Y++){var J=Q[Y];if(J==="."||J===""&&Y!==0&&Y!==Q.length-1)continue;else if(J==="..")X.pop();else X.push(J)}return X.join("/")};yP.getTypeOf=function($){if(typeof $==="string")return"string";if(Object.prototype.toString.call($)==="[object Array]")return"array";if(t0.nodebuffer&&M4.isBuffer($))return"nodebuffer";if(t0.uint8array&&$ instanceof Uint8Array)return"uint8array";if(t0.arraybuffer&&$ instanceof ArrayBuffer)return"arraybuffer"};yP.checkSupport=function($){var Q=t0[$.toLowerCase()];if(!Q)throw Error($+" is not supported by this platform")};yP.MAX_VALUE_16BITS=65535;yP.MAX_VALUE_32BITS=-1;yP.pretty=function($){var Q="",X,Y;for(Y=0;Y<($||"").length;Y++)X=$.charCodeAt(Y),Q+="\\x"+(X<16?"0":"")+X.toString(16).toUpperCase();return Q};yP.delay=function($,Q,X){setImmediate(function(){$.apply(X||null,Q||[])})};yP.inherits=function($,Q){var X=function(){};X.prototype=Q.prototype,$.prototype=new X};yP.extend=function(){var $={},Q,X;for(Q=0;Q<arguments.length;Q++)for(X in arguments[Q])if(Object.prototype.hasOwnProperty.call(arguments[Q],X)&&typeof $[X]>"u")$[X]=arguments[Q][X];return $};yP.prepareContent=function($,Q,X,Y,J){var U=Gq.Promise.resolve(Q).then(function(G){var z=t0.blob&&(G instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(G))!==-1);if(z&&typeof FileReader<"u")return new Gq.Promise(function(H,W){var j=new FileReader;j.onload=function(N){H(N.target.result)},j.onerror=function(N){W(N.target.error)},j.readAsArrayBuffer(G)});else return G});return U.then(function(G){var z=yP.getTypeOf(G);if(!z)return Gq.Promise.reject(Error("Can't read the data of '"+$+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));if(z==="arraybuffer")G=yP.transformTo("uint8array",G);else if(z==="string"){if(J)G=kP.decode(G);else if(X){if(Y!==!0)G=fP(G)}}return G})}});var I6=b((xn,cw)=>{function mw($){this.name=$||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}mw.prototype={push:function($){this.emit("data",$)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch($){this.emit("error",$)}return!0},error:function($){if(this.isFinished)return!1;if(this.isPaused)this.generatedError=$;else{if(this.isFinished=!0,this.emit("error",$),this.previous)this.previous.error($);this.cleanUp()}return!0},on:function($,Q){return this._listeners[$].push(Q),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function($,Q){if(this._listeners[$])for(var X=0;X<this._listeners[$].length;X++)this._listeners[$][X].call(this,Q)},pipe:function($){return $.registerPrevious(this)},registerPrevious:function($){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.streamInfo=$.streamInfo,this.mergeStreamInfo(),this.previous=$;var Q=this;return $.on("data",function(X){Q.processChunk(X)}),$.on("end",function(){Q.end()}),$.on("error",function(X){Q.error(X)}),this},pause:function(){if(this.isPaused||this.isFinished)return!1;if(this.isPaused=!0,this.previous)this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var $=!1;if(this.generatedError)this.error(this.generatedError),$=!0;if(this.previous)this.previous.resume();return!$},flush:function(){},processChunk:function($){this.push($)},withStreamInfo:function($,Q){return this.extraStreamInfo[$]=Q,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var $ in this.extraStreamInfo){if(!Object.prototype.hasOwnProperty.call(this.extraStreamInfo,$))continue;this.streamInfo[$]=this.extraStreamInfo[$]}},lock:function(){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");if(this.isLocked=!0,this.previous)this.previous.lock()},toString:function(){var $="Worker "+this.name;if(this.previous)return this.previous+" -> "+$;else return $}};cw.exports=mw});var R4=b((tP)=>{var P4=m$(),F1=v0(),nP=hQ(),$Y=I6(),dQ=Array(256);for(X0=0;X0<256;X0++)dQ[X0]=X0>=252?6:X0>=248?5:X0>=240?4:X0>=224?3:X0>=192?2:1;var X0;dQ[254]=dQ[254]=1;var rP=function($){var Q,X,Y,J,U,G=$.length,z=0;for(J=0;J<G;J++){if(X=$.charCodeAt(J),(X&64512)===55296&&J+1<G){if(Y=$.charCodeAt(J+1),(Y&64512)===56320)X=65536+(X-55296<<10)+(Y-56320),J++}z+=X<128?1:X<2048?2:X<65536?3:4}if(F1.uint8array)Q=new Uint8Array(z);else Q=Array(z);for(U=0,J=0;U<z;J++){if(X=$.charCodeAt(J),(X&64512)===55296&&J+1<G){if(Y=$.charCodeAt(J+1),(Y&64512)===56320)X=65536+(X-55296<<10)+(Y-56320),J++}if(X<128)Q[U++]=X;else if(X<2048)Q[U++]=192|X>>>6,Q[U++]=128|X&63;else if(X<65536)Q[U++]=224|X>>>12,Q[U++]=128|X>>>6&63,Q[U++]=128|X&63;else Q[U++]=240|X>>>18,Q[U++]=128|X>>>12&63,Q[U++]=128|X>>>6&63,Q[U++]=128|X&63}return Q},oP=function($,Q){var X;if(Q=Q||$.length,Q>$.length)Q=$.length;X=Q-1;while(X>=0&&($[X]&192)===128)X--;if(X<0)return Q;if(X===0)return Q;return X+dQ[$[X]]>Q?X:Q},aP=function($){var Q,X,Y,J,U=$.length,G=Array(U*2);for(X=0,Q=0;Q<U;){if(Y=$[Q++],Y<128){G[X++]=Y;continue}if(J=dQ[Y],J>4){G[X++]=65533,Q+=J-1;continue}Y&=J===2?31:J===3?15:7;while(J>1&&Q<U)Y=Y<<6|$[Q++]&63,J--;if(J>1){G[X++]=65533;continue}if(Y<65536)G[X++]=Y;else Y-=65536,G[X++]=55296|Y>>10&1023,G[X++]=56320|Y&1023}if(G.length!==X)if(G.subarray)G=G.subarray(0,X);else G.length=X;return P4.applyFromCharCode(G)};tP.utf8encode=function(Q){if(F1.nodebuffer)return nP.newBufferFrom(Q,"utf-8");return rP(Q)};tP.utf8decode=function(Q){if(F1.nodebuffer)return P4.transformTo("nodebuffer",Q).toString("utf-8");return Q=P4.transformTo(F1.uint8array?"uint8array":"array",Q),aP(Q)};function QY(){$Y.call(this,"utf-8 decode"),this.leftOver=null}P4.inherits(QY,$Y);QY.prototype.processChunk=function($){var Q=P4.transformTo(F1.uint8array?"uint8array":"array",$.data);if(this.leftOver&&this.leftOver.length){if(F1.uint8array){var X=Q;Q=new Uint8Array(X.length+this.leftOver.length),Q.set(this.leftOver,0),Q.set(X,this.leftOver.length)}else Q=this.leftOver.concat(Q);this.leftOver=null}var Y=oP(Q),J=Q;if(Y!==Q.length)if(F1.uint8array)J=Q.subarray(0,Y),this.leftOver=Q.subarray(Y,Q.length);else J=Q.slice(0,Y),this.leftOver=Q.slice(Y,Q.length);this.push({data:tP.utf8decode(J),meta:$.meta})};QY.prototype.flush=function(){if(this.leftOver&&this.leftOver.length)this.push({data:tP.utf8decode(this.leftOver),meta:{}}),this.leftOver=null};tP.Utf8DecodeWorker=QY;function Wq(){$Y.call(this,"utf-8 encode")}P4.inherits(Wq,$Y);Wq.prototype.processChunk=function($){this.push({data:tP.utf8encode($.data),meta:$.meta})};tP.Utf8EncodeWorker=Wq});var pw=b((fn,lw)=>{var iw=I6(),dw=m$();function jq($){iw.call(this,"ConvertWorker to "+$),this.destType=$}dw.inherits(jq,iw);jq.prototype.processChunk=function($){this.push({data:dw.transformTo(this.destType,$.data),meta:$.meta})};lw.exports=jq});var ow=b((yn,rw)=>{var nw=eU().Readable,$R=m$();$R.inherits(wq,nw);function wq($,Q,X){nw.call(this,Q),this._helper=$;var Y=this;$.on("data",function(J,U){if(!Y.push(J))Y._helper.pause();if(X)X(U)}).on("error",function(J){Y.emit("error",J)}).on("end",function(){Y.push(null)})}wq.prototype._read=function(){this._helper.resume()};rw.exports=wq});var Kq=b((_n,sw)=>{var L1=m$(),QR=pw(),XR=I6(),JR=Xq(),YR=v0(),UR=E4(),aw=null;if(YR.nodestream)try{aw=ow()}catch($){}function qR($,Q,X){switch($){case"blob":return L1.newBlob(L1.transformTo("arraybuffer",Q),X);case"base64":return JR.encode(Q);default:return L1.transformTo($,Q)}}function GR($,Q){var X,Y=0,J=null,U=0;for(X=0;X<Q.length;X++)U+=Q[X].length;switch($){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":J=new Uint8Array(U);for(X=0;X<Q.length;X++)J.set(Q[X],Y),Y+=Q[X].length;return J;case"nodebuffer":return Buffer.concat(Q);default:throw Error("concat : unsupported type '"+$+"'")}}function zR($,Q){return new UR.Promise(function(X,Y){var J=[],U=$._internalType,G=$._outputType,z=$._mimeType;$.on("data",function(H,W){if(J.push(H),Q)Q(W)}).on("error",function(H){J=[],Y(H)}).on("end",function(){try{var H=qR(G,GR(U,J),z);X(H)}catch(W){Y(W)}J=[]}).resume()})}function tw($,Q,X){var Y=Q;switch(Q){case"blob":case"arraybuffer":Y="uint8array";break;case"base64":Y="string";break}try{this._internalType=Y,this._outputType=Q,this._mimeType=X,L1.checkSupport(Y),this._worker=$.pipe(new QR(Y)),$.lock()}catch(J){this._worker=new XR("error"),this._worker.error(J)}}tw.prototype={accumulate:function($){return zR(this,$)},on:function($,Q){var X=this;if($==="data")this._worker.on($,function(Y){Q.call(X,Y.data,Y.meta)});else this._worker.on($,function(){L1.delay(Q,arguments,X)});return this},resume:function(){return L1.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function($){if(L1.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw Error(this._outputType+" is not supported by this method");return new aw(this,{objectMode:this._outputType!=="nodebuffer"},$)}};sw.exports=tw});var Nq=b((WR)=>{WR.base64=!1;WR.binary=!1;WR.dir=!1;WR.createFolders=!0;WR.date=null;WR.compression=null;WR.compressionOptions=null;WR.comment=null;WR.unixPermissions=null;WR.dosPermissions=null});var Vq=b((hn,ew)=>{var XY=m$(),JY=I6(),FR=16384;function Z4($){JY.call(this,"DataWorker");var Q=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,$.then(function(X){if(Q.dataIsReady=!0,Q.data=X,Q.max=X&&X.length||0,Q.type=XY.getTypeOf(X),!Q.isPaused)Q._tickAndRepeat()},function(X){Q.error(X)})}XY.inherits(Z4,JY);Z4.prototype.cleanUp=function(){JY.prototype.cleanUp.call(this),this.data=null};Z4.prototype.resume=function(){if(!JY.prototype.resume.call(this))return!1;if(!this._tickScheduled&&this.dataIsReady)this._tickScheduled=!0,XY.delay(this._tickAndRepeat,[],this);return!0};Z4.prototype._tickAndRepeat=function(){if(this._tickScheduled=!1,this.isPaused||this.isFinished)return;if(this._tick(),!this.isFinished)XY.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0};Z4.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var $=FR,Q=null,X=Math.min(this.max,this.index+$);if(this.index>=this.max)return this.end();else{switch(this.type){case"string":Q=this.data.substring(this.index,X);break;case"uint8array":Q=this.data.subarray(this.index,X);break;case"array":case"nodebuffer":Q=this.data.slice(this.index,X);break}return this.index=X,this.push({data:Q,meta:{percent:this.max?this.index/this.max*100:0}})}};ew.exports=Z4});var YY=b((mn,QK)=>{var LR=m$();function vR(){var $,Q=[];for(var X=0;X<256;X++){$=X;for(var Y=0;Y<8;Y++)$=$&1?3988292384^$>>>1:$>>>1;Q[X]=$}return Q}var $K=vR();function IR($,Q,X,Y){var J=$K,U=Y+X;$=$^-1;for(var G=Y;G<U;G++)$=$>>>8^J[($^Q[G])&255];return $^-1}function ER($,Q,X,Y){var J=$K,U=Y+X;$=$^-1;for(var G=Y;G<U;G++)$=$>>>8^J[($^Q.charCodeAt(G))&255];return $^-1}QK.exports=function(Q,X){if(typeof Q>"u"||!Q.length)return 0;var Y=LR.getTypeOf(Q)!=="string";if(Y)return IR(X|0,Q,Q.length,0);else return ER(X|0,Q,Q.length,0)}});var Dq=b((cn,JK)=>{var XK=I6(),MR=YY(),PR=m$();function Bq(){XK.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}PR.inherits(Bq,XK);Bq.prototype.processChunk=function($){this.streamInfo.crc32=MR($.data,this.streamInfo.crc32||0),this.push($)};JK.exports=Bq});var UK=b((un,YK)=>{var RR=m$(),Oq=I6();function Aq($){Oq.call(this,"DataLengthProbe for "+$),this.propName=$,this.withStreamInfo($,0)}RR.inherits(Aq,Oq);Aq.prototype.processChunk=function($){if($){var Q=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=Q+$.data.length}Oq.prototype.processChunk.call(this,$)};YK.exports=Aq});var UY=b((dn,zK)=>{var qK=E4(),GK=Vq(),ZR=Dq(),Fq=UK();function Lq($,Q,X,Y,J){this.compressedSize=$,this.uncompressedSize=Q,this.crc32=X,this.compression=Y,this.compressedContent=J}Lq.prototype={getContentWorker:function(){var $=new GK(qK.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Fq("data_length")),Q=this;return $.on("end",function(){if(this.streamInfo.data_length!==Q.uncompressedSize)throw Error("Bug : uncompressed data size mismatch")}),$},getCompressedWorker:function(){return new GK(qK.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};Lq.createWorkerFrom=function($,Q,X){return $.pipe(new ZR).pipe(new Fq("uncompressedSize")).pipe(Q.compressWorker(X)).pipe(new Fq("compressedSize")).withStreamInfo("compression",Q)};zK.exports=Lq});var wK=b((ln,jK)=>{var SR=Kq(),TR=Vq(),vq=R4(),Iq=UY(),WK=I6(),Eq=function($,Q,X){this.name=$,this.dir=X.dir,this.date=X.date,this.comment=X.comment,this.unixPermissions=X.unixPermissions,this.dosPermissions=X.dosPermissions,this._data=Q,this._dataBinary=X.binary,this.options={compression:X.compression,compressionOptions:X.compressionOptions}};Eq.prototype={internalStream:function($){var Q=null,X="string";try{if(!$)throw Error("No output type specified.");X=$.toLowerCase();var Y=X==="string"||X==="text";if(X==="binarystring"||X==="text")X="string";Q=this._decompressWorker();var J=!this._dataBinary;if(J&&!Y)Q=Q.pipe(new vq.Utf8EncodeWorker);if(!J&&Y)Q=Q.pipe(new vq.Utf8DecodeWorker)}catch(U){Q=new WK("error"),Q.error(U)}return new SR(Q,X,"")},async:function($,Q){return this.internalStream($).accumulate(Q)},nodeStream:function($,Q){return this.internalStream($||"nodebuffer").toNodejsStream(Q)},_compressWorker:function($,Q){if(this._data instanceof Iq&&this._data.compression.magic===$.magic)return this._data.getCompressedWorker();else{var X=this._decompressWorker();if(!this._dataBinary)X=X.pipe(new vq.Utf8EncodeWorker);return Iq.createWorkerFrom(X,$,Q)}},_decompressWorker:function(){if(this._data instanceof Iq)return this._data.getContentWorker();else if(this._data instanceof WK)return this._data;else return new TR(this._data)}};var HK=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],CR=function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(lQ=0;lQ<HK.length;lQ++)Eq.prototype[HK[lQ]]=CR;var lQ;jK.exports=Eq});var I0=b((Mq)=>{var fR=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function yR($,Q){return Object.prototype.hasOwnProperty.call($,Q)}Mq.assign=function($){var Q=Array.prototype.slice.call(arguments,1);while(Q.length){var X=Q.shift();if(!X)continue;if(typeof X!=="object")throw TypeError(X+"must be non-object");for(var Y in X)if(yR(X,Y))$[Y]=X[Y]}return $};Mq.shrinkBuf=function($,Q){if($.length===Q)return $;if($.subarray)return $.subarray(0,Q);return $.length=Q,$};var _R={arraySet:function($,Q,X,Y,J){if(Q.subarray&&$.subarray){$.set(Q.subarray(X,X+Y),J);return}for(var U=0;U<Y;U++)$[J+U]=Q[X+U]},flattenChunks:function($){var Q,X,Y,J,U,G;Y=0;for(Q=0,X=$.length;Q<X;Q++)Y+=$[Q].length;G=new Uint8Array(Y),J=0;for(Q=0,X=$.length;Q<X;Q++)U=$[Q],G.set(U,J),J+=U.length;return G}},gR={arraySet:function($,Q,X,Y,J){for(var U=0;U<Y;U++)$[J+U]=Q[X+U]},flattenChunks:function($){return[].concat.apply([],$)}};Mq.setTyped=function($){if($)Mq.Buf8=Uint8Array,Mq.Buf16=Uint16Array,Mq.Buf32=Int32Array,Mq.assign(Mq,_R);else Mq.Buf8=Array,Mq.Buf16=Array,Mq.Buf32=Array,Mq.assign(Mq,gR)};Mq.setTyped(fR)});var yK=b((GZ)=>{var mR=I0(),cR=4,NK=0,VK=1,uR=2;function T4($){var Q=$.length;while(--Q>=0)$[Q]=0}var iR=0,LK=1,dR=2,lR=3,pR=258,xq=29,tQ=256,nQ=tQ+1+xq,S4=30,kq=19,vK=2*nQ+1,v1=15,Rq=16,nR=7,fq=256,IK=16,EK=17,MK=18,Cq=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],qY=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],rR=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],PK=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oR=512,E0=Array((nQ+2)*2);T4(E0);var pQ=Array(S4*2);T4(pQ);var rQ=Array(oR);T4(rQ);var oQ=Array(pR-lR+1);T4(oQ);var yq=Array(xq);T4(yq);var GY=Array(S4);T4(GY);function Zq($,Q,X,Y,J){this.static_tree=$,this.extra_bits=Q,this.extra_base=X,this.elems=Y,this.max_length=J,this.has_stree=$&&$.length}var RK,ZK,SK;function Sq($,Q){this.dyn_tree=$,this.max_code=0,this.stat_desc=Q}function TK($){return $<256?rQ[$]:rQ[256+($>>>7)]}function aQ($,Q){$.pending_buf[$.pending++]=Q&255,$.pending_buf[$.pending++]=Q>>>8&255}function D6($,Q,X){if($.bi_valid>Rq-X)$.bi_buf|=Q<<$.bi_valid&65535,aQ($,$.bi_buf),$.bi_buf=Q>>Rq-$.bi_valid,$.bi_valid+=X-Rq;else $.bi_buf|=Q<<$.bi_valid&65535,$.bi_valid+=X}function J0($,Q,X){D6($,X[Q*2],X[Q*2+1])}function CK($,Q){var X=0;do X|=$&1,$>>>=1,X<<=1;while(--Q>0);return X>>>1}function aR($){if($.bi_valid===16)aQ($,$.bi_buf),$.bi_buf=0,$.bi_valid=0;else if($.bi_valid>=8)$.pending_buf[$.pending++]=$.bi_buf&255,$.bi_buf>>=8,$.bi_valid-=8}function tR($,Q){var{dyn_tree:X,max_code:Y}=Q,J=Q.stat_desc.static_tree,U=Q.stat_desc.has_stree,G=Q.stat_desc.extra_bits,z=Q.stat_desc.extra_base,H=Q.stat_desc.max_length,W,j,N,K,w,B,D=0;for(K=0;K<=v1;K++)$.bl_count[K]=0;X[$.heap[$.heap_max]*2+1]=0;for(W=$.heap_max+1;W<vK;W++){if(j=$.heap[W],K=X[X[j*2+1]*2+1]+1,K>H)K=H,D++;if(X[j*2+1]=K,j>Y)continue;if($.bl_count[K]++,w=0,j>=z)w=G[j-z];if(B=X[j*2],$.opt_len+=B*(K+w),U)$.static_len+=B*(J[j*2+1]+w)}if(D===0)return;do{K=H-1;while($.bl_count[K]===0)K--;$.bl_count[K]--,$.bl_count[K+1]+=2,$.bl_count[H]--,D-=2}while(D>0);for(K=H;K!==0;K--){j=$.bl_count[K];while(j!==0){if(N=$.heap[--W],N>Y)continue;if(X[N*2+1]!==K)$.opt_len+=(K-X[N*2+1])*X[N*2],X[N*2+1]=K;j--}}}function bK($,Q,X){var Y=Array(v1+1),J=0,U,G;for(U=1;U<=v1;U++)Y[U]=J=J+X[U-1]<<1;for(G=0;G<=Q;G++){var z=$[G*2+1];if(z===0)continue;$[G*2]=CK(Y[z]++,z)}}function sR(){var $,Q,X,Y,J,U=Array(v1+1);X=0;for(Y=0;Y<xq-1;Y++){yq[Y]=X;for($=0;$<1<<Cq[Y];$++)oQ[X++]=Y}oQ[X-1]=Y,J=0;for(Y=0;Y<16;Y++){GY[Y]=J;for($=0;$<1<<qY[Y];$++)rQ[J++]=Y}J>>=7;for(;Y<S4;Y++){GY[Y]=J<<7;for($=0;$<1<<qY[Y]-7;$++)rQ[256+J++]=Y}for(Q=0;Q<=v1;Q++)U[Q]=0;$=0;while($<=143)E0[$*2+1]=8,$++,U[8]++;while($<=255)E0[$*2+1]=9,$++,U[9]++;while($<=279)E0[$*2+1]=7,$++,U[7]++;while($<=287)E0[$*2+1]=8,$++,U[8]++;bK(E0,nQ+1,U);for($=0;$<S4;$++)pQ[$*2+1]=5,pQ[$*2]=CK($,5);RK=new Zq(E0,Cq,tQ+1,nQ,v1),ZK=new Zq(pQ,qY,0,S4,v1),SK=new Zq([],rR,0,kq,nR)}function xK($){var Q;for(Q=0;Q<nQ;Q++)$.dyn_ltree[Q*2]=0;for(Q=0;Q<S4;Q++)$.dyn_dtree[Q*2]=0;for(Q=0;Q<kq;Q++)$.bl_tree[Q*2]=0;$.dyn_ltree[fq*2]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function kK($){if($.bi_valid>8)aQ($,$.bi_buf);else if($.bi_valid>0)$.pending_buf[$.pending++]=$.bi_buf;$.bi_buf=0,$.bi_valid=0}function eR($,Q,X,Y){if(kK($),Y)aQ($,X),aQ($,~X);mR.arraySet($.pending_buf,$.window,Q,X,$.pending),$.pending+=X}function BK($,Q,X,Y){var J=Q*2,U=X*2;return $[J]<$[U]||$[J]===$[U]&&Y[Q]<=Y[X]}function Tq($,Q,X){var Y=$.heap[X],J=X<<1;while(J<=$.heap_len){if(J<$.heap_len&&BK(Q,$.heap[J+1],$.heap[J],$.depth))J++;if(BK(Q,Y,$.heap[J],$.depth))break;$.heap[X]=$.heap[J],X=J,J<<=1}$.heap[X]=Y}function DK($,Q,X){var Y,J,U=0,G,z;if($.last_lit!==0)do if(Y=$.pending_buf[$.d_buf+U*2]<<8|$.pending_buf[$.d_buf+U*2+1],J=$.pending_buf[$.l_buf+U],U++,Y===0)J0($,J,Q);else{if(G=oQ[J],J0($,G+tQ+1,Q),z=Cq[G],z!==0)J-=yq[G],D6($,J,z);if(Y--,G=TK(Y),J0($,G,X),z=qY[G],z!==0)Y-=GY[G],D6($,Y,z)}while(U<$.last_lit);J0($,fq,Q)}function bq($,Q){var X=Q.dyn_tree,Y=Q.stat_desc.static_tree,J=Q.stat_desc.has_stree,U=Q.stat_desc.elems,G,z,H=-1,W;$.heap_len=0,$.heap_max=vK;for(G=0;G<U;G++)if(X[G*2]!==0)$.heap[++$.heap_len]=H=G,$.depth[G]=0;else X[G*2+1]=0;while($.heap_len<2)if(W=$.heap[++$.heap_len]=H<2?++H:0,X[W*2]=1,$.depth[W]=0,$.opt_len--,J)$.static_len-=Y[W*2+1];Q.max_code=H;for(G=$.heap_len>>1;G>=1;G--)Tq($,X,G);W=U;do G=$.heap[1],$.heap[1]=$.heap[$.heap_len--],Tq($,X,1),z=$.heap[1],$.heap[--$.heap_max]=G,$.heap[--$.heap_max]=z,X[W*2]=X[G*2]+X[z*2],$.depth[W]=($.depth[G]>=$.depth[z]?$.depth[G]:$.depth[z])+1,X[G*2+1]=X[z*2+1]=W,$.heap[1]=W++,Tq($,X,1);while($.heap_len>=2);$.heap[--$.heap_max]=$.heap[1],tR($,Q),bK(X,H,$.bl_count)}function OK($,Q,X){var Y,J=-1,U,G=Q[1],z=0,H=7,W=4;if(G===0)H=138,W=3;Q[(X+1)*2+1]=65535;for(Y=0;Y<=X;Y++){if(U=G,G=Q[(Y+1)*2+1],++z<H&&U===G)continue;else if(z<W)$.bl_tree[U*2]+=z;else if(U!==0){if(U!==J)$.bl_tree[U*2]++;$.bl_tree[IK*2]++}else if(z<=10)$.bl_tree[EK*2]++;else $.bl_tree[MK*2]++;if(z=0,J=U,G===0)H=138,W=3;else if(U===G)H=6,W=3;else H=7,W=4}}function AK($,Q,X){var Y,J=-1,U,G=Q[1],z=0,H=7,W=4;if(G===0)H=138,W=3;for(Y=0;Y<=X;Y++){if(U=G,G=Q[(Y+1)*2+1],++z<H&&U===G)continue;else if(z<W)do J0($,U,$.bl_tree);while(--z!==0);else if(U!==0){if(U!==J)J0($,U,$.bl_tree),z--;J0($,IK,$.bl_tree),D6($,z-3,2)}else if(z<=10)J0($,EK,$.bl_tree),D6($,z-3,3);else J0($,MK,$.bl_tree),D6($,z-11,7);if(z=0,J=U,G===0)H=138,W=3;else if(U===G)H=6,W=3;else H=7,W=4}}function $Z($){var Q;OK($,$.dyn_ltree,$.l_desc.max_code),OK($,$.dyn_dtree,$.d_desc.max_code),bq($,$.bl_desc);for(Q=kq-1;Q>=3;Q--)if($.bl_tree[PK[Q]*2+1]!==0)break;return $.opt_len+=3*(Q+1)+5+5+4,Q}function QZ($,Q,X,Y){var J;D6($,Q-257,5),D6($,X-1,5),D6($,Y-4,4);for(J=0;J<Y;J++)D6($,$.bl_tree[PK[J]*2+1],3);AK($,$.dyn_ltree,Q-1),AK($,$.dyn_dtree,X-1)}function XZ($){var Q=4093624447,X;for(X=0;X<=31;X++,Q>>>=1)if(Q&1&&$.dyn_ltree[X*2]!==0)return NK;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return VK;for(X=32;X<tQ;X++)if($.dyn_ltree[X*2]!==0)return VK;return NK}var FK=!1;function JZ($){if(!FK)sR(),FK=!0;$.l_desc=new Sq($.dyn_ltree,RK),$.d_desc=new Sq($.dyn_dtree,ZK),$.bl_desc=new Sq($.bl_tree,SK),$.bi_buf=0,$.bi_valid=0,xK($)}function fK($,Q,X,Y){D6($,(iR<<1)+(Y?1:0),3),eR($,Q,X,!0)}function YZ($){D6($,LK<<1,3),J0($,fq,E0),aR($)}function UZ($,Q,X,Y){var J,U,G=0;if($.level>0){if($.strm.data_type===uR)$.strm.data_type=XZ($);if(bq($,$.l_desc),bq($,$.d_desc),G=$Z($),J=$.opt_len+3+7>>>3,U=$.static_len+3+7>>>3,U<=J)J=U}else J=U=X+5;if(X+4<=J&&Q!==-1)fK($,Q,X,Y);else if($.strategy===cR||U===J)D6($,(LK<<1)+(Y?1:0),3),DK($,E0,pQ);else D6($,(dR<<1)+(Y?1:0),3),QZ($,$.l_desc.max_code+1,$.d_desc.max_code+1,G+1),DK($,$.dyn_ltree,$.dyn_dtree);if(xK($),Y)kK($)}function qZ($,Q,X){if($.pending_buf[$.d_buf+$.last_lit*2]=Q>>>8&255,$.pending_buf[$.d_buf+$.last_lit*2+1]=Q&255,$.pending_buf[$.l_buf+$.last_lit]=X&255,$.last_lit++,Q===0)$.dyn_ltree[X*2]++;else $.matches++,Q--,$.dyn_ltree[(oQ[X]+tQ+1)*2]++,$.dyn_dtree[TK(Q)*2]++;return $.last_lit===$.lit_bufsize-1}GZ._tr_init=JZ;GZ._tr_stored_block=fK;GZ._tr_flush_block=UZ;GZ._tr_tally=qZ;GZ._tr_align=YZ});var _q=b((rn,_K)=>{function KZ($,Q,X,Y){var J=$&65535|0,U=$>>>16&65535|0,G=0;while(X!==0){G=X>2000?2000:X,X-=G;do J=J+Q[Y++]|0,U=U+J|0;while(--G);J%=65521,U%=65521}return J|U<<16|0}_K.exports=KZ});var gq=b((on,gK)=>{function NZ(){var $,Q=[];for(var X=0;X<256;X++){$=X;for(var Y=0;Y<8;Y++)$=$&1?3988292384^$>>>1:$>>>1;Q[X]=$}return Q}var VZ=NZ();function BZ($,Q,X,Y){var J=VZ,U=Y+X;$^=-1;for(var G=Y;G<U;G++)$=$>>>8^J[($^Q[G])&255];return $^-1}gK.exports=BZ});var zY=b((an,hK)=>{hK.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var rK=b((oZ)=>{var j6=I0(),C6=yK(),iK=_q(),e0=gq(),DZ=zY(),P1=0,OZ=1,AZ=3,Y1=4,mK=5,U0=0,cK=1,b6=-2,FZ=-3,hq=-5,LZ=-1,vZ=1,WY=2,IZ=3,EZ=4,MZ=0,PZ=2,KY=8,RZ=9,ZZ=15,SZ=8,TZ=29,CZ=256,cq=CZ+1+TZ,bZ=30,xZ=19,kZ=2*cq+1,fZ=15,H$=3,X1=258,d6=X1+H$+1,yZ=32,NY=42,uq=69,HY=73,jY=91,wY=103,I1=113,eQ=666,t$=1,$X=2,E1=3,x4=4,_Z=3;function J1($,Q){return $.msg=DZ[Q],Q}function uK($){return($<<1)-($>4?9:0)}function Q1($){var Q=$.length;while(--Q>=0)$[Q]=0}function $1($){var Q=$.state,X=Q.pending;if(X>$.avail_out)X=$.avail_out;if(X===0)return;if(j6.arraySet($.output,Q.pending_buf,Q.pending_out,X,$.next_out),$.next_out+=X,Q.pending_out+=X,$.total_out+=X,$.avail_out-=X,Q.pending-=X,Q.pending===0)Q.pending_out=0}function U6($,Q){C6._tr_flush_block($,$.block_start>=0?$.block_start:-1,$.strstart-$.block_start,Q),$.block_start=$.strstart,$1($.strm)}function B$($,Q){$.pending_buf[$.pending++]=Q}function sQ($,Q){$.pending_buf[$.pending++]=Q>>>8&255,$.pending_buf[$.pending++]=Q&255}function gZ($,Q,X,Y){var J=$.avail_in;if(J>Y)J=Y;if(J===0)return 0;if($.avail_in-=J,j6.arraySet(Q,$.input,$.next_in,J,X),$.state.wrap===1)$.adler=iK($.adler,Q,J,X);else if($.state.wrap===2)$.adler=e0($.adler,Q,J,X);return $.next_in+=J,$.total_in+=J,J}function dK($,Q){var{max_chain_length:X,strstart:Y}=$,J,U,G=$.prev_length,z=$.nice_match,H=$.strstart>$.w_size-d6?$.strstart-($.w_size-d6):0,W=$.window,j=$.w_mask,N=$.prev,K=$.strstart+X1,w=W[Y+G-1],B=W[Y+G];if($.prev_length>=$.good_match)X>>=2;if(z>$.lookahead)z=$.lookahead;do{if(J=Q,W[J+G]!==B||W[J+G-1]!==w||W[J]!==W[Y]||W[++J]!==W[Y+1])continue;Y+=2,J++;do;while(W[++Y]===W[++J]&&W[++Y]===W[++J]&&W[++Y]===W[++J]&&W[++Y]===W[++J]&&W[++Y]===W[++J]&&W[++Y]===W[++J]&&W[++Y]===W[++J]&&W[++Y]===W[++J]&&Y<K);if(U=X1-(K-Y),Y=K-X1,U>G){if($.match_start=Q,G=U,U>=z)break;w=W[Y+G-1],B=W[Y+G]}}while((Q=N[Q&j])>H&&--X!==0);if(G<=$.lookahead)return G;return $.lookahead}function M1($){var Q=$.w_size,X,Y,J,U,G;do{if(U=$.window_size-$.lookahead-$.strstart,$.strstart>=Q+(Q-d6)){j6.arraySet($.window,$.window,Q,Q,0),$.match_start-=Q,$.strstart-=Q,$.block_start-=Q,Y=$.hash_size,X=Y;do J=$.head[--X],$.head[X]=J>=Q?J-Q:0;while(--Y);Y=Q,X=Y;do J=$.prev[--X],$.prev[X]=J>=Q?J-Q:0;while(--Y);U+=Q}if($.strm.avail_in===0)break;if(Y=gZ($.strm,$.window,$.strstart+$.lookahead,U),$.lookahead+=Y,$.lookahead+$.insert>=H$){G=$.strstart-$.insert,$.ins_h=$.window[G],$.ins_h=($.ins_h<<$.hash_shift^$.window[G+1])&$.hash_mask;while($.insert)if($.ins_h=($.ins_h<<$.hash_shift^$.window[G+H$-1])&$.hash_mask,$.prev[G&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=G,G++,$.insert--,$.lookahead+$.insert<H$)break}}while($.lookahead<d6&&$.strm.avail_in!==0)}function hZ($,Q){var X=65535;if(X>$.pending_buf_size-5)X=$.pending_buf_size-5;for(;;){if($.lookahead<=1){if(M1($),$.lookahead===0&&Q===P1)return t$;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var Y=$.block_start+X;if($.strstart===0||$.strstart>=Y){if($.lookahead=$.strstart-Y,$.strstart=Y,U6($,!1),$.strm.avail_out===0)return t$}if($.strstart-$.block_start>=$.w_size-d6){if(U6($,!1),$.strm.avail_out===0)return t$}}if($.insert=0,Q===Y1){if(U6($,!0),$.strm.avail_out===0)return E1;return x4}if($.strstart>$.block_start){if(U6($,!1),$.strm.avail_out===0)return t$}return t$}function mq($,Q){var X,Y;for(;;){if($.lookahead<d6){if(M1($),$.lookahead<d6&&Q===P1)return t$;if($.lookahead===0)break}if(X=0,$.lookahead>=H$)$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H$-1])&$.hash_mask,X=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart;if(X!==0&&$.strstart-X<=$.w_size-d6)$.match_length=dK($,X);if($.match_length>=H$)if(Y=C6._tr_tally($,$.strstart-$.match_start,$.match_length-H$),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=H$){$.match_length--;do $.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H$-1])&$.hash_mask,X=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart;while(--$.match_length!==0);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else Y=C6._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(Y){if(U6($,!1),$.strm.avail_out===0)return t$}}if($.insert=$.strstart<H$-1?$.strstart:H$-1,Q===Y1){if(U6($,!0),$.strm.avail_out===0)return E1;return x4}if($.last_lit){if(U6($,!1),$.strm.avail_out===0)return t$}return $X}function C4($,Q){var X,Y,J;for(;;){if($.lookahead<d6){if(M1($),$.lookahead<d6&&Q===P1)return t$;if($.lookahead===0)break}if(X=0,$.lookahead>=H$)$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H$-1])&$.hash_mask,X=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart;if($.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=H$-1,X!==0&&$.prev_length<$.max_lazy_match&&$.strstart-X<=$.w_size-d6){if($.match_length=dK($,X),$.match_length<=5&&($.strategy===vZ||$.match_length===H$&&$.strstart-$.match_start>4096))$.match_length=H$-1}if($.prev_length>=H$&&$.match_length<=$.prev_length){J=$.strstart+$.lookahead-H$,Y=C6._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-H$),$.lookahead-=$.prev_length-1,$.prev_length-=2;do if(++$.strstart<=J)$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H$-1])&$.hash_mask,X=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart;while(--$.prev_length!==0);if($.match_available=0,$.match_length=H$-1,$.strstart++,Y){if(U6($,!1),$.strm.avail_out===0)return t$}}else if($.match_available){if(Y=C6._tr_tally($,0,$.window[$.strstart-1]),Y)U6($,!1);if($.strstart++,$.lookahead--,$.strm.avail_out===0)return t$}else $.match_available=1,$.strstart++,$.lookahead--}if($.match_available)Y=C6._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0;if($.insert=$.strstart<H$-1?$.strstart:H$-1,Q===Y1){if(U6($,!0),$.strm.avail_out===0)return E1;return x4}if($.last_lit){if(U6($,!1),$.strm.avail_out===0)return t$}return $X}function mZ($,Q){var X,Y,J,U,G=$.window;for(;;){if($.lookahead<=X1){if(M1($),$.lookahead<=X1&&Q===P1)return t$;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=H$&&$.strstart>0){if(J=$.strstart-1,Y=G[J],Y===G[++J]&&Y===G[++J]&&Y===G[++J]){U=$.strstart+X1;do;while(Y===G[++J]&&Y===G[++J]&&Y===G[++J]&&Y===G[++J]&&Y===G[++J]&&Y===G[++J]&&Y===G[++J]&&Y===G[++J]&&J<U);if($.match_length=X1-(U-J),$.match_length>$.lookahead)$.match_length=$.lookahead}}if($.match_length>=H$)X=C6._tr_tally($,1,$.match_length-H$),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0;else X=C6._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(X){if(U6($,!1),$.strm.avail_out===0)return t$}}if($.insert=0,Q===Y1){if(U6($,!0),$.strm.avail_out===0)return E1;return x4}if($.last_lit){if(U6($,!1),$.strm.avail_out===0)return t$}return $X}function cZ($,Q){var X;for(;;){if($.lookahead===0){if(M1($),$.lookahead===0){if(Q===P1)return t$;break}}if($.match_length=0,X=C6._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,X){if(U6($,!1),$.strm.avail_out===0)return t$}}if($.insert=0,Q===Y1){if(U6($,!0),$.strm.avail_out===0)return E1;return x4}if($.last_lit){if(U6($,!1),$.strm.avail_out===0)return t$}return $X}function Y0($,Q,X,Y,J){this.good_length=$,this.max_lazy=Q,this.nice_length=X,this.max_chain=Y,this.func=J}var b4;b4=[new Y0(0,0,0,0,hZ),new Y0(4,4,8,4,mq),new Y0(4,5,16,8,mq),new Y0(4,6,32,32,mq),new Y0(4,4,16,16,C4),new Y0(8,16,32,32,C4),new Y0(8,16,128,128,C4),new Y0(8,32,128,256,C4),new Y0(32,128,258,1024,C4),new Y0(32,258,258,4096,C4)];function uZ($){$.window_size=2*$.w_size,Q1($.head),$.max_lazy_match=b4[$.level].max_lazy,$.good_match=b4[$.level].good_length,$.nice_match=b4[$.level].nice_length,$.max_chain_length=b4[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=H$-1,$.match_available=0,$.ins_h=0}function iZ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=KY,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new j6.Buf16(kZ*2),this.dyn_dtree=new j6.Buf16((2*bZ+1)*2),this.bl_tree=new j6.Buf16((2*xZ+1)*2),Q1(this.dyn_ltree),Q1(this.dyn_dtree),Q1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new j6.Buf16(fZ+1),this.heap=new j6.Buf16(2*cq+1),Q1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new j6.Buf16(2*cq+1),Q1(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lK($){var Q;if(!$||!$.state)return J1($,b6);if($.total_in=$.total_out=0,$.data_type=PZ,Q=$.state,Q.pending=0,Q.pending_out=0,Q.wrap<0)Q.wrap=-Q.wrap;return Q.status=Q.wrap?NY:I1,$.adler=Q.wrap===2?0:1,Q.last_flush=P1,C6._tr_init(Q),U0}function pK($){var Q=lK($);if(Q===U0)uZ($.state);return Q}function dZ($,Q){if(!$||!$.state)return b6;if($.state.wrap!==2)return b6;return $.state.gzhead=Q,U0}function nK($,Q,X,Y,J,U){if(!$)return b6;var G=1;if(Q===LZ)Q=6;if(Y<0)G=0,Y=-Y;else if(Y>15)G=2,Y-=16;if(J<1||J>RZ||X!==KY||Y<8||Y>15||Q<0||Q>9||U<0||U>EZ)return J1($,b6);if(Y===8)Y=9;var z=new iZ;return $.state=z,z.strm=$,z.wrap=G,z.gzhead=null,z.w_bits=Y,z.w_size=1<<z.w_bits,z.w_mask=z.w_size-1,z.hash_bits=J+7,z.hash_size=1<<z.hash_bits,z.hash_mask=z.hash_size-1,z.hash_shift=~~((z.hash_bits+H$-1)/H$),z.window=new j6.Buf8(z.w_size*2),z.head=new j6.Buf16(z.hash_size),z.prev=new j6.Buf16(z.w_size),z.lit_bufsize=1<<J+6,z.pending_buf_size=z.lit_bufsize*4,z.pending_buf=new j6.Buf8(z.pending_buf_size),z.d_buf=1*z.lit_bufsize,z.l_buf=3*z.lit_bufsize,z.level=Q,z.strategy=U,z.method=X,pK($)}function lZ($,Q){return nK($,Q,KY,ZZ,SZ,MZ)}function pZ($,Q){var X,Y,J,U;if(!$||!$.state||Q>mK||Q<0)return $?J1($,b6):b6;if(Y=$.state,!$.output||!$.input&&$.avail_in!==0||Y.status===eQ&&Q!==Y1)return J1($,$.avail_out===0?hq:b6);if(Y.strm=$,X=Y.last_flush,Y.last_flush=Q,Y.status===NY)if(Y.wrap===2)if($.adler=0,B$(Y,31),B$(Y,139),B$(Y,8),!Y.gzhead)B$(Y,0),B$(Y,0),B$(Y,0),B$(Y,0),B$(Y,0),B$(Y,Y.level===9?2:Y.strategy>=WY||Y.level<2?4:0),B$(Y,_Z),Y.status=I1;else{if(B$(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(!Y.gzhead.extra?0:4)+(!Y.gzhead.name?0:8)+(!Y.gzhead.comment?0:16)),B$(Y,Y.gzhead.time&255),B$(Y,Y.gzhead.time>>8&255),B$(Y,Y.gzhead.time>>16&255),B$(Y,Y.gzhead.time>>24&255),B$(Y,Y.level===9?2:Y.strategy>=WY||Y.level<2?4:0),B$(Y,Y.gzhead.os&255),Y.gzhead.extra&&Y.gzhead.extra.length)B$(Y,Y.gzhead.extra.length&255),B$(Y,Y.gzhead.extra.length>>8&255);if(Y.gzhead.hcrc)$.adler=e0($.adler,Y.pending_buf,Y.pending,0);Y.gzindex=0,Y.status=uq}else{var G=KY+(Y.w_bits-8<<4)<<8,z=-1;if(Y.strategy>=WY||Y.level<2)z=0;else if(Y.level<6)z=1;else if(Y.level===6)z=2;else z=3;if(G|=z<<6,Y.strstart!==0)G|=yZ;if(G+=31-G%31,Y.status=I1,sQ(Y,G),Y.strstart!==0)sQ(Y,$.adler>>>16),sQ(Y,$.adler&65535);$.adler=1}if(Y.status===uq)if(Y.gzhead.extra){J=Y.pending;while(Y.gzindex<(Y.gzhead.extra.length&65535)){if(Y.pending===Y.pending_buf_size){if(Y.gzhead.hcrc&&Y.pending>J)$.adler=e0($.adler,Y.pending_buf,Y.pending-J,J);if($1($),J=Y.pending,Y.pending===Y.pending_buf_size)break}B$(Y,Y.gzhead.extra[Y.gzindex]&255),Y.gzindex++}if(Y.gzhead.hcrc&&Y.pending>J)$.adler=e0($.adler,Y.pending_buf,Y.pending-J,J);if(Y.gzindex===Y.gzhead.extra.length)Y.gzindex=0,Y.status=HY}else Y.status=HY;if(Y.status===HY)if(Y.gzhead.name){J=Y.pending;do{if(Y.pending===Y.pending_buf_size){if(Y.gzhead.hcrc&&Y.pending>J)$.adler=e0($.adler,Y.pending_buf,Y.pending-J,J);if($1($),J=Y.pending,Y.pending===Y.pending_buf_size){U=1;break}}if(Y.gzindex<Y.gzhead.name.length)U=Y.gzhead.name.charCodeAt(Y.gzindex++)&255;else U=0;B$(Y,U)}while(U!==0);if(Y.gzhead.hcrc&&Y.pending>J)$.adler=e0($.adler,Y.pending_buf,Y.pending-J,J);if(U===0)Y.gzindex=0,Y.status=jY}else Y.status=jY;if(Y.status===jY)if(Y.gzhead.comment){J=Y.pending;do{if(Y.pending===Y.pending_buf_size){if(Y.gzhead.hcrc&&Y.pending>J)$.adler=e0($.adler,Y.pending_buf,Y.pending-J,J);if($1($),J=Y.pending,Y.pending===Y.pending_buf_size){U=1;break}}if(Y.gzindex<Y.gzhead.comment.length)U=Y.gzhead.comment.charCodeAt(Y.gzindex++)&255;else U=0;B$(Y,U)}while(U!==0);if(Y.gzhead.hcrc&&Y.pending>J)$.adler=e0($.adler,Y.pending_buf,Y.pending-J,J);if(U===0)Y.status=wY}else Y.status=wY;if(Y.status===wY)if(Y.gzhead.hcrc){if(Y.pending+2>Y.pending_buf_size)$1($);if(Y.pending+2<=Y.pending_buf_size)B$(Y,$.adler&255),B$(Y,$.adler>>8&255),$.adler=0,Y.status=I1}else Y.status=I1;if(Y.pending!==0){if($1($),$.avail_out===0)return Y.last_flush=-1,U0}else if($.avail_in===0&&uK(Q)<=uK(X)&&Q!==Y1)return J1($,hq);if(Y.status===eQ&&$.avail_in!==0)return J1($,hq);if($.avail_in!==0||Y.lookahead!==0||Q!==P1&&Y.status!==eQ){var H=Y.strategy===WY?cZ(Y,Q):Y.strategy===IZ?mZ(Y,Q):b4[Y.level].func(Y,Q);if(H===E1||H===x4)Y.status=eQ;if(H===t$||H===E1){if($.avail_out===0)Y.last_flush=-1;return U0}if(H===$X){if(Q===OZ)C6._tr_align(Y);else if(Q!==mK){if(C6._tr_stored_block(Y,0,0,!1),Q===AZ){if(Q1(Y.head),Y.lookahead===0)Y.strstart=0,Y.block_start=0,Y.insert=0}}if($1($),$.avail_out===0)return Y.last_flush=-1,U0}}if(Q!==Y1)return U0;if(Y.wrap<=0)return cK;if(Y.wrap===2)B$(Y,$.adler&255),B$(Y,$.adler>>8&255),B$(Y,$.adler>>16&255),B$(Y,$.adler>>24&255),B$(Y,$.total_in&255),B$(Y,$.total_in>>8&255),B$(Y,$.total_in>>16&255),B$(Y,$.total_in>>24&255);else sQ(Y,$.adler>>>16),sQ(Y,$.adler&65535);if($1($),Y.wrap>0)Y.wrap=-Y.wrap;return Y.pending!==0?U0:cK}function nZ($){var Q;if(!$||!$.state)return b6;if(Q=$.state.status,Q!==NY&&Q!==uq&&Q!==HY&&Q!==jY&&Q!==wY&&Q!==I1&&Q!==eQ)return J1($,b6);return $.state=null,Q===I1?J1($,FZ):U0}function rZ($,Q){var X=Q.length,Y,J,U,G,z,H,W,j;if(!$||!$.state)return b6;if(Y=$.state,G=Y.wrap,G===2||G===1&&Y.status!==NY||Y.lookahead)return b6;if(G===1)$.adler=iK($.adler,Q,X,0);if(Y.wrap=0,X>=Y.w_size){if(G===0)Q1(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0;j=new j6.Buf8(Y.w_size),j6.arraySet(j,Q,X-Y.w_size,Y.w_size,0),Q=j,X=Y.w_size}z=$.avail_in,H=$.next_in,W=$.input,$.avail_in=X,$.next_in=0,$.input=Q,M1(Y);while(Y.lookahead>=H$){J=Y.strstart,U=Y.lookahead-(H$-1);do Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[J+H$-1])&Y.hash_mask,Y.prev[J&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=J,J++;while(--U);Y.strstart=J,Y.lookahead=H$-1,M1(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=H$-1,Y.match_available=0,$.next_in=H,$.input=W,$.avail_in=z,Y.wrap=G,U0}oZ.deflateInit=lZ;oZ.deflateInit2=nK;oZ.deflateReset=pK;oZ.deflateResetKeep=lK;oZ.deflateSetHeader=dZ;oZ.deflate=pZ;oZ.deflateEnd=nZ;oZ.deflateSetDictionary=rZ;oZ.deflateInfo="pako deflate (from Nodeca project)"});var iq=b((US)=>{var VY=I0(),oK=!0,aK=!0;try{String.fromCharCode.apply(null,[0])}catch($){oK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch($){aK=!1}var QX=new VY.Buf8(256);for(q0=0;q0<256;q0++)QX[q0]=q0>=252?6:q0>=248?5:q0>=240?4:q0>=224?3:q0>=192?2:1;var q0;QX[254]=QX[254]=1;US.string2buf=function($){var Q,X,Y,J,U,G=$.length,z=0;for(J=0;J<G;J++){if(X=$.charCodeAt(J),(X&64512)===55296&&J+1<G){if(Y=$.charCodeAt(J+1),(Y&64512)===56320)X=65536+(X-55296<<10)+(Y-56320),J++}z+=X<128?1:X<2048?2:X<65536?3:4}Q=new VY.Buf8(z);for(U=0,J=0;U<z;J++){if(X=$.charCodeAt(J),(X&64512)===55296&&J+1<G){if(Y=$.charCodeAt(J+1),(Y&64512)===56320)X=65536+(X-55296<<10)+(Y-56320),J++}if(X<128)Q[U++]=X;else if(X<2048)Q[U++]=192|X>>>6,Q[U++]=128|X&63;else if(X<65536)Q[U++]=224|X>>>12,Q[U++]=128|X>>>6&63,Q[U++]=128|X&63;else Q[U++]=240|X>>>18,Q[U++]=128|X>>>12&63,Q[U++]=128|X>>>6&63,Q[U++]=128|X&63}return Q};function tK($,Q){if(Q<65534){if($.subarray&&aK||!$.subarray&&oK)return String.fromCharCode.apply(null,VY.shrinkBuf($,Q))}var X="";for(var Y=0;Y<Q;Y++)X+=String.fromCharCode($[Y]);return X}US.buf2binstring=function($){return tK($,$.length)};US.binstring2buf=function($){var Q=new VY.Buf8($.length);for(var X=0,Y=Q.length;X<Y;X++)Q[X]=$.charCodeAt(X);return Q};US.buf2string=function($,Q){var X,Y,J,U,G=Q||$.length,z=Array(G*2);for(Y=0,X=0;X<G;){if(J=$[X++],J<128){z[Y++]=J;continue}if(U=QX[J],U>4){z[Y++]=65533,X+=U-1;continue}J&=U===2?31:U===3?15:7;while(U>1&&X<G)J=J<<6|$[X++]&63,U--;if(U>1){z[Y++]=65533;continue}if(J<65536)z[Y++]=J;else J-=65536,z[Y++]=55296|J>>10&1023,z[Y++]=56320|J&1023}return tK(z,Y)};US.utf8border=function($,Q){var X;if(Q=Q||$.length,Q>$.length)Q=$.length;X=Q-1;while(X>=0&&($[X]&192)===128)X--;if(X<0)return Q;if(X===0)return Q;return X+QX[$[X]]>Q?X:Q}});var dq=b((en,sK)=>{function jS(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}sK.exports=jS});var X2=b((AS)=>{var XX=rK(),JX=I0(),pq=iq(),nq=zY(),wS=dq(),Q2=Object.prototype.toString,KS=0,lq=4,k4=0,eK=1,$2=2,NS=-1,VS=0,BS=8;function R1($){if(!(this instanceof R1))return new R1($);this.options=JX.assign({level:NS,method:BS,chunkSize:16384,windowBits:15,memLevel:8,strategy:VS,to:""},$||{});var Q=this.options;if(Q.raw&&Q.windowBits>0)Q.windowBits=-Q.windowBits;else if(Q.gzip&&Q.windowBits>0&&Q.windowBits<16)Q.windowBits+=16;this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wS,this.strm.avail_out=0;var X=XX.deflateInit2(this.strm,Q.level,Q.method,Q.windowBits,Q.memLevel,Q.strategy);if(X!==k4)throw Error(nq[X]);if(Q.header)XX.deflateSetHeader(this.strm,Q.header);if(Q.dictionary){var Y;if(typeof Q.dictionary==="string")Y=pq.string2buf(Q.dictionary);else if(Q2.call(Q.dictionary)==="[object ArrayBuffer]")Y=new Uint8Array(Q.dictionary);else Y=Q.dictionary;if(X=XX.deflateSetDictionary(this.strm,Y),X!==k4)throw Error(nq[X]);this._dict_set=!0}}R1.prototype.push=function($,Q){var X=this.strm,Y=this.options.chunkSize,J,U;if(this.ended)return!1;if(U=Q===~~Q?Q:Q===!0?lq:KS,typeof $==="string")X.input=pq.string2buf($);else if(Q2.call($)==="[object ArrayBuffer]")X.input=new Uint8Array($);else X.input=$;X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0)X.output=new JX.Buf8(Y),X.next_out=0,X.avail_out=Y;if(J=XX.deflate(X,U),J!==eK&&J!==k4)return this.onEnd(J),this.ended=!0,!1;if(X.avail_out===0||X.avail_in===0&&(U===lq||U===$2))if(this.options.to==="string")this.onData(pq.buf2binstring(JX.shrinkBuf(X.output,X.next_out)));else this.onData(JX.shrinkBuf(X.output,X.next_out))}while((X.avail_in>0||X.avail_out===0)&&J!==eK);if(U===lq)return J=XX.deflateEnd(this.strm),this.onEnd(J),this.ended=!0,J===k4;if(U===$2)return this.onEnd(k4),X.avail_out=0,!0;return!0};R1.prototype.onData=function($){this.chunks.push($)};R1.prototype.onEnd=function($){if($===k4)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=JX.flattenChunks(this.chunks);this.chunks=[],this.err=$,this.msg=this.strm.msg};function rq($,Q){var X=new R1(Q);if(X.push($,!0),X.err)throw X.msg||nq[X.err];return X.result}function DS($,Q){return Q=Q||{},Q.raw=!0,rq($,Q)}function OS($,Q){return Q=Q||{},Q.gzip=!0,rq($,Q)}AS.Deflate=R1;AS.deflate=rq;AS.deflateRaw=DS;AS.gzip=OS});var Y2=b((Qr,J2)=>{var BY=30,ES=12;J2.exports=function(Q,X){var Y,J,U,G,z,H,W,j,N,K,w,B,D,F,V,O,A,L,I,P,v,Z,R,C,S;Y=Q.state,J=Q.next_in,C=Q.input,U=J+(Q.avail_in-5),G=Q.next_out,S=Q.output,z=G-(X-Q.avail_out),H=G+(Q.avail_out-257),W=Y.dmax,j=Y.wsize,N=Y.whave,K=Y.wnext,w=Y.window,B=Y.hold,D=Y.bits,F=Y.lencode,V=Y.distcode,O=(1<<Y.lenbits)-1,A=(1<<Y.distbits)-1;$:do{if(D<15)B+=C[J++]<<D,D+=8,B+=C[J++]<<D,D+=8;L=F[B&O];Q:for(;;){if(I=L>>>24,B>>>=I,D-=I,I=L>>>16&255,I===0)S[G++]=L&65535;else if(I&16){if(P=L&65535,I&=15,I){if(D<I)B+=C[J++]<<D,D+=8;P+=B&(1<<I)-1,B>>>=I,D-=I}if(D<15)B+=C[J++]<<D,D+=8,B+=C[J++]<<D,D+=8;L=V[B&A];X:for(;;){if(I=L>>>24,B>>>=I,D-=I,I=L>>>16&255,I&16){if(v=L&65535,I&=15,D<I){if(B+=C[J++]<<D,D+=8,D<I)B+=C[J++]<<D,D+=8}if(v+=B&(1<<I)-1,v>W){Q.msg="invalid distance too far back",Y.mode=BY;break $}if(B>>>=I,D-=I,I=G-z,v>I){if(I=v-I,I>N){if(Y.sane){Q.msg="invalid distance too far back",Y.mode=BY;break $}}if(Z=0,R=w,K===0){if(Z+=j-I,I<P){P-=I;do S[G++]=w[Z++];while(--I);Z=G-v,R=S}}else if(K<I){if(Z+=j+K-I,I-=K,I<P){P-=I;do S[G++]=w[Z++];while(--I);if(Z=0,K<P){I=K,P-=I;do S[G++]=w[Z++];while(--I);Z=G-v,R=S}}}else if(Z+=K-I,I<P){P-=I;do S[G++]=w[Z++];while(--I);Z=G-v,R=S}while(P>2)S[G++]=R[Z++],S[G++]=R[Z++],S[G++]=R[Z++],P-=3;if(P){if(S[G++]=R[Z++],P>1)S[G++]=R[Z++]}}else{Z=G-v;do S[G++]=S[Z++],S[G++]=S[Z++],S[G++]=S[Z++],P-=3;while(P>2);if(P){if(S[G++]=S[Z++],P>1)S[G++]=S[Z++]}}}else if((I&64)===0){L=V[(L&65535)+(B&(1<<I)-1)];continue X}else{Q.msg="invalid distance code",Y.mode=BY;break $}break}}else if((I&64)===0){L=F[(L&65535)+(B&(1<<I)-1)];continue Q}else if(I&32){Y.mode=ES;break $}else{Q.msg="invalid literal/length code",Y.mode=BY;break $}break}}while(J<U&&G<H);P=D>>3,J-=P,D-=P<<3,B&=(1<<D)-1,Q.next_in=J,Q.next_out=G,Q.avail_in=J<U?5+(U-J):5-(J-U),Q.avail_out=G<H?257+(H-G):257-(G-H),Y.hold=B,Y.bits=D;return}});var j2=b((Xr,H2)=>{var U2=I0(),f4=15,q2=852,G2=592,z2=0,oq=1,W2=2,MS=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],PS=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],RS=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ZS=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];H2.exports=function(Q,X,Y,J,U,G,z,H){var W=H.bits,j=0,N=0,K=0,w=0,B=0,D=0,F=0,V=0,O=0,A=0,L,I,P,v,Z,R=null,C=0,S,n=new U2.Buf16(f4+1),c=new U2.Buf16(f4+1),T=null,y=0,f,l,N$;for(j=0;j<=f4;j++)n[j]=0;for(N=0;N<J;N++)n[X[Y+N]]++;B=W;for(w=f4;w>=1;w--)if(n[w]!==0)break;if(B>w)B=w;if(w===0)return U[G++]=20971520,U[G++]=20971520,H.bits=1,0;for(K=1;K<w;K++)if(n[K]!==0)break;if(B<K)B=K;V=1;for(j=1;j<=f4;j++)if(V<<=1,V-=n[j],V<0)return-1;if(V>0&&(Q===z2||w!==1))return-1;c[1]=0;for(j=1;j<f4;j++)c[j+1]=c[j]+n[j];for(N=0;N<J;N++)if(X[Y+N]!==0)z[c[X[Y+N]]++]=N;if(Q===z2)R=T=z,S=19;else if(Q===oq)R=MS,C-=257,T=PS,y-=257,S=256;else R=RS,T=ZS,S=-1;if(A=0,N=0,j=K,Z=G,D=B,F=0,P=-1,O=1<<B,v=O-1,Q===oq&&O>q2||Q===W2&&O>G2)return 1;for(;;){if(f=j-F,z[N]<S)l=0,N$=z[N];else if(z[N]>S)l=T[y+z[N]],N$=R[C+z[N]];else l=96,N$=0;L=1<<j-F,I=1<<D,K=I;do I-=L,U[Z+(A>>F)+I]=f<<24|l<<16|N$|0;while(I!==0);L=1<<j-1;while(A&L)L>>=1;if(L!==0)A&=L-1,A+=L;else A=0;if(N++,--n[j]===0){if(j===w)break;j=X[Y+z[N]]}if(j>B&&(A&v)!==P){if(F===0)F=B;Z+=K,D=j-F,V=1<<D;while(D+F<w){if(V-=n[D+F],V<=0)break;D++,V<<=1}if(O+=1<<D,Q===oq&&O>q2||Q===W2&&O>G2)return 1;P=A&v,U[P]=B<<24|D<<16|Z-G|0}}if(A!==0)U[Z+A]=j-F<<24|4194304|0;return H.bits=B,0}});var p2=b((nS)=>{var E6=I0(),Q7=_q(),G0=gq(),SS=Y2(),YX=j2(),TS=0,_2=1,g2=2,w2=4,CS=5,DY=6,Z1=0,bS=1,xS=2,x6=-2,h2=-3,X7=-4,kS=-5,K2=8,m2=1,N2=2,V2=3,B2=4,D2=5,O2=6,A2=7,F2=8,L2=9,v2=10,FY=11,M0=12,aq=13,I2=14,tq=15,E2=16,M2=17,P2=18,R2=19,OY=20,AY=21,Z2=22,S2=23,T2=24,C2=25,b2=26,sq=27,x2=28,k2=29,k$=30,J7=31,fS=32,yS=852,_S=592,gS=15,hS=gS;function f2($){return($>>>24&255)+($>>>8&65280)+(($&65280)<<8)+(($&255)<<24)}function mS(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new E6.Buf16(320),this.work=new E6.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c2($){var Q;if(!$||!$.state)return x6;if(Q=$.state,$.total_in=$.total_out=Q.total=0,$.msg="",Q.wrap)$.adler=Q.wrap&1;return Q.mode=m2,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new E6.Buf32(yS),Q.distcode=Q.distdyn=new E6.Buf32(_S),Q.sane=1,Q.back=-1,Z1}function u2($){var Q;if(!$||!$.state)return x6;return Q=$.state,Q.wsize=0,Q.whave=0,Q.wnext=0,c2($)}function i2($,Q){var X,Y;if(!$||!$.state)return x6;if(Y=$.state,Q<0)X=0,Q=-Q;else if(X=(Q>>4)+1,Q<48)Q&=15;if(Q&&(Q<8||Q>15))return x6;if(Y.window!==null&&Y.wbits!==Q)Y.window=null;return Y.wrap=X,Y.wbits=Q,u2($)}function d2($,Q){var X,Y;if(!$)return x6;if(Y=new mS,$.state=Y,Y.window=null,X=i2($,Q),X!==Z1)$.state=null;return X}function cS($){return d2($,hS)}var y2=!0,eq,$7;function uS($){if(y2){var Q;eq=new E6.Buf32(512),$7=new E6.Buf32(32),Q=0;while(Q<144)$.lens[Q++]=8;while(Q<256)$.lens[Q++]=9;while(Q<280)$.lens[Q++]=7;while(Q<288)$.lens[Q++]=8;YX(_2,$.lens,0,288,eq,0,$.work,{bits:9}),Q=0;while(Q<32)$.lens[Q++]=5;YX(g2,$.lens,0,32,$7,0,$.work,{bits:5}),y2=!1}$.lencode=eq,$.lenbits=9,$.distcode=$7,$.distbits=5}function l2($,Q,X,Y){var J,U=$.state;if(U.window===null)U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new E6.Buf8(U.wsize);if(Y>=U.wsize)E6.arraySet(U.window,Q,X-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize;else{if(J=U.wsize-U.wnext,J>Y)J=Y;if(E6.arraySet(U.window,Q,X-Y,J,U.wnext),Y-=J,Y)E6.arraySet(U.window,Q,X-Y,Y,0),U.wnext=Y,U.whave=U.wsize;else{if(U.wnext+=J,U.wnext===U.wsize)U.wnext=0;if(U.whave<U.wsize)U.whave+=J}}return 0}function iS($,Q){var X,Y,J,U,G,z,H,W,j,N,K,w,B,D,F=0,V,O,A,L,I,P,v,Z,R=new E6.Buf8(4),C,S,n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return x6;if(X=$.state,X.mode===M0)X.mode=aq;G=$.next_out,J=$.output,H=$.avail_out,U=$.next_in,Y=$.input,z=$.avail_in,W=X.hold,j=X.bits,N=z,K=H,Z=Z1;$:for(;;)switch(X.mode){case m2:if(X.wrap===0){X.mode=aq;break}while(j<16){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(X.wrap&2&&W===35615){X.check=0,R[0]=W&255,R[1]=W>>>8&255,X.check=G0(X.check,R,2,0),W=0,j=0,X.mode=N2;break}if(X.flags=0,X.head)X.head.done=!1;if(!(X.wrap&1)||(((W&255)<<8)+(W>>8))%31){$.msg="incorrect header check",X.mode=k$;break}if((W&15)!==K2){$.msg="unknown compression method",X.mode=k$;break}if(W>>>=4,j-=4,v=(W&15)+8,X.wbits===0)X.wbits=v;else if(v>X.wbits){$.msg="invalid window size",X.mode=k$;break}X.dmax=1<<v,$.adler=X.check=1,X.mode=W&512?v2:M0,W=0,j=0;break;case N2:while(j<16){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(X.flags=W,(X.flags&255)!==K2){$.msg="unknown compression method",X.mode=k$;break}if(X.flags&57344){$.msg="unknown header flags set",X.mode=k$;break}if(X.head)X.head.text=W>>8&1;if(X.flags&512)R[0]=W&255,R[1]=W>>>8&255,X.check=G0(X.check,R,2,0);W=0,j=0,X.mode=V2;case V2:while(j<32){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(X.head)X.head.time=W;if(X.flags&512)R[0]=W&255,R[1]=W>>>8&255,R[2]=W>>>16&255,R[3]=W>>>24&255,X.check=G0(X.check,R,4,0);W=0,j=0,X.mode=B2;case B2:while(j<16){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(X.head)X.head.xflags=W&255,X.head.os=W>>8;if(X.flags&512)R[0]=W&255,R[1]=W>>>8&255,X.check=G0(X.check,R,2,0);W=0,j=0,X.mode=D2;case D2:if(X.flags&1024){while(j<16){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(X.length=W,X.head)X.head.extra_len=W;if(X.flags&512)R[0]=W&255,R[1]=W>>>8&255,X.check=G0(X.check,R,2,0);W=0,j=0}else if(X.head)X.head.extra=null;X.mode=O2;case O2:if(X.flags&1024){if(w=X.length,w>z)w=z;if(w){if(X.head){if(v=X.head.extra_len-X.length,!X.head.extra)X.head.extra=Array(X.head.extra_len);E6.arraySet(X.head.extra,Y,U,w,v)}if(X.flags&512)X.check=G0(X.check,Y,w,U);z-=w,U+=w,X.length-=w}if(X.length)break $}X.length=0,X.mode=A2;case A2:if(X.flags&2048){if(z===0)break $;w=0;do if(v=Y[U+w++],X.head&&v&&X.length<65536)X.head.name+=String.fromCharCode(v);while(v&&w<z);if(X.flags&512)X.check=G0(X.check,Y,w,U);if(z-=w,U+=w,v)break $}else if(X.head)X.head.name=null;X.length=0,X.mode=F2;case F2:if(X.flags&4096){if(z===0)break $;w=0;do if(v=Y[U+w++],X.head&&v&&X.length<65536)X.head.comment+=String.fromCharCode(v);while(v&&w<z);if(X.flags&512)X.check=G0(X.check,Y,w,U);if(z-=w,U+=w,v)break $}else if(X.head)X.head.comment=null;X.mode=L2;case L2:if(X.flags&512){while(j<16){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(W!==(X.check&65535)){$.msg="header crc mismatch",X.mode=k$;break}W=0,j=0}if(X.head)X.head.hcrc=X.flags>>9&1,X.head.done=!0;$.adler=X.check=0,X.mode=M0;break;case v2:while(j<32){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}$.adler=X.check=f2(W),W=0,j=0,X.mode=FY;case FY:if(X.havedict===0)return $.next_out=G,$.avail_out=H,$.next_in=U,$.avail_in=z,X.hold=W,X.bits=j,xS;$.adler=X.check=1,X.mode=M0;case M0:if(Q===CS||Q===DY)break $;case aq:if(X.last){W>>>=j&7,j-=j&7,X.mode=sq;break}while(j<3){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}switch(X.last=W&1,W>>>=1,j-=1,W&3){case 0:X.mode=I2;break;case 1:if(uS(X),X.mode=OY,Q===DY){W>>>=2,j-=2;break $}break;case 2:X.mode=M2;break;case 3:$.msg="invalid block type",X.mode=k$}W>>>=2,j-=2;break;case I2:W>>>=j&7,j-=j&7;while(j<32){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if((W&65535)!==(W>>>16^65535)){$.msg="invalid stored block lengths",X.mode=k$;break}if(X.length=W&65535,W=0,j=0,X.mode=tq,Q===DY)break $;case tq:X.mode=E2;case E2:if(w=X.length,w){if(w>z)w=z;if(w>H)w=H;if(w===0)break $;E6.arraySet(J,Y,U,w,G),z-=w,U+=w,H-=w,G+=w,X.length-=w;break}X.mode=M0;break;case M2:while(j<14){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(X.nlen=(W&31)+257,W>>>=5,j-=5,X.ndist=(W&31)+1,W>>>=5,j-=5,X.ncode=(W&15)+4,W>>>=4,j-=4,X.nlen>286||X.ndist>30){$.msg="too many length or distance symbols",X.mode=k$;break}X.have=0,X.mode=P2;case P2:while(X.have<X.ncode){while(j<3){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}X.lens[n[X.have++]]=W&7,W>>>=3,j-=3}while(X.have<19)X.lens[n[X.have++]]=0;if(X.lencode=X.lendyn,X.lenbits=7,C={bits:X.lenbits},Z=YX(TS,X.lens,0,19,X.lencode,0,X.work,C),X.lenbits=C.bits,Z){$.msg="invalid code lengths set",X.mode=k$;break}X.have=0,X.mode=R2;case R2:while(X.have<X.nlen+X.ndist){for(;;){if(F=X.lencode[W&(1<<X.lenbits)-1],V=F>>>24,O=F>>>16&255,A=F&65535,V<=j)break;if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(A<16)W>>>=V,j-=V,X.lens[X.have++]=A;else{if(A===16){S=V+2;while(j<S){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(W>>>=V,j-=V,X.have===0){$.msg="invalid bit length repeat",X.mode=k$;break}v=X.lens[X.have-1],w=3+(W&3),W>>>=2,j-=2}else if(A===17){S=V+3;while(j<S){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}W>>>=V,j-=V,v=0,w=3+(W&7),W>>>=3,j-=3}else{S=V+7;while(j<S){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}W>>>=V,j-=V,v=0,w=11+(W&127),W>>>=7,j-=7}if(X.have+w>X.nlen+X.ndist){$.msg="invalid bit length repeat",X.mode=k$;break}while(w--)X.lens[X.have++]=v}}if(X.mode===k$)break;if(X.lens[256]===0){$.msg="invalid code -- missing end-of-block",X.mode=k$;break}if(X.lenbits=9,C={bits:X.lenbits},Z=YX(_2,X.lens,0,X.nlen,X.lencode,0,X.work,C),X.lenbits=C.bits,Z){$.msg="invalid literal/lengths set",X.mode=k$;break}if(X.distbits=6,X.distcode=X.distdyn,C={bits:X.distbits},Z=YX(g2,X.lens,X.nlen,X.ndist,X.distcode,0,X.work,C),X.distbits=C.bits,Z){$.msg="invalid distances set",X.mode=k$;break}if(X.mode=OY,Q===DY)break $;case OY:X.mode=AY;case AY:if(z>=6&&H>=258){if($.next_out=G,$.avail_out=H,$.next_in=U,$.avail_in=z,X.hold=W,X.bits=j,SS($,K),G=$.next_out,J=$.output,H=$.avail_out,U=$.next_in,Y=$.input,z=$.avail_in,W=X.hold,j=X.bits,X.mode===M0)X.back=-1;break}X.back=0;for(;;){if(F=X.lencode[W&(1<<X.lenbits)-1],V=F>>>24,O=F>>>16&255,A=F&65535,V<=j)break;if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(O&&(O&240)===0){L=V,I=O,P=A;for(;;){if(F=X.lencode[P+((W&(1<<L+I)-1)>>L)],V=F>>>24,O=F>>>16&255,A=F&65535,L+V<=j)break;if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}W>>>=L,j-=L,X.back+=L}if(W>>>=V,j-=V,X.back+=V,X.length=A,O===0){X.mode=b2;break}if(O&32){X.back=-1,X.mode=M0;break}if(O&64){$.msg="invalid literal/length code",X.mode=k$;break}X.extra=O&15,X.mode=Z2;case Z2:if(X.extra){S=X.extra;while(j<S){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}X.length+=W&(1<<X.extra)-1,W>>>=X.extra,j-=X.extra,X.back+=X.extra}X.was=X.length,X.mode=S2;case S2:for(;;){if(F=X.distcode[W&(1<<X.distbits)-1],V=F>>>24,O=F>>>16&255,A=F&65535,V<=j)break;if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if((O&240)===0){L=V,I=O,P=A;for(;;){if(F=X.distcode[P+((W&(1<<L+I)-1)>>L)],V=F>>>24,O=F>>>16&255,A=F&65535,L+V<=j)break;if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}W>>>=L,j-=L,X.back+=L}if(W>>>=V,j-=V,X.back+=V,O&64){$.msg="invalid distance code",X.mode=k$;break}X.offset=A,X.extra=O&15,X.mode=T2;case T2:if(X.extra){S=X.extra;while(j<S){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}X.offset+=W&(1<<X.extra)-1,W>>>=X.extra,j-=X.extra,X.back+=X.extra}if(X.offset>X.dmax){$.msg="invalid distance too far back",X.mode=k$;break}X.mode=C2;case C2:if(H===0)break $;if(w=K-H,X.offset>w){if(w=X.offset-w,w>X.whave){if(X.sane){$.msg="invalid distance too far back",X.mode=k$;break}}if(w>X.wnext)w-=X.wnext,B=X.wsize-w;else B=X.wnext-w;if(w>X.length)w=X.length;D=X.window}else D=J,B=G-X.offset,w=X.length;if(w>H)w=H;H-=w,X.length-=w;do J[G++]=D[B++];while(--w);if(X.length===0)X.mode=AY;break;case b2:if(H===0)break $;J[G++]=X.length,H--,X.mode=AY;break;case sq:if(X.wrap){while(j<32){if(z===0)break $;z--,W|=Y[U++]<<j,j+=8}if(K-=H,$.total_out+=K,X.total+=K,K)$.adler=X.check=X.flags?G0(X.check,J,K,G-K):Q7(X.check,J,K,G-K);if(K=H,(X.flags?W:f2(W))!==X.check){$.msg="incorrect data check",X.mode=k$;break}W=0,j=0}X.mode=x2;case x2:if(X.wrap&&X.flags){while(j<32){if(z===0)break $;z--,W+=Y[U++]<<j,j+=8}if(W!==(X.total&4294967295)){$.msg="incorrect length check",X.mode=k$;break}W=0,j=0}X.mode=k2;case k2:Z=bS;break $;case k$:Z=h2;break $;case J7:return X7;case fS:default:return x6}if($.next_out=G,$.avail_out=H,$.next_in=U,$.avail_in=z,X.hold=W,X.bits=j,X.wsize||K!==$.avail_out&&X.mode<k$&&(X.mode<sq||Q!==w2)){if(l2($,$.output,$.next_out,K-$.avail_out))return X.mode=J7,X7}if(N-=$.avail_in,K-=$.avail_out,$.total_in+=N,$.total_out+=K,X.total+=K,X.wrap&&K)$.adler=X.check=X.flags?G0(X.check,J,K,$.next_out-K):Q7(X.check,J,K,$.next_out-K);if($.data_type=X.bits+(X.last?64:0)+(X.mode===M0?128:0)+(X.mode===OY||X.mode===tq?256:0),(N===0&&K===0||Q===w2)&&Z===Z1)Z=kS;return Z}function dS($){if(!$||!$.state)return x6;var Q=$.state;if(Q.window)Q.window=null;return $.state=null,Z1}function lS($,Q){var X;if(!$||!$.state)return x6;if(X=$.state,(X.wrap&2)===0)return x6;return X.head=Q,Q.done=!1,Z1}function pS($,Q){var X=Q.length,Y,J,U;if(!$||!$.state)return x6;if(Y=$.state,Y.wrap!==0&&Y.mode!==FY)return x6;if(Y.mode===FY){if(J=1,J=Q7(J,Q,X,0),J!==Y.check)return h2}if(U=l2($,Q,X,X),U)return Y.mode=J7,X7;return Y.havedict=1,Z1}nS.inflateReset=u2;nS.inflateReset2=i2;nS.inflateResetKeep=c2;nS.inflateInit=cS;nS.inflateInit2=d2;nS.inflate=iS;nS.inflateEnd=dS;nS.inflateGetHeader=lS;nS.inflateSetDictionary=pS;nS.inflateInfo="pako inflate (from Nodeca project)"});var Y7=b((Yr,n2)=>{n2.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var o2=b((Ur,r2)=>{function YT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r2.exports=YT});var t2=b((zT)=>{var y4=p2(),UX=I0(),LY=iq(),l$=Y7(),U7=zY(),UT=dq(),qT=o2(),a2=Object.prototype.toString;function S1($){if(!(this instanceof S1))return new S1($);this.options=UX.assign({chunkSize:16384,windowBits:0,to:""},$||{});var Q=this.options;if(Q.raw&&Q.windowBits>=0&&Q.windowBits<16){if(Q.windowBits=-Q.windowBits,Q.windowBits===0)Q.windowBits=-15}if(Q.windowBits>=0&&Q.windowBits<16&&!($&&$.windowBits))Q.windowBits+=32;if(Q.windowBits>15&&Q.windowBits<48){if((Q.windowBits&15)===0)Q.windowBits|=15}this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new UT,this.strm.avail_out=0;var X=y4.inflateInit2(this.strm,Q.windowBits);if(X!==l$.Z_OK)throw Error(U7[X]);if(this.header=new qT,y4.inflateGetHeader(this.strm,this.header),Q.dictionary){if(typeof Q.dictionary==="string")Q.dictionary=LY.string2buf(Q.dictionary);else if(a2.call(Q.dictionary)==="[object ArrayBuffer]")Q.dictionary=new Uint8Array(Q.dictionary);if(Q.raw){if(X=y4.inflateSetDictionary(this.strm,Q.dictionary),X!==l$.Z_OK)throw Error(U7[X])}}}S1.prototype.push=function($,Q){var X=this.strm,Y=this.options.chunkSize,J=this.options.dictionary,U,G,z,H,W,j=!1;if(this.ended)return!1;if(G=Q===~~Q?Q:Q===!0?l$.Z_FINISH:l$.Z_NO_FLUSH,typeof $==="string")X.input=LY.binstring2buf($);else if(a2.call($)==="[object ArrayBuffer]")X.input=new Uint8Array($);else X.input=$;X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0)X.output=new UX.Buf8(Y),X.next_out=0,X.avail_out=Y;if(U=y4.inflate(X,l$.Z_NO_FLUSH),U===l$.Z_NEED_DICT&&J)U=y4.inflateSetDictionary(this.strm,J);if(U===l$.Z_BUF_ERROR&&j===!0)U=l$.Z_OK,j=!1;if(U!==l$.Z_STREAM_END&&U!==l$.Z_OK)return this.onEnd(U),this.ended=!0,!1;if(X.next_out){if(X.avail_out===0||U===l$.Z_STREAM_END||X.avail_in===0&&(G===l$.Z_FINISH||G===l$.Z_SYNC_FLUSH))if(this.options.to==="string"){if(z=LY.utf8border(X.output,X.next_out),H=X.next_out-z,W=LY.buf2string(X.output,z),X.next_out=H,X.avail_out=Y-H,H)UX.arraySet(X.output,X.output,z,H,0);this.onData(W)}else this.onData(UX.shrinkBuf(X.output,X.next_out))}if(X.avail_in===0&&X.avail_out===0)j=!0}while((X.avail_in>0||X.avail_out===0)&&U!==l$.Z_STREAM_END);if(U===l$.Z_STREAM_END)G=l$.Z_FINISH;if(G===l$.Z_FINISH)return U=y4.inflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===l$.Z_OK;if(G===l$.Z_SYNC_FLUSH)return this.onEnd(l$.Z_OK),X.avail_out=0,!0;return!0};S1.prototype.onData=function($){this.chunks.push($)};S1.prototype.onEnd=function($){if($===l$.Z_OK)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=UX.flattenChunks(this.chunks);this.chunks=[],this.err=$,this.msg=this.strm.msg};function q7($,Q){var X=new S1(Q);if(X.push($,!0),X.err)throw X.msg||U7[X.err];return X.result}function GT($,Q){return Q=Q||{},Q.raw=!0,q7($,Q)}zT.Inflate=S1;zT.inflate=q7;zT.inflateRaw=GT;zT.ungzip=q7});var $N=b((Gr,e2)=>{var KT=I0().assign,NT=X2(),VT=t2(),BT=Y7(),s2={};KT(s2,NT,VT,BT);e2.exports=s2});var XN=b((FT)=>{var DT=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",OT=$N(),QN=m$(),vY=I6(),AT=DT?"uint8array":"array";FT.magic="\b\x00";function T1($,Q){vY.call(this,"FlateWorker/"+$),this._pako=null,this._pakoAction=$,this._pakoOptions=Q,this.meta={}}QN.inherits(T1,vY);T1.prototype.processChunk=function($){if(this.meta=$.meta,this._pako===null)this._createPako();this._pako.push(QN.transformTo(AT,$.data),!1)};T1.prototype.flush=function(){if(vY.prototype.flush.call(this),this._pako===null)this._createPako();this._pako.push([],!0)};T1.prototype.cleanUp=function(){vY.prototype.cleanUp.call(this),this._pako=null};T1.prototype._createPako=function(){this._pako=new OT[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var $=this;this._pako.onData=function(Q){$.push({data:Q,meta:$.meta})}};FT.compressWorker=function($){return new T1("Deflate",$)};FT.uncompressWorker=function(){return new T1("Inflate",{})}});var G7=b((ET)=>{var JN=I6();ET.STORE={magic:"\x00\x00",compressWorker:function(){return new JN("STORE compression")},uncompressWorker:function(){return new JN("STORE decompression")}};ET.DEFLATE=XN()});var z7=b((RT)=>{RT.LOCAL_FILE_HEADER="PK\x03\x04";RT.CENTRAL_FILE_HEADER="PK\x01\x02";RT.CENTRAL_DIRECTORY_END="PK\x05\x06";RT.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07";RT.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06";RT.DATA_DESCRIPTOR="PK\x07\b"});var GN=b((jr,qN)=>{var _4=m$(),g4=I6(),W7=R4(),YN=YY(),IY=z7(),S$=function($,Q){var X="",Y;for(Y=0;Y<Q;Y++)X+=String.fromCharCode($&255),$=$>>>8;return X},kT=function($,Q){var X=$;if(!$)X=Q?16893:33204;return(X&65535)<<16},fT=function($){return($||0)&63},UN=function($,Q,X,Y,J,U){var{file:G,compression:z}=$,H=U!==W7.utf8encode,W=_4.transformTo("string",U(G.name)),j=_4.transformTo("string",W7.utf8encode(G.name)),N=G.comment,K=_4.transformTo("string",U(N)),w=_4.transformTo("string",W7.utf8encode(N)),B=j.length!==G.name.length,D=w.length!==N.length,F,V,O="",A="",L="",I=G.dir,P=G.date,v={crc32:0,compressedSize:0,uncompressedSize:0};if(!Q||X)v.crc32=$.crc32,v.compressedSize=$.compressedSize,v.uncompressedSize=$.uncompressedSize;var Z=0;if(Q)Z|=8;if(!H&&(B||D))Z|=2048;var R=0,C=0;if(I)R|=16;if(J==="UNIX")C=798,R|=kT(G.unixPermissions,I);else C=20,R|=fT(G.dosPermissions,I);if(F=P.getUTCHours(),F=F<<6,F=F|P.getUTCMinutes(),F=F<<5,F=F|P.getUTCSeconds()/2,V=P.getUTCFullYear()-1980,V=V<<4,V=V|P.getUTCMonth()+1,V=V<<5,V=V|P.getUTCDate(),B)A=S$(1,1)+S$(YN(W),4)+j,O+="up"+S$(A.length,2)+A;if(D)L=S$(1,1)+S$(YN(K),4)+w,O+="uc"+S$(L.length,2)+L;var S="";S+=`
\x00`,S+=S$(Z,2),S+=z.magic,S+=S$(F,2),S+=S$(V,2),S+=S$(v.crc32,4),S+=S$(v.compressedSize,4),S+=S$(v.uncompressedSize,4),S+=S$(W.length,2),S+=S$(O.length,2);var n=IY.LOCAL_FILE_HEADER+S+W+O,c=IY.CENTRAL_FILE_HEADER+S$(C,2)+S+S$(K.length,2)+"\x00\x00\x00\x00"+S$(R,4)+S$(Y,4)+W+O+K;return{fileRecord:n,dirRecord:c}},yT=function($,Q,X,Y,J){var U="",G=_4.transformTo("string",J(Y));return U=IY.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+S$($,2)+S$($,2)+S$(Q,4)+S$(X,4)+S$(G.length,2)+G,U},_T=function($){var Q="";return Q=IY.DATA_DESCRIPTOR+S$($.crc32,4)+S$($.compressedSize,4)+S$($.uncompressedSize,4),Q};function l6($,Q,X,Y){g4.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Q,this.zipPlatform=X,this.encodeFileName=Y,this.streamFiles=$,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_4.inherits(l6,g4);l6.prototype.push=function($){var Q=$.meta.percent||0,X=this.entriesCount,Y=this._sources.length;if(this.accumulate)this.contentBuffer.push($);else this.bytesWritten+=$.data.length,g4.prototype.push.call(this,{data:$.data,meta:{currentFile:this.currentFile,percent:X?(Q+100*(X-Y-1))/X:100}})};l6.prototype.openedSource=function($){this.currentSourceOffset=this.bytesWritten,this.currentFile=$.file.name;var Q=this.streamFiles&&!$.file.dir;if(Q){var X=UN($,Q,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:X.fileRecord,meta:{percent:0}})}else this.accumulate=!0};l6.prototype.closedSource=function($){this.accumulate=!1;var Q=this.streamFiles&&!$.file.dir,X=UN($,Q,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(X.dirRecord),Q)this.push({data:_T($),meta:{percent:100}});else{this.push({data:X.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null};l6.prototype.flush=function(){var $=this.bytesWritten;for(var Q=0;Q<this.dirRecords.length;Q++)this.push({data:this.dirRecords[Q],meta:{percent:100}});var X=this.bytesWritten-$,Y=yT(this.dirRecords.length,X,$,this.zipComment,this.encodeFileName);this.push({data:Y,meta:{percent:100}})};l6.prototype.prepareNextSource=function(){if(this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused)this.previous.pause();else this.previous.resume()};l6.prototype.registerPrevious=function($){this._sources.push($);var Q=this;return $.on("data",function(X){Q.processChunk(X)}),$.on("end",function(){if(Q.closedSource(Q.previous.streamInfo),Q._sources.length)Q.prepareNextSource();else Q.end()}),$.on("error",function(X){Q.error(X)}),this};l6.prototype.resume=function(){if(!g4.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};l6.prototype.error=function($){var Q=this._sources;if(!g4.prototype.error.call(this,$))return!1;for(var X=0;X<Q.length;X++)try{Q[X].error($)}catch(Y){}return!0};l6.prototype.lock=function(){g4.prototype.lock.call(this);var $=this._sources;for(var Q=0;Q<$.length;Q++)$[Q].lock()};qN.exports=l6});var zN=b((cT)=>{var gT=G7(),hT=GN(),mT=function($,Q){var X=$||Q,Y=gT[X];if(!Y)throw Error(X+" is not a valid compression method !");return Y};cT.generateWorker=function($,Q,X){var Y=new hT(Q.streamFiles,X,Q.platform,Q.encodeFileName),J=0;try{$.forEach(function(U,G){J++;var z=mT(G.options.compression,Q.compression),H=G.options.compressionOptions||Q.compressionOptions||{},W=G.dir,j=G.date;G._compressWorker(z,H).withStreamInfo("file",{name:U,dir:W,date:j,comment:G.comment||"",unixPermissions:G.unixPermissions,dosPermissions:G.dosPermissions}).pipe(Y)}),Y.entriesCount=J}catch(U){Y.error(U)}return Y}});var HN=b((Kr,WN)=>{var iT=m$(),EY=I6();function qX($,Q){EY.call(this,"Nodejs stream input adapter for "+$),this._upstreamEnded=!1,this._bindStream(Q)}iT.inherits(qX,EY);qX.prototype._bindStream=function($){var Q=this;this._stream=$,$.pause(),$.on("data",function(X){Q.push({data:X,meta:{percent:0}})}).on("error",function(X){if(Q.isPaused)this.generatedError=X;else Q.error(X)}).on("end",function(){if(Q.isPaused)Q._upstreamEnded=!0;else Q.end()})};qX.prototype.pause=function(){if(!EY.prototype.pause.call(this))return!1;return this._stream.pause(),!0};qX.prototype.resume=function(){if(!EY.prototype.resume.call(this))return!1;if(this._upstreamEnded)this.end();else this._stream.resume();return!0};WN.exports=qX});var FN=b((Nr,AN)=>{var dT=R4(),GX=m$(),NN=I6(),lT=Kq(),VN=Nq(),jN=UY(),pT=wK(),nT=zN(),wN=hQ(),rT=HN(),BN=function($,Q,X){var Y=GX.getTypeOf(Q),J,U=GX.extend(X||{},VN);if(U.date=U.date||new Date,U.compression!==null)U.compression=U.compression.toUpperCase();if(typeof U.unixPermissions==="string")U.unixPermissions=parseInt(U.unixPermissions,8);if(U.unixPermissions&&U.unixPermissions&16384)U.dir=!0;if(U.dosPermissions&&U.dosPermissions&16)U.dir=!0;if(U.dir)$=DN($);if(U.createFolders&&(J=oT($)))ON.call(this,J,!0);var G=Y==="string"&&U.binary===!1&&U.base64===!1;if(!X||typeof X.binary>"u")U.binary=!G;var z=Q instanceof jN&&Q.uncompressedSize===0;if(z||U.dir||!Q||Q.length===0)U.base64=!1,U.binary=!0,Q="",U.compression="STORE",Y="string";var H=null;if(Q instanceof jN||Q instanceof NN)H=Q;else if(wN.isNode&&wN.isStream(Q))H=new rT($,Q);else H=GX.prepareContent($,Q,U.binary,U.optimizedBinaryString,U.base64);var W=new pT($,H,U);this.files[$]=W},oT=function($){if($.slice(-1)==="/")$=$.substring(0,$.length-1);var Q=$.lastIndexOf("/");return Q>0?$.substring(0,Q):""},DN=function($){if($.slice(-1)!=="/")$+="/";return $},ON=function($,Q){if(Q=typeof Q<"u"?Q:VN.createFolders,$=DN($),!this.files[$])BN.call(this,$,null,{dir:!0,createFolders:Q});return this.files[$]};function KN($){return Object.prototype.toString.call($)==="[object RegExp]"}var aT={load:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function($){var Q,X,Y;for(Q in this.files)if(Y=this.files[Q],X=Q.slice(this.root.length,Q.length),X&&Q.slice(0,this.root.length)===this.root)$(X,Y)},filter:function($){var Q=[];return this.forEach(function(X,Y){if($(X,Y))Q.push(Y)}),Q},file:function($,Q,X){if(arguments.length===1)if(KN($)){var Y=$;return this.filter(function(U,G){return!G.dir&&Y.test(U)})}else{var J=this.files[this.root+$];if(J&&!J.dir)return J;else return null}else $=this.root+$,BN.call(this,$,Q,X);return this},folder:function($){if(!$)return this;if(KN($))return this.filter(function(J,U){return U.dir&&$.test(J)});var Q=this.root+$,X=ON.call(this,Q),Y=this.clone();return Y.root=X.name,Y},remove:function($){$=this.root+$;var Q=this.files[$];if(!Q){if($.slice(-1)!=="/")$+="/";Q=this.files[$]}if(Q&&!Q.dir)delete this.files[$];else{var X=this.filter(function(J,U){return U.name.slice(0,$.length)===$});for(var Y=0;Y<X.length;Y++)delete this.files[X[Y].name]}return this},generate:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function($){var Q,X={};try{if(X=GX.extend($||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:dT.utf8encode}),X.type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring")X.type="string";if(!X.type)throw Error("No output type specified.");if(GX.checkSupport(X.type),X.platform==="darwin"||X.platform==="freebsd"||X.platform==="linux"||X.platform==="sunos")X.platform="UNIX";if(X.platform==="win32")X.platform="DOS";var Y=X.comment||this.comment||"";Q=nT.generateWorker(this,X,Y)}catch(J){Q=new NN("error"),Q.error(J)}return new lT(Q,X.type||"string",X.mimeType)},generateAsync:function($,Q){return this.generateInternalStream($).accumulate(Q)},generateNodeStream:function($,Q){if($=$||{},!$.type)$.type="nodebuffer";return this.generateInternalStream($).toNodejsStream(Q)}};AN.exports=aT});var H7=b((Vr,vN)=>{var tT=m$();function LN($){this.data=$,this.length=$.length,this.index=0,this.zero=0}LN.prototype={checkOffset:function($){this.checkIndex(this.index+$)},checkIndex:function($){if(this.length<this.zero+$||$<0)throw Error("End of data reached (data length = "+this.length+", asked index = "+$+"). Corrupted zip ?")},setIndex:function($){this.checkIndex($),this.index=$},skip:function($){this.setIndex(this.index+$)},byteAt:function(){},readInt:function($){var Q=0,X;this.checkOffset($);for(X=this.index+$-1;X>=this.index;X--)Q=(Q<<8)+this.byteAt(X);return this.index+=$,Q},readString:function($){return tT.transformTo("string",this.readData($))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var $=this.readInt(4);return new Date(Date.UTC(($>>25&127)+1980,($>>21&15)-1,$>>16&31,$>>11&31,$>>5&63,($&31)<<1))}};vN.exports=LN});var j7=b((Br,EN)=>{var IN=H7(),sT=m$();function h4($){IN.call(this,$);for(var Q=0;Q<this.data.length;Q++)$[Q]=$[Q]&255}sT.inherits(h4,IN);h4.prototype.byteAt=function($){return this.data[this.zero+$]};h4.prototype.lastIndexOfSignature=function($){var Q=$.charCodeAt(0),X=$.charCodeAt(1),Y=$.charCodeAt(2),J=$.charCodeAt(3);for(var U=this.length-4;U>=0;--U)if(this.data[U]===Q&&this.data[U+1]===X&&this.data[U+2]===Y&&this.data[U+3]===J)return U-this.zero;return-1};h4.prototype.readAndCheckSignature=function($){var Q=$.charCodeAt(0),X=$.charCodeAt(1),Y=$.charCodeAt(2),J=$.charCodeAt(3),U=this.readData(4);return Q===U[0]&&X===U[1]&&Y===U[2]&&J===U[3]};h4.prototype.readData=function($){if(this.checkOffset($),$===0)return[];var Q=this.data.slice(this.zero+this.index,this.zero+this.index+$);return this.index+=$,Q};EN.exports=h4});var RN=b((Dr,PN)=>{var MN=H7(),eT=m$();function m4($){MN.call(this,$)}eT.inherits(m4,MN);m4.prototype.byteAt=function($){return this.data.charCodeAt(this.zero+$)};m4.prototype.lastIndexOfSignature=function($){return this.data.lastIndexOf($)-this.zero};m4.prototype.readAndCheckSignature=function($){var Q=this.readData(4);return $===Q};m4.prototype.readData=function($){this.checkOffset($);var Q=this.data.slice(this.zero+this.index,this.zero+this.index+$);return this.index+=$,Q};PN.exports=m4});var K7=b((Or,SN)=>{var ZN=j7(),$C=m$();function w7($){ZN.call(this,$)}$C.inherits(w7,ZN);w7.prototype.readData=function($){if(this.checkOffset($),$===0)return new Uint8Array(0);var Q=this.data.subarray(this.zero+this.index,this.zero+this.index+$);return this.index+=$,Q};SN.exports=w7});var bN=b((Ar,CN)=>{var TN=K7(),QC=m$();function N7($){TN.call(this,$)}QC.inherits(N7,TN);N7.prototype.readData=function($){this.checkOffset($);var Q=this.data.slice(this.zero+this.index,this.zero+this.index+$);return this.index+=$,Q};CN.exports=N7});var V7=b((Fr,kN)=>{var MY=m$(),xN=v0(),XC=j7(),JC=RN(),YC=bN(),UC=K7();kN.exports=function($){var Q=MY.getTypeOf($);if(MY.checkSupport(Q),Q==="string"&&!xN.uint8array)return new JC($);if(Q==="nodebuffer")return new YC($);if(xN.uint8array)return new UC(MY.transformTo("uint8array",$));return new XC(MY.transformTo("array",$))}});var gN=b((Lr,_N)=>{var B7=V7(),U1=m$(),qC=UY(),fN=YY(),PY=R4(),RY=G7(),GC=v0(),zC=0,WC=3,HC=function($){for(var Q in RY){if(!Object.prototype.hasOwnProperty.call(RY,Q))continue;if(RY[Q].magic===$)return RY[Q]}return null};function yN($,Q){this.options=$,this.loadOptions=Q}yN.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function($){var Q,X;if($.skip(22),this.fileNameLength=$.readInt(2),X=$.readInt(2),this.fileName=$.readData(this.fileNameLength),$.skip(X),this.compressedSize===-1||this.uncompressedSize===-1)throw Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(Q=HC(this.compressionMethod),Q===null)throw Error("Corrupted zip : compression "+U1.pretty(this.compressionMethod)+" unknown (inner file : "+U1.transformTo("string",this.fileName)+")");this.decompressed=new qC(this.compressedSize,this.uncompressedSize,this.crc32,Q,$.readData(this.compressedSize))},readCentralPart:function($){this.versionMadeBy=$.readInt(2),$.skip(2),this.bitFlag=$.readInt(2),this.compressionMethod=$.readString(2),this.date=$.readDate(),this.crc32=$.readInt(4),this.compressedSize=$.readInt(4),this.uncompressedSize=$.readInt(4);var Q=$.readInt(2);if(this.extraFieldsLength=$.readInt(2),this.fileCommentLength=$.readInt(2),this.diskNumberStart=$.readInt(2),this.internalFileAttributes=$.readInt(2),this.externalFileAttributes=$.readInt(4),this.localHeaderOffset=$.readInt(4),this.isEncrypted())throw Error("Encrypted zip are not supported");$.skip(Q),this.readExtraFields($),this.parseZIP64ExtraField($),this.fileComment=$.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var $=this.versionMadeBy>>8;if(this.dir=this.externalFileAttributes&16?!0:!1,$===zC)this.dosPermissions=this.externalFileAttributes&63;if($===WC)this.unixPermissions=this.externalFileAttributes>>16&65535;if(!this.dir&&this.fileNameStr.slice(-1)==="/")this.dir=!0},parseZIP64ExtraField:function(){if(!this.extraFields[1])return;var $=B7(this.extraFields[1].value);if(this.uncompressedSize===U1.MAX_VALUE_32BITS)this.uncompressedSize=$.readInt(8);if(this.compressedSize===U1.MAX_VALUE_32BITS)this.compressedSize=$.readInt(8);if(this.localHeaderOffset===U1.MAX_VALUE_32BITS)this.localHeaderOffset=$.readInt(8);if(this.diskNumberStart===U1.MAX_VALUE_32BITS)this.diskNumberStart=$.readInt(4)},readExtraFields:function($){var Q=$.index+this.extraFieldsLength,X,Y,J;if(!this.extraFields)this.extraFields={};while($.index+4<Q)X=$.readInt(2),Y=$.readInt(2),J=$.readData(Y),this.extraFields[X]={id:X,length:Y,value:J};$.setIndex(Q)},handleUTF8:function(){var $=GC.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=PY.utf8decode(this.fileName),this.fileCommentStr=PY.utf8decode(this.fileComment);else{var Q=this.findExtraFieldUnicodePath();if(Q!==null)this.fileNameStr=Q;else{var X=U1.transformTo($,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(X)}var Y=this.findExtraFieldUnicodeComment();if(Y!==null)this.fileCommentStr=Y;else{var J=U1.transformTo($,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(J)}}},findExtraFieldUnicodePath:function(){var $=this.extraFields[28789];if($){var Q=B7($.value);if(Q.readInt(1)!==1)return null;if(fN(this.fileName)!==Q.readInt(4))return null;return PY.utf8decode(Q.readData($.length-5))}return null},findExtraFieldUnicodeComment:function(){var $=this.extraFields[25461];if($){var Q=B7($.value);if(Q.readInt(1)!==1)return null;if(fN(this.fileComment)!==Q.readInt(4))return null;return PY.utf8decode(Q.readData($.length-5))}return null}};_N.exports=yN});var cN=b((vr,mN)=>{var jC=V7(),P0=m$(),p6=z7(),wC=gN(),KC=v0();function hN($){this.files=[],this.loadOptions=$}hN.prototype={checkSignature:function($){if(!this.reader.readAndCheckSignature($)){this.reader.index-=4;var Q=this.reader.readString(4);throw Error("Corrupted zip or bug: unexpected signature ("+P0.pretty(Q)+", expected "+P0.pretty($)+")")}},isSignature:function($,Q){var X=this.reader.index;this.reader.setIndex($);var Y=this.reader.readString(4),J=Y===Q;return this.reader.setIndex(X),J},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var $=this.reader.readData(this.zipCommentLength),Q=KC.uint8array?"uint8array":"array",X=P0.transformTo(Q,$);this.zipComment=this.loadOptions.decodeFileName(X)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};var $=this.zip64EndOfCentralSize-44,Q=0,X,Y,J;while(Q<$)X=this.reader.readInt(2),Y=this.reader.readInt(4),J=this.reader.readData(Y),this.zip64ExtensibleData[X]={id:X,length:Y,value:J}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var $,Q;for($=0;$<this.files.length;$++)Q=this.files[$],this.reader.setIndex(Q.localHeaderOffset),this.checkSignature(p6.LOCAL_FILE_HEADER),Q.readLocalPart(this.reader),Q.handleUTF8(),Q.processAttributes()},readCentralDir:function(){var $;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(p6.CENTRAL_FILE_HEADER))$=new wC({zip64:this.zip64},this.loadOptions),$.readCentralPart(this.reader),this.files.push($);if(this.centralDirRecords!==this.files.length){if(this.centralDirRecords!==0&&this.files.length===0)throw Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)}},readEndOfCentral:function(){var $=this.reader.lastIndexOfSignature(p6.CENTRAL_DIRECTORY_END);if($<0){var Q=!this.isSignature(0,p6.LOCAL_FILE_HEADER);if(Q)throw Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex($);var X=$;if(this.checkSignature(p6.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===P0.MAX_VALUE_16BITS||this.diskWithCentralDirStart===P0.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===P0.MAX_VALUE_16BITS||this.centralDirRecords===P0.MAX_VALUE_16BITS||this.centralDirSize===P0.MAX_VALUE_32BITS||this.centralDirOffset===P0.MAX_VALUE_32BITS){if(this.zip64=!0,$=this.reader.lastIndexOfSignature(p6.ZIP64_CENTRAL_DIRECTORY_LOCATOR),$<0)throw Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex($),this.checkSignature(p6.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p6.ZIP64_CENTRAL_DIRECTORY_END)){if(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p6.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0)throw Error("Corrupted zip: can't find the ZIP64 end of central directory")}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p6.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Y=this.centralDirOffset+this.centralDirSize;if(this.zip64)Y+=20,Y+=12+this.zip64EndOfCentralSize;var J=X-Y;if(J>0)if(this.isSignature(X,p6.CENTRAL_FILE_HEADER));else this.reader.zero=J;else if(J<0)throw Error("Corrupted zip: missing "+Math.abs(J)+" bytes.")},prepareReader:function($){this.reader=jC($)},load:function($){this.prepareReader($),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};mN.exports=hN});var dN=b((Ir,iN)=>{var D7=m$(),ZY=E4(),NC=R4(),VC=cN(),BC=Dq(),uN=hQ();function DC($){return new ZY.Promise(function(Q,X){var Y=$.decompressed.getContentWorker().pipe(new BC);Y.on("error",function(J){X(J)}).on("end",function(){if(Y.streamInfo.crc32!==$.decompressed.crc32)X(Error("Corrupted zip : CRC32 mismatch"));else Q()}).resume()})}iN.exports=function($,Q){var X=this;if(Q=D7.extend(Q||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:NC.utf8decode}),uN.isNode&&uN.isStream($))return ZY.Promise.reject(Error("JSZip can't accept a stream when loading a zip file."));return D7.prepareContent("the loaded zip file",$,!0,Q.optimizedBinaryString,Q.base64).then(function(Y){var J=new VC(Q);return J.load(Y),J}).then(function(J){var U=[ZY.Promise.resolve(J)],G=J.files;if(Q.checkCRC32)for(var z=0;z<G.length;z++)U.push(DC(G[z]));return ZY.Promise.all(U)}).then(function(J){var U=J.shift(),G=U.files;for(var z=0;z<G.length;z++){var H=G[z],W=H.fileNameStr,j=D7.resolve(H.fileNameStr);if(X.file(j,H.decompressed,{binary:!0,optimizedBinaryString:!0,date:H.date,dir:H.dir,comment:H.fileCommentStr.length?H.fileCommentStr:null,unixPermissions:H.unixPermissions,dosPermissions:H.dosPermissions,createFolders:Q.createFolders}),!H.dir)X.file(j).unsafeOriginalName=W}if(U.zipComment.length)X.comment=U.zipComment;return X})}});var pN=b((Er,lN)=>{function k6(){if(!(this instanceof k6))return new k6;if(arguments.length)throw Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var $=new k6;for(var Q in this)if(typeof this[Q]!=="function")$[Q]=this[Q];return $}}k6.prototype=FN();k6.prototype.loadAsync=dN();k6.support=v0();k6.defaults=Nq();k6.version="3.10.1";k6.loadAsync=function($,Q){return new k6().loadAsync($,Q)};k6.external=E4();lN.exports=k6});var HW=b((y$$,tD)=>{var{defineProperty:WW,getOwnPropertyDescriptor:xg,getOwnPropertyNames:kg}=Object,fg=Object.prototype.hasOwnProperty,yg=($,Q)=>{for(var X in Q)WW($,X,{get:Q[X],enumerable:!0})},_g=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of kg(Q))if(!fg.call($,J)&&J!==X)WW($,J,{get:()=>Q[J],enumerable:!(Y=xg(Q,J))||Y.enumerable})}return $},gg=($)=>_g(WW({},"__esModule",{value:!0}),$),oD={};yg(oD,{SYMBOL_FOR_REQ_CONTEXT:()=>aD,getContext:()=>hg});tD.exports=gg(oD);var aD=Symbol.for("@vercel/request-context");function hg(){return globalThis[aD]?.get?.()??{}}});var eX=b((_$$,$O)=>{var{defineProperty:jW,getOwnPropertyDescriptor:mg,getOwnPropertyNames:cg}=Object,ug=Object.prototype.hasOwnProperty,ig=($,Q)=>{for(var X in Q)jW($,X,{get:Q[X],enumerable:!0})},dg=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of cg(Q))if(!ug.call($,J)&&J!==X)jW($,J,{get:()=>Q[J],enumerable:!(Y=mg(Q,J))||Y.enumerable})}return $},lg=($)=>dg(jW({},"__esModule",{value:!0}),$),sD={};ig(sD,{VercelOidcTokenError:()=>eD});$O.exports=lg(sD);class eD extends Error{constructor($,Q){super($);this.name="VercelOidcTokenError",this.cause=Q}toString(){if(this.cause)return`${this.name}: ${this.message}: ${this.cause}`;return`${this.name}: ${this.message}`}}});var UO=b((g$$,YO)=>{var{create:pg,defineProperty:m5,getOwnPropertyDescriptor:ng,getOwnPropertyNames:rg,getPrototypeOf:og}=Object,ag=Object.prototype.hasOwnProperty,tg=($,Q)=>{for(var X in Q)m5($,X,{get:Q[X],enumerable:!0})},XO=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of rg(Q))if(!ag.call($,J)&&J!==X)m5($,J,{get:()=>Q[J],enumerable:!(Y=ng(Q,J))||Y.enumerable})}return $},KW=($,Q,X)=>(X=$!=null?pg(og($)):{},XO(Q||!$||!$.__esModule?m5(X,"default",{value:$,enumerable:!0}):X,$)),sg=($)=>XO(m5({},"__esModule",{value:!0}),$),JO={};tg(JO,{findRootDir:()=>$h,getUserDataDir:()=>Qh});YO.exports=sg(JO);var $J=KW(G6("path")),eg=KW(G6("fs")),wW=KW(G6("os")),QO=eX();function $h(){try{let $=process.cwd();while($!==$J.default.dirname($)){let Q=$J.default.join($,".vercel");if(eg.default.existsSync(Q))return $;$=$J.default.dirname($)}}catch($){throw new QO.VercelOidcTokenError("Token refresh only supported in node server environments")}throw new QO.VercelOidcTokenError("Unable to find root directory")}function Qh(){if(process.env.XDG_DATA_HOME)return process.env.XDG_DATA_HOME;switch(wW.default.platform()){case"darwin":return $J.default.join(wW.default.homedir(),"Library/Application Support");case"linux":return $J.default.join(wW.default.homedir(),".local/share");case"win32":if(process.env.LOCALAPPDATA)return process.env.LOCALAPPDATA;return null;default:return null}}});var VW=b((h$$,HO)=>{var{create:Xh,defineProperty:c5,getOwnPropertyDescriptor:Jh,getOwnPropertyNames:Yh,getPrototypeOf:Uh}=Object,qh=Object.prototype.hasOwnProperty,Gh=($,Q)=>{for(var X in Q)c5($,X,{get:Q[X],enumerable:!0})},qO=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of Yh(Q))if(!qh.call($,J)&&J!==X)c5($,J,{get:()=>Q[J],enumerable:!(Y=Jh(Q,J))||Y.enumerable})}return $},GO=($,Q,X)=>(X=$!=null?Xh(Uh($)):{},qO(Q||!$||!$.__esModule?c5(X,"default",{value:$,enumerable:!0}):X,$)),zh=($)=>qO(c5({},"__esModule",{value:!0}),$),zO={};Gh(zO,{assertVercelOidcTokenResponse:()=>NW,findProjectInfo:()=>jh,getTokenPayload:()=>Nh,getVercelCliToken:()=>Wh,getVercelDataDir:()=>WO,getVercelOidcToken:()=>Hh,isExpired:()=>Bh,loadToken:()=>Kh,saveToken:()=>wh});HO.exports=zh(zO);var XQ=GO(G6("path")),g0=GO(G6("fs")),h0=eX(),u5=UO();function WO(){let Q=(0,u5.getUserDataDir)();if(!Q)return null;return XQ.join(Q,"com.vercel.cli")}function Wh(){let $=WO();if(!$)return null;let Q=XQ.join($,"auth.json");if(!g0.existsSync(Q))return null;let X=g0.readFileSync(Q,"utf8");if(!X)return null;return JSON.parse(X).token}async function Hh($,Q,X){try{let Y=`https://api.vercel.com/v1/projects/${Q}/token?source=vercel-oidc-refresh${X?`&teamId=${X}`:""}`,J=await fetch(Y,{method:"POST",headers:{Authorization:`Bearer ${$}`}});if(!J.ok)throw new h0.VercelOidcTokenError(`Failed to refresh OIDC token: ${J.statusText}`);let U=await J.json();return NW(U),U}catch(Y){throw new h0.VercelOidcTokenError("Failed to refresh OIDC token",Y)}}function NW($){if(!$||typeof $!=="object")throw TypeError("Expected an object");if(!("token"in $)||typeof $.token!=="string")throw TypeError("Expected a string-valued token property")}function jh(){let $=(0,u5.findRootDir)();if(!$)throw new h0.VercelOidcTokenError("Unable to find root directory");try{let Q=XQ.join($,".vercel","project.json");if(!g0.existsSync(Q))throw new h0.VercelOidcTokenError("project.json not found");let X=JSON.parse(g0.readFileSync(Q,"utf8"));if(typeof X.projectId!=="string"&&typeof X.orgId!=="string")throw TypeError("Expected a string-valued projectId property");return{projectId:X.projectId,teamId:X.orgId}}catch(Q){throw new h0.VercelOidcTokenError("Unable to find project ID",Q)}}function wh($,Q){try{let X=(0,u5.getUserDataDir)();if(!X)throw new h0.VercelOidcTokenError("Unable to find user data directory");let Y=XQ.join(X,"com.vercel.token",`${Q}.json`),J=JSON.stringify($);g0.mkdirSync(XQ.dirname(Y),{mode:432,recursive:!0}),g0.writeFileSync(Y,J),g0.chmodSync(Y,432);return}catch(X){throw new h0.VercelOidcTokenError("Failed to save token",X)}}function Kh($){try{let Q=(0,u5.getUserDataDir)();if(!Q)return null;let X=XQ.join(Q,"com.vercel.token",`${$}.json`);if(!g0.existsSync(X))return null;let Y=JSON.parse(g0.readFileSync(X,"utf8"));return NW(Y),Y}catch(Q){throw new h0.VercelOidcTokenError("Failed to load token",Q)}}function Nh($){let Q=$.split(".");if(Q.length!==3)throw new h0.VercelOidcTokenError("Invalid token");let X=Q[1].replace(/-/g,"+").replace(/_/g,"/"),Y=X.padEnd(X.length+(4-X.length%4)%4,"=");return JSON.parse(Buffer.from(Y,"base64").toString("utf8"))}var Vh=900000;function Bh($){return $.exp*1000<Date.now()+Vh}});var KO=b((m$$,wO)=>{var{defineProperty:DW,getOwnPropertyDescriptor:Dh,getOwnPropertyNames:Oh}=Object,Ah=Object.prototype.hasOwnProperty,Fh=($,Q)=>{for(var X in Q)DW($,X,{get:Q[X],enumerable:!0})},Lh=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of Oh(Q))if(!Ah.call($,J)&&J!==X)DW($,J,{get:()=>Q[J],enumerable:!(Y=Dh(Q,J))||Y.enumerable})}return $},vh=($)=>Lh(DW({},"__esModule",{value:!0}),$),jO={};Fh(jO,{refreshToken:()=>Ih});wO.exports=vh(jO);var BW=eX(),m1=VW();async function Ih(){let{projectId:$,teamId:Q}=(0,m1.findProjectInfo)(),X=(0,m1.loadToken)($);if(!X||(0,m1.isExpired)((0,m1.getTokenPayload)(X.token))){let Y=(0,m1.getVercelCliToken)();if(!Y)throw new BW.VercelOidcTokenError("Failed to refresh OIDC token: login to vercel cli");if(!$)throw new BW.VercelOidcTokenError("Failed to refresh OIDC token: project id not found");if(X=await(0,m1.getVercelOidcToken)(Y,$,Q),!X)throw new BW.VercelOidcTokenError("Failed to refresh OIDC token");(0,m1.saveToken)(X,$)}process.env.VERCEL_OIDC_TOKEN=X.token;return}});var BO=b((c$$,VO)=>{var{defineProperty:AW,getOwnPropertyDescriptor:Eh,getOwnPropertyNames:Mh}=Object,Ph=Object.prototype.hasOwnProperty,Rh=($,Q)=>{for(var X in Q)AW($,X,{get:Q[X],enumerable:!0})},Zh=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of Mh(Q))if(!Ph.call($,J)&&J!==X)AW($,J,{get:()=>Q[J],enumerable:!(Y=Eh(Q,J))||Y.enumerable})}return $},Sh=($)=>Zh(AW({},"__esModule",{value:!0}),$),NO={};Rh(NO,{getVercelOidcToken:()=>bh,getVercelOidcTokenSync:()=>OW});VO.exports=Sh(NO);var Th=HW(),Ch=eX();async function bh(){let $="",Q;try{$=OW()}catch(X){Q=X}try{let[{getTokenPayload:X,isExpired:Y},{refreshToken:J}]=await Promise.all([await Promise.resolve().then(() => u0(VW(),1)),await Promise.resolve().then(() => u0(KO(),1))]);if(!$||Y(X($)))await J(),$=OW()}catch(X){if(Q?.message&&X instanceof Error)X.message=`${Q.message}
${X.message}`;throw new Ch.VercelOidcTokenError("Failed to refresh OIDC token",X)}return $}function OW(){let $=(0,Th.getContext)().headers?.["x-vercel-oidc-token"]??process.env.VERCEL_OIDC_TOKEN;if(!$)throw Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return $}});var LW=b((u$$,AO)=>{var{defineProperty:FW,getOwnPropertyDescriptor:xh,getOwnPropertyNames:kh}=Object,fh=Object.prototype.hasOwnProperty,yh=($,Q)=>{for(var X in Q)FW($,X,{get:Q[X],enumerable:!0})},_h=($,Q,X,Y)=>{if(Q&&typeof Q==="object"||typeof Q==="function"){for(let J of kh(Q))if(!fh.call($,J)&&J!==X)FW($,J,{get:()=>Q[J],enumerable:!(Y=xh(Q,J))||Y.enumerable})}return $},gh=($)=>_h(FW({},"__esModule",{value:!0}),$),OO={};yh(OO,{getContext:()=>hh.getContext,getVercelOidcToken:()=>DO.getVercelOidcToken,getVercelOidcTokenSync:()=>DO.getVercelOidcTokenSync});AO.exports=gh(OO);var DO=BO(),hh=HW()});var QA=b((eO)=>{Object.defineProperty(eO,"__esModule",{value:!0});eO._globalThis=void 0;eO._globalThis=typeof globalThis==="object"?globalThis:global});var XA=b((u1)=>{var Hm=u1&&u1.__createBinding||(Object.create?function($,Q,X,Y){if(Y===void 0)Y=X;Object.defineProperty($,Y,{enumerable:!0,get:function(){return Q[X]}})}:function($,Q,X,Y){if(Y===void 0)Y=X;$[Y]=Q[X]}),jm=u1&&u1.__exportStar||function($,Q){for(var X in $)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(Q,X))Hm(Q,$,X)};Object.defineProperty(u1,"__esModule",{value:!0});jm(QA(),u1)});var JA=b((i1)=>{var wm=i1&&i1.__createBinding||(Object.create?function($,Q,X,Y){if(Y===void 0)Y=X;Object.defineProperty($,Y,{enumerable:!0,get:function(){return Q[X]}})}:function($,Q,X,Y){if(Y===void 0)Y=X;$[Y]=Q[X]}),Km=i1&&i1.__exportStar||function($,Q){for(var X in $)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(Q,X))wm(Q,$,X)};Object.defineProperty(i1,"__esModule",{value:!0});Km(XA(),i1)});var EW=b((YA)=>{Object.defineProperty(YA,"__esModule",{value:!0});YA.VERSION=void 0;YA.VERSION="1.9.0"});var HA=b((zA)=>{Object.defineProperty(zA,"__esModule",{value:!0});zA.isCompatible=zA._makeCompatibilityCheck=void 0;var Nm=EW(),qA=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function GA($){let Q=new Set([$]),X=new Set,Y=$.match(qA);if(!Y)return()=>!1;let J={major:+Y[1],minor:+Y[2],patch:+Y[3],prerelease:Y[4]};if(J.prerelease!=null)return function(H){return H===$};function U(z){return X.add(z),!1}function G(z){return Q.add(z),!0}return function(H){if(Q.has(H))return!0;if(X.has(H))return!1;let W=H.match(qA);if(!W)return U(H);let j={major:+W[1],minor:+W[2],patch:+W[3],prerelease:W[4]};if(j.prerelease!=null)return U(H);if(J.major!==j.major)return U(H);if(J.major===0){if(J.minor===j.minor&&J.patch<=j.patch)return G(H);return U(H)}if(J.minor<=j.minor)return G(H);return U(H)}}zA._makeCompatibilityCheck=GA;zA.isCompatible=GA(Nm.VERSION)});var d1=b((jA)=>{Object.defineProperty(jA,"__esModule",{value:!0});jA.unregisterGlobal=jA.getGlobal=jA.registerGlobal=void 0;var Bm=JA(),JQ=EW(),Dm=HA(),Om=JQ.VERSION.split(".")[0],XJ=Symbol.for(`opentelemetry.js.api.${Om}`),JJ=Bm._globalThis;function Am($,Q,X,Y=!1){var J;let U=JJ[XJ]=(J=JJ[XJ])!==null&&J!==void 0?J:{version:JQ.VERSION};if(!Y&&U[$]){let G=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${$}`);return X.error(G.stack||G.message),!1}if(U.version!==JQ.VERSION){let G=Error(`@opentelemetry/api: Registration of version v${U.version} for ${$} does not match previously registered API v${JQ.VERSION}`);return X.error(G.stack||G.message),!1}return U[$]=Q,X.debug(`@opentelemetry/api: Registered a global for ${$} v${JQ.VERSION}.`),!0}jA.registerGlobal=Am;function Fm($){var Q,X;let Y=(Q=JJ[XJ])===null||Q===void 0?void 0:Q.version;if(!Y||!(0,Dm.isCompatible)(Y))return;return(X=JJ[XJ])===null||X===void 0?void 0:X[$]}jA.getGlobal=Fm;function Lm($,Q){Q.debug(`@opentelemetry/api: Unregistering a global for ${$} v${JQ.VERSION}.`);let X=JJ[XJ];if(X)delete X[$]}jA.unregisterGlobal=Lm});var BA=b((NA)=>{Object.defineProperty(NA,"__esModule",{value:!0});NA.DiagComponentLogger=void 0;var Em=d1();class KA{constructor($){this._namespace=$.namespace||"DiagComponentLogger"}debug(...$){return YJ("debug",this._namespace,$)}error(...$){return YJ("error",this._namespace,$)}info(...$){return YJ("info",this._namespace,$)}warn(...$){return YJ("warn",this._namespace,$)}verbose(...$){return YJ("verbose",this._namespace,$)}}NA.DiagComponentLogger=KA;function YJ($,Q,X){let Y=(0,Em.getGlobal)("diag");if(!Y)return;return X.unshift(Q),Y[$](...X)}});var d5=b((DA)=>{Object.defineProperty(DA,"__esModule",{value:!0});DA.DiagLogLevel=void 0;var Mm;(function($){$[$.NONE=0]="NONE",$[$.ERROR=30]="ERROR",$[$.WARN=50]="WARN",$[$.INFO=60]="INFO",$[$.DEBUG=70]="DEBUG",$[$.VERBOSE=80]="VERBOSE",$[$.ALL=9999]="ALL"})(Mm=DA.DiagLogLevel||(DA.DiagLogLevel={}))});var FA=b((OA)=>{Object.defineProperty(OA,"__esModule",{value:!0});OA.createLogLevelDiagLogger=void 0;var m0=d5();function Pm($,Q){if($<m0.DiagLogLevel.NONE)$=m0.DiagLogLevel.NONE;else if($>m0.DiagLogLevel.ALL)$=m0.DiagLogLevel.ALL;Q=Q||{};function X(Y,J){let U=Q[Y];if(typeof U==="function"&&$>=J)return U.bind(Q);return function(){}}return{error:X("error",m0.DiagLogLevel.ERROR),warn:X("warn",m0.DiagLogLevel.WARN),info:X("info",m0.DiagLogLevel.INFO),debug:X("debug",m0.DiagLogLevel.DEBUG),verbose:X("verbose",m0.DiagLogLevel.VERBOSE)}}OA.createLogLevelDiagLogger=Pm});var l1=b((vA)=>{Object.defineProperty(vA,"__esModule",{value:!0});vA.DiagAPI=void 0;var Rm=BA(),Zm=FA(),LA=d5(),l5=d1(),Sm="diag";class PW{constructor(){function $(Y){return function(...J){let U=(0,l5.getGlobal)("diag");if(!U)return;return U[Y](...J)}}let Q=this,X=(Y,J={logLevel:LA.DiagLogLevel.INFO})=>{var U,G,z;if(Y===Q){let j=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return Q.error((U=j.stack)!==null&&U!==void 0?U:j.message),!1}if(typeof J==="number")J={logLevel:J};let H=(0,l5.getGlobal)("diag"),W=(0,Zm.createLogLevelDiagLogger)((G=J.logLevel)!==null&&G!==void 0?G:LA.DiagLogLevel.INFO,Y);if(H&&!J.suppressOverrideMessage){let j=(z=Error().stack)!==null&&z!==void 0?z:"<failed to generate stacktrace>";H.warn(`Current logger will be overwritten from ${j}`),W.warn(`Current logger will overwrite one already registered from ${j}`)}return(0,l5.registerGlobal)("diag",W,Q,!0)};Q.setLogger=X,Q.disable=()=>{(0,l5.unregisterGlobal)(Sm,Q)},Q.createComponentLogger=(Y)=>{return new Rm.DiagComponentLogger(Y)},Q.verbose=$("verbose"),Q.debug=$("debug"),Q.info=$("info"),Q.warn=$("warn"),Q.error=$("error")}static instance(){if(!this._instance)this._instance=new PW;return this._instance}}vA.DiagAPI=PW});var PA=b((EA)=>{Object.defineProperty(EA,"__esModule",{value:!0});EA.BaggageImpl=void 0;class YQ{constructor($){this._entries=$?new Map($):new Map}getEntry($){let Q=this._entries.get($);if(!Q)return;return Object.assign({},Q)}getAllEntries(){return Array.from(this._entries.entries()).map(([$,Q])=>[$,Q])}setEntry($,Q){let X=new YQ(this._entries);return X._entries.set($,Q),X}removeEntry($){let Q=new YQ(this._entries);return Q._entries.delete($),Q}removeEntries(...$){let Q=new YQ(this._entries);for(let X of $)Q._entries.delete(X);return Q}clear(){return new YQ}}EA.BaggageImpl=YQ});var SA=b((RA)=>{Object.defineProperty(RA,"__esModule",{value:!0});RA.baggageEntryMetadataSymbol=void 0;RA.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var RW=b((TA)=>{Object.defineProperty(TA,"__esModule",{value:!0});TA.baggageEntryMetadataFromString=TA.createBaggage=void 0;var Tm=l1(),Cm=PA(),bm=SA(),xm=Tm.DiagAPI.instance();function km($={}){return new Cm.BaggageImpl(new Map(Object.entries($)))}TA.createBaggage=km;function fm($){if(typeof $!=="string")xm.error(`Cannot create baggage metadata from unknown type: ${typeof $}`),$="";return{__TYPE__:bm.baggageEntryMetadataSymbol,toString(){return $}}}TA.baggageEntryMetadataFromString=fm});var UJ=b((bA)=>{Object.defineProperty(bA,"__esModule",{value:!0});bA.ROOT_CONTEXT=bA.createContextKey=void 0;function _m($){return Symbol.for($)}bA.createContextKey=_m;class p5{constructor($){let Q=this;Q._currentContext=$?new Map($):new Map,Q.getValue=(X)=>Q._currentContext.get(X),Q.setValue=(X,Y)=>{let J=new p5(Q._currentContext);return J._currentContext.set(X,Y),J},Q.deleteValue=(X)=>{let Y=new p5(Q._currentContext);return Y._currentContext.delete(X),Y}}}bA.ROOT_CONTEXT=new p5});var _A=b((fA)=>{Object.defineProperty(fA,"__esModule",{value:!0});fA.DiagConsoleLogger=void 0;var ZW=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class kA{constructor(){function $(Q){return function(...X){if(console){let Y=console[Q];if(typeof Y!=="function")Y=console.log;if(typeof Y==="function")return Y.apply(console,X)}}}for(let Q=0;Q<ZW.length;Q++)this[ZW[Q].n]=$(ZW[Q].c)}}fA.DiagConsoleLogger=kA});var _W=b((gA)=>{Object.defineProperty(gA,"__esModule",{value:!0});gA.createNoopMeter=gA.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=gA.NOOP_OBSERVABLE_GAUGE_METRIC=gA.NOOP_OBSERVABLE_COUNTER_METRIC=gA.NOOP_UP_DOWN_COUNTER_METRIC=gA.NOOP_HISTOGRAM_METRIC=gA.NOOP_GAUGE_METRIC=gA.NOOP_COUNTER_METRIC=gA.NOOP_METER=gA.NoopObservableUpDownCounterMetric=gA.NoopObservableGaugeMetric=gA.NoopObservableCounterMetric=gA.NoopObservableMetric=gA.NoopHistogramMetric=gA.NoopGaugeMetric=gA.NoopUpDownCounterMetric=gA.NoopCounterMetric=gA.NoopMetric=gA.NoopMeter=void 0;class SW{constructor(){}createGauge($,Q){return gA.NOOP_GAUGE_METRIC}createHistogram($,Q){return gA.NOOP_HISTOGRAM_METRIC}createCounter($,Q){return gA.NOOP_COUNTER_METRIC}createUpDownCounter($,Q){return gA.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge($,Q){return gA.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter($,Q){return gA.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter($,Q){return gA.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback($,Q){}removeBatchObservableCallback($){}}gA.NoopMeter=SW;class UQ{}gA.NoopMetric=UQ;class TW extends UQ{add($,Q){}}gA.NoopCounterMetric=TW;class CW extends UQ{add($,Q){}}gA.NoopUpDownCounterMetric=CW;class bW extends UQ{record($,Q){}}gA.NoopGaugeMetric=bW;class xW extends UQ{record($,Q){}}gA.NoopHistogramMetric=xW;class qJ{addCallback($){}removeCallback($){}}gA.NoopObservableMetric=qJ;class kW extends qJ{}gA.NoopObservableCounterMetric=kW;class fW extends qJ{}gA.NoopObservableGaugeMetric=fW;class yW extends qJ{}gA.NoopObservableUpDownCounterMetric=yW;gA.NOOP_METER=new SW;gA.NOOP_COUNTER_METRIC=new TW;gA.NOOP_GAUGE_METRIC=new bW;gA.NOOP_HISTOGRAM_METRIC=new xW;gA.NOOP_UP_DOWN_COUNTER_METRIC=new CW;gA.NOOP_OBSERVABLE_COUNTER_METRIC=new kW;gA.NOOP_OBSERVABLE_GAUGE_METRIC=new fW;gA.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new yW;function hm(){return gA.NOOP_METER}gA.createNoopMeter=hm});var oA=b((rA)=>{Object.defineProperty(rA,"__esModule",{value:!0});rA.ValueType=void 0;var am;(function($){$[$.INT=0]="INT",$[$.DOUBLE=1]="DOUBLE"})(am=rA.ValueType||(rA.ValueType={}))});var hW=b((aA)=>{Object.defineProperty(aA,"__esModule",{value:!0});aA.defaultTextMapSetter=aA.defaultTextMapGetter=void 0;aA.defaultTextMapGetter={get($,Q){if($==null)return;return $[Q]},keys($){if($==null)return[];return Object.keys($)}};aA.defaultTextMapSetter={set($,Q,X){if($==null)return;$[Q]=X}}});var Q3=b((eA)=>{Object.defineProperty(eA,"__esModule",{value:!0});eA.NoopContextManager=void 0;var sm=UJ();class sA{active(){return sm.ROOT_CONTEXT}with($,Q,X,...Y){return Q.call(X,...Y)}bind($,Q){return Q}enable(){return this}disable(){return this}}eA.NoopContextManager=sA});var GJ=b((J3)=>{Object.defineProperty(J3,"__esModule",{value:!0});J3.ContextAPI=void 0;var em=Q3(),mW=d1(),X3=l1(),cW="context",$c=new em.NoopContextManager;class uW{constructor(){}static getInstance(){if(!this._instance)this._instance=new uW;return this._instance}setGlobalContextManager($){return(0,mW.registerGlobal)(cW,$,X3.DiagAPI.instance())}active(){return this._getContextManager().active()}with($,Q,X,...Y){return this._getContextManager().with($,Q,X,...Y)}bind($,Q){return this._getContextManager().bind($,Q)}_getContextManager(){return(0,mW.getGlobal)(cW)||$c}disable(){this._getContextManager().disable(),(0,mW.unregisterGlobal)(cW,X3.DiagAPI.instance())}}J3.ContextAPI=uW});var dW=b((U3)=>{Object.defineProperty(U3,"__esModule",{value:!0});U3.TraceFlags=void 0;var Qc;(function($){$[$.NONE=0]="NONE",$[$.SAMPLED=1]="SAMPLED"})(Qc=U3.TraceFlags||(U3.TraceFlags={}))});var n5=b((q3)=>{Object.defineProperty(q3,"__esModule",{value:!0});q3.INVALID_SPAN_CONTEXT=q3.INVALID_TRACEID=q3.INVALID_SPANID=void 0;var Xc=dW();q3.INVALID_SPANID="0000000000000000";q3.INVALID_TRACEID="00000000000000000000000000000000";q3.INVALID_SPAN_CONTEXT={traceId:q3.INVALID_TRACEID,spanId:q3.INVALID_SPANID,traceFlags:Xc.TraceFlags.NONE}});var r5=b((j3)=>{Object.defineProperty(j3,"__esModule",{value:!0});j3.NonRecordingSpan=void 0;var Jc=n5();class H3{constructor($=Jc.INVALID_SPAN_CONTEXT){this._spanContext=$}spanContext(){return this._spanContext}setAttribute($,Q){return this}setAttributes($){return this}addEvent($,Q){return this}addLink($){return this}addLinks($){return this}setStatus($){return this}updateName($){return this}end($){}isRecording(){return!1}recordException($,Q){}}j3.NonRecordingSpan=H3});var nW=b((N3)=>{Object.defineProperty(N3,"__esModule",{value:!0});N3.getSpanContext=N3.setSpanContext=N3.deleteSpan=N3.setSpan=N3.getActiveSpan=N3.getSpan=void 0;var Yc=UJ(),Uc=r5(),qc=GJ(),lW=(0,Yc.createContextKey)("OpenTelemetry Context Key SPAN");function pW($){return $.getValue(lW)||void 0}N3.getSpan=pW;function Gc(){return pW(qc.ContextAPI.getInstance().active())}N3.getActiveSpan=Gc;function K3($,Q){return $.setValue(lW,Q)}N3.setSpan=K3;function zc($){return $.deleteValue(lW)}N3.deleteSpan=zc;function Wc($,Q){return K3($,new Uc.NonRecordingSpan(Q))}N3.setSpanContext=Wc;function Hc($){var Q;return(Q=pW($))===null||Q===void 0?void 0:Q.spanContext()}N3.getSpanContext=Hc});var o5=b((A3)=>{Object.defineProperty(A3,"__esModule",{value:!0});A3.wrapSpanContext=A3.isSpanContextValid=A3.isValidSpanId=A3.isValidTraceId=void 0;var B3=n5(),Bc=r5(),Dc=/^([0-9a-f]{32})$/i,Oc=/^[0-9a-f]{16}$/i;function D3($){return Dc.test($)&&$!==B3.INVALID_TRACEID}A3.isValidTraceId=D3;function O3($){return Oc.test($)&&$!==B3.INVALID_SPANID}A3.isValidSpanId=O3;function Ac($){return D3($.traceId)&&O3($.spanId)}A3.isSpanContextValid=Ac;function Fc($){return new Bc.NonRecordingSpan($)}A3.wrapSpanContext=Fc});var aW=b((I3)=>{Object.defineProperty(I3,"__esModule",{value:!0});I3.NoopTracer=void 0;var Ec=GJ(),L3=nW(),rW=r5(),Mc=o5(),oW=Ec.ContextAPI.getInstance();class v3{startSpan($,Q,X=oW.active()){if(Boolean(Q===null||Q===void 0?void 0:Q.root))return new rW.NonRecordingSpan;let J=X&&(0,L3.getSpanContext)(X);if(Pc(J)&&(0,Mc.isSpanContextValid)(J))return new rW.NonRecordingSpan(J);else return new rW.NonRecordingSpan}startActiveSpan($,Q,X,Y){let J,U,G;if(arguments.length<2)return;else if(arguments.length===2)G=Q;else if(arguments.length===3)J=Q,G=X;else J=Q,U=X,G=Y;let z=U!==null&&U!==void 0?U:oW.active(),H=this.startSpan($,J,z),W=(0,L3.setSpan)(z,H);return oW.with(W,G,void 0,H)}}I3.NoopTracer=v3;function Pc($){return typeof $==="object"&&typeof $.spanId==="string"&&typeof $.traceId==="string"&&typeof $.traceFlags==="number"}});var tW=b((P3)=>{Object.defineProperty(P3,"__esModule",{value:!0});P3.ProxyTracer=void 0;var Rc=aW(),Zc=new Rc.NoopTracer;class M3{constructor($,Q,X,Y){this._provider=$,this.name=Q,this.version=X,this.options=Y}startSpan($,Q,X){return this._getTracer().startSpan($,Q,X)}startActiveSpan($,Q,X,Y){let J=this._getTracer();return Reflect.apply(J.startActiveSpan,J,arguments)}_getTracer(){if(this._delegate)return this._delegate;let $=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!$)return Zc;return this._delegate=$,this._delegate}}P3.ProxyTracer=M3});var C3=b((S3)=>{Object.defineProperty(S3,"__esModule",{value:!0});S3.NoopTracerProvider=void 0;var Sc=aW();class Z3{getTracer($,Q,X){return new Sc.NoopTracer}}S3.NoopTracerProvider=Z3});var sW=b((x3)=>{Object.defineProperty(x3,"__esModule",{value:!0});x3.ProxyTracerProvider=void 0;var Tc=tW(),Cc=C3(),bc=new Cc.NoopTracerProvider;class b3{getTracer($,Q,X){var Y;return(Y=this.getDelegateTracer($,Q,X))!==null&&Y!==void 0?Y:new Tc.ProxyTracer(this,$,Q,X)}getDelegate(){var $;return($=this._delegate)!==null&&$!==void 0?$:bc}setDelegate($){this._delegate=$}getDelegateTracer($,Q,X){var Y;return(Y=this._delegate)===null||Y===void 0?void 0:Y.getTracer($,Q,X)}}x3.ProxyTracerProvider=b3});var y3=b((f3)=>{Object.defineProperty(f3,"__esModule",{value:!0});f3.SamplingDecision=void 0;var xc;(function($){$[$.NOT_RECORD=0]="NOT_RECORD",$[$.RECORD=1]="RECORD",$[$.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(xc=f3.SamplingDecision||(f3.SamplingDecision={}))});var g3=b((_3)=>{Object.defineProperty(_3,"__esModule",{value:!0});_3.SpanKind=void 0;var kc;(function($){$[$.INTERNAL=0]="INTERNAL",$[$.SERVER=1]="SERVER",$[$.CLIENT=2]="CLIENT",$[$.PRODUCER=3]="PRODUCER",$[$.CONSUMER=4]="CONSUMER"})(kc=_3.SpanKind||(_3.SpanKind={}))});var m3=b((h3)=>{Object.defineProperty(h3,"__esModule",{value:!0});h3.SpanStatusCode=void 0;var fc;(function($){$[$.UNSET=0]="UNSET",$[$.OK=1]="OK",$[$.ERROR=2]="ERROR"})(fc=h3.SpanStatusCode||(h3.SpanStatusCode={}))});var i3=b((c3)=>{Object.defineProperty(c3,"__esModule",{value:!0});c3.validateValue=c3.validateKey=void 0;var XH="[_0-9a-z-*/]",yc=`[a-z]${XH}{0,255}`,_c=`[a-z0-9]${XH}{0,240}@[a-z]${XH}{0,13}`,gc=new RegExp(`^(?:${yc}|${_c})$`),hc=/^[ -~]{0,255}[!-~]$/,mc=/,|=/;function cc($){return gc.test($)}c3.validateKey=cc;function uc($){return hc.test($)&&!mc.test($)}c3.validateValue=uc});var a3=b((r3)=>{Object.defineProperty(r3,"__esModule",{value:!0});r3.TraceStateImpl=void 0;var d3=i3(),l3=32,dc=512,p3=",",n3="=";class JH{constructor($){if(this._internalState=new Map,$)this._parse($)}set($,Q){let X=this._clone();if(X._internalState.has($))X._internalState.delete($);return X._internalState.set($,Q),X}unset($){let Q=this._clone();return Q._internalState.delete($),Q}get($){return this._internalState.get($)}serialize(){return this._keys().reduce(($,Q)=>{return $.push(Q+n3+this.get(Q)),$},[]).join(p3)}_parse($){if($.length>dc)return;if(this._internalState=$.split(p3).reverse().reduce((Q,X)=>{let Y=X.trim(),J=Y.indexOf(n3);if(J!==-1){let U=Y.slice(0,J),G=Y.slice(J+1,X.length);if((0,d3.validateKey)(U)&&(0,d3.validateValue)(G))Q.set(U,G)}return Q},new Map),this._internalState.size>l3)this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,l3))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let $=new JH;return $._internalState=new Map(this._internalState),$}}r3.TraceStateImpl=JH});var e3=b((t3)=>{Object.defineProperty(t3,"__esModule",{value:!0});t3.createTraceState=void 0;var lc=a3();function pc($){return new lc.TraceStateImpl($)}t3.createTraceState=pc});var XF=b(($F)=>{Object.defineProperty($F,"__esModule",{value:!0});$F.context=void 0;var nc=GJ();$F.context=nc.ContextAPI.getInstance()});var UF=b((JF)=>{Object.defineProperty(JF,"__esModule",{value:!0});JF.diag=void 0;var rc=l1();JF.diag=rc.DiagAPI.instance()});var zF=b((qF)=>{Object.defineProperty(qF,"__esModule",{value:!0});qF.NOOP_METER_PROVIDER=qF.NoopMeterProvider=void 0;var oc=_W();class YH{getMeter($,Q,X){return oc.NOOP_METER}}qF.NoopMeterProvider=YH;qF.NOOP_METER_PROVIDER=new YH});var wF=b((HF)=>{Object.defineProperty(HF,"__esModule",{value:!0});HF.MetricsAPI=void 0;var tc=zF(),UH=d1(),WF=l1(),qH="metrics";class GH{constructor(){}static getInstance(){if(!this._instance)this._instance=new GH;return this._instance}setGlobalMeterProvider($){return(0,UH.registerGlobal)(qH,$,WF.DiagAPI.instance())}getMeterProvider(){return(0,UH.getGlobal)(qH)||tc.NOOP_METER_PROVIDER}getMeter($,Q,X){return this.getMeterProvider().getMeter($,Q,X)}disable(){(0,UH.unregisterGlobal)(qH,WF.DiagAPI.instance())}}HF.MetricsAPI=GH});var VF=b((KF)=>{Object.defineProperty(KF,"__esModule",{value:!0});KF.metrics=void 0;var sc=wF();KF.metrics=sc.MetricsAPI.getInstance()});var AF=b((DF)=>{Object.defineProperty(DF,"__esModule",{value:!0});DF.NoopTextMapPropagator=void 0;class BF{inject($,Q){}extract($,Q){return $}fields(){return[]}}DF.NoopTextMapPropagator=BF});var IF=b((LF)=>{Object.defineProperty(LF,"__esModule",{value:!0});LF.deleteBaggage=LF.setBaggage=LF.getActiveBaggage=LF.getBaggage=void 0;var ec=GJ(),$u=UJ(),zH=(0,$u.createContextKey)("OpenTelemetry Baggage Key");function FF($){return $.getValue(zH)||void 0}LF.getBaggage=FF;function Qu(){return FF(ec.ContextAPI.getInstance().active())}LF.getActiveBaggage=Qu;function Xu($,Q){return $.setValue(zH,Q)}LF.setBaggage=Xu;function Ju($){return $.deleteValue(zH)}LF.deleteBaggage=Ju});var ZF=b((PF)=>{Object.defineProperty(PF,"__esModule",{value:!0});PF.PropagationAPI=void 0;var WH=d1(),Gu=AF(),EF=hW(),a5=IF(),zu=RW(),MF=l1(),HH="propagation",Wu=new Gu.NoopTextMapPropagator;class jH{constructor(){this.createBaggage=zu.createBaggage,this.getBaggage=a5.getBaggage,this.getActiveBaggage=a5.getActiveBaggage,this.setBaggage=a5.setBaggage,this.deleteBaggage=a5.deleteBaggage}static getInstance(){if(!this._instance)this._instance=new jH;return this._instance}setGlobalPropagator($){return(0,WH.registerGlobal)(HH,$,MF.DiagAPI.instance())}inject($,Q,X=EF.defaultTextMapSetter){return this._getGlobalPropagator().inject($,Q,X)}extract($,Q,X=EF.defaultTextMapGetter){return this._getGlobalPropagator().extract($,Q,X)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,WH.unregisterGlobal)(HH,MF.DiagAPI.instance())}_getGlobalPropagator(){return(0,WH.getGlobal)(HH)||Wu}}PF.PropagationAPI=jH});var CF=b((SF)=>{Object.defineProperty(SF,"__esModule",{value:!0});SF.propagation=void 0;var Hu=ZF();SF.propagation=Hu.PropagationAPI.getInstance()});var _F=b((fF)=>{Object.defineProperty(fF,"__esModule",{value:!0});fF.TraceAPI=void 0;var wH=d1(),bF=sW(),xF=o5(),qQ=nW(),kF=l1(),KH="trace";class NH{constructor(){this._proxyTracerProvider=new bF.ProxyTracerProvider,this.wrapSpanContext=xF.wrapSpanContext,this.isSpanContextValid=xF.isSpanContextValid,this.deleteSpan=qQ.deleteSpan,this.getSpan=qQ.getSpan,this.getActiveSpan=qQ.getActiveSpan,this.getSpanContext=qQ.getSpanContext,this.setSpan=qQ.setSpan,this.setSpanContext=qQ.setSpanContext}static getInstance(){if(!this._instance)this._instance=new NH;return this._instance}setGlobalTracerProvider($){let Q=(0,wH.registerGlobal)(KH,this._proxyTracerProvider,kF.DiagAPI.instance());if(Q)this._proxyTracerProvider.setDelegate($);return Q}getTracerProvider(){return(0,wH.getGlobal)(KH)||this._proxyTracerProvider}getTracer($,Q){return this.getTracerProvider().getTracer($,Q)}disable(){(0,wH.unregisterGlobal)(KH,kF.DiagAPI.instance()),this._proxyTracerProvider=new bF.ProxyTracerProvider}}fF.TraceAPI=NH});var mF=b((gF)=>{Object.defineProperty(gF,"__esModule",{value:!0});gF.trace=void 0;var ju=_F();gF.trace=ju.TraceAPI.getInstance()});var DH=b((E$)=>{Object.defineProperty(E$,"__esModule",{value:!0});E$.trace=E$.propagation=E$.metrics=E$.diag=E$.context=E$.INVALID_SPAN_CONTEXT=E$.INVALID_TRACEID=E$.INVALID_SPANID=E$.isValidSpanId=E$.isValidTraceId=E$.isSpanContextValid=E$.createTraceState=E$.TraceFlags=E$.SpanStatusCode=E$.SpanKind=E$.SamplingDecision=E$.ProxyTracerProvider=E$.ProxyTracer=E$.defaultTextMapSetter=E$.defaultTextMapGetter=E$.ValueType=E$.createNoopMeter=E$.DiagLogLevel=E$.DiagConsoleLogger=E$.ROOT_CONTEXT=E$.createContextKey=E$.baggageEntryMetadataFromString=void 0;var wu=RW();Object.defineProperty(E$,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return wu.baggageEntryMetadataFromString}});var cF=UJ();Object.defineProperty(E$,"createContextKey",{enumerable:!0,get:function(){return cF.createContextKey}});Object.defineProperty(E$,"ROOT_CONTEXT",{enumerable:!0,get:function(){return cF.ROOT_CONTEXT}});var Ku=_A();Object.defineProperty(E$,"DiagConsoleLogger",{enumerable:!0,get:function(){return Ku.DiagConsoleLogger}});var Nu=d5();Object.defineProperty(E$,"DiagLogLevel",{enumerable:!0,get:function(){return Nu.DiagLogLevel}});var Vu=_W();Object.defineProperty(E$,"createNoopMeter",{enumerable:!0,get:function(){return Vu.createNoopMeter}});var Bu=oA();Object.defineProperty(E$,"ValueType",{enumerable:!0,get:function(){return Bu.ValueType}});var uF=hW();Object.defineProperty(E$,"defaultTextMapGetter",{enumerable:!0,get:function(){return uF.defaultTextMapGetter}});Object.defineProperty(E$,"defaultTextMapSetter",{enumerable:!0,get:function(){return uF.defaultTextMapSetter}});var Du=tW();Object.defineProperty(E$,"ProxyTracer",{enumerable:!0,get:function(){return Du.ProxyTracer}});var Ou=sW();Object.defineProperty(E$,"ProxyTracerProvider",{enumerable:!0,get:function(){return Ou.ProxyTracerProvider}});var Au=y3();Object.defineProperty(E$,"SamplingDecision",{enumerable:!0,get:function(){return Au.SamplingDecision}});var Fu=g3();Object.defineProperty(E$,"SpanKind",{enumerable:!0,get:function(){return Fu.SpanKind}});var Lu=m3();Object.defineProperty(E$,"SpanStatusCode",{enumerable:!0,get:function(){return Lu.SpanStatusCode}});var vu=dW();Object.defineProperty(E$,"TraceFlags",{enumerable:!0,get:function(){return vu.TraceFlags}});var Iu=e3();Object.defineProperty(E$,"createTraceState",{enumerable:!0,get:function(){return Iu.createTraceState}});var VH=o5();Object.defineProperty(E$,"isSpanContextValid",{enumerable:!0,get:function(){return VH.isSpanContextValid}});Object.defineProperty(E$,"isValidTraceId",{enumerable:!0,get:function(){return VH.isValidTraceId}});Object.defineProperty(E$,"isValidSpanId",{enumerable:!0,get:function(){return VH.isValidSpanId}});var BH=n5();Object.defineProperty(E$,"INVALID_SPANID",{enumerable:!0,get:function(){return BH.INVALID_SPANID}});Object.defineProperty(E$,"INVALID_TRACEID",{enumerable:!0,get:function(){return BH.INVALID_TRACEID}});Object.defineProperty(E$,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return BH.INVALID_SPAN_CONTEXT}});var iF=XF();Object.defineProperty(E$,"context",{enumerable:!0,get:function(){return iF.context}});var dF=UF();Object.defineProperty(E$,"diag",{enumerable:!0,get:function(){return dF.diag}});var lF=VF();Object.defineProperty(E$,"metrics",{enumerable:!0,get:function(){return lF.metrics}});var pF=CF();Object.defineProperty(E$,"propagation",{enumerable:!0,get:function(){return pF.propagation}});var nF=mF();Object.defineProperty(E$,"trace",{enumerable:!0,get:function(){return nF.trace}});E$.default={context:iF.context,diag:dF.diag,metrics:lF.metrics,propagation:pF.propagation,trace:nF.trace}});var OU=($,Q,X)=>{return(Y,J)=>{let U=-1;return G(0);async function G(z){if(z<=U)throw Error("next() called multiple times");U=z;let H,W=!1,j;if($[z])j=$[z][0][0],Y.req.routeIndex=z;else j=z===$.length&&J||void 0;if(j)try{H=await j(Y,()=>G(z+1))}catch(N){if(N instanceof Error&&Q)Y.error=N,H=await Q(N,Y),W=!0;else throw N}else if(Y.finalized===!1&&X)H=await X(Y);if(H&&(Y.finalized===!1||W))Y.res=H;return Y}}};var tH=Symbol();var sH=async($,Q=Object.create(null))=>{let{all:X=!1,dot:Y=!1}=Q,U=($ instanceof LJ?$.raw.headers:$.headers).get("Content-Type");if(U?.startsWith("multipart/form-data")||U?.startsWith("application/x-www-form-urlencoded"))return _v($,{all:X,dot:Y});return{}};async function _v($,Q){let X=await $.formData();if(X)return gv(X,Q);return{}}function gv($,Q){let X=Object.create(null);if($.forEach((Y,J)=>{if(!(Q.all||J.endsWith("[]")))X[J]=Y;else hv(X,J,Y)}),Q.dot)Object.entries(X).forEach(([Y,J])=>{if(Y.includes("."))mv(X,Y,J),delete X[Y]});return X}var hv=($,Q,X)=>{if($[Q]!==void 0)if(Array.isArray($[Q]))$[Q].push(X);else $[Q]=[$[Q],X];else if(!Q.endsWith("[]"))$[Q]=X;else $[Q]=[X]},mv=($,Q,X)=>{let Y=$,J=Q.split(".");J.forEach((U,G)=>{if(G===J.length-1)Y[U]=X;else{if(!Y[U]||typeof Y[U]!=="object"||Array.isArray(Y[U])||Y[U]instanceof File)Y[U]=Object.create(null);Y=Y[U]}})};var FU=($)=>{let Q=$.split("/");if(Q[0]==="")Q.shift();return Q},eH=($)=>{let{groups:Q,path:X}=cv($),Y=FU(X);return uv(Y,Q)},cv=($)=>{let Q=[];return $=$.replace(/\{[^}]+\}/g,(X,Y)=>{let J=`@${Y}`;return Q.push([J,X]),J}),{groups:Q,path:$}},uv=($,Q)=>{for(let X=Q.length-1;X>=0;X--){let[Y]=Q[X];for(let J=$.length-1;J>=0;J--)if($[J].includes(Y)){$[J]=$[J].replace(Y,Q[X][1]);break}}return $},vJ={},$j=($,Q)=>{if($==="*")return"*";let X=$.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(X){let Y=`${$}#${Q}`;if(!vJ[Y])if(X[2])vJ[Y]=Q&&Q[0]!==":"&&Q[0]!=="*"?[Y,X[1],new RegExp(`^${X[2]}(?=/${Q})`)]:[$,X[1],new RegExp(`^${X[2]}$`)];else vJ[Y]=[$,X[1],!0];return vJ[Y]}return null},IJ=($,Q)=>{try{return Q($)}catch{return $.replace(/(?:%[0-9A-Fa-f]{2})+/g,(X)=>{try{return Q(X)}catch{return X}})}},iv=($)=>IJ($,decodeURI),LU=($)=>{let Q=$.url,X=Q.indexOf("/",Q.indexOf(":")+4),Y=X;for(;Y<Q.length;Y++){let J=Q.charCodeAt(Y);if(J===37){let U=Q.indexOf("?",Y),G=Q.slice(X,U===-1?void 0:U);return iv(G.includes("%25")?G.replace(/%25/g,"%2525"):G)}else if(J===63)break}return Q.slice(X,Y)};var Qj=($)=>{let Q=LU($);return Q.length>1&&Q.at(-1)==="/"?Q.slice(0,-1):Q},H1=($,Q,...X)=>{if(X.length)Q=H1(Q,...X);return`${$?.[0]==="/"?"":"/"}${$}${Q==="/"?"":`${$?.at(-1)==="/"?"":"/"}${Q?.[0]==="/"?Q.slice(1):Q}`}`},EJ=($)=>{if($.charCodeAt($.length-1)!==63||!$.includes(":"))return null;let Q=$.split("/"),X=[],Y="";return Q.forEach((J)=>{if(J!==""&&!/\:/.test(J))Y+="/"+J;else if(/\:/.test(J))if(/\?/.test(J)){if(X.length===0&&Y==="")X.push("/");else X.push(Y);let U=J.replace("?","");Y+="/"+U,X.push(Y)}else Y+="/"+J}),X.filter((J,U,G)=>G.indexOf(J)===U)},AU=($)=>{if(!/[%+]/.test($))return $;if($.indexOf("+")!==-1)$=$.replace(/\+/g," ");return $.indexOf("%")!==-1?IJ($,vU):$},Xj=($,Q,X)=>{let Y;if(!X&&Q&&!/[%+]/.test(Q)){let G=$.indexOf(`?${Q}`,8);if(G===-1)G=$.indexOf(`&${Q}`,8);while(G!==-1){let z=$.charCodeAt(G+Q.length+1);if(z===61){let H=G+Q.length+2,W=$.indexOf("&",H);return AU($.slice(H,W===-1?void 0:W))}else if(z==38||isNaN(z))return"";G=$.indexOf(`&${Q}`,G+1)}if(Y=/[%+]/.test($),!Y)return}let J={};Y??=/[%+]/.test($);let U=$.indexOf("?",8);while(U!==-1){let G=$.indexOf("&",U+1),z=$.indexOf("=",U);if(z>G&&G!==-1)z=-1;let H=$.slice(U+1,z===-1?G===-1?void 0:G:z);if(Y)H=AU(H);if(U=G,H==="")continue;let W;if(z===-1)W="";else if(W=$.slice(z+1,G===-1?void 0:G),Y)W=AU(W);if(X){if(!(J[H]&&Array.isArray(J[H])))J[H]=[];J[H].push(W)}else J[H]??=W}return Q?J[Q]:J},Jj=Xj,Yj=($,Q)=>{return Xj($,Q,!0)},vU=decodeURIComponent;var Uj=($)=>IJ($,vU),LJ=class{raw;#$;#Q;routeIndex=0;path;bodyCache={};constructor($,Q="/",X=[[]]){this.raw=$,this.path=Q,this.#Q=X,this.#$={}}param($){return $?this.#X($):this.#U()}#X($){let Q=this.#Q[0][this.routeIndex][1][$],X=this.#Y(Q);return X&&/\%/.test(X)?Uj(X):X}#U(){let $={},Q=Object.keys(this.#Q[0][this.routeIndex][1]);for(let X of Q){let Y=this.#Y(this.#Q[0][this.routeIndex][1][X]);if(Y!==void 0)$[X]=/\%/.test(Y)?Uj(Y):Y}return $}#Y($){return this.#Q[1]?this.#Q[1][$]:$}query($){return Jj(this.url,$)}queries($){return Yj(this.url,$)}header($){if($)return this.raw.headers.get($)??void 0;let Q={};return this.raw.headers.forEach((X,Y)=>{Q[Y]=X}),Q}async parseBody($){return this.bodyCache.parsedBody??=await sH(this,$)}#J=($)=>{let{bodyCache:Q,raw:X}=this,Y=Q[$];if(Y)return Y;let J=Object.keys(Q)[0];if(J)return Q[J].then((U)=>{if(J==="json")U=JSON.stringify(U);return new Response(U)[$]()});return Q[$]=X[$]()};json(){return this.#J("text").then(($)=>JSON.parse($))}text(){return this.#J("text")}arrayBuffer(){return this.#J("arrayBuffer")}blob(){return this.#J("blob")}formData(){return this.#J("formData")}addValidatedData($,Q){this.#$[$]=Q}valid($){return this.#$[$]}get url(){return this.raw.url}get method(){return this.raw.method}get[tH](){return this.#Q}get matchedRoutes(){return this.#Q[0].map(([[,$]])=>$)}get routePath(){return this.#Q[0].map(([[,$]])=>$)[this.routeIndex].path}};var IU={Stringify:1,BeforeStream:2,Stream:3},dv=($,Q)=>{let X=new String($);return X.isEscaped=!0,X.callbacks=Q,X};var MJ=async($,Q,X,Y,J)=>{if(typeof $==="object"&&!($ instanceof String)){if(!($ instanceof Promise))$=$.toString();if($ instanceof Promise)$=await $}let U=$.callbacks;if(!U?.length)return Promise.resolve($);if(J)J[0]+=$;else J=[$];let G=Promise.all(U.map((z)=>z({phase:Q,buffer:J,context:Y}))).then((z)=>Promise.all(z.filter(Boolean).map((H)=>MJ(H,Q,!1,Y,J))).then(()=>J[0]));if(X)return dv(await G,U);else return G};var qj="text/plain; charset=UTF-8",EU=($,Q)=>{return{"Content-Type":$,...Q}},Gj=class{#$;#Q;env={};#X;finalized=!1;error;#U;#Y;#J;#H;#z;#W;#G;#j;#w;constructor($,Q){if(this.#$=$,Q)this.#Y=Q.executionCtx,this.env=Q.env,this.#W=Q.notFoundHandler,this.#w=Q.path,this.#j=Q.matchResult}get req(){return this.#Q??=new LJ(this.#$,this.#w,this.#j),this.#Q}get event(){if(this.#Y&&"respondWith"in this.#Y)return this.#Y;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#Y)return this.#Y;else throw Error("This context has no ExecutionContext")}get res(){return this.#J||=new Response(null,{headers:this.#G??=new Headers})}set res($){if(this.#J&&$){$=new Response($.body,$);for(let[Q,X]of this.#J.headers.entries()){if(Q==="content-type")continue;if(Q==="set-cookie"){let Y=this.#J.headers.getSetCookie();$.headers.delete("set-cookie");for(let J of Y)$.headers.append("set-cookie",J)}else $.headers.set(Q,X)}}this.#J=$,this.finalized=!0}render=(...$)=>{return this.#z??=(Q)=>this.html(Q),this.#z(...$)};setLayout=($)=>this.#H=$;getLayout=()=>this.#H;setRenderer=($)=>{this.#z=$};header=($,Q,X)=>{if(this.finalized)this.#J=new Response(this.#J.body,this.#J);let Y=this.#J?this.#J.headers:this.#G??=new Headers;if(Q===void 0)Y.delete($);else if(X?.append)Y.append($,Q);else Y.set($,Q)};status=($)=>{this.#U=$};set=($,Q)=>{this.#X??=new Map,this.#X.set($,Q)};get=($)=>{return this.#X?this.#X.get($):void 0};get var(){if(!this.#X)return{};return Object.fromEntries(this.#X)}#q($,Q,X){let Y=this.#J?new Headers(this.#J.headers):this.#G??new Headers;if(typeof Q==="object"&&"headers"in Q){let U=Q.headers instanceof Headers?Q.headers:new Headers(Q.headers);for(let[G,z]of U)if(G.toLowerCase()==="set-cookie")Y.append(G,z);else Y.set(G,z)}if(X)for(let[U,G]of Object.entries(X))if(typeof G==="string")Y.set(U,G);else{Y.delete(U);for(let z of G)Y.append(U,z)}let J=typeof Q==="number"?Q:Q?.status??this.#U;return new Response($,{status:J,headers:Y})}newResponse=(...$)=>this.#q(...$);body=($,Q,X)=>this.#q($,Q,X);text=($,Q,X)=>{return!this.#G&&!this.#U&&!Q&&!X&&!this.finalized?new Response($):this.#q($,Q,EU(qj,X))};json=($,Q,X)=>{return this.#q(JSON.stringify($),Q,EU("application/json",X))};html=($,Q,X)=>{let Y=(J)=>this.#q(J,Q,EU("text/html; charset=UTF-8",X));return typeof $==="object"?MJ($,IU.Stringify,!1,{}).then(Y):Y($)};redirect=($,Q)=>{let X=String($);return this.header("Location",!/[^\x00-\xFF]/.test(X)?X:encodeURI(X)),this.newResponse(null,Q??302)};notFound=()=>{return this.#W??=()=>new Response,this.#W(this)}};var P$="ALL",zj="all",Wj=["get","post","put","delete","options","patch"],PJ="Can not add a route since the matcher is already built.",RJ=class extends Error{};var Hj="__COMPOSED_HANDLER";var lv=($)=>{return $.text("404 Not Found",404)},jj=($,Q)=>{if("getResponse"in $){let X=$.getResponse();return Q.newResponse(X.body,X)}return console.error($),Q.text("Internal Server Error",500)},MU=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#$="/";routes=[];constructor($={}){[...Wj,zj].forEach((J)=>{this[J]=(U,...G)=>{if(typeof U==="string")this.#$=U;else this.#U(J,this.#$,U);return G.forEach((z)=>{this.#U(J,this.#$,z)}),this}}),this.on=(J,U,...G)=>{for(let z of[U].flat()){this.#$=z;for(let H of[J].flat())G.map((W)=>{this.#U(H.toUpperCase(),this.#$,W)})}return this},this.use=(J,...U)=>{if(typeof J==="string")this.#$=J;else this.#$="*",U.unshift(J);return U.forEach((G)=>{this.#U(P$,this.#$,G)}),this};let{strict:X,...Y}=$;Object.assign(this,Y),this.getPath=X??!0?$.getPath??LU:Qj}#Q(){let $=new MU({router:this.router,getPath:this.getPath});return $.errorHandler=this.errorHandler,$.#X=this.#X,$.routes=this.routes,$}#X=lv;errorHandler=jj;route($,Q){let X=this.basePath($);return Q.routes.map((Y)=>{let J;if(Q.errorHandler===jj)J=Y.handler;else J=async(U,G)=>(await OU([],Q.errorHandler)(U,()=>Y.handler(U,G))).res,J[Hj]=Y.handler;X.#U(Y.method,Y.path,J)}),this}basePath($){let Q=this.#Q();return Q._basePath=H1(this._basePath,$),Q}onError=($)=>{return this.errorHandler=$,this};notFound=($)=>{return this.#X=$,this};mount($,Q,X){let Y,J;if(X)if(typeof X==="function")J=X;else if(J=X.optionHandler,X.replaceRequest===!1)Y=(z)=>z;else Y=X.replaceRequest;let U=J?(z)=>{let H=J(z);return Array.isArray(H)?H:[H]}:(z)=>{let H=void 0;try{H=z.executionCtx}catch{}return[z.env,H]};Y||=(()=>{let z=H1(this._basePath,$),H=z==="/"?0:z.length;return(W)=>{let j=new URL(W.url);return j.pathname=j.pathname.slice(H)||"/",new Request(j,W)}})();let G=async(z,H)=>{let W=await Q(Y(z.req.raw),...U(z));if(W)return W;await H()};return this.#U(P$,H1($,"*"),G),this}#U($,Q,X){$=$.toUpperCase(),Q=H1(this._basePath,Q);let Y={basePath:this._basePath,path:Q,method:$,handler:X};this.router.add($,Q,[X,Y]),this.routes.push(Y)}#Y($,Q){if($ instanceof Error)return this.errorHandler($,Q);throw $}#J($,Q,X,Y){if(Y==="HEAD")return(async()=>new Response(null,await this.#J($,Q,X,"GET")))();let J=this.getPath($,{env:X}),U=this.router.match(Y,J),G=new Gj($,{path:J,matchResult:U,env:X,executionCtx:Q,notFoundHandler:this.#X});if(U[0].length===1){let H;try{H=U[0][0][0][0](G,async()=>{G.res=await this.#X(G)})}catch(W){return this.#Y(W,G)}return H instanceof Promise?H.then((W)=>W||(G.finalized?G.res:this.#X(G))).catch((W)=>this.#Y(W,G)):H??this.#X(G)}let z=OU(U[0],this.errorHandler,this.#X);return(async()=>{try{let H=await z(G);if(!H.finalized)throw Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return H.res}catch(H){return this.#Y(H,G)}})()}fetch=($,...Q)=>{return this.#J($,Q[1],Q[0],$.method)};request=($,Q,X,Y)=>{if($ instanceof Request)return this.fetch(Q?new Request($,Q):$,X,Y);return $=$.toString(),this.fetch(new Request(/^https?:\/\//.test($)?$:`http://localhost${H1("/",$)}`,Q),X,Y)};fire=()=>{addEventListener("fetch",($)=>{$.respondWith(this.#J($.request,$,void 0,$.request.method))})}};var BQ=[];function ZJ($,Q){let X=this.buildAllMatchers(),Y=(J,U)=>{let G=X[J]||X[P$],z=G[2][U];if(z)return z;let H=U.match(G[0]);if(!H)return[[],BQ];let W=H.indexOf("",1);return[G[1][W],H]};return this.match=Y,Y($,Q)}var SJ="[^/]+",DQ=".*",OQ="(?:|/.*)",j1=Symbol(),pv=new Set(".\\+*[^]$()");function nv($,Q){if($.length===1)return Q.length===1?$<Q?-1:1:-1;if(Q.length===1)return 1;if($===DQ||$===OQ)return 1;else if(Q===DQ||Q===OQ)return-1;if($===SJ)return 1;else if(Q===SJ)return-1;return $.length===Q.length?$<Q?-1:1:Q.length-$.length}var TJ=class{#$;#Q;#X=Object.create(null);insert($,Q,X,Y,J){if($.length===0){if(this.#$!==void 0)throw j1;if(J)return;this.#$=Q;return}let[U,...G]=$,z=U==="*"?G.length===0?["","",DQ]:["","",SJ]:U==="/*"?["","",OQ]:U.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),H;if(z){let W=z[1],j=z[2]||SJ;if(W&&z[2]){if(j===".*")throw j1;if(j=j.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(j))throw j1}if(H=this.#X[j],!H){if(Object.keys(this.#X).some((N)=>N!==DQ&&N!==OQ))throw j1;if(J)return;if(H=this.#X[j]=new TJ,W!=="")H.#Q=Y.varIndex++}if(!J&&W!=="")X.push([W,H.#Q])}else if(H=this.#X[U],!H){if(Object.keys(this.#X).some((W)=>W.length>1&&W!==DQ&&W!==OQ))throw j1;if(J)return;H=this.#X[U]=new TJ}H.insert(G,Q,X,Y,J)}buildRegExpStr(){let Q=Object.keys(this.#X).sort(nv).map((X)=>{let Y=this.#X[X];return(typeof Y.#Q==="number"?`(${X})@${Y.#Q}`:pv.has(X)?`\\${X}`:X)+Y.buildRegExpStr()});if(typeof this.#$==="number")Q.unshift(`#${this.#$}`);if(Q.length===0)return"";if(Q.length===1)return Q[0];return"(?:"+Q.join("|")+")"}};var wj=class{#$={varIndex:0};#Q=new TJ;insert($,Q,X){let Y=[],J=[];for(let G=0;;){let z=!1;if($=$.replace(/\{[^}]+\}/g,(H)=>{let W=`@\\${G}`;return J[G]=[W,H],G++,z=!0,W}),!z)break}let U=$.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let G=J.length-1;G>=0;G--){let[z]=J[G];for(let H=U.length-1;H>=0;H--)if(U[H].indexOf(z)!==-1){U[H]=U[H].replace(z,J[G][1]);break}}return this.#Q.insert(U,Q,Y,this.#$,X),Y}buildRegExp(){let $=this.#Q.buildRegExpStr();if($==="")return[/^$/,[],[]];let Q=0,X=[],Y=[];return $=$.replace(/#(\d+)|@(\d+)|\.\*\$/g,(J,U,G)=>{if(U!==void 0)return X[++Q]=Number(U),"$()";if(G!==void 0)return Y[Number(G)]=++Q,"";return""}),[new RegExp(`^${$}`),X,Y]}};var rv=[/^$/,[],Object.create(null)],Kj=Object.create(null);function Nj($){return Kj[$]??=new RegExp($==="*"?"":`^${$.replace(/\/\*$|([.\\+*[^\]$()])/g,(Q,X)=>X?`\\${X}`:"(?:|/.*)")}$`)}function ov(){Kj=Object.create(null)}function av($){let Q=new wj,X=[];if($.length===0)return rv;let Y=$.map((W)=>[!/\*|\/:/.test(W[0]),...W]).sort(([W,j],[N,K])=>W?1:N?-1:j.length-K.length),J=Object.create(null);for(let W=0,j=-1,N=Y.length;W<N;W++){let[K,w,B]=Y[W];if(K)J[w]=[B.map(([F])=>[F,Object.create(null)]),BQ];else j++;let D;try{D=Q.insert(w,j,K)}catch(F){throw F===j1?new RJ(w):F}if(K)continue;X[j]=B.map(([F,V])=>{let O=Object.create(null);V-=1;for(;V>=0;V--){let[A,L]=D[V];O[A]=L}return[F,O]})}let[U,G,z]=Q.buildRegExp();for(let W=0,j=X.length;W<j;W++)for(let N=0,K=X[W].length;N<K;N++){let w=X[W][N]?.[1];if(!w)continue;let B=Object.keys(w);for(let D=0,F=B.length;D<F;D++)w[B[D]]=z[w[B[D]]]}let H=[];for(let W in G)H[W]=X[G[W]];return[U,H,J]}function e1($,Q){if(!$)return;for(let X of Object.keys($).sort((Y,J)=>J.length-Y.length))if(Nj(X).test(Q))return[...$[X]];return}var CJ=class{name="RegExpRouter";#$;#Q;constructor(){this.#$={[P$]:Object.create(null)},this.#Q={[P$]:Object.create(null)}}add($,Q,X){let Y=this.#$,J=this.#Q;if(!Y||!J)throw Error(PJ);if(!Y[$])[Y,J].forEach((z)=>{z[$]=Object.create(null),Object.keys(z[P$]).forEach((H)=>{z[$][H]=[...z[P$][H]]})});if(Q==="/*")Q="*";let U=(Q.match(/\/:/g)||[]).length;if(/\*$/.test(Q)){let z=Nj(Q);if($===P$)Object.keys(Y).forEach((H)=>{Y[H][Q]||=e1(Y[H],Q)||e1(Y[P$],Q)||[]});else Y[$][Q]||=e1(Y[$],Q)||e1(Y[P$],Q)||[];Object.keys(Y).forEach((H)=>{if($===P$||$===H)Object.keys(Y[H]).forEach((W)=>{z.test(W)&&Y[H][W].push([X,U])})}),Object.keys(J).forEach((H)=>{if($===P$||$===H)Object.keys(J[H]).forEach((W)=>z.test(W)&&J[H][W].push([X,U]))});return}let G=EJ(Q)||[Q];for(let z=0,H=G.length;z<H;z++){let W=G[z];Object.keys(J).forEach((j)=>{if($===P$||$===j)J[j][W]||=[...e1(Y[j],W)||e1(Y[P$],W)||[]],J[j][W].push([X,U-H+z+1])})}}match=ZJ;buildAllMatchers(){let $=Object.create(null);return Object.keys(this.#Q).concat(Object.keys(this.#$)).forEach((Q)=>{$[Q]||=this.#X(Q)}),this.#$=this.#Q=void 0,ov(),$}#X($){let Q=[],X=$===P$;if([this.#$,this.#Q].forEach((Y)=>{let J=Y[$]?Object.keys(Y[$]).map((U)=>[U,Y[$][U]]):[];if(J.length!==0)X||=!0,Q.push(...J);else if($!==P$)Q.push(...Object.keys(Y[P$]).map((U)=>[U,Y[P$][U]]))}),!X)return null;else return av(Q)}};var tv=class{name="PreparedRegExpRouter";#$;#Q;constructor($,Q){this.#$=$,this.#Q=Q}#X($,Q){let X=this.#$[$];X[1].forEach((Y)=>Y&&Y.push(Q)),Object.values(X[2]).forEach((Y)=>Y[0].push(Q))}#U($,Q,X,Y,J){let U=this.#$[$];if(!J)U[2][Q][0].push([X,{}]);else Y.forEach((G)=>{if(typeof G==="number")U[1][G].push([X,J]);else U[2][G||Q][0].push([X,J])})}add($,Q,X){if(!this.#$[$]){let J=this.#$[P$],U={};for(let G in J[2])U[G]=[J[2][G][0].slice(),BQ];this.#$[$]=[J[0],J[1].map((G)=>Array.isArray(G)?G.slice():0),U]}if(Q==="/*"||Q==="*"){let J=[X,{}];if($===P$)for(let U in this.#$)this.#X(U,J);else this.#X($,J);return}let Y=this.#Q[Q];if(!Y)throw Error(`Path ${Q} is not registered`);for(let[J,U]of Y)if($===P$)for(let G in this.#$)this.#U(G,Q,X,J,U);else this.#U($,Q,X,J,U)}buildAllMatchers(){return this.#$}match=ZJ};var PU=class{name="SmartRouter";#$=[];#Q=[];constructor($){this.#$=$.routers}add($,Q,X){if(!this.#Q)throw Error(PJ);this.#Q.push([$,Q,X])}match($,Q){if(!this.#Q)throw Error("Fatal error");let X=this.#$,Y=this.#Q,J=X.length,U=0,G;for(;U<J;U++){let z=X[U];try{for(let H=0,W=Y.length;H<W;H++)z.add(...Y[H]);G=z.match($,Q)}catch(H){if(H instanceof RJ)continue;throw H}this.match=z.match.bind(z),this.#$=[z],this.#Q=void 0;break}if(U===J)throw Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,G}get activeRouter(){if(this.#Q||this.#$.length!==1)throw Error("No active router has been determined yet.");return this.#$[0]}};var AQ=Object.create(null),RU=class{#$;#Q;#X;#U=0;#Y=AQ;constructor($,Q,X){if(this.#Q=X||Object.create(null),this.#$=[],$&&Q){let Y=Object.create(null);Y[$]={handler:Q,possibleKeys:[],score:0},this.#$=[Y]}this.#X=[]}insert($,Q,X){this.#U=++this.#U;let Y=this,J=eH(Q),U=[];for(let G=0,z=J.length;G<z;G++){let H=J[G],W=J[G+1],j=$j(H,W),N=Array.isArray(j)?j[0]:H;if(N in Y.#Q){if(Y=Y.#Q[N],j)U.push(j[1]);continue}if(Y.#Q[N]=new RU,j)Y.#X.push(j),U.push(j[1]);Y=Y.#Q[N]}return Y.#$.push({[$]:{handler:X,possibleKeys:U.filter((G,z,H)=>H.indexOf(G)===z),score:this.#U}}),Y}#J($,Q,X,Y){let J=[];for(let U=0,G=$.#$.length;U<G;U++){let z=$.#$[U],H=z[Q]||z[P$],W={};if(H!==void 0){if(H.params=Object.create(null),J.push(H),X!==AQ||Y&&Y!==AQ)for(let j=0,N=H.possibleKeys.length;j<N;j++){let K=H.possibleKeys[j],w=W[H.score];H.params[K]=Y?.[K]&&!w?Y[K]:X[K]??Y?.[K],W[H.score]=!0}}}return J}search($,Q){let X=[];this.#Y=AQ;let J=[this],U=FU(Q),G=[];for(let z=0,H=U.length;z<H;z++){let W=U[z],j=z===H-1,N=[];for(let K=0,w=J.length;K<w;K++){let B=J[K],D=B.#Q[W];if(D)if(D.#Y=B.#Y,j){if(D.#Q["*"])X.push(...this.#J(D.#Q["*"],$,B.#Y));X.push(...this.#J(D,$,B.#Y))}else N.push(D);for(let F=0,V=B.#X.length;F<V;F++){let O=B.#X[F],A=B.#Y===AQ?{}:{...B.#Y};if(O==="*"){let R=B.#Q["*"];if(R)X.push(...this.#J(R,$,B.#Y)),R.#Y=A,N.push(R);continue}let[L,I,P]=O;if(!W&&!(P instanceof RegExp))continue;let v=B.#Q[L],Z=U.slice(z).join("/");if(P instanceof RegExp){let R=P.exec(Z);if(R){if(A[I]=R[0],X.push(...this.#J(v,$,B.#Y,A)),Object.keys(v.#Q).length){v.#Y=A;let C=R[0].match(/\//)?.length??0;(G[C]||=[]).push(v)}continue}}if(P===!0||P.test(W))if(A[I]=W,j){if(X.push(...this.#J(v,$,A,B.#Y)),v.#Q["*"])X.push(...this.#J(v.#Q["*"],$,A,B.#Y))}else v.#Y=A,N.push(v)}}J=N.concat(G.shift()??[])}if(X.length>1)X.sort((z,H)=>{return z.score-H.score});return[X.map(({handler:z,params:H})=>[z,H])]}};var ZU=class{name="TrieRouter";#$;constructor(){this.#$=new RU}add($,Q,X){let Y=EJ(Q);if(Y){for(let J=0,U=Y.length;J<U;J++)this.#$.insert($,Y[J],X);return}this.#$.insert($,Q,X)}match($,Q){return this.#$.search($,Q)}};var X6=class extends MU{constructor($={}){super($);this.router=$.router??new PU({routers:[new CJ,new ZU]})}};var Vj=($)=>{let X={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...$},Y=((U)=>{if(typeof U==="string")if(U==="*")return()=>U;else return(G)=>U===G?G:null;else if(typeof U==="function")return U;else return(G)=>U.includes(G)?G:null})(X.origin),J=((U)=>{if(typeof U==="function")return U;else if(Array.isArray(U))return()=>U;else return()=>[]})(X.allowMethods);return async function(G,z){function H(j,N){G.res.headers.set(j,N)}let W=await Y(G.req.header("origin")||"",G);if(W)H("Access-Control-Allow-Origin",W);if(X.origin!=="*"){let j=G.req.header("Vary");if(j)H("Vary",j);else H("Vary","Origin")}if(X.credentials)H("Access-Control-Allow-Credentials","true");if(X.exposeHeaders?.length)H("Access-Control-Expose-Headers",X.exposeHeaders.join(","));if(G.req.method==="OPTIONS"){if(X.maxAge!=null)H("Access-Control-Max-Age",X.maxAge.toString());let j=await J(G.req.header("origin")||"",G);if(j.length)H("Access-Control-Allow-Methods",j.join(","));let N=X.allowHeaders;if(!N?.length){let K=G.req.header("Access-Control-Request-Headers");if(K)N=K.split(/\s*,\s*/)}if(N?.length)H("Access-Control-Allow-Headers",N.join(",")),G.res.headers.append("Vary","Access-Control-Request-Headers");return G.res.headers.delete("Content-Length"),G.res.headers.delete("Content-Type"),new Response(null,{headers:G.res.headers,status:204,statusText:"No Content"})}await z()}};function sv(){let{process:$,Deno:Q}=globalThis;return!(typeof Q?.noColor==="boolean"?Q.noColor:$!==void 0?"NO_COLOR"in $?.env:!1)}async function Bj(){let{navigator:$}=globalThis,Q="cloudflare:workers";return!($!==void 0&&$.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import("cloudflare:workers")).env??{})}catch{return!1}})():!sv())}var ev=($)=>{let[Q,X]=[",","."];return $.map((J)=>J.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+Q)).join(X)},$I=($)=>{let Q=Date.now()-$;return ev([Q<1000?Q+"ms":Math.round(Q/1000)+"s"])},QI=async($)=>{if(await Bj())switch($/100|0){case 5:return`\x1B[31m${$}\x1B[0m`;case 4:return`\x1B[33m${$}\x1B[0m`;case 3:return`\x1B[36m${$}\x1B[0m`;case 2:return`\x1B[32m${$}\x1B[0m`}return`${$}`};async function Dj($,Q,X,Y,J=0,U){let G=Q==="<--"?`${Q} ${X} ${Y}`:`${Q} ${X} ${Y} ${await QI(J)} ${U}`;$(G)}var Oj=($=console.log)=>{return async function(X,Y){let{method:J,url:U}=X.req,G=U.slice(U.indexOf("/",8));await Dj($,"<--",J,G);let z=Date.now();await Y(),await Dj($,"-->",J,G,X.res.status,$I(z))}};import{existsSync as d0,readdirSync as Aj,readFileSync as bJ}from"node:fs";import{join as $4,resolve as FQ}from"node:path";var Fj=FQ(process.cwd(),".."),XI="../boilerplate-presets/universal",JI="../boilerplate-presets",YI=["../boilerplate-presets/universal","../../boilerplate-presets/universal","./boilerplate-presets/universal","../boilerplate-presets","../../boilerplate-presets","./boilerplate-presets"];function UI(){let $=process.cwd(),Q=[XI,...YI];for(let X of Q){let Y=FQ($,X);if(d0(Y)&&d0($4(Y,"index.html")))return Y}throw Error(`Unable to locate boilerplate project from cwd: ${$}`)}function Lj(){let $=process.cwd(),Q=FQ($,JI);if(d0(Q))return Q;return null}function SU($,Q=$,X={}){let Y=Aj($,{withFileTypes:!0});for(let J of Y){let U=$4($,J.name);if(J.isDirectory())SU(U,Q,X);else{let G=U.replace(Q+"/","");X["/"+G]=bJ(U,"utf8")}}return X}function w1($){let Q=null;if($){let X=Lj();if(X){let Y=$4(X,$);if(d0(Y)&&d0($4(Y,"index.html")))Q=SU(Y)}}if(!Q){let X=UI();Q=SU(X)}return V0(Q)}function vj(){let $=Lj();if(!$)return[];let Q=[],X=Aj($,{withFileTypes:!0});for(let Y of X)if(Y.isDirectory()&&Y.name!=="__non-migrated__"){let J=$4($,Y.name),U=$4(J,"package.json"),G=Y.name,z="";if(d0(U))try{let H=JSON.parse(bJ(U,"utf8"));G=H.name||Y.name,z=H.description||""}catch(H){}Q.push({id:Y.name,name:G,description:z})}return Q}var qI="hyper-runtime/dist/controls/index.js",GI="/__hypertool__/controls/index.js",zI="/__hypertool__/controls/globals.js",WI="hyper-runtime/dist/frame/index.js",HI="/__hypertool__/frame/index.js",jI="/__hypertool__/frame/globals.js";function wI($){try{let Q=FQ(Fj,qI);if(!d0(Q))return console.warn(`[boilerplate] Controls dist not found at ${Q}`),null;let X=bJ(Q,"utf8");console.log(`[boilerplate] Loaded controls bundle: ${X.length} bytes, hash: ${X.substring(0,50)}`),$[GI]=X;let Y=`
import { createControls, createControlPanel, HypertoolControls, injectThemeVariables, studioTheme } from "./index.js";

if (typeof window !== "undefined") {
  window.hypertoolControls = {
    createControls,
    createControlPanel,
    HypertoolControls,
    injectThemeVariables,
    studioTheme,
  };
}
`.trimStart();return $[zI]=Y,{src:"./__hypertool__/controls/globals.js",module:!0}}catch(Q){return console.error("[boilerplate] Failed to inject controls library:",Q),null}}function KI($){let Q=[];try{let X=FQ(Fj,WI);if(!d0(X))return console.warn(`[boilerplate] Frame dist not found at ${X}`),Q;let Y=bJ(X,"utf8");console.log(`[boilerplate] Loaded frame bundle: ${Y.length} bytes, hash: ${Y.substring(0,50)}`),$[HI]=Y;let J=`
import { createSandbox, ensureDependencies, mirrorCss, runtime } from "./index.js";

if (typeof window !== "undefined") {
  const existing = window.hyperFrame || {};
  window.hyperFrame = Object.assign({}, existing, {
    version: "universal",
    runtime,
    createSandbox,
    ensureDependencies,
    mirrorCss,
  });

  // Add message handling for capture functionality
  let recordingState = {
    isRecording: false,
    recorder: null,
    recordedChunks: []
  };

  window.addEventListener('message', (event) => {
    if (event.data?.source !== 'hypertool-main') return;
    
    const { type } = event.data;
    
    switch (type) {
      case 'HYPERTOOL_CAPTURE_PNG':
        handleCapturePNG();
        break;
      case 'HYPERTOOL_START_RECORDING':
        handleStartRecording();
        break;
      case 'HYPERTOOL_STOP_RECORDING':
        handleStopRecording();
        break;
    }
  });

  function handleCapturePNG() {
    const canvas = document.querySelector('canvas');
    if (canvas) {
      canvas.toBlob((blob) => {
        if (blob) {
          window.parent.postMessage({
            type: 'HYPERTOOL_CAPTURE_RESPONSE',
            data: {
              blob: blob,
              filename: 'hypertool-capture.png'
            }
          }, '*');
        }
      }, 'image/png');
    } else {
      console.warn('No canvas found for capture');
    }
  }

  function handleStartRecording() {
    console.log('Starting recording...');
    const canvas = document.querySelector('canvas');
    if (canvas && typeof canvas.captureStream === 'function') {
      const stream = canvas.captureStream(60);
      const recorder = new MediaRecorder(stream, {
        mimeType: 'video/webm;codecs=vp9',
      });
      
      recordingState.recordedChunks = [];
      
      recorder.ondataavailable = (event) => {
        if (event.data.size > 0) {
          recordingState.recordedChunks.push(event.data);
          console.log('Recording data available:', event.data.size, 'bytes');
        }
      };
      
      recorder.onstop = () => {
        console.log('Recording stopped, processing...');
        const blob = new Blob(recordingState.recordedChunks, { type: 'video/webm' });
        console.log('Recording blob size:', blob.size, 'bytes');
        window.parent.postMessage({
          type: 'HYPERTOOL_RECORDING_RESPONSE',
          data: {
            blob: blob,
            filename: 'hypertool-recording.webm'
          }
        }, '*');
        recordingState.isRecording = false;
        recordingState.recorder = null;
      };
      
      recorder.start();
      recordingState.recorder = recorder;
      recordingState.isRecording = true;
      console.log('Recording started successfully');
    } else {
      console.warn('Canvas not found or captureStream not supported');
    }
  }

  function handleStopRecording() {
    console.log('Stopping recording...');
    if (recordingState.recorder) {
      recordingState.recorder.stop();
      // Send immediate stop confirmation
      window.parent.postMessage({
        type: 'HYPERTOOL_RECORDING_STOPPED',
        data: {}
      }, '*');
      console.log('Stop recording message sent');
    } else {
      console.warn('No active recorder to stop');
    }
  }
}
`.trimStart();$[jI]=J,Q.push({src:"./__hypertool__/frame/globals.js",module:!0})}catch(X){console.error("[boilerplate] Failed to inject frame library:",X)}return Q}function NI($,Q){let X=$,Y=['<script type="module" src="./main.tsx"></script>','<script type="module" src="./main.ts"></script>'];for(let J of Q){if(X.includes(J.src))continue;let U=J.module===!1?`    <script src="${J.src}"></script>`:`    <script type="module" src="${J.src}"></script>`,G=!1;for(let z of Y)if(X.includes(z)){X=X.replace(z,`${U}
    ${z}`),G=!0;break}if(G)continue;if(X.includes("</body>")){X=X.replace("</body>",`${U}
</body>`);continue}X=`${X.trim()}
${U}
`}return X}function V0($){let Q={...$},X=[],Y=KI(Q);if(Y.length>0)X.push(...Y);let J=wI(Q);if(J)X.push(J);if(Q["/index.html"]&&X.length>0)Q["/index.html"]=NI(Q["/index.html"],X);return Q}function xJ(){let $=V0({});return Object.fromEntries(Object.entries($).filter(([Q])=>Q.startsWith("/__hypertool__/")))}var Ij=new X6;Ij.get("/",async($)=>{try{let Q=$.req.query("preset");if($.req.query("action")==="list"){let J=vj();return $.json({presets:J})}let Y=w1(Q||"circle");return $.json({files:Y})}catch(Q){return $.json({error:Q?.message??"Failed to read boilerplate"},500)}});var Ej=Ij;var Y$={};i0(Y$,{void:()=>sI,util:()=>W$,unknown:()=>aI,union:()=>XE,undefined:()=>nI,tuple:()=>UE,transformer:()=>VE,symbol:()=>pI,string:()=>xj,strictObject:()=>QE,setErrorMap:()=>DI,set:()=>zE,record:()=>qE,quotelessJson:()=>VI,promise:()=>NE,preprocess:()=>OE,pipeline:()=>AE,ostring:()=>FE,optional:()=>BE,onumber:()=>LE,oboolean:()=>vE,objectUtil:()=>TU,object:()=>$E,number:()=>kj,nullable:()=>DE,null:()=>rI,never:()=>tI,nativeEnum:()=>KE,nan:()=>iI,map:()=>GE,makeIssue:()=>LQ,literal:()=>jE,lazy:()=>HE,late:()=>cI,isValid:()=>l0,isDirty:()=>fJ,isAsync:()=>X4,isAborted:()=>kJ,intersection:()=>YE,instanceof:()=>uI,getParsedType:()=>t6,getErrorMap:()=>Q4,function:()=>WE,enum:()=>wE,effect:()=>VE,discriminatedUnion:()=>JE,defaultErrorMap:()=>B0,datetimeRegex:()=>Tj,date:()=>lI,custom:()=>bj,coerce:()=>IE,boolean:()=>fj,bigint:()=>dI,array:()=>eI,any:()=>oI,addIssueToContext:()=>p,ZodVoid:()=>IQ,ZodUnknown:()=>p0,ZodUnion:()=>z4,ZodUndefined:()=>q4,ZodType:()=>q$,ZodTuple:()=>e6,ZodTransformer:()=>i6,ZodSymbol:()=>vQ,ZodString:()=>h6,ZodSet:()=>B1,ZodSchema:()=>q$,ZodRecord:()=>EQ,ZodReadonly:()=>V4,ZodPromise:()=>D1,ZodPipeline:()=>RQ,ZodParsedType:()=>m,ZodOptional:()=>c6,ZodObject:()=>h$,ZodNumber:()=>n0,ZodNullable:()=>O0,ZodNull:()=>G4,ZodNever:()=>s6,ZodNativeEnum:()=>w4,ZodNaN:()=>PQ,ZodMap:()=>MQ,ZodLiteral:()=>j4,ZodLazy:()=>H4,ZodIssueCode:()=>_,ZodIntersection:()=>W4,ZodFunction:()=>Y4,ZodFirstPartyTypeKind:()=>g,ZodError:()=>B6,ZodEnum:()=>o0,ZodEffects:()=>i6,ZodDiscriminatedUnion:()=>yJ,ZodDefault:()=>K4,ZodDate:()=>N1,ZodCatch:()=>N4,ZodBranded:()=>_J,ZodBoolean:()=>U4,ZodBigInt:()=>r0,ZodArray:()=>m6,ZodAny:()=>V1,Schema:()=>q$,ParseStatus:()=>J6,OK:()=>z6,NEVER:()=>EE,INVALID:()=>e,EMPTY_PATH:()=>OI,DIRTY:()=>K1,BRAND:()=>mI});var W$;(function($){$.assertEqual=(J)=>{};function Q(J){}$.assertIs=Q;function X(J){throw Error()}$.assertNever=X,$.arrayToEnum=(J)=>{let U={};for(let G of J)U[G]=G;return U},$.getValidEnumValues=(J)=>{let U=$.objectKeys(J).filter((z)=>typeof J[J[z]]!=="number"),G={};for(let z of U)G[z]=J[z];return $.objectValues(G)},$.objectValues=(J)=>{return $.objectKeys(J).map(function(U){return J[U]})},$.objectKeys=typeof Object.keys==="function"?(J)=>Object.keys(J):(J)=>{let U=[];for(let G in J)if(Object.prototype.hasOwnProperty.call(J,G))U.push(G);return U},$.find=(J,U)=>{for(let G of J)if(U(G))return G;return},$.isInteger=typeof Number.isInteger==="function"?(J)=>Number.isInteger(J):(J)=>typeof J==="number"&&Number.isFinite(J)&&Math.floor(J)===J;function Y(J,U=" | "){return J.map((G)=>typeof G==="string"?`'${G}'`:G).join(U)}$.joinValues=Y,$.jsonStringifyReplacer=(J,U)=>{if(typeof U==="bigint")return U.toString();return U}})(W$||(W$={}));var TU;(function($){$.mergeShapes=(Q,X)=>{return{...Q,...X}}})(TU||(TU={}));var m=W$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t6=($)=>{switch(typeof $){case"undefined":return m.undefined;case"string":return m.string;case"number":return Number.isNaN($)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":if(Array.isArray($))return m.array;if($===null)return m.null;if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return m.promise;if(typeof Map<"u"&&$ instanceof Map)return m.map;if(typeof Set<"u"&&$ instanceof Set)return m.set;if(typeof Date<"u"&&$ instanceof Date)return m.date;return m.object;default:return m.unknown}};var _=W$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),VI=($)=>{return JSON.stringify($,null,2).replace(/"([^"]+)":/g,"$1:")};class B6 extends Error{get errors(){return this.issues}constructor($){super();this.issues=[],this.addIssue=(X)=>{this.issues=[...this.issues,X]},this.addIssues=(X=[])=>{this.issues=[...this.issues,...X]};let Q=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Q);else this.__proto__=Q;this.name="ZodError",this.issues=$}format($){let Q=$||function(J){return J.message},X={_errors:[]},Y=(J)=>{for(let U of J.issues)if(U.code==="invalid_union")U.unionErrors.map(Y);else if(U.code==="invalid_return_type")Y(U.returnTypeError);else if(U.code==="invalid_arguments")Y(U.argumentsError);else if(U.path.length===0)X._errors.push(Q(U));else{let G=X,z=0;while(z<U.path.length){let H=U.path[z];if(z!==U.path.length-1)G[H]=G[H]||{_errors:[]};else G[H]=G[H]||{_errors:[]},G[H]._errors.push(Q(U));G=G[H],z++}}};return Y(this),X}static assert($){if(!($ instanceof B6))throw Error(`Not a ZodError: ${$}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,W$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten($=(Q)=>Q.message){let Q={},X=[];for(let Y of this.issues)if(Y.path.length>0){let J=Y.path[0];Q[J]=Q[J]||[],Q[J].push($(Y))}else X.push($(Y));return{formErrors:X,fieldErrors:Q}}get formErrors(){return this.flatten()}}B6.create=($)=>{return new B6($)};var BI=($,Q)=>{let X;switch($.code){case _.invalid_type:if($.received===m.undefined)X="Required";else X=`Expected ${$.expected}, received ${$.received}`;break;case _.invalid_literal:X=`Invalid literal value, expected ${JSON.stringify($.expected,W$.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:X=`Unrecognized key(s) in object: ${W$.joinValues($.keys,", ")}`;break;case _.invalid_union:X="Invalid input";break;case _.invalid_union_discriminator:X=`Invalid discriminator value. Expected ${W$.joinValues($.options)}`;break;case _.invalid_enum_value:X=`Invalid enum value. Expected ${W$.joinValues($.options)}, received '${$.received}'`;break;case _.invalid_arguments:X="Invalid function arguments";break;case _.invalid_return_type:X="Invalid function return type";break;case _.invalid_date:X="Invalid date";break;case _.invalid_string:if(typeof $.validation==="object")if("includes"in $.validation){if(X=`Invalid input: must include "${$.validation.includes}"`,typeof $.validation.position==="number")X=`${X} at one or more positions greater than or equal to ${$.validation.position}`}else if("startsWith"in $.validation)X=`Invalid input: must start with "${$.validation.startsWith}"`;else if("endsWith"in $.validation)X=`Invalid input: must end with "${$.validation.endsWith}"`;else W$.assertNever($.validation);else if($.validation!=="regex")X=`Invalid ${$.validation}`;else X="Invalid";break;case _.too_small:if($.type==="array")X=`Array must contain ${$.exact?"exactly":$.inclusive?"at least":"more than"} ${$.minimum} element(s)`;else if($.type==="string")X=`String must contain ${$.exact?"exactly":$.inclusive?"at least":"over"} ${$.minimum} character(s)`;else if($.type==="number")X=`Number must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${$.minimum}`;else if($.type==="bigint")X=`Number must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${$.minimum}`;else if($.type==="date")X=`Date must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${new Date(Number($.minimum))}`;else X="Invalid input";break;case _.too_big:if($.type==="array")X=`Array must contain ${$.exact?"exactly":$.inclusive?"at most":"less than"} ${$.maximum} element(s)`;else if($.type==="string")X=`String must contain ${$.exact?"exactly":$.inclusive?"at most":"under"} ${$.maximum} character(s)`;else if($.type==="number")X=`Number must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="bigint")X=`BigInt must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="date")X=`Date must be ${$.exact?"exactly":$.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number($.maximum))}`;else X="Invalid input";break;case _.custom:X="Invalid input";break;case _.invalid_intersection_types:X="Intersection results could not be merged";break;case _.not_multiple_of:X=`Number must be a multiple of ${$.multipleOf}`;break;case _.not_finite:X="Number must be finite";break;default:X=Q.defaultError,W$.assertNever($)}return{message:X}},B0=BI;var Mj=B0;function DI($){Mj=$}function Q4(){return Mj}var LQ=($)=>{let{data:Q,path:X,errorMaps:Y,issueData:J}=$,U=[...X,...J.path||[]],G={...J,path:U};if(J.message!==void 0)return{...J,path:U,message:J.message};let z="",H=Y.filter((W)=>!!W).slice().reverse();for(let W of H)z=W(G,{data:Q,defaultError:z}).message;return{...J,path:U,message:z}},OI=[];function p($,Q){let X=Q4(),Y=LQ({issueData:Q,data:$.data,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,X,X===B0?void 0:B0].filter((J)=>!!J)});$.common.issues.push(Y)}class J6{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray($,Q){let X=[];for(let Y of Q){if(Y.status==="aborted")return e;if(Y.status==="dirty")$.dirty();X.push(Y.value)}return{status:$.value,value:X}}static async mergeObjectAsync($,Q){let X=[];for(let Y of Q){let J=await Y.key,U=await Y.value;X.push({key:J,value:U})}return J6.mergeObjectSync($,X)}static mergeObjectSync($,Q){let X={};for(let Y of Q){let{key:J,value:U}=Y;if(J.status==="aborted")return e;if(U.status==="aborted")return e;if(J.status==="dirty")$.dirty();if(U.status==="dirty")$.dirty();if(J.value!=="__proto__"&&(typeof U.value<"u"||Y.alwaysSet))X[J.value]=U.value}return{status:$.value,value:X}}}var e=Object.freeze({status:"aborted"}),K1=($)=>({status:"dirty",value:$}),z6=($)=>({status:"valid",value:$}),kJ=($)=>$.status==="aborted",fJ=($)=>$.status==="dirty",l0=($)=>$.status==="valid",X4=($)=>typeof Promise<"u"&&$ instanceof Promise;var a;(function($){$.errToObj=(Q)=>typeof Q==="string"?{message:Q}:Q||{},$.toString=(Q)=>typeof Q==="string"?Q:Q?.message})(a||(a={}));class u6{constructor($,Q,X,Y){this._cachedPath=[],this.parent=$,this.data=Q,this._path=X,this._key=Y}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var Pj=($,Q)=>{if(l0(Q))return{success:!0,data:Q.value};else{if(!$.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let X=new B6($.common.issues);return this._error=X,this._error}}}};function X$($){if(!$)return{};let{errorMap:Q,invalid_type_error:X,required_error:Y,description:J}=$;if(Q&&(X||Y))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Q)return{errorMap:Q,description:J};return{errorMap:(G,z)=>{let{message:H}=$;if(G.code==="invalid_enum_value")return{message:H??z.defaultError};if(typeof z.data>"u")return{message:H??Y??z.defaultError};if(G.code!=="invalid_type")return{message:z.defaultError};return{message:H??X??z.defaultError}},description:J}}class q${get description(){return this._def.description}_getType($){return t6($.data)}_getOrReturnCtx($,Q){return Q||{common:$.parent.common,data:$.data,parsedType:t6($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}_processInputParams($){return{status:new J6,ctx:{common:$.parent.common,data:$.data,parsedType:t6($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}}_parseSync($){let Q=this._parse($);if(X4(Q))throw Error("Synchronous parse encountered promise.");return Q}_parseAsync($){let Q=this._parse($);return Promise.resolve(Q)}parse($,Q){let X=this.safeParse($,Q);if(X.success)return X.data;throw X.error}safeParse($,Q){let X={common:{issues:[],async:Q?.async??!1,contextualErrorMap:Q?.errorMap},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:t6($)},Y=this._parseSync({data:$,path:X.path,parent:X});return Pj(X,Y)}"~validate"($){let Q={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:t6($)};if(!this["~standard"].async)try{let X=this._parseSync({data:$,path:[],parent:Q});return l0(X)?{value:X.value}:{issues:Q.common.issues}}catch(X){if(X?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;Q.common={issues:[],async:!0}}return this._parseAsync({data:$,path:[],parent:Q}).then((X)=>l0(X)?{value:X.value}:{issues:Q.common.issues})}async parseAsync($,Q){let X=await this.safeParseAsync($,Q);if(X.success)return X.data;throw X.error}async safeParseAsync($,Q){let X={common:{issues:[],contextualErrorMap:Q?.errorMap,async:!0},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:t6($)},Y=this._parse({data:$,path:X.path,parent:X}),J=await(X4(Y)?Y:Promise.resolve(Y));return Pj(X,J)}refine($,Q){let X=(Y)=>{if(typeof Q==="string"||typeof Q>"u")return{message:Q};else if(typeof Q==="function")return Q(Y);else return Q};return this._refinement((Y,J)=>{let U=$(Y),G=()=>J.addIssue({code:_.custom,...X(Y)});if(typeof Promise<"u"&&U instanceof Promise)return U.then((z)=>{if(!z)return G(),!1;else return!0});if(!U)return G(),!1;else return!0})}refinement($,Q){return this._refinement((X,Y)=>{if(!$(X))return Y.addIssue(typeof Q==="function"?Q(X,Y):Q),!1;else return!0})}_refinement($){return new i6({schema:this,typeName:g.ZodEffects,effect:{type:"refinement",refinement:$}})}superRefine($){return this._refinement($)}constructor($){this.spa=this.safeParseAsync,this._def=$,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(Q)=>this["~validate"](Q)}}optional(){return c6.create(this,this._def)}nullable(){return O0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return m6.create(this)}promise(){return D1.create(this,this._def)}or($){return z4.create([this,$],this._def)}and($){return W4.create(this,$,this._def)}transform($){return new i6({...X$(this._def),schema:this,typeName:g.ZodEffects,effect:{type:"transform",transform:$}})}default($){let Q=typeof $==="function"?$:()=>$;return new K4({...X$(this._def),innerType:this,defaultValue:Q,typeName:g.ZodDefault})}brand(){return new _J({typeName:g.ZodBranded,type:this,...X$(this._def)})}catch($){let Q=typeof $==="function"?$:()=>$;return new N4({...X$(this._def),innerType:this,catchValue:Q,typeName:g.ZodCatch})}describe($){return new this.constructor({...this._def,description:$})}pipe($){return RQ.create(this,$)}readonly(){return V4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var AI=/^c[^\s-]{8,}$/i,FI=/^[0-9a-z]+$/,LI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,II=/^[a-z0-9_-]{21}$/i,EI=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,MI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,PI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RI="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",CU,ZI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,CI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bI=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xI=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Zj="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kI=new RegExp(`^${Zj}$`);function Sj($){let Q="[0-5]\\d";if($.precision)Q=`${Q}\\.\\d{${$.precision}}`;else if($.precision==null)Q=`${Q}(\\.\\d+)?`;let X=$.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${Q})${X}`}function fI($){return new RegExp(`^${Sj($)}$`)}function Tj($){let Q=`${Zj}T${Sj($)}`,X=[];if(X.push($.local?"Z?":"Z"),$.offset)X.push("([+-]\\d{2}:?\\d{2})");return Q=`${Q}(${X.join("|")})`,new RegExp(`^${Q}$`)}function yI($,Q){if((Q==="v4"||!Q)&&ZI.test($))return!0;if((Q==="v6"||!Q)&&TI.test($))return!0;return!1}function _I($,Q){if(!EI.test($))return!1;try{let[X]=$.split(".");if(!X)return!1;let Y=X.replace(/-/g,"+").replace(/_/g,"/").padEnd(X.length+(4-X.length%4)%4,"="),J=JSON.parse(atob(Y));if(typeof J!=="object"||J===null)return!1;if("typ"in J&&J?.typ!=="JWT")return!1;if(!J.alg)return!1;if(Q&&J.alg!==Q)return!1;return!0}catch{return!1}}function gI($,Q){if((Q==="v4"||!Q)&&SI.test($))return!0;if((Q==="v6"||!Q)&&CI.test($))return!0;return!1}class h6 extends q${_parse($){if(this._def.coerce)$.data=String($.data);if(this._getType($)!==m.string){let J=this._getOrReturnCtx($);return p(J,{code:_.invalid_type,expected:m.string,received:J.parsedType}),e}let X=new J6,Y=void 0;for(let J of this._def.checks)if(J.kind==="min"){if($.data.length<J.value)Y=this._getOrReturnCtx($,Y),p(Y,{code:_.too_small,minimum:J.value,type:"string",inclusive:!0,exact:!1,message:J.message}),X.dirty()}else if(J.kind==="max"){if($.data.length>J.value)Y=this._getOrReturnCtx($,Y),p(Y,{code:_.too_big,maximum:J.value,type:"string",inclusive:!0,exact:!1,message:J.message}),X.dirty()}else if(J.kind==="length"){let U=$.data.length>J.value,G=$.data.length<J.value;if(U||G){if(Y=this._getOrReturnCtx($,Y),U)p(Y,{code:_.too_big,maximum:J.value,type:"string",inclusive:!0,exact:!0,message:J.message});else if(G)p(Y,{code:_.too_small,minimum:J.value,type:"string",inclusive:!0,exact:!0,message:J.message});X.dirty()}}else if(J.kind==="email"){if(!PI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"email",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="emoji"){if(!CU)CU=new RegExp(RI,"u");if(!CU.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"emoji",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="uuid"){if(!vI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"uuid",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="nanoid"){if(!II.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"nanoid",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="cuid"){if(!AI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"cuid",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="cuid2"){if(!FI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"cuid2",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="ulid"){if(!LI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"ulid",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="url")try{new URL($.data)}catch{Y=this._getOrReturnCtx($,Y),p(Y,{validation:"url",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="regex"){if(J.regex.lastIndex=0,!J.regex.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"regex",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="trim")$.data=$.data.trim();else if(J.kind==="includes"){if(!$.data.includes(J.value,J.position))Y=this._getOrReturnCtx($,Y),p(Y,{code:_.invalid_string,validation:{includes:J.value,position:J.position},message:J.message}),X.dirty()}else if(J.kind==="toLowerCase")$.data=$.data.toLowerCase();else if(J.kind==="toUpperCase")$.data=$.data.toUpperCase();else if(J.kind==="startsWith"){if(!$.data.startsWith(J.value))Y=this._getOrReturnCtx($,Y),p(Y,{code:_.invalid_string,validation:{startsWith:J.value},message:J.message}),X.dirty()}else if(J.kind==="endsWith"){if(!$.data.endsWith(J.value))Y=this._getOrReturnCtx($,Y),p(Y,{code:_.invalid_string,validation:{endsWith:J.value},message:J.message}),X.dirty()}else if(J.kind==="datetime"){if(!Tj(J).test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{code:_.invalid_string,validation:"datetime",message:J.message}),X.dirty()}else if(J.kind==="date"){if(!kI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{code:_.invalid_string,validation:"date",message:J.message}),X.dirty()}else if(J.kind==="time"){if(!fI(J).test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{code:_.invalid_string,validation:"time",message:J.message}),X.dirty()}else if(J.kind==="duration"){if(!MI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"duration",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="ip"){if(!yI($.data,J.version))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"ip",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="jwt"){if(!_I($.data,J.alg))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"jwt",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="cidr"){if(!gI($.data,J.version))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"cidr",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="base64"){if(!bI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"base64",code:_.invalid_string,message:J.message}),X.dirty()}else if(J.kind==="base64url"){if(!xI.test($.data))Y=this._getOrReturnCtx($,Y),p(Y,{validation:"base64url",code:_.invalid_string,message:J.message}),X.dirty()}else W$.assertNever(J);return{status:X.value,value:$.data}}_regex($,Q,X){return this.refinement((Y)=>$.test(Y),{validation:Q,code:_.invalid_string,...a.errToObj(X)})}_addCheck($){return new h6({...this._def,checks:[...this._def.checks,$]})}email($){return this._addCheck({kind:"email",...a.errToObj($)})}url($){return this._addCheck({kind:"url",...a.errToObj($)})}emoji($){return this._addCheck({kind:"emoji",...a.errToObj($)})}uuid($){return this._addCheck({kind:"uuid",...a.errToObj($)})}nanoid($){return this._addCheck({kind:"nanoid",...a.errToObj($)})}cuid($){return this._addCheck({kind:"cuid",...a.errToObj($)})}cuid2($){return this._addCheck({kind:"cuid2",...a.errToObj($)})}ulid($){return this._addCheck({kind:"ulid",...a.errToObj($)})}base64($){return this._addCheck({kind:"base64",...a.errToObj($)})}base64url($){return this._addCheck({kind:"base64url",...a.errToObj($)})}jwt($){return this._addCheck({kind:"jwt",...a.errToObj($)})}ip($){return this._addCheck({kind:"ip",...a.errToObj($)})}cidr($){return this._addCheck({kind:"cidr",...a.errToObj($)})}datetime($){if(typeof $==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:$});return this._addCheck({kind:"datetime",precision:typeof $?.precision>"u"?null:$?.precision,offset:$?.offset??!1,local:$?.local??!1,...a.errToObj($?.message)})}date($){return this._addCheck({kind:"date",message:$})}time($){if(typeof $==="string")return this._addCheck({kind:"time",precision:null,message:$});return this._addCheck({kind:"time",precision:typeof $?.precision>"u"?null:$?.precision,...a.errToObj($?.message)})}duration($){return this._addCheck({kind:"duration",...a.errToObj($)})}regex($,Q){return this._addCheck({kind:"regex",regex:$,...a.errToObj(Q)})}includes($,Q){return this._addCheck({kind:"includes",value:$,position:Q?.position,...a.errToObj(Q?.message)})}startsWith($,Q){return this._addCheck({kind:"startsWith",value:$,...a.errToObj(Q)})}endsWith($,Q){return this._addCheck({kind:"endsWith",value:$,...a.errToObj(Q)})}min($,Q){return this._addCheck({kind:"min",value:$,...a.errToObj(Q)})}max($,Q){return this._addCheck({kind:"max",value:$,...a.errToObj(Q)})}length($,Q){return this._addCheck({kind:"length",value:$,...a.errToObj(Q)})}nonempty($){return this.min(1,a.errToObj($))}trim(){return new h6({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new h6({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new h6({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(($)=>$.kind==="datetime")}get isDate(){return!!this._def.checks.find(($)=>$.kind==="date")}get isTime(){return!!this._def.checks.find(($)=>$.kind==="time")}get isDuration(){return!!this._def.checks.find(($)=>$.kind==="duration")}get isEmail(){return!!this._def.checks.find(($)=>$.kind==="email")}get isURL(){return!!this._def.checks.find(($)=>$.kind==="url")}get isEmoji(){return!!this._def.checks.find(($)=>$.kind==="emoji")}get isUUID(){return!!this._def.checks.find(($)=>$.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(($)=>$.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(($)=>$.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(($)=>$.kind==="cuid2")}get isULID(){return!!this._def.checks.find(($)=>$.kind==="ulid")}get isIP(){return!!this._def.checks.find(($)=>$.kind==="ip")}get isCIDR(){return!!this._def.checks.find(($)=>$.kind==="cidr")}get isBase64(){return!!this._def.checks.find(($)=>$.kind==="base64")}get isBase64url(){return!!this._def.checks.find(($)=>$.kind==="base64url")}get minLength(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $}get maxLength(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $}}h6.create=($)=>{return new h6({checks:[],typeName:g.ZodString,coerce:$?.coerce??!1,...X$($)})};function hI($,Q){let X=($.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,J=X>Y?X:Y,U=Number.parseInt($.toFixed(J).replace(".","")),G=Number.parseInt(Q.toFixed(J).replace(".",""));return U%G/10**J}class n0 extends q${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse($){if(this._def.coerce)$.data=Number($.data);if(this._getType($)!==m.number){let J=this._getOrReturnCtx($);return p(J,{code:_.invalid_type,expected:m.number,received:J.parsedType}),e}let X=void 0,Y=new J6;for(let J of this._def.checks)if(J.kind==="int"){if(!W$.isInteger($.data))X=this._getOrReturnCtx($,X),p(X,{code:_.invalid_type,expected:"integer",received:"float",message:J.message}),Y.dirty()}else if(J.kind==="min"){if(J.inclusive?$.data<J.value:$.data<=J.value)X=this._getOrReturnCtx($,X),p(X,{code:_.too_small,minimum:J.value,type:"number",inclusive:J.inclusive,exact:!1,message:J.message}),Y.dirty()}else if(J.kind==="max"){if(J.inclusive?$.data>J.value:$.data>=J.value)X=this._getOrReturnCtx($,X),p(X,{code:_.too_big,maximum:J.value,type:"number",inclusive:J.inclusive,exact:!1,message:J.message}),Y.dirty()}else if(J.kind==="multipleOf"){if(hI($.data,J.value)!==0)X=this._getOrReturnCtx($,X),p(X,{code:_.not_multiple_of,multipleOf:J.value,message:J.message}),Y.dirty()}else if(J.kind==="finite"){if(!Number.isFinite($.data))X=this._getOrReturnCtx($,X),p(X,{code:_.not_finite,message:J.message}),Y.dirty()}else W$.assertNever(J);return{status:Y.value,value:$.data}}gte($,Q){return this.setLimit("min",$,!0,a.toString(Q))}gt($,Q){return this.setLimit("min",$,!1,a.toString(Q))}lte($,Q){return this.setLimit("max",$,!0,a.toString(Q))}lt($,Q){return this.setLimit("max",$,!1,a.toString(Q))}setLimit($,Q,X,Y){return new n0({...this._def,checks:[...this._def.checks,{kind:$,value:Q,inclusive:X,message:a.toString(Y)}]})}_addCheck($){return new n0({...this._def,checks:[...this._def.checks,$]})}int($){return this._addCheck({kind:"int",message:a.toString($)})}positive($){return this._addCheck({kind:"min",value:0,inclusive:!1,message:a.toString($)})}negative($){return this._addCheck({kind:"max",value:0,inclusive:!1,message:a.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:0,inclusive:!0,message:a.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:0,inclusive:!0,message:a.toString($)})}multipleOf($,Q){return this._addCheck({kind:"multipleOf",value:$,message:a.toString(Q)})}finite($){return this._addCheck({kind:"finite",message:a.toString($)})}safe($){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:a.toString($)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:a.toString($)})}get minValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $}get maxValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $}get isInt(){return!!this._def.checks.find(($)=>$.kind==="int"||$.kind==="multipleOf"&&W$.isInteger($.value))}get isFinite(){let $=null,Q=null;for(let X of this._def.checks)if(X.kind==="finite"||X.kind==="int"||X.kind==="multipleOf")return!0;else if(X.kind==="min"){if(Q===null||X.value>Q)Q=X.value}else if(X.kind==="max"){if($===null||X.value<$)$=X.value}return Number.isFinite(Q)&&Number.isFinite($)}}n0.create=($)=>{return new n0({checks:[],typeName:g.ZodNumber,coerce:$?.coerce||!1,...X$($)})};class r0 extends q${constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse($){if(this._def.coerce)try{$.data=BigInt($.data)}catch{return this._getInvalidInput($)}if(this._getType($)!==m.bigint)return this._getInvalidInput($);let X=void 0,Y=new J6;for(let J of this._def.checks)if(J.kind==="min"){if(J.inclusive?$.data<J.value:$.data<=J.value)X=this._getOrReturnCtx($,X),p(X,{code:_.too_small,type:"bigint",minimum:J.value,inclusive:J.inclusive,message:J.message}),Y.dirty()}else if(J.kind==="max"){if(J.inclusive?$.data>J.value:$.data>=J.value)X=this._getOrReturnCtx($,X),p(X,{code:_.too_big,type:"bigint",maximum:J.value,inclusive:J.inclusive,message:J.message}),Y.dirty()}else if(J.kind==="multipleOf"){if($.data%J.value!==BigInt(0))X=this._getOrReturnCtx($,X),p(X,{code:_.not_multiple_of,multipleOf:J.value,message:J.message}),Y.dirty()}else W$.assertNever(J);return{status:Y.value,value:$.data}}_getInvalidInput($){let Q=this._getOrReturnCtx($);return p(Q,{code:_.invalid_type,expected:m.bigint,received:Q.parsedType}),e}gte($,Q){return this.setLimit("min",$,!0,a.toString(Q))}gt($,Q){return this.setLimit("min",$,!1,a.toString(Q))}lte($,Q){return this.setLimit("max",$,!0,a.toString(Q))}lt($,Q){return this.setLimit("max",$,!1,a.toString(Q))}setLimit($,Q,X,Y){return new r0({...this._def,checks:[...this._def.checks,{kind:$,value:Q,inclusive:X,message:a.toString(Y)}]})}_addCheck($){return new r0({...this._def,checks:[...this._def.checks,$]})}positive($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:a.toString($)})}negative($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:a.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:a.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:a.toString($)})}multipleOf($,Q){return this._addCheck({kind:"multipleOf",value:$,message:a.toString(Q)})}get minValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $}get maxValue(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $}}r0.create=($)=>{return new r0({checks:[],typeName:g.ZodBigInt,coerce:$?.coerce??!1,...X$($)})};class U4 extends q${_parse($){if(this._def.coerce)$.data=Boolean($.data);if(this._getType($)!==m.boolean){let X=this._getOrReturnCtx($);return p(X,{code:_.invalid_type,expected:m.boolean,received:X.parsedType}),e}return z6($.data)}}U4.create=($)=>{return new U4({typeName:g.ZodBoolean,coerce:$?.coerce||!1,...X$($)})};class N1 extends q${_parse($){if(this._def.coerce)$.data=new Date($.data);if(this._getType($)!==m.date){let J=this._getOrReturnCtx($);return p(J,{code:_.invalid_type,expected:m.date,received:J.parsedType}),e}if(Number.isNaN($.data.getTime())){let J=this._getOrReturnCtx($);return p(J,{code:_.invalid_date}),e}let X=new J6,Y=void 0;for(let J of this._def.checks)if(J.kind==="min"){if($.data.getTime()<J.value)Y=this._getOrReturnCtx($,Y),p(Y,{code:_.too_small,message:J.message,inclusive:!0,exact:!1,minimum:J.value,type:"date"}),X.dirty()}else if(J.kind==="max"){if($.data.getTime()>J.value)Y=this._getOrReturnCtx($,Y),p(Y,{code:_.too_big,message:J.message,inclusive:!0,exact:!1,maximum:J.value,type:"date"}),X.dirty()}else W$.assertNever(J);return{status:X.value,value:new Date($.data.getTime())}}_addCheck($){return new N1({...this._def,checks:[...this._def.checks,$]})}min($,Q){return this._addCheck({kind:"min",value:$.getTime(),message:a.toString(Q)})}max($,Q){return this._addCheck({kind:"max",value:$.getTime(),message:a.toString(Q)})}get minDate(){let $=null;for(let Q of this._def.checks)if(Q.kind==="min"){if($===null||Q.value>$)$=Q.value}return $!=null?new Date($):null}get maxDate(){let $=null;for(let Q of this._def.checks)if(Q.kind==="max"){if($===null||Q.value<$)$=Q.value}return $!=null?new Date($):null}}N1.create=($)=>{return new N1({checks:[],coerce:$?.coerce||!1,typeName:g.ZodDate,...X$($)})};class vQ extends q${_parse($){if(this._getType($)!==m.symbol){let X=this._getOrReturnCtx($);return p(X,{code:_.invalid_type,expected:m.symbol,received:X.parsedType}),e}return z6($.data)}}vQ.create=($)=>{return new vQ({typeName:g.ZodSymbol,...X$($)})};class q4 extends q${_parse($){if(this._getType($)!==m.undefined){let X=this._getOrReturnCtx($);return p(X,{code:_.invalid_type,expected:m.undefined,received:X.parsedType}),e}return z6($.data)}}q4.create=($)=>{return new q4({typeName:g.ZodUndefined,...X$($)})};class G4 extends q${_parse($){if(this._getType($)!==m.null){let X=this._getOrReturnCtx($);return p(X,{code:_.invalid_type,expected:m.null,received:X.parsedType}),e}return z6($.data)}}G4.create=($)=>{return new G4({typeName:g.ZodNull,...X$($)})};class V1 extends q${constructor(){super(...arguments);this._any=!0}_parse($){return z6($.data)}}V1.create=($)=>{return new V1({typeName:g.ZodAny,...X$($)})};class p0 extends q${constructor(){super(...arguments);this._unknown=!0}_parse($){return z6($.data)}}p0.create=($)=>{return new p0({typeName:g.ZodUnknown,...X$($)})};class s6 extends q${_parse($){let Q=this._getOrReturnCtx($);return p(Q,{code:_.invalid_type,expected:m.never,received:Q.parsedType}),e}}s6.create=($)=>{return new s6({typeName:g.ZodNever,...X$($)})};class IQ extends q${_parse($){if(this._getType($)!==m.undefined){let X=this._getOrReturnCtx($);return p(X,{code:_.invalid_type,expected:m.void,received:X.parsedType}),e}return z6($.data)}}IQ.create=($)=>{return new IQ({typeName:g.ZodVoid,...X$($)})};class m6 extends q${_parse($){let{ctx:Q,status:X}=this._processInputParams($),Y=this._def;if(Q.parsedType!==m.array)return p(Q,{code:_.invalid_type,expected:m.array,received:Q.parsedType}),e;if(Y.exactLength!==null){let U=Q.data.length>Y.exactLength.value,G=Q.data.length<Y.exactLength.value;if(U||G)p(Q,{code:U?_.too_big:_.too_small,minimum:G?Y.exactLength.value:void 0,maximum:U?Y.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Y.exactLength.message}),X.dirty()}if(Y.minLength!==null){if(Q.data.length<Y.minLength.value)p(Q,{code:_.too_small,minimum:Y.minLength.value,type:"array",inclusive:!0,exact:!1,message:Y.minLength.message}),X.dirty()}if(Y.maxLength!==null){if(Q.data.length>Y.maxLength.value)p(Q,{code:_.too_big,maximum:Y.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Y.maxLength.message}),X.dirty()}if(Q.common.async)return Promise.all([...Q.data].map((U,G)=>{return Y.type._parseAsync(new u6(Q,U,Q.path,G))})).then((U)=>{return J6.mergeArray(X,U)});let J=[...Q.data].map((U,G)=>{return Y.type._parseSync(new u6(Q,U,Q.path,G))});return J6.mergeArray(X,J)}get element(){return this._def.type}min($,Q){return new m6({...this._def,minLength:{value:$,message:a.toString(Q)}})}max($,Q){return new m6({...this._def,maxLength:{value:$,message:a.toString(Q)}})}length($,Q){return new m6({...this._def,exactLength:{value:$,message:a.toString(Q)}})}nonempty($){return this.min(1,$)}}m6.create=($,Q)=>{return new m6({type:$,minLength:null,maxLength:null,exactLength:null,typeName:g.ZodArray,...X$(Q)})};function J4($){if($ instanceof h$){let Q={};for(let X in $.shape){let Y=$.shape[X];Q[X]=c6.create(J4(Y))}return new h$({...$._def,shape:()=>Q})}else if($ instanceof m6)return new m6({...$._def,type:J4($.element)});else if($ instanceof c6)return c6.create(J4($.unwrap()));else if($ instanceof O0)return O0.create(J4($.unwrap()));else if($ instanceof e6)return e6.create($.items.map((Q)=>J4(Q)));else return $}class h$ extends q${constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let $=this._def.shape(),Q=W$.objectKeys($);return this._cached={shape:$,keys:Q},this._cached}_parse($){if(this._getType($)!==m.object){let H=this._getOrReturnCtx($);return p(H,{code:_.invalid_type,expected:m.object,received:H.parsedType}),e}let{status:X,ctx:Y}=this._processInputParams($),{shape:J,keys:U}=this._getCached(),G=[];if(!(this._def.catchall instanceof s6&&this._def.unknownKeys==="strip")){for(let H in Y.data)if(!U.includes(H))G.push(H)}let z=[];for(let H of U){let W=J[H],j=Y.data[H];z.push({key:{status:"valid",value:H},value:W._parse(new u6(Y,j,Y.path,H)),alwaysSet:H in Y.data})}if(this._def.catchall instanceof s6){let H=this._def.unknownKeys;if(H==="passthrough")for(let W of G)z.push({key:{status:"valid",value:W},value:{status:"valid",value:Y.data[W]}});else if(H==="strict"){if(G.length>0)p(Y,{code:_.unrecognized_keys,keys:G}),X.dirty()}else if(H==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let H=this._def.catchall;for(let W of G){let j=Y.data[W];z.push({key:{status:"valid",value:W},value:H._parse(new u6(Y,j,Y.path,W)),alwaysSet:W in Y.data})}}if(Y.common.async)return Promise.resolve().then(async()=>{let H=[];for(let W of z){let j=await W.key,N=await W.value;H.push({key:j,value:N,alwaysSet:W.alwaysSet})}return H}).then((H)=>{return J6.mergeObjectSync(X,H)});else return J6.mergeObjectSync(X,z)}get shape(){return this._def.shape()}strict($){return a.errToObj,new h$({...this._def,unknownKeys:"strict",...$!==void 0?{errorMap:(Q,X)=>{let Y=this._def.errorMap?.(Q,X).message??X.defaultError;if(Q.code==="unrecognized_keys")return{message:a.errToObj($).message??Y};return{message:Y}}}:{}})}strip(){return new h$({...this._def,unknownKeys:"strip"})}passthrough(){return new h$({...this._def,unknownKeys:"passthrough"})}extend($){return new h$({...this._def,shape:()=>({...this._def.shape(),...$})})}merge($){return new h$({unknownKeys:$._def.unknownKeys,catchall:$._def.catchall,shape:()=>({...this._def.shape(),...$._def.shape()}),typeName:g.ZodObject})}setKey($,Q){return this.augment({[$]:Q})}catchall($){return new h$({...this._def,catchall:$})}pick($){let Q={};for(let X of W$.objectKeys($))if($[X]&&this.shape[X])Q[X]=this.shape[X];return new h$({...this._def,shape:()=>Q})}omit($){let Q={};for(let X of W$.objectKeys(this.shape))if(!$[X])Q[X]=this.shape[X];return new h$({...this._def,shape:()=>Q})}deepPartial(){return J4(this)}partial($){let Q={};for(let X of W$.objectKeys(this.shape)){let Y=this.shape[X];if($&&!$[X])Q[X]=Y;else Q[X]=Y.optional()}return new h$({...this._def,shape:()=>Q})}required($){let Q={};for(let X of W$.objectKeys(this.shape))if($&&!$[X])Q[X]=this.shape[X];else{let J=this.shape[X];while(J instanceof c6)J=J._def.innerType;Q[X]=J}return new h$({...this._def,shape:()=>Q})}keyof(){return Cj(W$.objectKeys(this.shape))}}h$.create=($,Q)=>{return new h$({shape:()=>$,unknownKeys:"strip",catchall:s6.create(),typeName:g.ZodObject,...X$(Q)})};h$.strictCreate=($,Q)=>{return new h$({shape:()=>$,unknownKeys:"strict",catchall:s6.create(),typeName:g.ZodObject,...X$(Q)})};h$.lazycreate=($,Q)=>{return new h$({shape:$,unknownKeys:"strip",catchall:s6.create(),typeName:g.ZodObject,...X$(Q)})};class z4 extends q${_parse($){let{ctx:Q}=this._processInputParams($),X=this._def.options;function Y(J){for(let G of J)if(G.result.status==="valid")return G.result;for(let G of J)if(G.result.status==="dirty")return Q.common.issues.push(...G.ctx.common.issues),G.result;let U=J.map((G)=>new B6(G.ctx.common.issues));return p(Q,{code:_.invalid_union,unionErrors:U}),e}if(Q.common.async)return Promise.all(X.map(async(J)=>{let U={...Q,common:{...Q.common,issues:[]},parent:null};return{result:await J._parseAsync({data:Q.data,path:Q.path,parent:U}),ctx:U}})).then(Y);else{let J=void 0,U=[];for(let z of X){let H={...Q,common:{...Q.common,issues:[]},parent:null},W=z._parseSync({data:Q.data,path:Q.path,parent:H});if(W.status==="valid")return W;else if(W.status==="dirty"&&!J)J={result:W,ctx:H};if(H.common.issues.length)U.push(H.common.issues)}if(J)return Q.common.issues.push(...J.ctx.common.issues),J.result;let G=U.map((z)=>new B6(z));return p(Q,{code:_.invalid_union,unionErrors:G}),e}}get options(){return this._def.options}}z4.create=($,Q)=>{return new z4({options:$,typeName:g.ZodUnion,...X$(Q)})};var D0=($)=>{if($ instanceof H4)return D0($.schema);else if($ instanceof i6)return D0($.innerType());else if($ instanceof j4)return[$.value];else if($ instanceof o0)return $.options;else if($ instanceof w4)return W$.objectValues($.enum);else if($ instanceof K4)return D0($._def.innerType);else if($ instanceof q4)return[void 0];else if($ instanceof G4)return[null];else if($ instanceof c6)return[void 0,...D0($.unwrap())];else if($ instanceof O0)return[null,...D0($.unwrap())];else if($ instanceof _J)return D0($.unwrap());else if($ instanceof V4)return D0($.unwrap());else if($ instanceof N4)return D0($._def.innerType);else return[]};class yJ extends q${_parse($){let{ctx:Q}=this._processInputParams($);if(Q.parsedType!==m.object)return p(Q,{code:_.invalid_type,expected:m.object,received:Q.parsedType}),e;let X=this.discriminator,Y=Q.data[X],J=this.optionsMap.get(Y);if(!J)return p(Q,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[X]}),e;if(Q.common.async)return J._parseAsync({data:Q.data,path:Q.path,parent:Q});else return J._parseSync({data:Q.data,path:Q.path,parent:Q})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create($,Q,X){let Y=new Map;for(let J of Q){let U=D0(J.shape[$]);if(!U.length)throw Error(`A discriminator value for key \`${$}\` could not be extracted from all schema options`);for(let G of U){if(Y.has(G))throw Error(`Discriminator property ${String($)} has duplicate value ${String(G)}`);Y.set(G,J)}}return new yJ({typeName:g.ZodDiscriminatedUnion,discriminator:$,options:Q,optionsMap:Y,...X$(X)})}}function bU($,Q){let X=t6($),Y=t6(Q);if($===Q)return{valid:!0,data:$};else if(X===m.object&&Y===m.object){let J=W$.objectKeys(Q),U=W$.objectKeys($).filter((z)=>J.indexOf(z)!==-1),G={...$,...Q};for(let z of U){let H=bU($[z],Q[z]);if(!H.valid)return{valid:!1};G[z]=H.data}return{valid:!0,data:G}}else if(X===m.array&&Y===m.array){if($.length!==Q.length)return{valid:!1};let J=[];for(let U=0;U<$.length;U++){let G=$[U],z=Q[U],H=bU(G,z);if(!H.valid)return{valid:!1};J.push(H.data)}return{valid:!0,data:J}}else if(X===m.date&&Y===m.date&&+$===+Q)return{valid:!0,data:$};else return{valid:!1}}class W4 extends q${_parse($){let{status:Q,ctx:X}=this._processInputParams($),Y=(J,U)=>{if(kJ(J)||kJ(U))return e;let G=bU(J.value,U.value);if(!G.valid)return p(X,{code:_.invalid_intersection_types}),e;if(fJ(J)||fJ(U))Q.dirty();return{status:Q.value,value:G.data}};if(X.common.async)return Promise.all([this._def.left._parseAsync({data:X.data,path:X.path,parent:X}),this._def.right._parseAsync({data:X.data,path:X.path,parent:X})]).then(([J,U])=>Y(J,U));else return Y(this._def.left._parseSync({data:X.data,path:X.path,parent:X}),this._def.right._parseSync({data:X.data,path:X.path,parent:X}))}}W4.create=($,Q,X)=>{return new W4({left:$,right:Q,typeName:g.ZodIntersection,...X$(X)})};class e6 extends q${_parse($){let{status:Q,ctx:X}=this._processInputParams($);if(X.parsedType!==m.array)return p(X,{code:_.invalid_type,expected:m.array,received:X.parsedType}),e;if(X.data.length<this._def.items.length)return p(X,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e;if(!this._def.rest&&X.data.length>this._def.items.length)p(X,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q.dirty();let J=[...X.data].map((U,G)=>{let z=this._def.items[G]||this._def.rest;if(!z)return null;return z._parse(new u6(X,U,X.path,G))}).filter((U)=>!!U);if(X.common.async)return Promise.all(J).then((U)=>{return J6.mergeArray(Q,U)});else return J6.mergeArray(Q,J)}get items(){return this._def.items}rest($){return new e6({...this._def,rest:$})}}e6.create=($,Q)=>{if(!Array.isArray($))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new e6({items:$,typeName:g.ZodTuple,rest:null,...X$(Q)})};class EQ extends q${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){let{status:Q,ctx:X}=this._processInputParams($);if(X.parsedType!==m.object)return p(X,{code:_.invalid_type,expected:m.object,received:X.parsedType}),e;let Y=[],J=this._def.keyType,U=this._def.valueType;for(let G in X.data)Y.push({key:J._parse(new u6(X,G,X.path,G)),value:U._parse(new u6(X,X.data[G],X.path,G)),alwaysSet:G in X.data});if(X.common.async)return J6.mergeObjectAsync(Q,Y);else return J6.mergeObjectSync(Q,Y)}get element(){return this._def.valueType}static create($,Q,X){if(Q instanceof q$)return new EQ({keyType:$,valueType:Q,typeName:g.ZodRecord,...X$(X)});return new EQ({keyType:h6.create(),valueType:$,typeName:g.ZodRecord,...X$(Q)})}}class MQ extends q${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){let{status:Q,ctx:X}=this._processInputParams($);if(X.parsedType!==m.map)return p(X,{code:_.invalid_type,expected:m.map,received:X.parsedType}),e;let Y=this._def.keyType,J=this._def.valueType,U=[...X.data.entries()].map(([G,z],H)=>{return{key:Y._parse(new u6(X,G,X.path,[H,"key"])),value:J._parse(new u6(X,z,X.path,[H,"value"]))}});if(X.common.async){let G=new Map;return Promise.resolve().then(async()=>{for(let z of U){let H=await z.key,W=await z.value;if(H.status==="aborted"||W.status==="aborted")return e;if(H.status==="dirty"||W.status==="dirty")Q.dirty();G.set(H.value,W.value)}return{status:Q.value,value:G}})}else{let G=new Map;for(let z of U){let{key:H,value:W}=z;if(H.status==="aborted"||W.status==="aborted")return e;if(H.status==="dirty"||W.status==="dirty")Q.dirty();G.set(H.value,W.value)}return{status:Q.value,value:G}}}}MQ.create=($,Q,X)=>{return new MQ({valueType:Q,keyType:$,typeName:g.ZodMap,...X$(X)})};class B1 extends q${_parse($){let{status:Q,ctx:X}=this._processInputParams($);if(X.parsedType!==m.set)return p(X,{code:_.invalid_type,expected:m.set,received:X.parsedType}),e;let Y=this._def;if(Y.minSize!==null){if(X.data.size<Y.minSize.value)p(X,{code:_.too_small,minimum:Y.minSize.value,type:"set",inclusive:!0,exact:!1,message:Y.minSize.message}),Q.dirty()}if(Y.maxSize!==null){if(X.data.size>Y.maxSize.value)p(X,{code:_.too_big,maximum:Y.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Y.maxSize.message}),Q.dirty()}let J=this._def.valueType;function U(z){let H=new Set;for(let W of z){if(W.status==="aborted")return e;if(W.status==="dirty")Q.dirty();H.add(W.value)}return{status:Q.value,value:H}}let G=[...X.data.values()].map((z,H)=>J._parse(new u6(X,z,X.path,H)));if(X.common.async)return Promise.all(G).then((z)=>U(z));else return U(G)}min($,Q){return new B1({...this._def,minSize:{value:$,message:a.toString(Q)}})}max($,Q){return new B1({...this._def,maxSize:{value:$,message:a.toString(Q)}})}size($,Q){return this.min($,Q).max($,Q)}nonempty($){return this.min(1,$)}}B1.create=($,Q)=>{return new B1({valueType:$,minSize:null,maxSize:null,typeName:g.ZodSet,...X$(Q)})};class Y4 extends q${constructor(){super(...arguments);this.validate=this.implement}_parse($){let{ctx:Q}=this._processInputParams($);if(Q.parsedType!==m.function)return p(Q,{code:_.invalid_type,expected:m.function,received:Q.parsedType}),e;function X(G,z){return LQ({data:G,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,Q4(),B0].filter((H)=>!!H),issueData:{code:_.invalid_arguments,argumentsError:z}})}function Y(G,z){return LQ({data:G,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,Q4(),B0].filter((H)=>!!H),issueData:{code:_.invalid_return_type,returnTypeError:z}})}let J={errorMap:Q.common.contextualErrorMap},U=Q.data;if(this._def.returns instanceof D1){let G=this;return z6(async function(...z){let H=new B6([]),W=await G._def.args.parseAsync(z,J).catch((K)=>{throw H.addIssue(X(z,K)),H}),j=await Reflect.apply(U,this,W);return await G._def.returns._def.type.parseAsync(j,J).catch((K)=>{throw H.addIssue(Y(j,K)),H})})}else{let G=this;return z6(function(...z){let H=G._def.args.safeParse(z,J);if(!H.success)throw new B6([X(z,H.error)]);let W=Reflect.apply(U,this,H.data),j=G._def.returns.safeParse(W,J);if(!j.success)throw new B6([Y(W,j.error)]);return j.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...$){return new Y4({...this._def,args:e6.create($).rest(p0.create())})}returns($){return new Y4({...this._def,returns:$})}implement($){return this.parse($)}strictImplement($){return this.parse($)}static create($,Q,X){return new Y4({args:$?$:e6.create([]).rest(p0.create()),returns:Q||p0.create(),typeName:g.ZodFunction,...X$(X)})}}class H4 extends q${get schema(){return this._def.getter()}_parse($){let{ctx:Q}=this._processInputParams($);return this._def.getter()._parse({data:Q.data,path:Q.path,parent:Q})}}H4.create=($,Q)=>{return new H4({getter:$,typeName:g.ZodLazy,...X$(Q)})};class j4 extends q${_parse($){if($.data!==this._def.value){let Q=this._getOrReturnCtx($);return p(Q,{received:Q.data,code:_.invalid_literal,expected:this._def.value}),e}return{status:"valid",value:$.data}}get value(){return this._def.value}}j4.create=($,Q)=>{return new j4({value:$,typeName:g.ZodLiteral,...X$(Q)})};function Cj($,Q){return new o0({values:$,typeName:g.ZodEnum,...X$(Q)})}class o0 extends q${_parse($){if(typeof $.data!=="string"){let Q=this._getOrReturnCtx($),X=this._def.values;return p(Q,{expected:W$.joinValues(X),received:Q.parsedType,code:_.invalid_type}),e}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has($.data)){let Q=this._getOrReturnCtx($),X=this._def.values;return p(Q,{received:Q.data,code:_.invalid_enum_value,options:X}),e}return z6($.data)}get options(){return this._def.values}get enum(){let $={};for(let Q of this._def.values)$[Q]=Q;return $}get Values(){let $={};for(let Q of this._def.values)$[Q]=Q;return $}get Enum(){let $={};for(let Q of this._def.values)$[Q]=Q;return $}extract($,Q=this._def){return o0.create($,{...this._def,...Q})}exclude($,Q=this._def){return o0.create(this.options.filter((X)=>!$.includes(X)),{...this._def,...Q})}}o0.create=Cj;class w4 extends q${_parse($){let Q=W$.getValidEnumValues(this._def.values),X=this._getOrReturnCtx($);if(X.parsedType!==m.string&&X.parsedType!==m.number){let Y=W$.objectValues(Q);return p(X,{expected:W$.joinValues(Y),received:X.parsedType,code:_.invalid_type}),e}if(!this._cache)this._cache=new Set(W$.getValidEnumValues(this._def.values));if(!this._cache.has($.data)){let Y=W$.objectValues(Q);return p(X,{received:X.data,code:_.invalid_enum_value,options:Y}),e}return z6($.data)}get enum(){return this._def.values}}w4.create=($,Q)=>{return new w4({values:$,typeName:g.ZodNativeEnum,...X$(Q)})};class D1 extends q${unwrap(){return this._def.type}_parse($){let{ctx:Q}=this._processInputParams($);if(Q.parsedType!==m.promise&&Q.common.async===!1)return p(Q,{code:_.invalid_type,expected:m.promise,received:Q.parsedType}),e;let X=Q.parsedType===m.promise?Q.data:Promise.resolve(Q.data);return z6(X.then((Y)=>{return this._def.type.parseAsync(Y,{path:Q.path,errorMap:Q.common.contextualErrorMap})}))}}D1.create=($,Q)=>{return new D1({type:$,typeName:g.ZodPromise,...X$(Q)})};class i6 extends q${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===g.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse($){let{status:Q,ctx:X}=this._processInputParams($),Y=this._def.effect||null,J={addIssue:(U)=>{if(p(X,U),U.fatal)Q.abort();else Q.dirty()},get path(){return X.path}};if(J.addIssue=J.addIssue.bind(J),Y.type==="preprocess"){let U=Y.transform(X.data,J);if(X.common.async)return Promise.resolve(U).then(async(G)=>{if(Q.value==="aborted")return e;let z=await this._def.schema._parseAsync({data:G,path:X.path,parent:X});if(z.status==="aborted")return e;if(z.status==="dirty")return K1(z.value);if(Q.value==="dirty")return K1(z.value);return z});else{if(Q.value==="aborted")return e;let G=this._def.schema._parseSync({data:U,path:X.path,parent:X});if(G.status==="aborted")return e;if(G.status==="dirty")return K1(G.value);if(Q.value==="dirty")return K1(G.value);return G}}if(Y.type==="refinement"){let U=(G)=>{let z=Y.refinement(G,J);if(X.common.async)return Promise.resolve(z);if(z instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return G};if(X.common.async===!1){let G=this._def.schema._parseSync({data:X.data,path:X.path,parent:X});if(G.status==="aborted")return e;if(G.status==="dirty")Q.dirty();return U(G.value),{status:Q.value,value:G.value}}else return this._def.schema._parseAsync({data:X.data,path:X.path,parent:X}).then((G)=>{if(G.status==="aborted")return e;if(G.status==="dirty")Q.dirty();return U(G.value).then(()=>{return{status:Q.value,value:G.value}})})}if(Y.type==="transform")if(X.common.async===!1){let U=this._def.schema._parseSync({data:X.data,path:X.path,parent:X});if(!l0(U))return e;let G=Y.transform(U.value,J);if(G instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Q.value,value:G}}else return this._def.schema._parseAsync({data:X.data,path:X.path,parent:X}).then((U)=>{if(!l0(U))return e;return Promise.resolve(Y.transform(U.value,J)).then((G)=>({status:Q.value,value:G}))});W$.assertNever(Y)}}i6.create=($,Q,X)=>{return new i6({schema:$,typeName:g.ZodEffects,effect:Q,...X$(X)})};i6.createWithPreprocess=($,Q,X)=>{return new i6({schema:Q,effect:{type:"preprocess",transform:$},typeName:g.ZodEffects,...X$(X)})};class c6 extends q${_parse($){if(this._getType($)===m.undefined)return z6(void 0);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}c6.create=($,Q)=>{return new c6({innerType:$,typeName:g.ZodOptional,...X$(Q)})};class O0 extends q${_parse($){if(this._getType($)===m.null)return z6(null);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}O0.create=($,Q)=>{return new O0({innerType:$,typeName:g.ZodNullable,...X$(Q)})};class K4 extends q${_parse($){let{ctx:Q}=this._processInputParams($),X=Q.data;if(Q.parsedType===m.undefined)X=this._def.defaultValue();return this._def.innerType._parse({data:X,path:Q.path,parent:Q})}removeDefault(){return this._def.innerType}}K4.create=($,Q)=>{return new K4({innerType:$,typeName:g.ZodDefault,defaultValue:typeof Q.default==="function"?Q.default:()=>Q.default,...X$(Q)})};class N4 extends q${_parse($){let{ctx:Q}=this._processInputParams($),X={...Q,common:{...Q.common,issues:[]}},Y=this._def.innerType._parse({data:X.data,path:X.path,parent:{...X}});if(X4(Y))return Y.then((J)=>{return{status:"valid",value:J.status==="valid"?J.value:this._def.catchValue({get error(){return new B6(X.common.issues)},input:X.data})}});else return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new B6(X.common.issues)},input:X.data})}}removeCatch(){return this._def.innerType}}N4.create=($,Q)=>{return new N4({innerType:$,typeName:g.ZodCatch,catchValue:typeof Q.catch==="function"?Q.catch:()=>Q.catch,...X$(Q)})};class PQ extends q${_parse($){if(this._getType($)!==m.nan){let X=this._getOrReturnCtx($);return p(X,{code:_.invalid_type,expected:m.nan,received:X.parsedType}),e}return{status:"valid",value:$.data}}}PQ.create=($)=>{return new PQ({typeName:g.ZodNaN,...X$($)})};var mI=Symbol("zod_brand");class _J extends q${_parse($){let{ctx:Q}=this._processInputParams($),X=Q.data;return this._def.type._parse({data:X,path:Q.path,parent:Q})}unwrap(){return this._def.type}}class RQ extends q${_parse($){let{status:Q,ctx:X}=this._processInputParams($);if(X.common.async)return(async()=>{let J=await this._def.in._parseAsync({data:X.data,path:X.path,parent:X});if(J.status==="aborted")return e;if(J.status==="dirty")return Q.dirty(),K1(J.value);else return this._def.out._parseAsync({data:J.value,path:X.path,parent:X})})();else{let Y=this._def.in._parseSync({data:X.data,path:X.path,parent:X});if(Y.status==="aborted")return e;if(Y.status==="dirty")return Q.dirty(),{status:"dirty",value:Y.value};else return this._def.out._parseSync({data:Y.value,path:X.path,parent:X})}}static create($,Q){return new RQ({in:$,out:Q,typeName:g.ZodPipeline})}}class V4 extends q${_parse($){let Q=this._def.innerType._parse($),X=(Y)=>{if(l0(Y))Y.value=Object.freeze(Y.value);return Y};return X4(Q)?Q.then((Y)=>X(Y)):X(Q)}unwrap(){return this._def.innerType}}V4.create=($,Q)=>{return new V4({innerType:$,typeName:g.ZodReadonly,...X$(Q)})};function Rj($,Q){let X=typeof $==="function"?$(Q):typeof $==="string"?{message:$}:$;return typeof X==="string"?{message:X}:X}function bj($,Q={},X){if($)return V1.create().superRefine((Y,J)=>{let U=$(Y);if(U instanceof Promise)return U.then((G)=>{if(!G){let z=Rj(Q,Y),H=z.fatal??X??!0;J.addIssue({code:"custom",...z,fatal:H})}});if(!U){let G=Rj(Q,Y),z=G.fatal??X??!0;J.addIssue({code:"custom",...G,fatal:z})}return});return V1.create()}var cI={object:h$.lazycreate},g;(function($){$.ZodString="ZodString",$.ZodNumber="ZodNumber",$.ZodNaN="ZodNaN",$.ZodBigInt="ZodBigInt",$.ZodBoolean="ZodBoolean",$.ZodDate="ZodDate",$.ZodSymbol="ZodSymbol",$.ZodUndefined="ZodUndefined",$.ZodNull="ZodNull",$.ZodAny="ZodAny",$.ZodUnknown="ZodUnknown",$.ZodNever="ZodNever",$.ZodVoid="ZodVoid",$.ZodArray="ZodArray",$.ZodObject="ZodObject",$.ZodUnion="ZodUnion",$.ZodDiscriminatedUnion="ZodDiscriminatedUnion",$.ZodIntersection="ZodIntersection",$.ZodTuple="ZodTuple",$.ZodRecord="ZodRecord",$.ZodMap="ZodMap",$.ZodSet="ZodSet",$.ZodFunction="ZodFunction",$.ZodLazy="ZodLazy",$.ZodLiteral="ZodLiteral",$.ZodEnum="ZodEnum",$.ZodEffects="ZodEffects",$.ZodNativeEnum="ZodNativeEnum",$.ZodOptional="ZodOptional",$.ZodNullable="ZodNullable",$.ZodDefault="ZodDefault",$.ZodCatch="ZodCatch",$.ZodPromise="ZodPromise",$.ZodBranded="ZodBranded",$.ZodPipeline="ZodPipeline",$.ZodReadonly="ZodReadonly"})(g||(g={}));var uI=($,Q={message:`Input not instance of ${$.name}`})=>bj((X)=>X instanceof $,Q),xj=h6.create,kj=n0.create,iI=PQ.create,dI=r0.create,fj=U4.create,lI=N1.create,pI=vQ.create,nI=q4.create,rI=G4.create,oI=V1.create,aI=p0.create,tI=s6.create,sI=IQ.create,eI=m6.create,$E=h$.create,QE=h$.strictCreate,XE=z4.create,JE=yJ.create,YE=W4.create,UE=e6.create,qE=EQ.create,GE=MQ.create,zE=B1.create,WE=Y4.create,HE=H4.create,jE=j4.create,wE=o0.create,KE=w4.create,NE=D1.create,VE=i6.create,BE=c6.create,DE=O0.create,OE=i6.createWithPreprocess,AE=RQ.create,FE=()=>xj().optional(),LE=()=>kj().optional(),vE=()=>fj().optional(),IE={string:($)=>h6.create({...$,coerce:!0}),number:($)=>n0.create({...$,coerce:!0}),boolean:($)=>U4.create({...$,coerce:!0}),bigint:($)=>r0.create({...$,coerce:!0}),date:($)=>N1.create({...$,coerce:!0})};var EE=e;var nN=u0(pN(),1),rN=new X6,OC=Y$.record(Y$.string());rN.post("/",async($)=>{try{let Q=await $.req.json(),X=OC.safeParse(Q.files);if(!X.success)return $.json({error:"Invalid files"},400);let Y=X.data,J=new nN.default;for(let[G,z]of Object.entries(Y)){let H=G.replace(/^\//,"");J.file(H,z)}let U=await J.generateAsync({type:"nodebuffer"});return $.body(U,200,{"Content-Type":"application/zip","Content-Disposition":"attachment; filename=project.zip"})}catch(Q){return $.json({error:Q?.message??"Failed to create zip"},500)}});var oN=rN;import{existsSync as FC,watch as LC}from"node:fs";import{resolve as vC,join as A7}from"node:path";var O7=class{writer;encoder;writable;abortSubscribers=[];responseReadable;aborted=!1;closed=!1;constructor($,Q){this.writable=$,this.writer=$.getWriter(),this.encoder=new TextEncoder;let X=Q.getReader();this.abortSubscribers.push(async()=>{await X.cancel()}),this.responseReadable=new ReadableStream({async pull(Y){let{done:J,value:U}=await X.read();J?Y.close():Y.enqueue(U)},cancel:()=>{this.abort()}})}async write($){try{if(typeof $==="string")$=this.encoder.encode($);await this.writer.write($)}catch{}return this}async writeln($){return await this.write($+`
`),this}sleep($){return new Promise((Q)=>setTimeout(Q,$))}async close(){try{await this.writer.close()}catch{}this.closed=!0}async pipe($){this.writer.releaseLock(),await $.pipeTo(this.writable,{preventClose:!0}),this.writer=this.writable.getWriter()}onAbort($){this.abortSubscribers.push($)}abort(){if(!this.aborted)this.aborted=!0,this.abortSubscribers.forEach(($)=>$())}};var SY=()=>{let $=typeof Bun<"u"?Bun.version:void 0;if($===void 0)return!1;let Q=$.startsWith("1.1")||$.startsWith("1.0")||$.startsWith("0.");return SY=()=>Q,Q};var AC=new WeakMap,c4=($,Q,X)=>{let{readable:Y,writable:J}=new TransformStream,U=new O7(J,Y);if(SY())$.req.raw.signal.addEventListener("abort",()=>{if(!U.closed)U.abort()});return AC.set(U.responseReadable,$),(async()=>{try{await Q(U)}catch(G){if(G===void 0);else if(G instanceof Error&&X)await X(G,U);else console.error(G)}finally{U.close()}})(),$.newResponse(U.responseReadable)};var tN=new X6,F7=new TextEncoder;function aN($,Q){if(Q)return F7.encode(`event: ${Q}
data: ${$}

`);return F7.encode(`data: ${$}

`)}tN.get("/",($)=>{return c4($,async(Q)=>{let X=vC(process.cwd(),"../hyper-runtime"),Y=A7(X,"dist"),J=[X,Y,A7(Y,"controls"),A7(Y,"frame")],U=[],G=null,z=async()=>{try{let H=xJ(),W={type:"bundles",bundles:H,timestamp:Date.now()};await Q.write(aN(JSON.stringify(W),"bundles")),console.log("[runtime-watch] Sent bundles via SSE:",Object.keys(H))}catch(H){console.error("[runtime-watch] Error sending bundles:",H)}};try{$.header("Content-Type","text/event-stream"),$.header("Cache-Control","no-cache, no-transform"),$.header("Connection","keep-alive"),await Q.write(aN(JSON.stringify({ready:!0}),"ready")),await z();for(let H of J){if(!FC(H))continue;let W=LC(H,(j,N)=>{if(N?.endsWith(".d.ts"))return;if(console.log(`[runtime-watch] File change detected: ${j} ${N}`),G)clearTimeout(G);G=setTimeout(()=>{z().catch((K)=>{console.error("[runtime-watch] Error in sendBundles:",K)})},250)});U.push(W)}while(!0)await Q.sleep(15000),await Q.write(F7.encode(`: keep-alive

`))}finally{if(G)clearTimeout(G);for(let H of U)H.close()}})});var sN=tN;var eN=new X6;eN.get("/",($)=>{try{console.log("[snapshot] Fetching fresh runtime bundles...");let Q=xJ(),X=Object.keys(Q),Y=Object.values(Q).reduce((J,U)=>J+U.length,0);return console.log(`[snapshot] Returning ${X.length} bundles, ${Y} total bytes`),$.json({bundles:Q},200,{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"})}catch(Q){return console.error("[snapshot] Error loading bundles:",Q),$.json({error:Q?.message??"Failed to load runtime bundles"},500)}});var $V=eN;var QV=Y$.record(Y$.string()),IC=Y$.object({role:Y$.enum(["user","assistant","system"]),content:Y$.string()}),zX=Y$.object({messages:Y$.array(IC.pick({role:!0,content:!0})),model:Y$.string(),apiKey:Y$.string().optional(),systemPrompt:Y$.string().optional(),currentFiles:QV.optional(),editMode:Y$.enum(["full","patch"]).default("full").optional()}),L7=Y$.object({type:Y$.enum(["search-replace","unified-diff"]),filePath:Y$.string(),search:Y$.string().optional(),replace:Y$.string().optional(),diff:Y$.string().optional(),context:Y$.string().optional()}),Yo=Y$.object({files:QV,explanation:Y$.string().optional()}),Uo=Y$.object({edits:Y$.array(L7),explanation:Y$.string().optional()});var XV="vercel.ai.error",EC=Symbol.for(XV),JV,MC=class $ extends Error{constructor({name:Q,message:X,cause:Y}){super(X);this[JV]=!0,this.name=Q,this.cause=Y}static isInstance(Q){return $.hasMarker(Q,XV)}static hasMarker(Q,X){let Y=Symbol.for(X);return Q!=null&&typeof Q==="object"&&Y in Q&&typeof Q[Y]==="boolean"&&Q[Y]===!0}};JV=EC;var t=MC,YV="AI_APICallError",UV=`vercel.ai.error.${YV}`,PC=Symbol.for(UV),qV,x$=class extends t{constructor({message:$,url:Q,requestBodyValues:X,statusCode:Y,responseHeaders:J,responseBody:U,cause:G,isRetryable:z=Y!=null&&(Y===408||Y===409||Y===429||Y>=500),data:H}){super({name:YV,message:$,cause:G});this[qV]=!0,this.url=Q,this.requestBodyValues=X,this.statusCode=Y,this.responseHeaders=J,this.responseBody=U,this.isRetryable=z,this.data=H}static isInstance($){return t.hasMarker($,UV)}};qV=PC;var GV="AI_EmptyResponseBodyError",zV=`vercel.ai.error.${GV}`,RC=Symbol.for(zV),WV,HV=class extends t{constructor({message:$="Empty response body"}={}){super({name:GV,message:$});this[WV]=!0}static isInstance($){return t.hasMarker($,zV)}};WV=RC;function z0($){if($==null)return"unknown error";if(typeof $==="string")return $;if($ instanceof Error)return $.message;return JSON.stringify($)}var jV="AI_InvalidArgumentError",wV=`vercel.ai.error.${jV}`,ZC=Symbol.for(wV),KV,CY=class extends t{constructor({message:$,cause:Q,argument:X}){super({name:jV,message:$,cause:Q});this[KV]=!0,this.argument=X}static isInstance($){return t.hasMarker($,wV)}};KV=ZC;var NV="AI_InvalidPromptError",VV=`vercel.ai.error.${NV}`,SC=Symbol.for(VV),BV,R0=class extends t{constructor({prompt:$,message:Q,cause:X}){super({name:NV,message:`Invalid prompt: ${Q}`,cause:X});this[BV]=!0,this.prompt=$}static isInstance($){return t.hasMarker($,VV)}};BV=SC;var DV="AI_InvalidResponseDataError",OV=`vercel.ai.error.${DV}`,TC=Symbol.for(OV),AV,bY=class extends t{constructor({data:$,message:Q=`Invalid response data: ${JSON.stringify($)}.`}){super({name:DV,message:Q});this[AV]=!0,this.data=$}static isInstance($){return t.hasMarker($,OV)}};AV=TC;var FV="AI_JSONParseError",LV=`vercel.ai.error.${FV}`,CC=Symbol.for(LV),vV,C1=class extends t{constructor({text:$,cause:Q}){super({name:FV,message:`JSON parsing failed: Text: ${$}.
Error message: ${z0(Q)}`,cause:Q});this[vV]=!0,this.text=$}static isInstance($){return t.hasMarker($,LV)}};vV=CC;var IV="AI_LoadAPIKeyError",EV=`vercel.ai.error.${IV}`,bC=Symbol.for(EV),MV,WX=class extends t{constructor({message:$}){super({name:IV,message:$});this[MV]=!0}static isInstance($){return t.hasMarker($,EV)}};MV=bC;var xC="AI_LoadSettingError",kC=`vercel.ai.error.${xC}`,fC=Symbol.for(kC),yC;yC=fC;var _C="AI_NoContentGeneratedError",gC=`vercel.ai.error.${_C}`,hC=Symbol.for(gC),mC;mC=hC;var PV="AI_NoSuchModelError",RV=`vercel.ai.error.${PV}`,cC=Symbol.for(RV),ZV,HX=class extends t{constructor({errorName:$=PV,modelId:Q,modelType:X,message:Y=`No such ${X}: ${Q}`}){super({name:$,message:Y});this[ZV]=!0,this.modelId=Q,this.modelType=X}static isInstance($){return t.hasMarker($,RV)}};ZV=cC;var SV="AI_TooManyEmbeddingValuesForCallError",TV=`vercel.ai.error.${SV}`,uC=Symbol.for(TV),CV,xY=class extends t{constructor($){super({name:SV,message:`Too many values for a single embedding call. The ${$.provider} model "${$.modelId}" can only embed up to ${$.maxEmbeddingsPerCall} values per call, but ${$.values.length} values were provided.`});this[CV]=!0,this.provider=$.provider,this.modelId=$.modelId,this.maxEmbeddingsPerCall=$.maxEmbeddingsPerCall,this.values=$.values}static isInstance($){return t.hasMarker($,TV)}};CV=uC;var bV="AI_TypeValidationError",xV=`vercel.ai.error.${bV}`,iC=Symbol.for(xV),kV,dC=class $ extends t{constructor({value:Q,cause:X}){super({name:bV,message:`Type validation failed: Value: ${JSON.stringify(Q)}.
Error message: ${z0(X)}`,cause:X});this[kV]=!0,this.value=Q}static isInstance(Q){return t.hasMarker(Q,xV)}static wrap({value:Q,cause:X}){return $.isInstance(X)&&X.value===Q?X:new $({value:Q,cause:X})}};kV=iC;var q6=dC,fV="AI_UnsupportedFunctionalityError",yV=`vercel.ai.error.${fV}`,lC=Symbol.for(yV),_V,K$=class extends t{constructor({functionality:$,message:Q=`'${$}' functionality not supported.`}){super({name:fV,message:Q});this[_V]=!0,this.functionality=$}static isInstance($){return t.hasMarker($,yV)}};_V=lC;function TY($){if($===null||typeof $==="string"||typeof $==="number"||typeof $==="boolean")return!0;if(Array.isArray($))return $.every(TY);if(typeof $==="object")return Object.entries($).every(([Q,X])=>typeof Q==="string"&&TY(X));return!1}function v7($){return Array.isArray($)&&$.every(TY)}function jX($){return $!=null&&typeof $==="object"&&Object.entries($).every(([Q,X])=>typeof Q==="string"&&TY(X))}class E7 extends Error{constructor($,Q){super($),this.name="ParseError",this.type=Q.type,this.field=Q.field,this.value=Q.value,this.line=Q.line}}function I7($){}function gV($){if(typeof $=="function")throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:Q=I7,onError:X=I7,onRetry:Y=I7,onComment:J}=$,U="",G=!0,z,H="",W="";function j(D){let F=G?D.replace(/^\xEF\xBB\xBF/,""):D,[V,O]=pC(`${U}${F}`);for(let A of V)N(A);U=O,G=!1}function N(D){if(D===""){w();return}if(D.startsWith(":")){J&&J(D.slice(D.startsWith(": ")?2:1));return}let F=D.indexOf(":");if(F!==-1){let V=D.slice(0,F),O=D[F+1]===" "?2:1,A=D.slice(F+O);K(V,A,D);return}K(D,"",D)}function K(D,F,V){switch(D){case"event":W=F;break;case"data":H=`${H}${F}
`;break;case"id":z=F.includes("\x00")?void 0:F;break;case"retry":/^\d+$/.test(F)?Y(parseInt(F,10)):X(new E7(`Invalid \`retry\` value: "${F}"`,{type:"invalid-retry",value:F,line:V}));break;default:X(new E7(`Unknown field "${D.length>20?`${D.slice(0,20)}…`:D}"`,{type:"unknown-field",field:D,value:F,line:V}));break}}function w(){H.length>0&&Q({id:z,event:W||void 0,data:H.endsWith(`
`)?H.slice(0,-1):H}),z=void 0,H="",W=""}function B(D={}){U&&D.consume&&N(U),G=!0,z=void 0,H="",W="",U=""}return{feed:j,reset:B}}function pC($){let Q=[],X="",Y=0;for(;Y<$.length;){let J=$.indexOf("\r",Y),U=$.indexOf(`
`,Y),G=-1;if(J!==-1&&U!==-1?G=Math.min(J,U):J!==-1?J===$.length-1?G=-1:G=J:U!==-1&&(G=U),G===-1){X=$.slice(Y);break}else{let z=$.slice(Y,G);Q.push(z),Y=G+1,$[Y-1]==="\r"&&$[Y]===`
`&&Y++}}return[Q,X]}class M7 extends TransformStream{constructor({onError:$,onRetry:Q,onComment:X}={}){let Y;super({start(J){Y=gV({onEvent:(U)=>{J.enqueue(U)},onError(U){$==="terminate"?J.error(U):typeof $=="function"&&$(U)},onRetry:Q,onComment:X})},transform(J){Y.feed(J)}})}}var q={};i0(q,{xid:()=>px,void:()=>Kk,uuidv7:()=>hx,uuidv6:()=>gx,uuidv4:()=>_x,uuid:()=>yx,url:()=>mx,uppercase:()=>kX,unknown:()=>M5,union:()=>b5,undefined:()=>jk,ulid:()=>lx,uint64:()=>Wk,uint32:()=>qk,tuple:()=>Fk,trim:()=>mX,treeifyError:()=>g7,transform:()=>lz,toUpperCase:()=>uX,toLowerCase:()=>cX,toJSONSchema:()=>dX,templateLiteral:()=>Sk,symbol:()=>Hk,superRefine:()=>eB,success:()=>Rk,stringbool:()=>xk,stringFormat:()=>Xk,string:()=>Fz,strictObject:()=>Dk,startsWith:()=>yX,size:()=>CX,setErrorMap:()=>_k,set:()=>Ik,safeParseAsync:()=>lX,safeParse:()=>Az,registry:()=>aY,regexes:()=>f1,regex:()=>bX,refine:()=>sB,record:()=>ZB,readonly:()=>pB,property:()=>Yz,promise:()=>Tk,prettifyError:()=>h7,preprocess:()=>fk,prefault:()=>hB,positive:()=>$z,pipe:()=>Z5,partialRecord:()=>Lk,parseAsync:()=>Oz,parse:()=>Dz,overwrite:()=>b0,optional:()=>P5,object:()=>Bk,number:()=>KB,nullish:()=>Pk,nullable:()=>R5,null:()=>OB,normalize:()=>hX,nonpositive:()=>Xz,nonoptional:()=>mB,nonnegative:()=>Jz,never:()=>S5,negative:()=>Qz,nativeEnum:()=>Ek,nanoid:()=>ux,nan:()=>Zk,multipleOf:()=>g1,minSize:()=>h1,minLength:()=>G1,mime:()=>gX,maxSize:()=>r4,maxLength:()=>o4,map:()=>vk,lte:()=>f6,lt:()=>T0,lowercase:()=>xX,looseObject:()=>Ok,locales:()=>ZX,literal:()=>xB,length:()=>a4,lazy:()=>oB,ksuid:()=>nx,keyof:()=>Vk,jwt:()=>Qk,json:()=>kk,iso:()=>I5,ipv6:()=>ox,ipv4:()=>rx,intersection:()=>PB,int64:()=>zk,int32:()=>Uk,int:()=>Lz,instanceof:()=>bk,includes:()=>fX,guid:()=>fx,gte:()=>A6,gt:()=>C0,globalRegistry:()=>W0,getErrorMap:()=>gk,function:()=>wz,formatError:()=>vX,float64:()=>Yk,float32:()=>Jk,flattenError:()=>LX,file:()=>Mk,enum:()=>CB,endsWith:()=>_X,emoji:()=>cx,email:()=>kx,e164:()=>$k,discriminatedUnion:()=>Ak,date:()=>Nk,custom:()=>Ck,cuid2:()=>dx,cuid:()=>ix,core:()=>x0,config:()=>r$,coerce:()=>oz,clone:()=>M6,cidrv6:()=>tx,cidrv4:()=>ax,check:()=>tB,catch:()=>iB,boolean:()=>NB,bigint:()=>Gk,base64url:()=>ex,base64:()=>sx,array:()=>cz,any:()=>wk,_default:()=>_B,_ZodString:()=>vz,ZodXID:()=>Tz,ZodVoid:()=>vB,ZodUnknown:()=>FB,ZodUnion:()=>uz,ZodUndefined:()=>BB,ZodUUID:()=>k0,ZodURL:()=>Ez,ZodULID:()=>Sz,ZodType:()=>G$,ZodTuple:()=>RB,ZodTransform:()=>dz,ZodTemplateLiteral:()=>nB,ZodSymbol:()=>VB,ZodSuccess:()=>cB,ZodStringFormat:()=>T$,ZodString:()=>nX,ZodSet:()=>TB,ZodRecord:()=>iz,ZodRealError:()=>t4,ZodReadonly:()=>lB,ZodPromise:()=>aB,ZodPrefault:()=>gB,ZodPipe:()=>rz,ZodOptional:()=>pz,ZodObject:()=>C5,ZodNumberFormat:()=>s4,ZodNumber:()=>rX,ZodNullable:()=>fB,ZodNull:()=>DB,ZodNonOptional:()=>nz,ZodNever:()=>LB,ZodNanoID:()=>Pz,ZodNaN:()=>dB,ZodMap:()=>SB,ZodLiteral:()=>bB,ZodLazy:()=>rB,ZodKSUID:()=>Cz,ZodJWT:()=>hz,ZodIssueCode:()=>yk,ZodIntersection:()=>MB,ZodISOTime:()=>L5,ZodISODuration:()=>v5,ZodISODateTime:()=>A5,ZodISODate:()=>F5,ZodIPv6:()=>xz,ZodIPv4:()=>bz,ZodGUID:()=>E5,ZodFile:()=>kB,ZodError:()=>bx,ZodEnum:()=>pX,ZodEmoji:()=>Mz,ZodEmail:()=>Iz,ZodE164:()=>gz,ZodDiscriminatedUnion:()=>EB,ZodDefault:()=>yB,ZodDate:()=>T5,ZodCustomStringFormat:()=>wB,ZodCustom:()=>x5,ZodCatch:()=>uB,ZodCUID2:()=>Zz,ZodCUID:()=>Rz,ZodCIDRv6:()=>fz,ZodCIDRv4:()=>kz,ZodBoolean:()=>oX,ZodBigIntFormat:()=>mz,ZodBigInt:()=>aX,ZodBase64URL:()=>_z,ZodBase64:()=>yz,ZodArray:()=>IB,ZodAny:()=>AB,TimePrecision:()=>R8,NEVER:()=>P7,$output:()=>I8,$input:()=>E8,$brand:()=>R7});var x0={};i0(x0,{version:()=>f9,util:()=>i,treeifyError:()=>g7,toJSONSchema:()=>dX,toDotPath:()=>cV,safeParseAsync:()=>c7,safeParse:()=>m7,registry:()=>aY,regexes:()=>f1,prettifyError:()=>h7,parseAsync:()=>gY,parse:()=>yY,locales:()=>ZX,isValidJWT:()=>UB,isValidBase64URL:()=>YB,isValidBase64:()=>XG,globalRegistry:()=>W0,globalConfig:()=>wX,function:()=>wz,formatError:()=>vX,flattenError:()=>LX,config:()=>r$,clone:()=>M6,_xid:()=>z5,_void:()=>a8,_uuidv7:()=>Q5,_uuidv6:()=>$5,_uuidv4:()=>eY,_uuid:()=>sY,_url:()=>X5,_uppercase:()=>kX,_unknown:()=>n4,_union:()=>Hx,_undefined:()=>p8,_ulid:()=>G5,_uint64:()=>d8,_uint32:()=>g8,_tuple:()=>Uz,_trim:()=>mX,_transform:()=>Ax,_toUpperCase:()=>uX,_toLowerCase:()=>cX,_templateLiteral:()=>Zx,_symbol:()=>l8,_success:()=>Ex,_stringbool:()=>Wz,_stringFormat:()=>Hz,_string:()=>M8,_startsWith:()=>yX,_size:()=>CX,_set:()=>Vx,_safeParseAsync:()=>mY,_safeParse:()=>hY,_regex:()=>bX,_refine:()=>zz,_record:()=>Kx,_readonly:()=>Rx,_property:()=>Yz,_promise:()=>Tx,_positive:()=>$z,_pipe:()=>Px,_parseAsync:()=>_Y,_parse:()=>fY,_overwrite:()=>b0,_optional:()=>Fx,_number:()=>b8,_nullable:()=>Lx,_null:()=>n8,_normalize:()=>hX,_nonpositive:()=>Xz,_nonoptional:()=>Ix,_nonnegative:()=>Jz,_never:()=>o8,_negative:()=>Qz,_nativeEnum:()=>Dx,_nanoid:()=>Y5,_nan:()=>e8,_multipleOf:()=>g1,_minSize:()=>h1,_minLength:()=>G1,_min:()=>A6,_mime:()=>gX,_maxSize:()=>r4,_maxLength:()=>o4,_max:()=>f6,_map:()=>Nx,_lte:()=>f6,_lt:()=>T0,_lowercase:()=>xX,_literal:()=>Ox,_length:()=>a4,_lazy:()=>Sx,_ksuid:()=>W5,_jwt:()=>D5,_isoTime:()=>T8,_isoDuration:()=>C8,_isoDateTime:()=>Z8,_isoDate:()=>S8,_ipv6:()=>j5,_ipv4:()=>H5,_intersection:()=>wx,_int64:()=>i8,_int32:()=>_8,_int:()=>k8,_includes:()=>fX,_guid:()=>TX,_gte:()=>A6,_gt:()=>C0,_float64:()=>y8,_float32:()=>f8,_file:()=>qz,_enum:()=>Bx,_endsWith:()=>_X,_emoji:()=>J5,_email:()=>tY,_e164:()=>B5,_discriminatedUnion:()=>jx,_default:()=>vx,_date:()=>t8,_custom:()=>Gz,_cuid2:()=>q5,_cuid:()=>U5,_coercedString:()=>P8,_coercedNumber:()=>x8,_coercedDate:()=>s8,_coercedBoolean:()=>m8,_coercedBigint:()=>u8,_cidrv6:()=>K5,_cidrv4:()=>w5,_catch:()=>Mx,_boolean:()=>h8,_bigint:()=>c8,_base64url:()=>V5,_base64:()=>N5,_array:()=>iX,_any:()=>r8,TimePrecision:()=>R8,NEVER:()=>P7,JSONSchemaGenerator:()=>O5,JSONSchema:()=>WB,Doc:()=>dY,$output:()=>I8,$input:()=>E8,$constructor:()=>M,$brand:()=>R7,$ZodXID:()=>p9,$ZodVoid:()=>VG,$ZodUnknown:()=>p4,$ZodUnion:()=>oY,$ZodUndefined:()=>jG,$ZodUUID:()=>g9,$ZodURL:()=>m9,$ZodULID:()=>l9,$ZodType:()=>Q$,$ZodTuple:()=>_1,$ZodTransform:()=>MX,$ZodTemplateLiteral:()=>fG,$ZodSymbol:()=>HG,$ZodSuccess:()=>CG,$ZodStringFormat:()=>R$,$ZodString:()=>y1,$ZodSet:()=>vG,$ZodRegistry:()=>SX,$ZodRecord:()=>FG,$ZodRealError:()=>d4,$ZodReadonly:()=>kG,$ZodPromise:()=>yG,$ZodPrefault:()=>SG,$ZodPipe:()=>PX,$ZodOptional:()=>PG,$ZodObject:()=>DG,$ZodNumberFormat:()=>zG,$ZodNumber:()=>nY,$ZodNullable:()=>RG,$ZodNull:()=>wG,$ZodNonOptional:()=>TG,$ZodNever:()=>NG,$ZodNanoID:()=>u9,$ZodNaN:()=>xG,$ZodMap:()=>LG,$ZodLiteral:()=>EG,$ZodLazy:()=>_G,$ZodKSUID:()=>n9,$ZodJWT:()=>qG,$ZodIntersection:()=>AG,$ZodISOTime:()=>a9,$ZodISODuration:()=>t9,$ZodISODateTime:()=>r9,$ZodISODate:()=>o9,$ZodIPv6:()=>e9,$ZodIPv4:()=>s9,$ZodGUID:()=>_9,$ZodFunction:()=>jz,$ZodFile:()=>MG,$ZodError:()=>FX,$ZodEnum:()=>IG,$ZodEmoji:()=>c9,$ZodEmail:()=>h9,$ZodE164:()=>UG,$ZodDiscriminatedUnion:()=>OG,$ZodDefault:()=>ZG,$ZodDate:()=>BG,$ZodCustomStringFormat:()=>GG,$ZodCustom:()=>gG,$ZodCheckUpperCase:()=>Z9,$ZodCheckStringFormat:()=>l4,$ZodCheckStartsWith:()=>T9,$ZodCheckSizeEquals:()=>v9,$ZodCheckRegex:()=>P9,$ZodCheckProperty:()=>b9,$ZodCheckOverwrite:()=>k9,$ZodCheckNumberFormat:()=>O9,$ZodCheckMultipleOf:()=>D9,$ZodCheckMinSize:()=>L9,$ZodCheckMinLength:()=>E9,$ZodCheckMimeType:()=>x9,$ZodCheckMaxSize:()=>F9,$ZodCheckMaxLength:()=>I9,$ZodCheckLowerCase:()=>R9,$ZodCheckLessThan:()=>uY,$ZodCheckLengthEquals:()=>M9,$ZodCheckIncludes:()=>S9,$ZodCheckGreaterThan:()=>iY,$ZodCheckEndsWith:()=>C9,$ZodCheckBigIntFormat:()=>A9,$ZodCheck:()=>c$,$ZodCatch:()=>bG,$ZodCUID2:()=>d9,$ZodCUID:()=>i9,$ZodCIDRv6:()=>QG,$ZodCIDRv4:()=>$G,$ZodBoolean:()=>IX,$ZodBigIntFormat:()=>WG,$ZodBigInt:()=>rY,$ZodBase64URL:()=>YG,$ZodBase64:()=>JG,$ZodAsyncError:()=>Z0,$ZodArray:()=>EX,$ZodAny:()=>KG});var P7=Object.freeze({status:"aborted"});function M($,Q,X){function Y(z,H){var W;Object.defineProperty(z,"_zod",{value:z._zod??{},enumerable:!1}),(W=z._zod).traits??(W.traits=new Set),z._zod.traits.add($),Q(z,H);for(let j in G.prototype)if(!(j in z))Object.defineProperty(z,j,{value:G.prototype[j].bind(z)});z._zod.constr=G,z._zod.def=H}let J=X?.Parent??Object;class U extends J{}Object.defineProperty(U,"name",{value:$});function G(z){var H;let W=X?.Parent?new U:this;Y(W,z),(H=W._zod).deferred??(H.deferred=[]);for(let j of W._zod.deferred)j();return W}return Object.defineProperty(G,"init",{value:Y}),Object.defineProperty(G,Symbol.hasInstance,{value:(z)=>{if(X?.Parent&&z instanceof X.Parent)return!0;return z?._zod?.traits?.has($)}}),Object.defineProperty(G,"name",{value:$}),G}var R7=Symbol("zod_brand");class Z0 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var wX={};function r$($){if($)Object.assign(wX,$);return wX}var i={};i0(i,{unwrapMessage:()=>KX,stringifyPrimitive:()=>u,required:()=>Wb,randomString:()=>$b,propertyKeyTypes:()=>DX,promiseAllObject:()=>eC,primitiveTypes:()=>x7,prefixIssues:()=>O6,pick:()=>Yb,partial:()=>zb,optionalKeys:()=>k7,omit:()=>Ub,numKeys:()=>Qb,nullish:()=>q1,normalizeParams:()=>h,merge:()=>Gb,jsonStringifyReplacer:()=>S7,joinValues:()=>k,issue:()=>_7,isPlainObject:()=>i4,isObject:()=>u4,getSizableOrigin:()=>OX,getParsedType:()=>Xb,getLengthableOrigin:()=>AX,getEnumValues:()=>NX,getElementAtPath:()=>sC,floatSafeRemainder:()=>T7,finalizeIssue:()=>P6,extend:()=>qb,escapeRegex:()=>S0,esc:()=>b1,defineLazy:()=>A$,createTransparentProxy:()=>Jb,clone:()=>M6,cleanRegex:()=>BX,cleanEnum:()=>Hb,captureStackTrace:()=>kY,cached:()=>VX,assignProp:()=>C7,assertNotEqual:()=>rC,assertNever:()=>aC,assertIs:()=>oC,assertEqual:()=>nC,assert:()=>tC,allowsEval:()=>b7,aborted:()=>x1,NUMBER_FORMAT_RANGES:()=>f7,Class:()=>hV,BIGINT_FORMAT_RANGES:()=>y7});function nC($){return $}function rC($){return $}function oC($){}function aC($){throw Error()}function tC($){}function NX($){let Q=Object.values($).filter((Y)=>typeof Y==="number");return Object.entries($).filter(([Y,J])=>Q.indexOf(+Y)===-1).map(([Y,J])=>J)}function k($,Q="|"){return $.map((X)=>u(X)).join(Q)}function S7($,Q){if(typeof Q==="bigint")return Q.toString();return Q}function VX($){return{get value(){{let X=$();return Object.defineProperty(this,"value",{value:X}),X}throw Error("cached value already set")}}}function q1($){return $===null||$===void 0}function BX($){let Q=$.startsWith("^")?1:0,X=$.endsWith("$")?$.length-1:$.length;return $.slice(Q,X)}function T7($,Q){let X=($.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,J=X>Y?X:Y,U=Number.parseInt($.toFixed(J).replace(".","")),G=Number.parseInt(Q.toFixed(J).replace(".",""));return U%G/10**J}function A$($,Q,X){Object.defineProperty($,Q,{get(){{let J=X();return $[Q]=J,J}throw Error("cached value already set")},set(J){Object.defineProperty($,Q,{value:J})},configurable:!0})}function C7($,Q,X){Object.defineProperty($,Q,{value:X,writable:!0,enumerable:!0,configurable:!0})}function sC($,Q){if(!Q)return $;return Q.reduce((X,Y)=>X?.[Y],$)}function eC($){let Q=Object.keys($),X=Q.map((Y)=>$[Y]);return Promise.all(X).then((Y)=>{let J={};for(let U=0;U<Q.length;U++)J[Q[U]]=Y[U];return J})}function $b($=10){let X="";for(let Y=0;Y<$;Y++)X+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return X}function b1($){return JSON.stringify($)}var kY=Error.captureStackTrace?Error.captureStackTrace:(...$)=>{};function u4($){return typeof $==="object"&&$!==null&&!Array.isArray($)}var b7=VX(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch($){return!1}});function i4($){if(u4($)===!1)return!1;let Q=$.constructor;if(Q===void 0)return!0;let X=Q.prototype;if(u4(X)===!1)return!1;if(Object.prototype.hasOwnProperty.call(X,"isPrototypeOf")===!1)return!1;return!0}function Qb($){let Q=0;for(let X in $)if(Object.prototype.hasOwnProperty.call($,X))Q++;return Q}var Xb=($)=>{let Q=typeof $;switch(Q){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN($)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray($))return"array";if($===null)return"null";if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return"promise";if(typeof Map<"u"&&$ instanceof Map)return"map";if(typeof Set<"u"&&$ instanceof Set)return"set";if(typeof Date<"u"&&$ instanceof Date)return"date";if(typeof File<"u"&&$ instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${Q}`)}},DX=new Set(["string","number","symbol"]),x7=new Set(["string","number","bigint","boolean","symbol","undefined"]);function S0($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M6($,Q,X){let Y=new $._zod.constr(Q??$._zod.def);if(!Q||X?.parent)Y._zod.parent=$;return Y}function h($){let Q=$;if(!Q)return{};if(typeof Q==="string")return{error:()=>Q};if(Q?.message!==void 0){if(Q?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");Q.error=Q.message}if(delete Q.message,typeof Q.error==="string")return{...Q,error:()=>Q.error};return Q}function Jb($){let Q;return new Proxy({},{get(X,Y,J){return Q??(Q=$()),Reflect.get(Q,Y,J)},set(X,Y,J,U){return Q??(Q=$()),Reflect.set(Q,Y,J,U)},has(X,Y){return Q??(Q=$()),Reflect.has(Q,Y)},deleteProperty(X,Y){return Q??(Q=$()),Reflect.deleteProperty(Q,Y)},ownKeys(X){return Q??(Q=$()),Reflect.ownKeys(Q)},getOwnPropertyDescriptor(X,Y){return Q??(Q=$()),Reflect.getOwnPropertyDescriptor(Q,Y)},defineProperty(X,Y,J){return Q??(Q=$()),Reflect.defineProperty(Q,Y,J)}})}function u($){if(typeof $==="bigint")return $.toString()+"n";if(typeof $==="string")return`"${$}"`;return`${$}`}function k7($){return Object.keys($).filter((Q)=>{return $[Q]._zod.optin==="optional"&&$[Q]._zod.optout==="optional"})}var f7={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},y7={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Yb($,Q){let X={},Y=$._zod.def;for(let J in Q){if(!(J in Y.shape))throw Error(`Unrecognized key: "${J}"`);if(!Q[J])continue;X[J]=Y.shape[J]}return M6($,{...$._zod.def,shape:X,checks:[]})}function Ub($,Q){let X={...$._zod.def.shape},Y=$._zod.def;for(let J in Q){if(!(J in Y.shape))throw Error(`Unrecognized key: "${J}"`);if(!Q[J])continue;delete X[J]}return M6($,{...$._zod.def,shape:X,checks:[]})}function qb($,Q){if(!i4(Q))throw Error("Invalid input to extend: expected a plain object");let X={...$._zod.def,get shape(){let Y={...$._zod.def.shape,...Q};return C7(this,"shape",Y),Y},checks:[]};return M6($,X)}function Gb($,Q){return M6($,{...$._zod.def,get shape(){let X={...$._zod.def.shape,...Q._zod.def.shape};return C7(this,"shape",X),X},catchall:Q._zod.def.catchall,checks:[]})}function zb($,Q,X){let Y=Q._zod.def.shape,J={...Y};if(X)for(let U in X){if(!(U in Y))throw Error(`Unrecognized key: "${U}"`);if(!X[U])continue;J[U]=$?new $({type:"optional",innerType:Y[U]}):Y[U]}else for(let U in Y)J[U]=$?new $({type:"optional",innerType:Y[U]}):Y[U];return M6(Q,{...Q._zod.def,shape:J,checks:[]})}function Wb($,Q,X){let Y=Q._zod.def.shape,J={...Y};if(X)for(let U in X){if(!(U in J))throw Error(`Unrecognized key: "${U}"`);if(!X[U])continue;J[U]=new $({type:"nonoptional",innerType:Y[U]})}else for(let U in Y)J[U]=new $({type:"nonoptional",innerType:Y[U]});return M6(Q,{...Q._zod.def,shape:J,checks:[]})}function x1($,Q=0){for(let X=Q;X<$.issues.length;X++)if($.issues[X]?.continue!==!0)return!0;return!1}function O6($,Q){return Q.map((X)=>{var Y;return(Y=X).path??(Y.path=[]),X.path.unshift($),X})}function KX($){return typeof $==="string"?$:$?.message}function P6($,Q,X){let Y={...$,path:$.path??[]};if(!$.message){let J=KX($.inst?._zod.def?.error?.($))??KX(Q?.error?.($))??KX(X.customError?.($))??KX(X.localeError?.($))??"Invalid input";Y.message=J}if(delete Y.inst,delete Y.continue,!Q?.reportInput)delete Y.input;return Y}function OX($){if($ instanceof Set)return"set";if($ instanceof Map)return"map";if($ instanceof File)return"file";return"unknown"}function AX($){if(Array.isArray($))return"array";if(typeof $==="string")return"string";return"unknown"}function _7(...$){let[Q,X,Y]=$;if(typeof Q==="string")return{message:Q,code:"custom",input:X,inst:Y};return{...Q}}function Hb($){return Object.entries($).filter(([Q,X])=>{return Number.isNaN(Number.parseInt(Q,10))}).map((Q)=>Q[1])}class hV{constructor(...$){}}var mV=($,Q)=>{$.name="$ZodError",Object.defineProperty($,"_zod",{value:$._zod,enumerable:!1}),Object.defineProperty($,"issues",{value:Q,enumerable:!1}),Object.defineProperty($,"message",{get(){return JSON.stringify(Q,S7,2)},enumerable:!0}),Object.defineProperty($,"toString",{value:()=>$.message,enumerable:!1})},FX=M("$ZodError",mV),d4=M("$ZodError",mV,{Parent:Error});function LX($,Q=(X)=>X.message){let X={},Y=[];for(let J of $.issues)if(J.path.length>0)X[J.path[0]]=X[J.path[0]]||[],X[J.path[0]].push(Q(J));else Y.push(Q(J));return{formErrors:Y,fieldErrors:X}}function vX($,Q){let X=Q||function(U){return U.message},Y={_errors:[]},J=(U)=>{for(let G of U.issues)if(G.code==="invalid_union"&&G.errors.length)G.errors.map((z)=>J({issues:z}));else if(G.code==="invalid_key")J({issues:G.issues});else if(G.code==="invalid_element")J({issues:G.issues});else if(G.path.length===0)Y._errors.push(X(G));else{let z=Y,H=0;while(H<G.path.length){let W=G.path[H];if(H!==G.path.length-1)z[W]=z[W]||{_errors:[]};else z[W]=z[W]||{_errors:[]},z[W]._errors.push(X(G));z=z[W],H++}}};return J($),Y}function g7($,Q){let X=Q||function(U){return U.message},Y={errors:[]},J=(U,G=[])=>{var z,H;for(let W of U.issues)if(W.code==="invalid_union"&&W.errors.length)W.errors.map((j)=>J({issues:j},W.path));else if(W.code==="invalid_key")J({issues:W.issues},W.path);else if(W.code==="invalid_element")J({issues:W.issues},W.path);else{let j=[...G,...W.path];if(j.length===0){Y.errors.push(X(W));continue}let N=Y,K=0;while(K<j.length){let w=j[K],B=K===j.length-1;if(typeof w==="string")N.properties??(N.properties={}),(z=N.properties)[w]??(z[w]={errors:[]}),N=N.properties[w];else N.items??(N.items=[]),(H=N.items)[w]??(H[w]={errors:[]}),N=N.items[w];if(B)N.errors.push(X(W));K++}}};return J($),Y}function cV($){let Q=[];for(let X of $)if(typeof X==="number")Q.push(`[${X}]`);else if(typeof X==="symbol")Q.push(`[${JSON.stringify(String(X))}]`);else if(/[^\w$]/.test(X))Q.push(`[${JSON.stringify(X)}]`);else{if(Q.length)Q.push(".");Q.push(X)}return Q.join("")}function h7($){let Q=[],X=[...$.issues].sort((Y,J)=>Y.path.length-J.path.length);for(let Y of X)if(Q.push(`✖ ${Y.message}`),Y.path?.length)Q.push(`  → at ${cV(Y.path)}`);return Q.join(`
`)}var fY=($)=>(Q,X,Y,J)=>{let U=Y?Object.assign(Y,{async:!1}):{async:!1},G=Q._zod.run({value:X,issues:[]},U);if(G instanceof Promise)throw new Z0;if(G.issues.length){let z=new(J?.Err??$)(G.issues.map((H)=>P6(H,U,r$())));throw kY(z,J?.callee),z}return G.value},yY=fY(d4),_Y=($)=>async(Q,X,Y,J)=>{let U=Y?Object.assign(Y,{async:!0}):{async:!0},G=Q._zod.run({value:X,issues:[]},U);if(G instanceof Promise)G=await G;if(G.issues.length){let z=new(J?.Err??$)(G.issues.map((H)=>P6(H,U,r$())));throw kY(z,J?.callee),z}return G.value},gY=_Y(d4),hY=($)=>(Q,X,Y)=>{let J=Y?{...Y,async:!1}:{async:!1},U=Q._zod.run({value:X,issues:[]},J);if(U instanceof Promise)throw new Z0;return U.issues.length?{success:!1,error:new($??FX)(U.issues.map((G)=>P6(G,J,r$())))}:{success:!0,data:U.value}},m7=hY(d4),mY=($)=>async(Q,X,Y)=>{let J=Y?Object.assign(Y,{async:!0}):{async:!0},U=Q._zod.run({value:X,issues:[]},J);if(U instanceof Promise)U=await U;return U.issues.length?{success:!1,error:new $(U.issues.map((G)=>P6(G,J,r$())))}:{success:!0,data:U.value}},c7=mY(d4);var f1={};i0(f1,{xid:()=>l7,uuid7:()=>Vb,uuid6:()=>Nb,uuid4:()=>Kb,uuid:()=>k1,uppercase:()=>B9,unicodeEmail:()=>Ob,undefined:()=>N9,ulid:()=>d7,time:()=>q9,string:()=>z9,rfc5322Email:()=>Db,number:()=>j9,null:()=>K9,nanoid:()=>n7,lowercase:()=>V9,ksuid:()=>p7,ipv6:()=>e7,ipv4:()=>s7,integer:()=>H9,html5Email:()=>Bb,hostname:()=>J9,guid:()=>o7,extendedDuration:()=>wb,emoji:()=>t7,email:()=>a7,e164:()=>Y9,duration:()=>r7,domain:()=>Lb,datetime:()=>G9,date:()=>U9,cuid2:()=>i7,cuid:()=>u7,cidrv6:()=>Q9,cidrv4:()=>$9,browserEmail:()=>Ab,boolean:()=>w9,bigint:()=>W9,base64url:()=>cY,base64:()=>X9,_emoji:()=>Fb});var u7=/^[cC][^\s-]{8,}$/,i7=/^[0-9a-z]+$/,d7=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,l7=/^[0-9a-vA-V]{20}$/,p7=/^[A-Za-z0-9]{27}$/,n7=/^[a-zA-Z0-9_-]{21}$/,r7=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,wb=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,o7=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,k1=($)=>{if(!$)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${$}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},Kb=k1(4),Nb=k1(6),Vb=k1(7),a7=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Bb=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Db=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ob=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,Ab=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Fb="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function t7(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var s7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,e7=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,$9=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Q9=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,X9=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cY=/^[A-Za-z0-9_-]*$/,J9=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Lb=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Y9=/^\+(?:[0-9]){6,14}[0-9]$/,uV="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",U9=new RegExp(`^${uV}$`);function iV($){return typeof $.precision==="number"?$.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":$.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${$.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function q9($){return new RegExp(`^${iV($)}$`)}function G9($){let Q=iV({precision:$.precision}),X=["Z"];if($.local)X.push("");if($.offset)X.push("([+-]\\d{2}:\\d{2})");let Y=`${Q}(?:${X.join("|")})`;return new RegExp(`^${uV}T(?:${Y})$`)}var z9=($)=>{let Q=$?`[\\s\\S]{${$?.minimum??0},${$?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${Q}$`)},W9=/^\d+n?$/,H9=/^\d+$/,j9=/^-?\d+(?:\.\d+)?/i,w9=/true|false/i,K9=/null/i;var N9=/undefined/i;var V9=/^[^A-Z]*$/,B9=/^[^a-z]*$/;var c$=M("$ZodCheck",($,Q)=>{var X;$._zod??($._zod={}),$._zod.def=Q,(X=$._zod).onattach??(X.onattach=[])}),lV={number:"number",bigint:"bigint",object:"date"},uY=M("$ZodCheckLessThan",($,Q)=>{c$.init($,Q);let X=lV[typeof Q.value];$._zod.onattach.push((Y)=>{let J=Y._zod.bag,U=(Q.inclusive?J.maximum:J.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(Q.value<U)if(Q.inclusive)J.maximum=Q.value;else J.exclusiveMaximum=Q.value}),$._zod.check=(Y)=>{if(Q.inclusive?Y.value<=Q.value:Y.value<Q.value)return;Y.issues.push({origin:X,code:"too_big",maximum:Q.value,input:Y.value,inclusive:Q.inclusive,inst:$,continue:!Q.abort})}}),iY=M("$ZodCheckGreaterThan",($,Q)=>{c$.init($,Q);let X=lV[typeof Q.value];$._zod.onattach.push((Y)=>{let J=Y._zod.bag,U=(Q.inclusive?J.minimum:J.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(Q.value>U)if(Q.inclusive)J.minimum=Q.value;else J.exclusiveMinimum=Q.value}),$._zod.check=(Y)=>{if(Q.inclusive?Y.value>=Q.value:Y.value>Q.value)return;Y.issues.push({origin:X,code:"too_small",minimum:Q.value,input:Y.value,inclusive:Q.inclusive,inst:$,continue:!Q.abort})}}),D9=M("$ZodCheckMultipleOf",($,Q)=>{c$.init($,Q),$._zod.onattach.push((X)=>{var Y;(Y=X._zod.bag).multipleOf??(Y.multipleOf=Q.value)}),$._zod.check=(X)=>{if(typeof X.value!==typeof Q.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof X.value==="bigint"?X.value%Q.value===BigInt(0):T7(X.value,Q.value)===0)return;X.issues.push({origin:typeof X.value,code:"not_multiple_of",divisor:Q.value,input:X.value,inst:$,continue:!Q.abort})}}),O9=M("$ZodCheckNumberFormat",($,Q)=>{c$.init($,Q),Q.format=Q.format||"float64";let X=Q.format?.includes("int"),Y=X?"int":"number",[J,U]=f7[Q.format];$._zod.onattach.push((G)=>{let z=G._zod.bag;if(z.format=Q.format,z.minimum=J,z.maximum=U,X)z.pattern=H9}),$._zod.check=(G)=>{let z=G.value;if(X){if(!Number.isInteger(z)){G.issues.push({expected:Y,format:Q.format,code:"invalid_type",input:z,inst:$});return}if(!Number.isSafeInteger(z)){if(z>0)G.issues.push({input:z,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:Y,continue:!Q.abort});else G.issues.push({input:z,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:Y,continue:!Q.abort});return}}if(z<J)G.issues.push({origin:"number",input:z,code:"too_small",minimum:J,inclusive:!0,inst:$,continue:!Q.abort});if(z>U)G.issues.push({origin:"number",input:z,code:"too_big",maximum:U,inst:$})}}),A9=M("$ZodCheckBigIntFormat",($,Q)=>{c$.init($,Q);let[X,Y]=y7[Q.format];$._zod.onattach.push((J)=>{let U=J._zod.bag;U.format=Q.format,U.minimum=X,U.maximum=Y}),$._zod.check=(J)=>{let U=J.value;if(U<X)J.issues.push({origin:"bigint",input:U,code:"too_small",minimum:X,inclusive:!0,inst:$,continue:!Q.abort});if(U>Y)J.issues.push({origin:"bigint",input:U,code:"too_big",maximum:Y,inst:$})}}),F9=M("$ZodCheckMaxSize",($,Q)=>{var X;c$.init($,Q),(X=$._zod.def).when??(X.when=(Y)=>{let J=Y.value;return!q1(J)&&J.size!==void 0}),$._zod.onattach.push((Y)=>{let J=Y._zod.bag.maximum??Number.POSITIVE_INFINITY;if(Q.maximum<J)Y._zod.bag.maximum=Q.maximum}),$._zod.check=(Y)=>{let J=Y.value;if(J.size<=Q.maximum)return;Y.issues.push({origin:OX(J),code:"too_big",maximum:Q.maximum,input:J,inst:$,continue:!Q.abort})}}),L9=M("$ZodCheckMinSize",($,Q)=>{var X;c$.init($,Q),(X=$._zod.def).when??(X.when=(Y)=>{let J=Y.value;return!q1(J)&&J.size!==void 0}),$._zod.onattach.push((Y)=>{let J=Y._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(Q.minimum>J)Y._zod.bag.minimum=Q.minimum}),$._zod.check=(Y)=>{let J=Y.value;if(J.size>=Q.minimum)return;Y.issues.push({origin:OX(J),code:"too_small",minimum:Q.minimum,input:J,inst:$,continue:!Q.abort})}}),v9=M("$ZodCheckSizeEquals",($,Q)=>{var X;c$.init($,Q),(X=$._zod.def).when??(X.when=(Y)=>{let J=Y.value;return!q1(J)&&J.size!==void 0}),$._zod.onattach.push((Y)=>{let J=Y._zod.bag;J.minimum=Q.size,J.maximum=Q.size,J.size=Q.size}),$._zod.check=(Y)=>{let J=Y.value,U=J.size;if(U===Q.size)return;let G=U>Q.size;Y.issues.push({origin:OX(J),...G?{code:"too_big",maximum:Q.size}:{code:"too_small",minimum:Q.size},inclusive:!0,exact:!0,input:Y.value,inst:$,continue:!Q.abort})}}),I9=M("$ZodCheckMaxLength",($,Q)=>{var X;c$.init($,Q),(X=$._zod.def).when??(X.when=(Y)=>{let J=Y.value;return!q1(J)&&J.length!==void 0}),$._zod.onattach.push((Y)=>{let J=Y._zod.bag.maximum??Number.POSITIVE_INFINITY;if(Q.maximum<J)Y._zod.bag.maximum=Q.maximum}),$._zod.check=(Y)=>{let J=Y.value;if(J.length<=Q.maximum)return;let G=AX(J);Y.issues.push({origin:G,code:"too_big",maximum:Q.maximum,inclusive:!0,input:J,inst:$,continue:!Q.abort})}}),E9=M("$ZodCheckMinLength",($,Q)=>{var X;c$.init($,Q),(X=$._zod.def).when??(X.when=(Y)=>{let J=Y.value;return!q1(J)&&J.length!==void 0}),$._zod.onattach.push((Y)=>{let J=Y._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(Q.minimum>J)Y._zod.bag.minimum=Q.minimum}),$._zod.check=(Y)=>{let J=Y.value;if(J.length>=Q.minimum)return;let G=AX(J);Y.issues.push({origin:G,code:"too_small",minimum:Q.minimum,inclusive:!0,input:J,inst:$,continue:!Q.abort})}}),M9=M("$ZodCheckLengthEquals",($,Q)=>{var X;c$.init($,Q),(X=$._zod.def).when??(X.when=(Y)=>{let J=Y.value;return!q1(J)&&J.length!==void 0}),$._zod.onattach.push((Y)=>{let J=Y._zod.bag;J.minimum=Q.length,J.maximum=Q.length,J.length=Q.length}),$._zod.check=(Y)=>{let J=Y.value,U=J.length;if(U===Q.length)return;let G=AX(J),z=U>Q.length;Y.issues.push({origin:G,...z?{code:"too_big",maximum:Q.length}:{code:"too_small",minimum:Q.length},inclusive:!0,exact:!0,input:Y.value,inst:$,continue:!Q.abort})}}),l4=M("$ZodCheckStringFormat",($,Q)=>{var X,Y;if(c$.init($,Q),$._zod.onattach.push((J)=>{let U=J._zod.bag;if(U.format=Q.format,Q.pattern)U.patterns??(U.patterns=new Set),U.patterns.add(Q.pattern)}),Q.pattern)(X=$._zod).check??(X.check=(J)=>{if(Q.pattern.lastIndex=0,Q.pattern.test(J.value))return;J.issues.push({origin:"string",code:"invalid_format",format:Q.format,input:J.value,...Q.pattern?{pattern:Q.pattern.toString()}:{},inst:$,continue:!Q.abort})});else(Y=$._zod).check??(Y.check=()=>{})}),P9=M("$ZodCheckRegex",($,Q)=>{l4.init($,Q),$._zod.check=(X)=>{if(Q.pattern.lastIndex=0,Q.pattern.test(X.value))return;X.issues.push({origin:"string",code:"invalid_format",format:"regex",input:X.value,pattern:Q.pattern.toString(),inst:$,continue:!Q.abort})}}),R9=M("$ZodCheckLowerCase",($,Q)=>{Q.pattern??(Q.pattern=V9),l4.init($,Q)}),Z9=M("$ZodCheckUpperCase",($,Q)=>{Q.pattern??(Q.pattern=B9),l4.init($,Q)}),S9=M("$ZodCheckIncludes",($,Q)=>{c$.init($,Q);let X=S0(Q.includes),Y=new RegExp(typeof Q.position==="number"?`^.{${Q.position}}${X}`:X);Q.pattern=Y,$._zod.onattach.push((J)=>{let U=J._zod.bag;U.patterns??(U.patterns=new Set),U.patterns.add(Y)}),$._zod.check=(J)=>{if(J.value.includes(Q.includes,Q.position))return;J.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:Q.includes,input:J.value,inst:$,continue:!Q.abort})}}),T9=M("$ZodCheckStartsWith",($,Q)=>{c$.init($,Q);let X=new RegExp(`^${S0(Q.prefix)}.*`);Q.pattern??(Q.pattern=X),$._zod.onattach.push((Y)=>{let J=Y._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add(X)}),$._zod.check=(Y)=>{if(Y.value.startsWith(Q.prefix))return;Y.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:Q.prefix,input:Y.value,inst:$,continue:!Q.abort})}}),C9=M("$ZodCheckEndsWith",($,Q)=>{c$.init($,Q);let X=new RegExp(`.*${S0(Q.suffix)}$`);Q.pattern??(Q.pattern=X),$._zod.onattach.push((Y)=>{let J=Y._zod.bag;J.patterns??(J.patterns=new Set),J.patterns.add(X)}),$._zod.check=(Y)=>{if(Y.value.endsWith(Q.suffix))return;Y.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:Q.suffix,input:Y.value,inst:$,continue:!Q.abort})}});function dV($,Q,X){if($.issues.length)Q.issues.push(...O6(X,$.issues))}var b9=M("$ZodCheckProperty",($,Q)=>{c$.init($,Q),$._zod.check=(X)=>{let Y=Q.schema._zod.run({value:X.value[Q.property],issues:[]},{});if(Y instanceof Promise)return Y.then((J)=>dV(J,X,Q.property));dV(Y,X,Q.property);return}}),x9=M("$ZodCheckMimeType",($,Q)=>{c$.init($,Q);let X=new Set(Q.mime);$._zod.onattach.push((Y)=>{Y._zod.bag.mime=Q.mime}),$._zod.check=(Y)=>{if(X.has(Y.value.type))return;Y.issues.push({code:"invalid_value",values:Q.mime,input:Y.value.type,inst:$})}}),k9=M("$ZodCheckOverwrite",($,Q)=>{c$.init($,Q),$._zod.check=(X)=>{X.value=Q.tx(X.value)}});class dY{constructor($=[]){if(this.content=[],this.indent=0,this)this.args=$}indented($){this.indent+=1,$(this),this.indent-=1}write($){if(typeof $==="function"){$(this,{execution:"sync"}),$(this,{execution:"async"});return}let X=$.split(`
`).filter((U)=>U),Y=Math.min(...X.map((U)=>U.length-U.trimStart().length)),J=X.map((U)=>U.slice(Y)).map((U)=>" ".repeat(this.indent*2)+U);for(let U of J)this.content.push(U)}compile(){let $=Function,Q=this?.args,Y=[...(this?.content??[""]).map((J)=>`  ${J}`)];return new $(...Q,Y.join(`
`))}}var f9={major:4,minor:0,patch:0};var Q$=M("$ZodType",($,Q)=>{var X;$??($={}),$._zod.def=Q,$._zod.bag=$._zod.bag||{},$._zod.version=f9;let Y=[...$._zod.def.checks??[]];if($._zod.traits.has("$ZodCheck"))Y.unshift($);for(let J of Y)for(let U of J._zod.onattach)U($);if(Y.length===0)(X=$._zod).deferred??(X.deferred=[]),$._zod.deferred?.push(()=>{$._zod.run=$._zod.parse});else{let J=(U,G,z)=>{let H=x1(U),W;for(let j of G){if(j._zod.def.when){if(!j._zod.def.when(U))continue}else if(H)continue;let N=U.issues.length,K=j._zod.check(U);if(K instanceof Promise&&z?.async===!1)throw new Z0;if(W||K instanceof Promise)W=(W??Promise.resolve()).then(async()=>{if(await K,U.issues.length===N)return;if(!H)H=x1(U,N)});else{if(U.issues.length===N)continue;if(!H)H=x1(U,N)}}if(W)return W.then(()=>{return U});return U};$._zod.run=(U,G)=>{let z=$._zod.parse(U,G);if(z instanceof Promise){if(G.async===!1)throw new Z0;return z.then((H)=>J(H,Y,G))}return J(z,Y,G)}}$["~standard"]={validate:(J)=>{try{let U=m7($,J);return U.success?{value:U.data}:{issues:U.error?.issues}}catch(U){return c7($,J).then((G)=>G.success?{value:G.data}:{issues:G.error?.issues})}},vendor:"zod",version:1}}),y1=M("$ZodString",($,Q)=>{Q$.init($,Q),$._zod.pattern=[...$?._zod.bag?.patterns??[]].pop()??z9($._zod.bag),$._zod.parse=(X,Y)=>{if(Q.coerce)try{X.value=String(X.value)}catch(J){}if(typeof X.value==="string")return X;return X.issues.push({expected:"string",code:"invalid_type",input:X.value,inst:$}),X}}),R$=M("$ZodStringFormat",($,Q)=>{l4.init($,Q),y1.init($,Q)}),_9=M("$ZodGUID",($,Q)=>{Q.pattern??(Q.pattern=o7),R$.init($,Q)}),g9=M("$ZodUUID",($,Q)=>{if(Q.version){let Y={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[Q.version];if(Y===void 0)throw Error(`Invalid UUID version: "${Q.version}"`);Q.pattern??(Q.pattern=k1(Y))}else Q.pattern??(Q.pattern=k1());R$.init($,Q)}),h9=M("$ZodEmail",($,Q)=>{Q.pattern??(Q.pattern=a7),R$.init($,Q)}),m9=M("$ZodURL",($,Q)=>{R$.init($,Q),$._zod.check=(X)=>{try{let Y=X.value,J=new URL(Y),U=J.href;if(Q.hostname){if(Q.hostname.lastIndex=0,!Q.hostname.test(J.hostname))X.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:J9.source,input:X.value,inst:$,continue:!Q.abort})}if(Q.protocol){if(Q.protocol.lastIndex=0,!Q.protocol.test(J.protocol.endsWith(":")?J.protocol.slice(0,-1):J.protocol))X.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:Q.protocol.source,input:X.value,inst:$,continue:!Q.abort})}if(!Y.endsWith("/")&&U.endsWith("/"))X.value=U.slice(0,-1);else X.value=U;return}catch(Y){X.issues.push({code:"invalid_format",format:"url",input:X.value,inst:$,continue:!Q.abort})}}}),c9=M("$ZodEmoji",($,Q)=>{Q.pattern??(Q.pattern=t7()),R$.init($,Q)}),u9=M("$ZodNanoID",($,Q)=>{Q.pattern??(Q.pattern=n7),R$.init($,Q)}),i9=M("$ZodCUID",($,Q)=>{Q.pattern??(Q.pattern=u7),R$.init($,Q)}),d9=M("$ZodCUID2",($,Q)=>{Q.pattern??(Q.pattern=i7),R$.init($,Q)}),l9=M("$ZodULID",($,Q)=>{Q.pattern??(Q.pattern=d7),R$.init($,Q)}),p9=M("$ZodXID",($,Q)=>{Q.pattern??(Q.pattern=l7),R$.init($,Q)}),n9=M("$ZodKSUID",($,Q)=>{Q.pattern??(Q.pattern=p7),R$.init($,Q)}),r9=M("$ZodISODateTime",($,Q)=>{Q.pattern??(Q.pattern=G9(Q)),R$.init($,Q)}),o9=M("$ZodISODate",($,Q)=>{Q.pattern??(Q.pattern=U9),R$.init($,Q)}),a9=M("$ZodISOTime",($,Q)=>{Q.pattern??(Q.pattern=q9(Q)),R$.init($,Q)}),t9=M("$ZodISODuration",($,Q)=>{Q.pattern??(Q.pattern=r7),R$.init($,Q)}),s9=M("$ZodIPv4",($,Q)=>{Q.pattern??(Q.pattern=s7),R$.init($,Q),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.format="ipv4"})}),e9=M("$ZodIPv6",($,Q)=>{Q.pattern??(Q.pattern=e7),R$.init($,Q),$._zod.onattach.push((X)=>{let Y=X._zod.bag;Y.format="ipv6"}),$._zod.check=(X)=>{try{new URL(`http://[${X.value}]`)}catch{X.issues.push({code:"invalid_format",format:"ipv6",input:X.value,inst:$,continue:!Q.abort})}}}),$G=M("$ZodCIDRv4",($,Q)=>{Q.pattern??(Q.pattern=$9),R$.init($,Q)}),QG=M("$ZodCIDRv6",($,Q)=>{Q.pattern??(Q.pattern=Q9),R$.init($,Q),$._zod.check=(X)=>{let[Y,J]=X.value.split("/");try{if(!J)throw Error();let U=Number(J);if(`${U}`!==J)throw Error();if(U<0||U>128)throw Error();new URL(`http://[${Y}]`)}catch{X.issues.push({code:"invalid_format",format:"cidrv6",input:X.value,inst:$,continue:!Q.abort})}}});function XG($){if($==="")return!0;if($.length%4!==0)return!1;try{return atob($),!0}catch{return!1}}var JG=M("$ZodBase64",($,Q)=>{Q.pattern??(Q.pattern=X9),R$.init($,Q),$._zod.onattach.push((X)=>{X._zod.bag.contentEncoding="base64"}),$._zod.check=(X)=>{if(XG(X.value))return;X.issues.push({code:"invalid_format",format:"base64",input:X.value,inst:$,continue:!Q.abort})}});function YB($){if(!cY.test($))return!1;let Q=$.replace(/[-_]/g,(Y)=>Y==="-"?"+":"/"),X=Q.padEnd(Math.ceil(Q.length/4)*4,"=");return XG(X)}var YG=M("$ZodBase64URL",($,Q)=>{Q.pattern??(Q.pattern=cY),R$.init($,Q),$._zod.onattach.push((X)=>{X._zod.bag.contentEncoding="base64url"}),$._zod.check=(X)=>{if(YB(X.value))return;X.issues.push({code:"invalid_format",format:"base64url",input:X.value,inst:$,continue:!Q.abort})}}),UG=M("$ZodE164",($,Q)=>{Q.pattern??(Q.pattern=Y9),R$.init($,Q)});function UB($,Q=null){try{let X=$.split(".");if(X.length!==3)return!1;let[Y]=X;if(!Y)return!1;let J=JSON.parse(atob(Y));if("typ"in J&&J?.typ!=="JWT")return!1;if(!J.alg)return!1;if(Q&&(!("alg"in J)||J.alg!==Q))return!1;return!0}catch{return!1}}var qG=M("$ZodJWT",($,Q)=>{R$.init($,Q),$._zod.check=(X)=>{if(UB(X.value,Q.alg))return;X.issues.push({code:"invalid_format",format:"jwt",input:X.value,inst:$,continue:!Q.abort})}}),GG=M("$ZodCustomStringFormat",($,Q)=>{R$.init($,Q),$._zod.check=(X)=>{if(Q.fn(X.value))return;X.issues.push({code:"invalid_format",format:Q.format,input:X.value,inst:$,continue:!Q.abort})}}),nY=M("$ZodNumber",($,Q)=>{Q$.init($,Q),$._zod.pattern=$._zod.bag.pattern??j9,$._zod.parse=(X,Y)=>{if(Q.coerce)try{X.value=Number(X.value)}catch(G){}let J=X.value;if(typeof J==="number"&&!Number.isNaN(J)&&Number.isFinite(J))return X;let U=typeof J==="number"?Number.isNaN(J)?"NaN":!Number.isFinite(J)?"Infinity":void 0:void 0;return X.issues.push({expected:"number",code:"invalid_type",input:J,inst:$,...U?{received:U}:{}}),X}}),zG=M("$ZodNumber",($,Q)=>{O9.init($,Q),nY.init($,Q)}),IX=M("$ZodBoolean",($,Q)=>{Q$.init($,Q),$._zod.pattern=w9,$._zod.parse=(X,Y)=>{if(Q.coerce)try{X.value=Boolean(X.value)}catch(U){}let J=X.value;if(typeof J==="boolean")return X;return X.issues.push({expected:"boolean",code:"invalid_type",input:J,inst:$}),X}}),rY=M("$ZodBigInt",($,Q)=>{Q$.init($,Q),$._zod.pattern=W9,$._zod.parse=(X,Y)=>{if(Q.coerce)try{X.value=BigInt(X.value)}catch(J){}if(typeof X.value==="bigint")return X;return X.issues.push({expected:"bigint",code:"invalid_type",input:X.value,inst:$}),X}}),WG=M("$ZodBigInt",($,Q)=>{A9.init($,Q),rY.init($,Q)}),HG=M("$ZodSymbol",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(typeof J==="symbol")return X;return X.issues.push({expected:"symbol",code:"invalid_type",input:J,inst:$}),X}}),jG=M("$ZodUndefined",($,Q)=>{Q$.init($,Q),$._zod.pattern=N9,$._zod.values=new Set([void 0]),$._zod.optin="optional",$._zod.optout="optional",$._zod.parse=(X,Y)=>{let J=X.value;if(typeof J>"u")return X;return X.issues.push({expected:"undefined",code:"invalid_type",input:J,inst:$}),X}}),wG=M("$ZodNull",($,Q)=>{Q$.init($,Q),$._zod.pattern=K9,$._zod.values=new Set([null]),$._zod.parse=(X,Y)=>{let J=X.value;if(J===null)return X;return X.issues.push({expected:"null",code:"invalid_type",input:J,inst:$}),X}}),KG=M("$ZodAny",($,Q)=>{Q$.init($,Q),$._zod.parse=(X)=>X}),p4=M("$ZodUnknown",($,Q)=>{Q$.init($,Q),$._zod.parse=(X)=>X}),NG=M("$ZodNever",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{return X.issues.push({expected:"never",code:"invalid_type",input:X.value,inst:$}),X}}),VG=M("$ZodVoid",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(typeof J>"u")return X;return X.issues.push({expected:"void",code:"invalid_type",input:J,inst:$}),X}}),BG=M("$ZodDate",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{if(Q.coerce)try{X.value=new Date(X.value)}catch(z){}let J=X.value,U=J instanceof Date;if(U&&!Number.isNaN(J.getTime()))return X;return X.issues.push({expected:"date",code:"invalid_type",input:J,...U?{received:"Invalid Date"}:{},inst:$}),X}});function nV($,Q,X){if($.issues.length)Q.issues.push(...O6(X,$.issues));Q.value[X]=$.value}var EX=M("$ZodArray",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(!Array.isArray(J))return X.issues.push({expected:"array",code:"invalid_type",input:J,inst:$}),X;X.value=Array(J.length);let U=[];for(let G=0;G<J.length;G++){let z=J[G],H=Q.element._zod.run({value:z,issues:[]},Y);if(H instanceof Promise)U.push(H.then((W)=>nV(W,X,G)));else nV(H,X,G)}if(U.length)return Promise.all(U).then(()=>X);return X}});function lY($,Q,X){if($.issues.length)Q.issues.push(...O6(X,$.issues));Q.value[X]=$.value}function rV($,Q,X,Y){if($.issues.length)if(Y[X]===void 0)if(X in Y)Q.value[X]=void 0;else Q.value[X]=$.value;else Q.issues.push(...O6(X,$.issues));else if($.value===void 0){if(X in Y)Q.value[X]=void 0}else Q.value[X]=$.value}var DG=M("$ZodObject",($,Q)=>{Q$.init($,Q);let X=VX(()=>{let N=Object.keys(Q.shape);for(let w of N)if(!(Q.shape[w]instanceof Q$))throw Error(`Invalid element at key "${w}": expected a Zod schema`);let K=k7(Q.shape);return{shape:Q.shape,keys:N,keySet:new Set(N),numKeys:N.length,optionalKeys:new Set(K)}});A$($._zod,"propValues",()=>{let N=Q.shape,K={};for(let w in N){let B=N[w]._zod;if(B.values){K[w]??(K[w]=new Set);for(let D of B.values)K[w].add(D)}}return K});let Y=(N)=>{let K=new dY(["shape","payload","ctx"]),w=X.value,B=(O)=>{let A=b1(O);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};K.write("const input = payload.value;");let D=Object.create(null),F=0;for(let O of w.keys)D[O]=`key_${F++}`;K.write("const newResult = {}");for(let O of w.keys)if(w.optionalKeys.has(O)){let A=D[O];K.write(`const ${A} = ${B(O)};`);let L=b1(O);K.write(`
        if (${A}.issues.length) {
          if (input[${L}] === undefined) {
            if (${L} in input) {
              newResult[${L}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${A}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${L}, ...iss.path] : [${L}],
              }))
            );
          }
        } else if (${A}.value === undefined) {
          if (${L} in input) newResult[${L}] = undefined;
        } else {
          newResult[${L}] = ${A}.value;
        }
        `)}else{let A=D[O];K.write(`const ${A} = ${B(O)};`),K.write(`
          if (${A}.issues.length) payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${b1(O)}, ...iss.path] : [${b1(O)}]
          })));`),K.write(`newResult[${b1(O)}] = ${A}.value`)}K.write("payload.value = newResult;"),K.write("return payload;");let V=K.compile();return(O,A)=>V(N,O,A)},J,U=u4,G=!wX.jitless,H=G&&b7.value,W=Q.catchall,j;$._zod.parse=(N,K)=>{j??(j=X.value);let w=N.value;if(!U(w))return N.issues.push({expected:"object",code:"invalid_type",input:w,inst:$}),N;let B=[];if(G&&H&&K?.async===!1&&K.jitless!==!0){if(!J)J=Y(Q.shape);N=J(N,K)}else{N.value={};let A=j.shape;for(let L of j.keys){let I=A[L],P=I._zod.run({value:w[L],issues:[]},K),v=I._zod.optin==="optional"&&I._zod.optout==="optional";if(P instanceof Promise)B.push(P.then((Z)=>v?rV(Z,N,L,w):lY(Z,N,L)));else if(v)rV(P,N,L,w);else lY(P,N,L)}}if(!W)return B.length?Promise.all(B).then(()=>N):N;let D=[],F=j.keySet,V=W._zod,O=V.def.type;for(let A of Object.keys(w)){if(F.has(A))continue;if(O==="never"){D.push(A);continue}let L=V.run({value:w[A],issues:[]},K);if(L instanceof Promise)B.push(L.then((I)=>lY(I,N,A)));else lY(L,N,A)}if(D.length)N.issues.push({code:"unrecognized_keys",keys:D,input:w,inst:$});if(!B.length)return N;return Promise.all(B).then(()=>{return N})}});function oV($,Q,X,Y){for(let J of $)if(J.issues.length===0)return Q.value=J.value,Q;return Q.issues.push({code:"invalid_union",input:Q.value,inst:X,errors:$.map((J)=>J.issues.map((U)=>P6(U,Y,r$())))}),Q}var oY=M("$ZodUnion",($,Q)=>{Q$.init($,Q),A$($._zod,"optin",()=>Q.options.some((X)=>X._zod.optin==="optional")?"optional":void 0),A$($._zod,"optout",()=>Q.options.some((X)=>X._zod.optout==="optional")?"optional":void 0),A$($._zod,"values",()=>{if(Q.options.every((X)=>X._zod.values))return new Set(Q.options.flatMap((X)=>Array.from(X._zod.values)));return}),A$($._zod,"pattern",()=>{if(Q.options.every((X)=>X._zod.pattern)){let X=Q.options.map((Y)=>Y._zod.pattern);return new RegExp(`^(${X.map((Y)=>BX(Y.source)).join("|")})$`)}return}),$._zod.parse=(X,Y)=>{let J=!1,U=[];for(let G of Q.options){let z=G._zod.run({value:X.value,issues:[]},Y);if(z instanceof Promise)U.push(z),J=!0;else{if(z.issues.length===0)return z;U.push(z)}}if(!J)return oV(U,X,$,Y);return Promise.all(U).then((G)=>{return oV(G,X,$,Y)})}}),OG=M("$ZodDiscriminatedUnion",($,Q)=>{oY.init($,Q);let X=$._zod.parse;A$($._zod,"propValues",()=>{let J={};for(let U of Q.options){let G=U._zod.propValues;if(!G||Object.keys(G).length===0)throw Error(`Invalid discriminated union option at index "${Q.options.indexOf(U)}"`);for(let[z,H]of Object.entries(G)){if(!J[z])J[z]=new Set;for(let W of H)J[z].add(W)}}return J});let Y=VX(()=>{let J=Q.options,U=new Map;for(let G of J){let z=G._zod.propValues[Q.discriminator];if(!z||z.size===0)throw Error(`Invalid discriminated union option at index "${Q.options.indexOf(G)}"`);for(let H of z){if(U.has(H))throw Error(`Duplicate discriminator value "${String(H)}"`);U.set(H,G)}}return U});$._zod.parse=(J,U)=>{let G=J.value;if(!u4(G))return J.issues.push({code:"invalid_type",expected:"object",input:G,inst:$}),J;let z=Y.value.get(G?.[Q.discriminator]);if(z)return z._zod.run(J,U);if(Q.unionFallback)return X(J,U);return J.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:G,path:[Q.discriminator],inst:$}),J}}),AG=M("$ZodIntersection",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value,U=Q.left._zod.run({value:J,issues:[]},Y),G=Q.right._zod.run({value:J,issues:[]},Y);if(U instanceof Promise||G instanceof Promise)return Promise.all([U,G]).then(([H,W])=>{return aV(X,H,W)});return aV(X,U,G)}});function y9($,Q){if($===Q)return{valid:!0,data:$};if($ instanceof Date&&Q instanceof Date&&+$===+Q)return{valid:!0,data:$};if(i4($)&&i4(Q)){let X=Object.keys(Q),Y=Object.keys($).filter((U)=>X.indexOf(U)!==-1),J={...$,...Q};for(let U of Y){let G=y9($[U],Q[U]);if(!G.valid)return{valid:!1,mergeErrorPath:[U,...G.mergeErrorPath]};J[U]=G.data}return{valid:!0,data:J}}if(Array.isArray($)&&Array.isArray(Q)){if($.length!==Q.length)return{valid:!1,mergeErrorPath:[]};let X=[];for(let Y=0;Y<$.length;Y++){let J=$[Y],U=Q[Y],G=y9(J,U);if(!G.valid)return{valid:!1,mergeErrorPath:[Y,...G.mergeErrorPath]};X.push(G.data)}return{valid:!0,data:X}}return{valid:!1,mergeErrorPath:[]}}function aV($,Q,X){if(Q.issues.length)$.issues.push(...Q.issues);if(X.issues.length)$.issues.push(...X.issues);if(x1($))return $;let Y=y9(Q.value,X.value);if(!Y.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(Y.mergeErrorPath)}`);return $.value=Y.data,$}var _1=M("$ZodTuple",($,Q)=>{Q$.init($,Q);let X=Q.items,Y=X.length-[...X].reverse().findIndex((J)=>J._zod.optin!=="optional");$._zod.parse=(J,U)=>{let G=J.value;if(!Array.isArray(G))return J.issues.push({input:G,inst:$,expected:"tuple",code:"invalid_type"}),J;J.value=[];let z=[];if(!Q.rest){let W=G.length>X.length,j=G.length<Y-1;if(W||j)return J.issues.push({input:G,inst:$,origin:"array",...W?{code:"too_big",maximum:X.length}:{code:"too_small",minimum:X.length}}),J}let H=-1;for(let W of X){if(H++,H>=G.length){if(H>=Y)continue}let j=W._zod.run({value:G[H],issues:[]},U);if(j instanceof Promise)z.push(j.then((N)=>pY(N,J,H)));else pY(j,J,H)}if(Q.rest){let W=G.slice(X.length);for(let j of W){H++;let N=Q.rest._zod.run({value:j,issues:[]},U);if(N instanceof Promise)z.push(N.then((K)=>pY(K,J,H)));else pY(N,J,H)}}if(z.length)return Promise.all(z).then(()=>J);return J}});function pY($,Q,X){if($.issues.length)Q.issues.push(...O6(X,$.issues));Q.value[X]=$.value}var FG=M("$ZodRecord",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(!i4(J))return X.issues.push({expected:"record",code:"invalid_type",input:J,inst:$}),X;let U=[];if(Q.keyType._zod.values){let G=Q.keyType._zod.values;X.value={};for(let H of G)if(typeof H==="string"||typeof H==="number"||typeof H==="symbol"){let W=Q.valueType._zod.run({value:J[H],issues:[]},Y);if(W instanceof Promise)U.push(W.then((j)=>{if(j.issues.length)X.issues.push(...O6(H,j.issues));X.value[H]=j.value}));else{if(W.issues.length)X.issues.push(...O6(H,W.issues));X.value[H]=W.value}}let z;for(let H in J)if(!G.has(H))z=z??[],z.push(H);if(z&&z.length>0)X.issues.push({code:"unrecognized_keys",input:J,inst:$,keys:z})}else{X.value={};for(let G of Reflect.ownKeys(J)){if(G==="__proto__")continue;let z=Q.keyType._zod.run({value:G,issues:[]},Y);if(z instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(z.issues.length){X.issues.push({origin:"record",code:"invalid_key",issues:z.issues.map((W)=>P6(W,Y,r$())),input:G,path:[G],inst:$}),X.value[z.value]=z.value;continue}let H=Q.valueType._zod.run({value:J[G],issues:[]},Y);if(H instanceof Promise)U.push(H.then((W)=>{if(W.issues.length)X.issues.push(...O6(G,W.issues));X.value[z.value]=W.value}));else{if(H.issues.length)X.issues.push(...O6(G,H.issues));X.value[z.value]=H.value}}}if(U.length)return Promise.all(U).then(()=>X);return X}}),LG=M("$ZodMap",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(!(J instanceof Map))return X.issues.push({expected:"map",code:"invalid_type",input:J,inst:$}),X;let U=[];X.value=new Map;for(let[G,z]of J){let H=Q.keyType._zod.run({value:G,issues:[]},Y),W=Q.valueType._zod.run({value:z,issues:[]},Y);if(H instanceof Promise||W instanceof Promise)U.push(Promise.all([H,W]).then(([j,N])=>{tV(j,N,X,G,J,$,Y)}));else tV(H,W,X,G,J,$,Y)}if(U.length)return Promise.all(U).then(()=>X);return X}});function tV($,Q,X,Y,J,U,G){if($.issues.length)if(DX.has(typeof Y))X.issues.push(...O6(Y,$.issues));else X.issues.push({origin:"map",code:"invalid_key",input:J,inst:U,issues:$.issues.map((z)=>P6(z,G,r$()))});if(Q.issues.length)if(DX.has(typeof Y))X.issues.push(...O6(Y,Q.issues));else X.issues.push({origin:"map",code:"invalid_element",input:J,inst:U,key:Y,issues:Q.issues.map((z)=>P6(z,G,r$()))});X.value.set($.value,Q.value)}var vG=M("$ZodSet",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(!(J instanceof Set))return X.issues.push({input:J,inst:$,expected:"set",code:"invalid_type"}),X;let U=[];X.value=new Set;for(let G of J){let z=Q.valueType._zod.run({value:G,issues:[]},Y);if(z instanceof Promise)U.push(z.then((H)=>sV(H,X)));else sV(z,X)}if(U.length)return Promise.all(U).then(()=>X);return X}});function sV($,Q){if($.issues.length)Q.issues.push(...$.issues);Q.value.add($.value)}var IG=M("$ZodEnum",($,Q)=>{Q$.init($,Q);let X=NX(Q.entries);$._zod.values=new Set(X),$._zod.pattern=new RegExp(`^(${X.filter((Y)=>DX.has(typeof Y)).map((Y)=>typeof Y==="string"?S0(Y):Y.toString()).join("|")})$`),$._zod.parse=(Y,J)=>{let U=Y.value;if($._zod.values.has(U))return Y;return Y.issues.push({code:"invalid_value",values:X,input:U,inst:$}),Y}}),EG=M("$ZodLiteral",($,Q)=>{Q$.init($,Q),$._zod.values=new Set(Q.values),$._zod.pattern=new RegExp(`^(${Q.values.map((X)=>typeof X==="string"?S0(X):X?X.toString():String(X)).join("|")})$`),$._zod.parse=(X,Y)=>{let J=X.value;if($._zod.values.has(J))return X;return X.issues.push({code:"invalid_value",values:Q.values,input:J,inst:$}),X}}),MG=M("$ZodFile",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=X.value;if(J instanceof File)return X;return X.issues.push({expected:"file",code:"invalid_type",input:J,inst:$}),X}}),MX=M("$ZodTransform",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=Q.transform(X.value,X);if(Y.async)return(J instanceof Promise?J:Promise.resolve(J)).then((G)=>{return X.value=G,X});if(J instanceof Promise)throw new Z0;return X.value=J,X}}),PG=M("$ZodOptional",($,Q)=>{Q$.init($,Q),$._zod.optin="optional",$._zod.optout="optional",A$($._zod,"values",()=>{return Q.innerType._zod.values?new Set([...Q.innerType._zod.values,void 0]):void 0}),A$($._zod,"pattern",()=>{let X=Q.innerType._zod.pattern;return X?new RegExp(`^(${BX(X.source)})?$`):void 0}),$._zod.parse=(X,Y)=>{if(Q.innerType._zod.optin==="optional")return Q.innerType._zod.run(X,Y);if(X.value===void 0)return X;return Q.innerType._zod.run(X,Y)}}),RG=M("$ZodNullable",($,Q)=>{Q$.init($,Q),A$($._zod,"optin",()=>Q.innerType._zod.optin),A$($._zod,"optout",()=>Q.innerType._zod.optout),A$($._zod,"pattern",()=>{let X=Q.innerType._zod.pattern;return X?new RegExp(`^(${BX(X.source)}|null)$`):void 0}),A$($._zod,"values",()=>{return Q.innerType._zod.values?new Set([...Q.innerType._zod.values,null]):void 0}),$._zod.parse=(X,Y)=>{if(X.value===null)return X;return Q.innerType._zod.run(X,Y)}}),ZG=M("$ZodDefault",($,Q)=>{Q$.init($,Q),$._zod.optin="optional",A$($._zod,"values",()=>Q.innerType._zod.values),$._zod.parse=(X,Y)=>{if(X.value===void 0)return X.value=Q.defaultValue,X;let J=Q.innerType._zod.run(X,Y);if(J instanceof Promise)return J.then((U)=>eV(U,Q));return eV(J,Q)}});function eV($,Q){if($.value===void 0)$.value=Q.defaultValue;return $}var SG=M("$ZodPrefault",($,Q)=>{Q$.init($,Q),$._zod.optin="optional",A$($._zod,"values",()=>Q.innerType._zod.values),$._zod.parse=(X,Y)=>{if(X.value===void 0)X.value=Q.defaultValue;return Q.innerType._zod.run(X,Y)}}),TG=M("$ZodNonOptional",($,Q)=>{Q$.init($,Q),A$($._zod,"values",()=>{let X=Q.innerType._zod.values;return X?new Set([...X].filter((Y)=>Y!==void 0)):void 0}),$._zod.parse=(X,Y)=>{let J=Q.innerType._zod.run(X,Y);if(J instanceof Promise)return J.then((U)=>$B(U,$));return $B(J,$)}});function $B($,Q){if(!$.issues.length&&$.value===void 0)$.issues.push({code:"invalid_type",expected:"nonoptional",input:$.value,inst:Q});return $}var CG=M("$ZodSuccess",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{let J=Q.innerType._zod.run(X,Y);if(J instanceof Promise)return J.then((U)=>{return X.value=U.issues.length===0,X});return X.value=J.issues.length===0,X}}),bG=M("$ZodCatch",($,Q)=>{Q$.init($,Q),$._zod.optin="optional",A$($._zod,"optout",()=>Q.innerType._zod.optout),A$($._zod,"values",()=>Q.innerType._zod.values),$._zod.parse=(X,Y)=>{let J=Q.innerType._zod.run(X,Y);if(J instanceof Promise)return J.then((U)=>{if(X.value=U.value,U.issues.length)X.value=Q.catchValue({...X,error:{issues:U.issues.map((G)=>P6(G,Y,r$()))},input:X.value}),X.issues=[];return X});if(X.value=J.value,J.issues.length)X.value=Q.catchValue({...X,error:{issues:J.issues.map((U)=>P6(U,Y,r$()))},input:X.value}),X.issues=[];return X}}),xG=M("$ZodNaN",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{if(typeof X.value!=="number"||!Number.isNaN(X.value))return X.issues.push({input:X.value,inst:$,expected:"nan",code:"invalid_type"}),X;return X}}),PX=M("$ZodPipe",($,Q)=>{Q$.init($,Q),A$($._zod,"values",()=>Q.in._zod.values),A$($._zod,"optin",()=>Q.in._zod.optin),A$($._zod,"optout",()=>Q.out._zod.optout),$._zod.parse=(X,Y)=>{let J=Q.in._zod.run(X,Y);if(J instanceof Promise)return J.then((U)=>QB(U,Q,Y));return QB(J,Q,Y)}});function QB($,Q,X){if(x1($))return $;return Q.out._zod.run({value:$.value,issues:$.issues},X)}var kG=M("$ZodReadonly",($,Q)=>{Q$.init($,Q),A$($._zod,"propValues",()=>Q.innerType._zod.propValues),A$($._zod,"values",()=>Q.innerType._zod.values),A$($._zod,"optin",()=>Q.innerType._zod.optin),A$($._zod,"optout",()=>Q.innerType._zod.optout),$._zod.parse=(X,Y)=>{let J=Q.innerType._zod.run(X,Y);if(J instanceof Promise)return J.then(XB);return XB(J)}});function XB($){return $.value=Object.freeze($.value),$}var fG=M("$ZodTemplateLiteral",($,Q)=>{Q$.init($,Q);let X=[];for(let Y of Q.parts)if(Y instanceof Q$){if(!Y._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...Y._zod.traits].shift()}`);let J=Y._zod.pattern instanceof RegExp?Y._zod.pattern.source:Y._zod.pattern;if(!J)throw Error(`Invalid template literal part: ${Y._zod.traits}`);let U=J.startsWith("^")?1:0,G=J.endsWith("$")?J.length-1:J.length;X.push(J.slice(U,G))}else if(Y===null||x7.has(typeof Y))X.push(S0(`${Y}`));else throw Error(`Invalid template literal part: ${Y}`);$._zod.pattern=new RegExp(`^${X.join("")}$`),$._zod.parse=(Y,J)=>{if(typeof Y.value!=="string")return Y.issues.push({input:Y.value,inst:$,expected:"template_literal",code:"invalid_type"}),Y;if($._zod.pattern.lastIndex=0,!$._zod.pattern.test(Y.value))return Y.issues.push({input:Y.value,inst:$,code:"invalid_format",format:"template_literal",pattern:$._zod.pattern.source}),Y;return Y}}),yG=M("$ZodPromise",($,Q)=>{Q$.init($,Q),$._zod.parse=(X,Y)=>{return Promise.resolve(X.value).then((J)=>Q.innerType._zod.run({value:J,issues:[]},Y))}}),_G=M("$ZodLazy",($,Q)=>{Q$.init($,Q),A$($._zod,"innerType",()=>Q.getter()),A$($._zod,"pattern",()=>$._zod.innerType._zod.pattern),A$($._zod,"propValues",()=>$._zod.innerType._zod.propValues),A$($._zod,"optin",()=>$._zod.innerType._zod.optin),A$($._zod,"optout",()=>$._zod.innerType._zod.optout),$._zod.parse=(X,Y)=>{return $._zod.innerType._zod.run(X,Y)}}),gG=M("$ZodCustom",($,Q)=>{c$.init($,Q),Q$.init($,Q),$._zod.parse=(X,Y)=>{return X},$._zod.check=(X)=>{let Y=X.value,J=Q.fn(Y);if(J instanceof Promise)return J.then((U)=>JB(U,X,Y,$));JB(J,X,Y,$);return}});function JB($,Q,X,Y){if(!$){let J={code:"custom",input:X,inst:Y,path:[...Y._zod.def.path??[]],continue:!Y._zod.def.abort};if(Y._zod.def.params)J.params=Y._zod.def.params;Q.issues.push(_7(J))}}var ZX={};i0(ZX,{zhTW:()=>v8,zhCN:()=>L8,vi:()=>F8,ur:()=>A8,ua:()=>O8,tr:()=>D8,th:()=>B8,ta:()=>V8,sv:()=>N8,sl:()=>K8,ru:()=>w8,pt:()=>j8,ps:()=>W8,pl:()=>H8,ota:()=>z8,no:()=>G8,nl:()=>q8,ms:()=>U8,mk:()=>Y8,ko:()=>J8,kh:()=>X8,ja:()=>Q8,it:()=>$8,id:()=>eG,hu:()=>sG,he:()=>tG,frCA:()=>aG,fr:()=>oG,fi:()=>rG,fa:()=>nG,es:()=>pG,eo:()=>lG,en:()=>RX,de:()=>dG,cs:()=>iG,ca:()=>uG,be:()=>cG,az:()=>mG,ar:()=>hG});var vb=()=>{let $={string:{unit:"حرف",verb:"أن يحوي"},file:{unit:"بايت",verb:"أن يحوي"},array:{unit:"عنصر",verb:"أن يحوي"},set:{unit:"عنصر",verb:"أن يحوي"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"مدخل",email:"بريد إلكتروني",url:"رابط",emoji:"إيموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاريخ ووقت بمعيار ISO",date:"تاريخ بمعيار ISO",time:"وقت بمعيار ISO",duration:"مدة بمعيار ISO",ipv4:"عنوان IPv4",ipv6:"عنوان IPv6",cidrv4:"مدى عناوين بصيغة IPv4",cidrv6:"مدى عناوين بصيغة IPv6",base64:"نَص بترميز base64-encoded",base64url:"نَص بترميز base64url-encoded",json_string:"نَص على هيئة JSON",e164:"رقم هاتف بمعيار E.164",jwt:"JWT",template_literal:"مدخل"};return(J)=>{switch(J.code){case"invalid_type":return`مدخلات غير مقبولة: يفترض إدخال ${J.expected}، ولكن تم إدخال ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`مدخلات غير مقبولة: يفترض إدخال ${u(J.values[0])}`;return`اختيار غير مقبول: يتوقع انتقاء أحد هذه الخيارات: ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return` أكبر من اللازم: يفترض أن تكون ${J.origin??"القيمة"} ${U} ${J.maximum.toString()} ${G.unit??"عنصر"}`;return`أكبر من اللازم: يفترض أن تكون ${J.origin??"القيمة"} ${U} ${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`أصغر من اللازم: يفترض لـ ${J.origin} أن يكون ${U} ${J.minimum.toString()} ${G.unit}`;return`أصغر من اللازم: يفترض لـ ${J.origin} أن يكون ${U} ${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`نَص غير مقبول: يجب أن يبدأ بـ "${J.prefix}"`;if(U.format==="ends_with")return`نَص غير مقبول: يجب أن ينتهي بـ "${U.suffix}"`;if(U.format==="includes")return`نَص غير مقبول: يجب أن يتضمَّن "${U.includes}"`;if(U.format==="regex")return`نَص غير مقبول: يجب أن يطابق النمط ${U.pattern}`;return`${Y[U.format]??J.format} غير مقبول`}case"not_multiple_of":return`رقم غير مقبول: يجب أن يكون من مضاعفات ${J.divisor}`;case"unrecognized_keys":return`معرف${J.keys.length>1?"ات":""} غريب${J.keys.length>1?"ة":""}: ${k(J.keys,"، ")}`;case"invalid_key":return`معرف غير مقبول في ${J.origin}`;case"invalid_union":return"مدخل غير مقبول";case"invalid_element":return`مدخل غير مقبول في ${J.origin}`;default:return"مدخل غير مقبول"}}};function hG(){return{localeError:vb()}}var Ib=()=>{let $={string:{unit:"simvol",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"element",verb:"olmalıdır"},set:{unit:"element",verb:"olmalıdır"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Yanlış dəyər: gözlənilən ${J.expected}, daxil olan ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Yanlış dəyər: gözlənilən ${u(J.values[0])}`;return`Yanlış seçim: aşağıdakılardan biri olmalıdır: ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Çox böyük: gözlənilən ${J.origin??"dəyər"} ${U}${J.maximum.toString()} ${G.unit??"element"}`;return`Çox böyük: gözlənilən ${J.origin??"dəyər"} ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Çox kiçik: gözlənilən ${J.origin} ${U}${J.minimum.toString()} ${G.unit}`;return`Çox kiçik: gözlənilən ${J.origin} ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Yanlış mətn: "${U.prefix}" ilə başlamalıdır`;if(U.format==="ends_with")return`Yanlış mətn: "${U.suffix}" ilə bitməlidir`;if(U.format==="includes")return`Yanlış mətn: "${U.includes}" daxil olmalıdır`;if(U.format==="regex")return`Yanlış mətn: ${U.pattern} şablonuna uyğun olmalıdır`;return`Yanlış ${Y[U.format]??J.format}`}case"not_multiple_of":return`Yanlış ədəd: ${J.divisor} ilə bölünə bilən olmalıdır`;case"unrecognized_keys":return`Tanınmayan açar${J.keys.length>1?"lar":""}: ${k(J.keys,", ")}`;case"invalid_key":return`${J.origin} daxilində yanlış açar`;case"invalid_union":return"Yanlış dəyər";case"invalid_element":return`${J.origin} daxilində yanlış dəyər`;default:return"Yanlış dəyər"}}};function mG(){return{localeError:Ib()}}function GB($,Q,X,Y){let J=Math.abs($),U=J%10,G=J%100;if(G>=11&&G<=19)return Y;if(U===1)return Q;if(U>=2&&U<=4)return X;return Y}var Eb=()=>{let $={string:{unit:{one:"сімвал",few:"сімвалы",many:"сімвалаў"},verb:"мець"},array:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},set:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},file:{unit:{one:"байт",few:"байты",many:"байтаў"},verb:"мець"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"лік";case"object":{if(Array.isArray(J))return"масіў";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"увод",email:"email адрас",url:"URL",emoji:"эмодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата і час",date:"ISO дата",time:"ISO час",duration:"ISO працягласць",ipv4:"IPv4 адрас",ipv6:"IPv6 адрас",cidrv4:"IPv4 дыяпазон",cidrv6:"IPv6 дыяпазон",base64:"радок у фармаце base64",base64url:"радок у фармаце base64url",json_string:"JSON радок",e164:"нумар E.164",jwt:"JWT",template_literal:"увод"};return(J)=>{switch(J.code){case"invalid_type":return`Няправільны ўвод: чакаўся ${J.expected}, атрымана ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Няправільны ўвод: чакалася ${u(J.values[0])}`;return`Няправільны варыянт: чакаўся адзін з ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G){let z=Number(J.maximum),H=GB(z,G.unit.one,G.unit.few,G.unit.many);return`Занадта вялікі: чакалася, што ${J.origin??"значэнне"} павінна ${G.verb} ${U}${J.maximum.toString()} ${H}`}return`Занадта вялікі: чакалася, што ${J.origin??"значэнне"} павінна быць ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G){let z=Number(J.minimum),H=GB(z,G.unit.one,G.unit.few,G.unit.many);return`Занадта малы: чакалася, што ${J.origin} павінна ${G.verb} ${U}${J.minimum.toString()} ${H}`}return`Занадта малы: чакалася, што ${J.origin} павінна быць ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Няправільны радок: павінен пачынацца з "${U.prefix}"`;if(U.format==="ends_with")return`Няправільны радок: павінен заканчвацца на "${U.suffix}"`;if(U.format==="includes")return`Няправільны радок: павінен змяшчаць "${U.includes}"`;if(U.format==="regex")return`Няправільны радок: павінен адпавядаць шаблону ${U.pattern}`;return`Няправільны ${Y[U.format]??J.format}`}case"not_multiple_of":return`Няправільны лік: павінен быць кратным ${J.divisor}`;case"unrecognized_keys":return`Нераспазнаны ${J.keys.length>1?"ключы":"ключ"}: ${k(J.keys,", ")}`;case"invalid_key":return`Няправільны ключ у ${J.origin}`;case"invalid_union":return"Няправільны ўвод";case"invalid_element":return`Няправільнае значэнне ў ${J.origin}`;default:return"Няправільны ўвод"}}};function cG(){return{localeError:Eb()}}var Mb=()=>{let $={string:{unit:"caràcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"entrada",email:"adreça electrònica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreça IPv4",ipv6:"adreça IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return(J)=>{switch(J.code){case"invalid_type":return`Tipus invàlid: s'esperava ${J.expected}, s'ha rebut ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Valor invàlid: s'esperava ${u(J.values[0])}`;return`Opció invàlida: s'esperava una de ${k(J.values," o ")}`;case"too_big":{let U=J.inclusive?"com a màxim":"menys de",G=Q(J.origin);if(G)return`Massa gran: s'esperava que ${J.origin??"el valor"} contingués ${U} ${J.maximum.toString()} ${G.unit??"elements"}`;return`Massa gran: s'esperava que ${J.origin??"el valor"} fos ${U} ${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?"com a mínim":"més de",G=Q(J.origin);if(G)return`Massa petit: s'esperava que ${J.origin} contingués ${U} ${J.minimum.toString()} ${G.unit}`;return`Massa petit: s'esperava que ${J.origin} fos ${U} ${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Format invàlid: ha de començar amb "${U.prefix}"`;if(U.format==="ends_with")return`Format invàlid: ha d'acabar amb "${U.suffix}"`;if(U.format==="includes")return`Format invàlid: ha d'incloure "${U.includes}"`;if(U.format==="regex")return`Format invàlid: ha de coincidir amb el patró ${U.pattern}`;return`Format invàlid per a ${Y[U.format]??J.format}`}case"not_multiple_of":return`Número invàlid: ha de ser múltiple de ${J.divisor}`;case"unrecognized_keys":return`Clau${J.keys.length>1?"s":""} no reconeguda${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Clau invàlida a ${J.origin}`;case"invalid_union":return"Entrada invàlida";case"invalid_element":return`Element invàlid a ${J.origin}`;default:return"Entrada invàlida"}}};function uG(){return{localeError:Mb()}}var Pb=()=>{let $={string:{unit:"znaků",verb:"mít"},file:{unit:"bajtů",verb:"mít"},array:{unit:"prvků",verb:"mít"},set:{unit:"prvků",verb:"mít"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"číslo";case"string":return"řetězec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(J))return"pole";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"regulární výraz",email:"e-mailová adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a čas ve formátu ISO",date:"datum ve formátu ISO",time:"čas ve formátu ISO",duration:"doba trvání ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"řetězec zakódovaný ve formátu base64",base64url:"řetězec zakódovaný ve formátu base64url",json_string:"řetězec ve formátu JSON",e164:"číslo E.164",jwt:"JWT",template_literal:"vstup"};return(J)=>{switch(J.code){case"invalid_type":return`Neplatný vstup: očekáváno ${J.expected}, obdrženo ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Neplatný vstup: očekáváno ${u(J.values[0])}`;return`Neplatná možnost: očekávána jedna z hodnot ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Hodnota je příliš velká: ${J.origin??"hodnota"} musí mít ${U}${J.maximum.toString()} ${G.unit??"prvků"}`;return`Hodnota je příliš velká: ${J.origin??"hodnota"} musí být ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Hodnota je příliš malá: ${J.origin??"hodnota"} musí mít ${U}${J.minimum.toString()} ${G.unit??"prvků"}`;return`Hodnota je příliš malá: ${J.origin??"hodnota"} musí být ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Neplatný řetězec: musí začínat na "${U.prefix}"`;if(U.format==="ends_with")return`Neplatný řetězec: musí končit na "${U.suffix}"`;if(U.format==="includes")return`Neplatný řetězec: musí obsahovat "${U.includes}"`;if(U.format==="regex")return`Neplatný řetězec: musí odpovídat vzoru ${U.pattern}`;return`Neplatný formát ${Y[U.format]??J.format}`}case"not_multiple_of":return`Neplatné číslo: musí být násobkem ${J.divisor}`;case"unrecognized_keys":return`Neznámé klíče: ${k(J.keys,", ")}`;case"invalid_key":return`Neplatný klíč v ${J.origin}`;case"invalid_union":return"Neplatný vstup";case"invalid_element":return`Neplatná hodnota v ${J.origin}`;default:return"Neplatný vstup"}}};function iG(){return{localeError:Pb()}}var Rb=()=>{let $={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"Zahl";case"object":{if(Array.isArray(J))return"Array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return(J)=>{switch(J.code){case"invalid_type":return`Ungültige Eingabe: erwartet ${J.expected}, erhalten ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ungültige Eingabe: erwartet ${u(J.values[0])}`;return`Ungültige Option: erwartet eine von ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Zu groß: erwartet, dass ${J.origin??"Wert"} ${U}${J.maximum.toString()} ${G.unit??"Elemente"} hat`;return`Zu groß: erwartet, dass ${J.origin??"Wert"} ${U}${J.maximum.toString()} ist`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Zu klein: erwartet, dass ${J.origin} ${U}${J.minimum.toString()} ${G.unit} hat`;return`Zu klein: erwartet, dass ${J.origin} ${U}${J.minimum.toString()} ist`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Ungültiger String: muss mit "${U.prefix}" beginnen`;if(U.format==="ends_with")return`Ungültiger String: muss mit "${U.suffix}" enden`;if(U.format==="includes")return`Ungültiger String: muss "${U.includes}" enthalten`;if(U.format==="regex")return`Ungültiger String: muss dem Muster ${U.pattern} entsprechen`;return`Ungültig: ${Y[U.format]??J.format}`}case"not_multiple_of":return`Ungültige Zahl: muss ein Vielfaches von ${J.divisor} sein`;case"unrecognized_keys":return`${J.keys.length>1?"Unbekannte Schlüssel":"Unbekannter Schlüssel"}: ${k(J.keys,", ")}`;case"invalid_key":return`Ungültiger Schlüssel in ${J.origin}`;case"invalid_union":return"Ungültige Eingabe";case"invalid_element":return`Ungültiger Wert in ${J.origin}`;default:return"Ungültige Eingabe"}}};function dG(){return{localeError:Rb()}}var Zb=($)=>{let Q=typeof $;switch(Q){case"number":return Number.isNaN($)?"NaN":"number";case"object":{if(Array.isArray($))return"array";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return Q},Sb=()=>{let $={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function Q(Y){return $[Y]??null}let X={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Invalid input: expected ${Y.expected}, received ${Zb(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Invalid input: expected ${u(Y.values[0])}`;return`Invalid option: expected one of ${k(Y.values,"|")}`;case"too_big":{let J=Y.inclusive?"<=":"<",U=Q(Y.origin);if(U)return`Too big: expected ${Y.origin??"value"} to have ${J}${Y.maximum.toString()} ${U.unit??"elements"}`;return`Too big: expected ${Y.origin??"value"} to be ${J}${Y.maximum.toString()}`}case"too_small":{let J=Y.inclusive?">=":">",U=Q(Y.origin);if(U)return`Too small: expected ${Y.origin} to have ${J}${Y.minimum.toString()} ${U.unit}`;return`Too small: expected ${Y.origin} to be ${J}${Y.minimum.toString()}`}case"invalid_format":{let J=Y;if(J.format==="starts_with")return`Invalid string: must start with "${J.prefix}"`;if(J.format==="ends_with")return`Invalid string: must end with "${J.suffix}"`;if(J.format==="includes")return`Invalid string: must include "${J.includes}"`;if(J.format==="regex")return`Invalid string: must match pattern ${J.pattern}`;return`Invalid ${X[J.format]??Y.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${Y.divisor}`;case"unrecognized_keys":return`Unrecognized key${Y.keys.length>1?"s":""}: ${k(Y.keys,", ")}`;case"invalid_key":return`Invalid key in ${Y.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${Y.origin}`;default:return"Invalid input"}}};function RX(){return{localeError:Sb()}}var Tb=($)=>{let Q=typeof $;switch(Q){case"number":return Number.isNaN($)?"NaN":"nombro";case"object":{if(Array.isArray($))return"tabelo";if($===null)return"senvalora";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return Q},Cb=()=>{let $={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function Q(Y){return $[Y]??null}let X={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoĝio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daŭro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return(Y)=>{switch(Y.code){case"invalid_type":return`Nevalida enigo: atendiĝis ${Y.expected}, riceviĝis ${Tb(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Nevalida enigo: atendiĝis ${u(Y.values[0])}`;return`Nevalida opcio: atendiĝis unu el ${k(Y.values,"|")}`;case"too_big":{let J=Y.inclusive?"<=":"<",U=Q(Y.origin);if(U)return`Tro granda: atendiĝis ke ${Y.origin??"valoro"} havu ${J}${Y.maximum.toString()} ${U.unit??"elementojn"}`;return`Tro granda: atendiĝis ke ${Y.origin??"valoro"} havu ${J}${Y.maximum.toString()}`}case"too_small":{let J=Y.inclusive?">=":">",U=Q(Y.origin);if(U)return`Tro malgranda: atendiĝis ke ${Y.origin} havu ${J}${Y.minimum.toString()} ${U.unit}`;return`Tro malgranda: atendiĝis ke ${Y.origin} estu ${J}${Y.minimum.toString()}`}case"invalid_format":{let J=Y;if(J.format==="starts_with")return`Nevalida karaktraro: devas komenciĝi per "${J.prefix}"`;if(J.format==="ends_with")return`Nevalida karaktraro: devas finiĝi per "${J.suffix}"`;if(J.format==="includes")return`Nevalida karaktraro: devas inkluzivi "${J.includes}"`;if(J.format==="regex")return`Nevalida karaktraro: devas kongrui kun la modelo ${J.pattern}`;return`Nevalida ${X[J.format]??Y.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${Y.divisor}`;case"unrecognized_keys":return`Nekonata${Y.keys.length>1?"j":""} ŝlosilo${Y.keys.length>1?"j":""}: ${k(Y.keys,", ")}`;case"invalid_key":return`Nevalida ŝlosilo en ${Y.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${Y.origin}`;default:return"Nevalida enigo"}}};function lG(){return{localeError:Cb()}}var bb=()=>{let $={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"número";case"object":{if(Array.isArray(J))return"arreglo";if(J===null)return"nulo";if(Object.getPrototypeOf(J)!==Object.prototype)return J.constructor.name}}return U},Y={regex:"entrada",email:"dirección de correo electrónico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duración ISO",ipv4:"dirección IPv4",ipv6:"dirección IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return(J)=>{switch(J.code){case"invalid_type":return`Entrada inválida: se esperaba ${J.expected}, recibido ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Entrada inválida: se esperaba ${u(J.values[0])}`;return`Opción inválida: se esperaba una de ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Demasiado grande: se esperaba que ${J.origin??"valor"} tuviera ${U}${J.maximum.toString()} ${G.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${J.origin??"valor"} fuera ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Demasiado pequeño: se esperaba que ${J.origin} tuviera ${U}${J.minimum.toString()} ${G.unit}`;return`Demasiado pequeño: se esperaba que ${J.origin} fuera ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Cadena inválida: debe comenzar con "${U.prefix}"`;if(U.format==="ends_with")return`Cadena inválida: debe terminar en "${U.suffix}"`;if(U.format==="includes")return`Cadena inválida: debe incluir "${U.includes}"`;if(U.format==="regex")return`Cadena inválida: debe coincidir con el patrón ${U.pattern}`;return`Inválido ${Y[U.format]??J.format}`}case"not_multiple_of":return`Número inválido: debe ser múltiplo de ${J.divisor}`;case"unrecognized_keys":return`Llave${J.keys.length>1?"s":""} desconocida${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Llave inválida en ${J.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido en ${J.origin}`;default:return"Entrada inválida"}}};function pG(){return{localeError:bb()}}var xb=()=>{let $={string:{unit:"کاراکتر",verb:"داشته باشد"},file:{unit:"بایت",verb:"داشته باشد"},array:{unit:"آیتم",verb:"داشته باشد"},set:{unit:"آیتم",verb:"داشته باشد"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"عدد";case"object":{if(Array.isArray(J))return"آرایه";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"ورودی",email:"آدرس ایمیل",url:"URL",emoji:"ایموجی",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاریخ و زمان ایزو",date:"تاریخ ایزو",time:"زمان ایزو",duration:"مدت زمان ایزو",ipv4:"IPv4 آدرس",ipv6:"IPv6 آدرس",cidrv4:"IPv4 دامنه",cidrv6:"IPv6 دامنه",base64:"base64-encoded رشته",base64url:"base64url-encoded رشته",json_string:"JSON رشته",e164:"E.164 عدد",jwt:"JWT",template_literal:"ورودی"};return(J)=>{switch(J.code){case"invalid_type":return`ورودی نامعتبر: می‌بایست ${J.expected} می‌بود، ${X(J.input)} دریافت شد`;case"invalid_value":if(J.values.length===1)return`ورودی نامعتبر: می‌بایست ${u(J.values[0])} می‌بود`;return`گزینه نامعتبر: می‌بایست یکی از ${k(J.values,"|")} می‌بود`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`خیلی بزرگ: ${J.origin??"مقدار"} باید ${U}${J.maximum.toString()} ${G.unit??"عنصر"} باشد`;return`خیلی بزرگ: ${J.origin??"مقدار"} باید ${U}${J.maximum.toString()} باشد`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`خیلی کوچک: ${J.origin} باید ${U}${J.minimum.toString()} ${G.unit} باشد`;return`خیلی کوچک: ${J.origin} باید ${U}${J.minimum.toString()} باشد`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`رشته نامعتبر: باید با "${U.prefix}" شروع شود`;if(U.format==="ends_with")return`رشته نامعتبر: باید با "${U.suffix}" تمام شود`;if(U.format==="includes")return`رشته نامعتبر: باید شامل "${U.includes}" باشد`;if(U.format==="regex")return`رشته نامعتبر: باید با الگوی ${U.pattern} مطابقت داشته باشد`;return`${Y[U.format]??J.format} نامعتبر`}case"not_multiple_of":return`عدد نامعتبر: باید مضرب ${J.divisor} باشد`;case"unrecognized_keys":return`کلید${J.keys.length>1?"های":""} ناشناس: ${k(J.keys,", ")}`;case"invalid_key":return`کلید ناشناس در ${J.origin}`;case"invalid_union":return"ورودی نامعتبر";case"invalid_element":return`مقدار نامعتبر در ${J.origin}`;default:return"ورودی نامعتبر"}}};function nG(){return{localeError:xb()}}var kb=()=>{let $={string:{unit:"merkkiä",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"päivämäärän"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"säännöllinen lauseke",email:"sähköpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-päivämäärä",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return(J)=>{switch(J.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${J.expected}, oli ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Virheellinen syöte: täytyy olla ${u(J.values[0])}`;return`Virheellinen valinta: täytyy olla yksi seuraavista: ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Liian suuri: ${G.subject} täytyy olla ${U}${J.maximum.toString()} ${G.unit}`.trim();return`Liian suuri: arvon täytyy olla ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Liian pieni: ${G.subject} täytyy olla ${U}${J.minimum.toString()} ${G.unit}`.trim();return`Liian pieni: arvon täytyy olla ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Virheellinen syöte: täytyy alkaa "${U.prefix}"`;if(U.format==="ends_with")return`Virheellinen syöte: täytyy loppua "${U.suffix}"`;if(U.format==="includes")return`Virheellinen syöte: täytyy sisältää "${U.includes}"`;if(U.format==="regex")return`Virheellinen syöte: täytyy vastata säännöllistä lauseketta ${U.pattern}`;return`Virheellinen ${Y[U.format]??J.format}`}case"not_multiple_of":return`Virheellinen luku: täytyy olla luvun ${J.divisor} monikerta`;case"unrecognized_keys":return`${J.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${k(J.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syöte"}}};function rG(){return{localeError:kb()}}var fb=()=>{let $={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"nombre";case"object":{if(Array.isArray(J))return"tableau";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"entrée",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return(J)=>{switch(J.code){case"invalid_type":return`Entrée invalide : ${J.expected} attendu, ${X(J.input)} reçu`;case"invalid_value":if(J.values.length===1)return`Entrée invalide : ${u(J.values[0])} attendu`;return`Option invalide : une valeur parmi ${k(J.values,"|")} attendue`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Trop grand : ${J.origin??"valeur"} doit ${G.verb} ${U}${J.maximum.toString()} ${G.unit??"élément(s)"}`;return`Trop grand : ${J.origin??"valeur"} doit être ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Trop petit : ${J.origin} doit ${G.verb} ${U}${J.minimum.toString()} ${G.unit}`;return`Trop petit : ${J.origin} doit être ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Chaîne invalide : doit commencer par "${U.prefix}"`;if(U.format==="ends_with")return`Chaîne invalide : doit se terminer par "${U.suffix}"`;if(U.format==="includes")return`Chaîne invalide : doit inclure "${U.includes}"`;if(U.format==="regex")return`Chaîne invalide : doit correspondre au modèle ${U.pattern}`;return`${Y[U.format]??J.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${J.divisor}`;case"unrecognized_keys":return`Clé${J.keys.length>1?"s":""} non reconnue${J.keys.length>1?"s":""} : ${k(J.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${J.origin}`;case"invalid_union":return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${J.origin}`;default:return"Entrée invalide"}}};function oG(){return{localeError:fb()}}var yb=()=>{let $={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"entrée",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return(J)=>{switch(J.code){case"invalid_type":return`Entrée invalide : attendu ${J.expected}, reçu ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Entrée invalide : attendu ${u(J.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"≤":"<",G=Q(J.origin);if(G)return`Trop grand : attendu que ${J.origin??"la valeur"} ait ${U}${J.maximum.toString()} ${G.unit}`;return`Trop grand : attendu que ${J.origin??"la valeur"} soit ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?"≥":">",G=Q(J.origin);if(G)return`Trop petit : attendu que ${J.origin} ait ${U}${J.minimum.toString()} ${G.unit}`;return`Trop petit : attendu que ${J.origin} soit ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Chaîne invalide : doit commencer par "${U.prefix}"`;if(U.format==="ends_with")return`Chaîne invalide : doit se terminer par "${U.suffix}"`;if(U.format==="includes")return`Chaîne invalide : doit inclure "${U.includes}"`;if(U.format==="regex")return`Chaîne invalide : doit correspondre au motif ${U.pattern}`;return`${Y[U.format]??J.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${J.divisor}`;case"unrecognized_keys":return`Clé${J.keys.length>1?"s":""} non reconnue${J.keys.length>1?"s":""} : ${k(J.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${J.origin}`;case"invalid_union":return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${J.origin}`;default:return"Entrée invalide"}}};function aG(){return{localeError:yb()}}var _b=()=>{let $={string:{unit:"אותיות",verb:"לכלול"},file:{unit:"בייטים",verb:"לכלול"},array:{unit:"פריטים",verb:"לכלול"},set:{unit:"פריטים",verb:"לכלול"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"קלט",email:"כתובת אימייל",url:"כתובת רשת",emoji:"אימוג'י",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"תאריך וזמן ISO",date:"תאריך ISO",time:"זמן ISO",duration:"משך זמן ISO",ipv4:"כתובת IPv4",ipv6:"כתובת IPv6",cidrv4:"טווח IPv4",cidrv6:"טווח IPv6",base64:"מחרוזת בבסיס 64",base64url:"מחרוזת בבסיס 64 לכתובות רשת",json_string:"מחרוזת JSON",e164:"מספר E.164",jwt:"JWT",template_literal:"קלט"};return(J)=>{switch(J.code){case"invalid_type":return`קלט לא תקין: צריך ${J.expected}, התקבל ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`קלט לא תקין: צריך ${u(J.values[0])}`;return`קלט לא תקין: צריך אחת מהאפשרויות  ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`גדול מדי: ${J.origin??"value"} צריך להיות ${U}${J.maximum.toString()} ${G.unit??"elements"}`;return`גדול מדי: ${J.origin??"value"} צריך להיות ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`קטן מדי: ${J.origin} צריך להיות ${U}${J.minimum.toString()} ${G.unit}`;return`קטן מדי: ${J.origin} צריך להיות ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`מחרוזת לא תקינה: חייבת להתחיל ב"${U.prefix}"`;if(U.format==="ends_with")return`מחרוזת לא תקינה: חייבת להסתיים ב "${U.suffix}"`;if(U.format==="includes")return`מחרוזת לא תקינה: חייבת לכלול "${U.includes}"`;if(U.format==="regex")return`מחרוזת לא תקינה: חייבת להתאים לתבנית ${U.pattern}`;return`${Y[U.format]??J.format} לא תקין`}case"not_multiple_of":return`מספר לא תקין: חייב להיות מכפלה של ${J.divisor}`;case"unrecognized_keys":return`מפתח${J.keys.length>1?"ות":""} לא מזוה${J.keys.length>1?"ים":"ה"}: ${k(J.keys,", ")}`;case"invalid_key":return`מפתח לא תקין ב${J.origin}`;case"invalid_union":return"קלט לא תקין";case"invalid_element":return`ערך לא תקין ב${J.origin}`;default:return"קלט לא תקין"}}};function tG(){return{localeError:_b()}}var gb=()=>{let $={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"szám";case"object":{if(Array.isArray(J))return"tömb";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"bemenet",email:"email cím",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO időbélyeg",date:"ISO dátum",time:"ISO idő",duration:"ISO időintervallum",ipv4:"IPv4 cím",ipv6:"IPv6 cím",cidrv4:"IPv4 tartomány",cidrv6:"IPv6 tartomány",base64:"base64-kódolt string",base64url:"base64url-kódolt string",json_string:"JSON string",e164:"E.164 szám",jwt:"JWT",template_literal:"bemenet"};return(J)=>{switch(J.code){case"invalid_type":return`Érvénytelen bemenet: a várt érték ${J.expected}, a kapott érték ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Érvénytelen bemenet: a várt érték ${u(J.values[0])}`;return`Érvénytelen opció: valamelyik érték várt ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Túl nagy: ${J.origin??"érték"} mérete túl nagy ${U}${J.maximum.toString()} ${G.unit??"elem"}`;return`Túl nagy: a bemeneti érték ${J.origin??"érték"} túl nagy: ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Túl kicsi: a bemeneti érték ${J.origin} mérete túl kicsi ${U}${J.minimum.toString()} ${G.unit}`;return`Túl kicsi: a bemeneti érték ${J.origin} túl kicsi ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Érvénytelen string: "${U.prefix}" értékkel kell kezdődnie`;if(U.format==="ends_with")return`Érvénytelen string: "${U.suffix}" értékkel kell végződnie`;if(U.format==="includes")return`Érvénytelen string: "${U.includes}" értéket kell tartalmaznia`;if(U.format==="regex")return`Érvénytelen string: ${U.pattern} mintának kell megfelelnie`;return`Érvénytelen ${Y[U.format]??J.format}`}case"not_multiple_of":return`Érvénytelen szám: ${J.divisor} többszörösének kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Érvénytelen kulcs ${J.origin}`;case"invalid_union":return"Érvénytelen bemenet";case"invalid_element":return`Érvénytelen érték: ${J.origin}`;default:return"Érvénytelen bemenet"}}};function sG(){return{localeError:gb()}}var hb=()=>{let $={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Input tidak valid: diharapkan ${J.expected}, diterima ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Input tidak valid: diharapkan ${u(J.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Terlalu besar: diharapkan ${J.origin??"value"} memiliki ${U}${J.maximum.toString()} ${G.unit??"elemen"}`;return`Terlalu besar: diharapkan ${J.origin??"value"} menjadi ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Terlalu kecil: diharapkan ${J.origin} memiliki ${U}${J.minimum.toString()} ${G.unit}`;return`Terlalu kecil: diharapkan ${J.origin} menjadi ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`String tidak valid: harus dimulai dengan "${U.prefix}"`;if(U.format==="ends_with")return`String tidak valid: harus berakhir dengan "${U.suffix}"`;if(U.format==="includes")return`String tidak valid: harus menyertakan "${U.includes}"`;if(U.format==="regex")return`String tidak valid: harus sesuai pola ${U.pattern}`;return`${Y[U.format]??J.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${J.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${J.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${J.origin}`;default:return"Input tidak valid"}}};function eG(){return{localeError:hb()}}var mb=()=>{let $={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"numero";case"object":{if(Array.isArray(J))return"vettore";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Input non valido: atteso ${J.expected}, ricevuto ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Input non valido: atteso ${u(J.values[0])}`;return`Opzione non valida: atteso uno tra ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Troppo grande: ${J.origin??"valore"} deve avere ${U}${J.maximum.toString()} ${G.unit??"elementi"}`;return`Troppo grande: ${J.origin??"valore"} deve essere ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Troppo piccolo: ${J.origin} deve avere ${U}${J.minimum.toString()} ${G.unit}`;return`Troppo piccolo: ${J.origin} deve essere ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Stringa non valida: deve iniziare con "${U.prefix}"`;if(U.format==="ends_with")return`Stringa non valida: deve terminare con "${U.suffix}"`;if(U.format==="includes")return`Stringa non valida: deve includere "${U.includes}"`;if(U.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${U.pattern}`;return`Invalid ${Y[U.format]??J.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${J.divisor}`;case"unrecognized_keys":return`Chiav${J.keys.length>1?"i":"e"} non riconosciut${J.keys.length>1?"e":"a"}: ${k(J.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${J.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${J.origin}`;default:return"Input non valido"}}};function $8(){return{localeError:mb()}}var cb=()=>{let $={string:{unit:"文字",verb:"である"},file:{unit:"バイト",verb:"である"},array:{unit:"要素",verb:"である"},set:{unit:"要素",verb:"である"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"数値";case"object":{if(Array.isArray(J))return"配列";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"入力値",email:"メールアドレス",url:"URL",emoji:"絵文字",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日時",date:"ISO日付",time:"ISO時刻",duration:"ISO期間",ipv4:"IPv4アドレス",ipv6:"IPv6アドレス",cidrv4:"IPv4範囲",cidrv6:"IPv6範囲",base64:"base64エンコード文字列",base64url:"base64urlエンコード文字列",json_string:"JSON文字列",e164:"E.164番号",jwt:"JWT",template_literal:"入力値"};return(J)=>{switch(J.code){case"invalid_type":return`無効な入力: ${J.expected}が期待されましたが、${X(J.input)}が入力されました`;case"invalid_value":if(J.values.length===1)return`無効な入力: ${u(J.values[0])}が期待されました`;return`無効な選択: ${k(J.values,"、")}のいずれかである必要があります`;case"too_big":{let U=J.inclusive?"以下である":"より小さい",G=Q(J.origin);if(G)return`大きすぎる値: ${J.origin??"値"}は${J.maximum.toString()}${G.unit??"要素"}${U}必要があります`;return`大きすぎる値: ${J.origin??"値"}は${J.maximum.toString()}${U}必要があります`}case"too_small":{let U=J.inclusive?"以上である":"より大きい",G=Q(J.origin);if(G)return`小さすぎる値: ${J.origin}は${J.minimum.toString()}${G.unit}${U}必要があります`;return`小さすぎる値: ${J.origin}は${J.minimum.toString()}${U}必要があります`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`無効な文字列: "${U.prefix}"で始まる必要があります`;if(U.format==="ends_with")return`無効な文字列: "${U.suffix}"で終わる必要があります`;if(U.format==="includes")return`無効な文字列: "${U.includes}"を含む必要があります`;if(U.format==="regex")return`無効な文字列: パターン${U.pattern}に一致する必要があります`;return`無効な${Y[U.format]??J.format}`}case"not_multiple_of":return`無効な数値: ${J.divisor}の倍数である必要があります`;case"unrecognized_keys":return`認識されていないキー${J.keys.length>1?"群":""}: ${k(J.keys,"、")}`;case"invalid_key":return`${J.origin}内の無効なキー`;case"invalid_union":return"無効な入力";case"invalid_element":return`${J.origin}内の無効な値`;default:return"無効な入力"}}};function Q8(){return{localeError:cb()}}var ub=()=>{let $={string:{unit:"តួអក្សរ",verb:"គួរមាន"},file:{unit:"បៃ",verb:"គួរមាន"},array:{unit:"ធាតុ",verb:"គួរមាន"},set:{unit:"ធាតុ",verb:"គួរមាន"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"មិនមែនជាលេខ (NaN)":"លេខ";case"object":{if(Array.isArray(J))return"អារេ (Array)";if(J===null)return"គ្មានតម្លៃ (null)";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"ទិន្នន័យបញ្ចូល",email:"អាសយដ្ឋានអ៊ីមែល",url:"URL",emoji:"សញ្ញាអារម្មណ៍",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"កាលបរិច្ឆេទ និងម៉ោង ISO",date:"កាលបរិច្ឆេទ ISO",time:"ម៉ោង ISO",duration:"រយៈពេល ISO",ipv4:"អាសយដ្ឋាន IPv4",ipv6:"អាសយដ្ឋាន IPv6",cidrv4:"ដែនអាសយដ្ឋាន IPv4",cidrv6:"ដែនអាសយដ្ឋាន IPv6",base64:"ខ្សែអក្សរអ៊ិកូដ base64",base64url:"ខ្សែអក្សរអ៊ិកូដ base64url",json_string:"ខ្សែអក្សរ JSON",e164:"លេខ E.164",jwt:"JWT",template_literal:"ទិន្នន័យបញ្ចូល"};return(J)=>{switch(J.code){case"invalid_type":return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${J.expected} ប៉ុន្តែទទួលបាន ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${u(J.values[0])}`;return`ជម្រើសមិនត្រឹមត្រូវ៖ ត្រូវជាមួយក្នុងចំណោម ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`ធំពេក៖ ត្រូវការ ${J.origin??"តម្លៃ"} ${U} ${J.maximum.toString()} ${G.unit??"ធាតុ"}`;return`ធំពេក៖ ត្រូវការ ${J.origin??"តម្លៃ"} ${U} ${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`តូចពេក៖ ត្រូវការ ${J.origin} ${U} ${J.minimum.toString()} ${G.unit}`;return`តូចពេក៖ ត្រូវការ ${J.origin} ${U} ${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវចាប់ផ្តើមដោយ "${U.prefix}"`;if(U.format==="ends_with")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវបញ្ចប់ដោយ "${U.suffix}"`;if(U.format==="includes")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវមាន "${U.includes}"`;if(U.format==="regex")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវតែផ្គូផ្គងនឹងទម្រង់ដែលបានកំណត់ ${U.pattern}`;return`មិនត្រឹមត្រូវ៖ ${Y[U.format]??J.format}`}case"not_multiple_of":return`លេខមិនត្រឹមត្រូវ៖ ត្រូវតែជាពហុគុណនៃ ${J.divisor}`;case"unrecognized_keys":return`រកឃើញសោមិនស្គាល់៖ ${k(J.keys,", ")}`;case"invalid_key":return`សោមិនត្រឹមត្រូវនៅក្នុង ${J.origin}`;case"invalid_union":return"ទិន្នន័យមិនត្រឹមត្រូវ";case"invalid_element":return`ទិន្នន័យមិនត្រឹមត្រូវនៅក្នុង ${J.origin}`;default:return"ទិន្នន័យមិនត្រឹមត្រូវ"}}};function X8(){return{localeError:ub()}}var ib=()=>{let $={string:{unit:"문자",verb:"to have"},file:{unit:"바이트",verb:"to have"},array:{unit:"개",verb:"to have"},set:{unit:"개",verb:"to have"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"입력",email:"이메일 주소",url:"URL",emoji:"이모지",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 날짜시간",date:"ISO 날짜",time:"ISO 시간",duration:"ISO 기간",ipv4:"IPv4 주소",ipv6:"IPv6 주소",cidrv4:"IPv4 범위",cidrv6:"IPv6 범위",base64:"base64 인코딩 문자열",base64url:"base64url 인코딩 문자열",json_string:"JSON 문자열",e164:"E.164 번호",jwt:"JWT",template_literal:"입력"};return(J)=>{switch(J.code){case"invalid_type":return`잘못된 입력: 예상 타입은 ${J.expected}, 받은 타입은 ${X(J.input)}입니다`;case"invalid_value":if(J.values.length===1)return`잘못된 입력: 값은 ${u(J.values[0])} 이어야 합니다`;return`잘못된 옵션: ${k(J.values,"또는 ")} 중 하나여야 합니다`;case"too_big":{let U=J.inclusive?"이하":"미만",G=U==="미만"?"이어야 합니다":"여야 합니다",z=Q(J.origin),H=z?.unit??"요소";if(z)return`${J.origin??"값"}이 너무 큽니다: ${J.maximum.toString()}${H} ${U}${G}`;return`${J.origin??"값"}이 너무 큽니다: ${J.maximum.toString()} ${U}${G}`}case"too_small":{let U=J.inclusive?"이상":"초과",G=U==="이상"?"이어야 합니다":"여야 합니다",z=Q(J.origin),H=z?.unit??"요소";if(z)return`${J.origin??"값"}이 너무 작습니다: ${J.minimum.toString()}${H} ${U}${G}`;return`${J.origin??"값"}이 너무 작습니다: ${J.minimum.toString()} ${U}${G}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`잘못된 문자열: "${U.prefix}"(으)로 시작해야 합니다`;if(U.format==="ends_with")return`잘못된 문자열: "${U.suffix}"(으)로 끝나야 합니다`;if(U.format==="includes")return`잘못된 문자열: "${U.includes}"을(를) 포함해야 합니다`;if(U.format==="regex")return`잘못된 문자열: 정규식 ${U.pattern} 패턴과 일치해야 합니다`;return`잘못된 ${Y[U.format]??J.format}`}case"not_multiple_of":return`잘못된 숫자: ${J.divisor}의 배수여야 합니다`;case"unrecognized_keys":return`인식할 수 없는 키: ${k(J.keys,", ")}`;case"invalid_key":return`잘못된 키: ${J.origin}`;case"invalid_union":return"잘못된 입력";case"invalid_element":return`잘못된 값: ${J.origin}`;default:return"잘못된 입력"}}};function J8(){return{localeError:ib()}}var db=()=>{let $={string:{unit:"знаци",verb:"да имаат"},file:{unit:"бајти",verb:"да имаат"},array:{unit:"ставки",verb:"да имаат"},set:{unit:"ставки",verb:"да имаат"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"број";case"object":{if(Array.isArray(J))return"низа";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"внес",email:"адреса на е-пошта",url:"URL",emoji:"емоџи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO датум и време",date:"ISO датум",time:"ISO време",duration:"ISO времетраење",ipv4:"IPv4 адреса",ipv6:"IPv6 адреса",cidrv4:"IPv4 опсег",cidrv6:"IPv6 опсег",base64:"base64-енкодирана низа",base64url:"base64url-енкодирана низа",json_string:"JSON низа",e164:"E.164 број",jwt:"JWT",template_literal:"внес"};return(J)=>{switch(J.code){case"invalid_type":return`Грешен внес: се очекува ${J.expected}, примено ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Invalid input: expected ${u(J.values[0])}`;return`Грешана опција: се очекува една ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Премногу голем: се очекува ${J.origin??"вредноста"} да има ${U}${J.maximum.toString()} ${G.unit??"елементи"}`;return`Премногу голем: се очекува ${J.origin??"вредноста"} да биде ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Премногу мал: се очекува ${J.origin} да има ${U}${J.minimum.toString()} ${G.unit}`;return`Премногу мал: се очекува ${J.origin} да биде ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Неважечка низа: мора да започнува со "${U.prefix}"`;if(U.format==="ends_with")return`Неважечка низа: мора да завршува со "${U.suffix}"`;if(U.format==="includes")return`Неважечка низа: мора да вклучува "${U.includes}"`;if(U.format==="regex")return`Неважечка низа: мора да одгоара на патернот ${U.pattern}`;return`Invalid ${Y[U.format]??J.format}`}case"not_multiple_of":return`Грешен број: мора да биде делив со ${J.divisor}`;case"unrecognized_keys":return`${J.keys.length>1?"Непрепознаени клучеви":"Непрепознаен клуч"}: ${k(J.keys,", ")}`;case"invalid_key":return`Грешен клуч во ${J.origin}`;case"invalid_union":return"Грешен внес";case"invalid_element":return`Грешна вредност во ${J.origin}`;default:return"Грешен внес"}}};function Y8(){return{localeError:db()}}var lb=()=>{let $={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"nombor";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Input tidak sah: dijangka ${J.expected}, diterima ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Input tidak sah: dijangka ${u(J.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Terlalu besar: dijangka ${J.origin??"nilai"} ${G.verb} ${U}${J.maximum.toString()} ${G.unit??"elemen"}`;return`Terlalu besar: dijangka ${J.origin??"nilai"} adalah ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Terlalu kecil: dijangka ${J.origin} ${G.verb} ${U}${J.minimum.toString()} ${G.unit}`;return`Terlalu kecil: dijangka ${J.origin} adalah ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`String tidak sah: mesti bermula dengan "${U.prefix}"`;if(U.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${U.suffix}"`;if(U.format==="includes")return`String tidak sah: mesti mengandungi "${U.includes}"`;if(U.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${U.pattern}`;return`${Y[U.format]??J.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${J.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${k(J.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${J.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${J.origin}`;default:return"Input tidak sah"}}};function U8(){return{localeError:lb()}}var pb=()=>{let $={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"getal";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return(J)=>{switch(J.code){case"invalid_type":return`Ongeldige invoer: verwacht ${J.expected}, ontving ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ongeldige invoer: verwacht ${u(J.values[0])}`;return`Ongeldige optie: verwacht één van ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Te lang: verwacht dat ${J.origin??"waarde"} ${U}${J.maximum.toString()} ${G.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${J.origin??"waarde"} ${U}${J.maximum.toString()} is`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Te kort: verwacht dat ${J.origin} ${U}${J.minimum.toString()} ${G.unit} bevat`;return`Te kort: verwacht dat ${J.origin} ${U}${J.minimum.toString()} is`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Ongeldige tekst: moet met "${U.prefix}" beginnen`;if(U.format==="ends_with")return`Ongeldige tekst: moet op "${U.suffix}" eindigen`;if(U.format==="includes")return`Ongeldige tekst: moet "${U.includes}" bevatten`;if(U.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${U.pattern}`;return`Ongeldig: ${Y[U.format]??J.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${J.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${J.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${J.origin}`;default:return"Ongeldige invoer"}}};function q8(){return{localeError:pb()}}var nb=()=>{let $={string:{unit:"tegn",verb:"å ha"},file:{unit:"bytes",verb:"å ha"},array:{unit:"elementer",verb:"å inneholde"},set:{unit:"elementer",verb:"å inneholde"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"tall";case"object":{if(Array.isArray(J))return"liste";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`Ugyldig input: forventet ${J.expected}, fikk ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ugyldig verdi: forventet ${u(J.values[0])}`;return`Ugyldig valg: forventet en av ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`For stor(t): forventet ${J.origin??"value"} til å ha ${U}${J.maximum.toString()} ${G.unit??"elementer"}`;return`For stor(t): forventet ${J.origin??"value"} til å ha ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`For lite(n): forventet ${J.origin} til å ha ${U}${J.minimum.toString()} ${G.unit}`;return`For lite(n): forventet ${J.origin} til å ha ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Ugyldig streng: må starte med "${U.prefix}"`;if(U.format==="ends_with")return`Ugyldig streng: må ende med "${U.suffix}"`;if(U.format==="includes")return`Ugyldig streng: må inneholde "${U.includes}"`;if(U.format==="regex")return`Ugyldig streng: må matche mønsteret ${U.pattern}`;return`Ugyldig ${Y[U.format]??J.format}`}case"not_multiple_of":return`Ugyldig tall: må være et multiplum av ${J.divisor}`;case"unrecognized_keys":return`${J.keys.length>1?"Ukjente nøkler":"Ukjent nøkkel"}: ${k(J.keys,", ")}`;case"invalid_key":return`Ugyldig nøkkel i ${J.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${J.origin}`;default:return"Ugyldig input"}}};function G8(){return{localeError:nb()}}var rb=()=>{let $={string:{unit:"harf",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"unsur",verb:"olmalıdır"},set:{unit:"unsur",verb:"olmalıdır"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"numara";case"object":{if(Array.isArray(J))return"saf";if(J===null)return"gayb";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"giren",email:"epostagâh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengâmı",date:"ISO tarihi",time:"ISO zamanı",duration:"ISO müddeti",ipv4:"IPv4 nişânı",ipv6:"IPv6 nişânı",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-şifreli metin",base64url:"base64url-şifreli metin",json_string:"JSON metin",e164:"E.164 sayısı",jwt:"JWT",template_literal:"giren"};return(J)=>{switch(J.code){case"invalid_type":return`Fâsit giren: umulan ${J.expected}, alınan ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Fâsit giren: umulan ${u(J.values[0])}`;return`Fâsit tercih: mûteberler ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Fazla büyük: ${J.origin??"value"}, ${U}${J.maximum.toString()} ${G.unit??"elements"} sahip olmalıydı.`;return`Fazla büyük: ${J.origin??"value"}, ${U}${J.maximum.toString()} olmalıydı.`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Fazla küçük: ${J.origin}, ${U}${J.minimum.toString()} ${G.unit} sahip olmalıydı.`;return`Fazla küçük: ${J.origin}, ${U}${J.minimum.toString()} olmalıydı.`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Fâsit metin: "${U.prefix}" ile başlamalı.`;if(U.format==="ends_with")return`Fâsit metin: "${U.suffix}" ile bitmeli.`;if(U.format==="includes")return`Fâsit metin: "${U.includes}" ihtivâ etmeli.`;if(U.format==="regex")return`Fâsit metin: ${U.pattern} nakşına uymalı.`;return`Fâsit ${Y[U.format]??J.format}`}case"not_multiple_of":return`Fâsit sayı: ${J.divisor} katı olmalıydı.`;case"unrecognized_keys":return`Tanınmayan anahtar ${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`${J.origin} için tanınmayan anahtar var.`;case"invalid_union":return"Giren tanınamadı.";case"invalid_element":return`${J.origin} için tanınmayan kıymet var.`;default:return"Kıymet tanınamadı."}}};function z8(){return{localeError:rb()}}var ob=()=>{let $={string:{unit:"توکي",verb:"ولري"},file:{unit:"بایټس",verb:"ولري"},array:{unit:"توکي",verb:"ولري"},set:{unit:"توکي",verb:"ولري"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"عدد";case"object":{if(Array.isArray(J))return"ارې";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"ورودي",email:"بریښنالیک",url:"یو آر ال",emoji:"ایموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"نیټه او وخت",date:"نېټه",time:"وخت",duration:"موده",ipv4:"د IPv4 پته",ipv6:"د IPv6 پته",cidrv4:"د IPv4 ساحه",cidrv6:"د IPv6 ساحه",base64:"base64-encoded متن",base64url:"base64url-encoded متن",json_string:"JSON متن",e164:"د E.164 شمېره",jwt:"JWT",template_literal:"ورودي"};return(J)=>{switch(J.code){case"invalid_type":return`ناسم ورودي: باید ${J.expected} وای, مګر ${X(J.input)} ترلاسه شو`;case"invalid_value":if(J.values.length===1)return`ناسم ورودي: باید ${u(J.values[0])} وای`;return`ناسم انتخاب: باید یو له ${k(J.values,"|")} څخه وای`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`ډیر لوی: ${J.origin??"ارزښت"} باید ${U}${J.maximum.toString()} ${G.unit??"عنصرونه"} ولري`;return`ډیر لوی: ${J.origin??"ارزښت"} باید ${U}${J.maximum.toString()} وي`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`ډیر کوچنی: ${J.origin} باید ${U}${J.minimum.toString()} ${G.unit} ولري`;return`ډیر کوچنی: ${J.origin} باید ${U}${J.minimum.toString()} وي`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`ناسم متن: باید د "${U.prefix}" سره پیل شي`;if(U.format==="ends_with")return`ناسم متن: باید د "${U.suffix}" سره پای ته ورسيږي`;if(U.format==="includes")return`ناسم متن: باید "${U.includes}" ولري`;if(U.format==="regex")return`ناسم متن: باید د ${U.pattern} سره مطابقت ولري`;return`${Y[U.format]??J.format} ناسم دی`}case"not_multiple_of":return`ناسم عدد: باید د ${J.divisor} مضرب وي`;case"unrecognized_keys":return`ناسم ${J.keys.length>1?"کلیډونه":"کلیډ"}: ${k(J.keys,", ")}`;case"invalid_key":return`ناسم کلیډ په ${J.origin} کې`;case"invalid_union":return"ناسمه ورودي";case"invalid_element":return`ناسم عنصر په ${J.origin} کې`;default:return"ناسمه ورودي"}}};function W8(){return{localeError:ob()}}var ab=()=>{let $={string:{unit:"znaków",verb:"mieć"},file:{unit:"bajtów",verb:"mieć"},array:{unit:"elementów",verb:"mieć"},set:{unit:"elementów",verb:"mieć"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"liczba";case"object":{if(Array.isArray(J))return"tablica";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"wyrażenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciąg znaków zakodowany w formacie base64",base64url:"ciąg znaków zakodowany w formacie base64url",json_string:"ciąg znaków w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejście"};return(J)=>{switch(J.code){case"invalid_type":return`Nieprawidłowe dane wejściowe: oczekiwano ${J.expected}, otrzymano ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Nieprawidłowe dane wejściowe: oczekiwano ${u(J.values[0])}`;return`Nieprawidłowa opcja: oczekiwano jednej z wartości ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Za duża wartość: oczekiwano, że ${J.origin??"wartość"} będzie mieć ${U}${J.maximum.toString()} ${G.unit??"elementów"}`;return`Zbyt duż(y/a/e): oczekiwano, że ${J.origin??"wartość"} będzie wynosić ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Za mała wartość: oczekiwano, że ${J.origin??"wartość"} będzie mieć ${U}${J.minimum.toString()} ${G.unit??"elementów"}`;return`Zbyt mał(y/a/e): oczekiwano, że ${J.origin??"wartość"} będzie wynosić ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Nieprawidłowy ciąg znaków: musi zaczynać się od "${U.prefix}"`;if(U.format==="ends_with")return`Nieprawidłowy ciąg znaków: musi kończyć się na "${U.suffix}"`;if(U.format==="includes")return`Nieprawidłowy ciąg znaków: musi zawierać "${U.includes}"`;if(U.format==="regex")return`Nieprawidłowy ciąg znaków: musi odpowiadać wzorcowi ${U.pattern}`;return`Nieprawidłow(y/a/e) ${Y[U.format]??J.format}`}case"not_multiple_of":return`Nieprawidłowa liczba: musi być wielokrotnością ${J.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Nieprawidłowy klucz w ${J.origin}`;case"invalid_union":return"Nieprawidłowe dane wejściowe";case"invalid_element":return`Nieprawidłowa wartość w ${J.origin}`;default:return"Nieprawidłowe dane wejściowe"}}};function H8(){return{localeError:ab()}}var tb=()=>{let $={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"número";case"object":{if(Array.isArray(J))return"array";if(J===null)return"nulo";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"padrão",email:"endereço de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duração ISO",ipv4:"endereço IPv4",ipv6:"endereço IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return(J)=>{switch(J.code){case"invalid_type":return`Tipo inválido: esperado ${J.expected}, recebido ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Entrada inválida: esperado ${u(J.values[0])}`;return`Opção inválida: esperada uma das ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Muito grande: esperado que ${J.origin??"valor"} tivesse ${U}${J.maximum.toString()} ${G.unit??"elementos"}`;return`Muito grande: esperado que ${J.origin??"valor"} fosse ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Muito pequeno: esperado que ${J.origin} tivesse ${U}${J.minimum.toString()} ${G.unit}`;return`Muito pequeno: esperado que ${J.origin} fosse ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Texto inválido: deve começar com "${U.prefix}"`;if(U.format==="ends_with")return`Texto inválido: deve terminar com "${U.suffix}"`;if(U.format==="includes")return`Texto inválido: deve incluir "${U.includes}"`;if(U.format==="regex")return`Texto inválido: deve corresponder ao padrão ${U.pattern}`;return`${Y[U.format]??J.format} inválido`}case"not_multiple_of":return`Número inválido: deve ser múltiplo de ${J.divisor}`;case"unrecognized_keys":return`Chave${J.keys.length>1?"s":""} desconhecida${J.keys.length>1?"s":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Chave inválida em ${J.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido em ${J.origin}`;default:return"Campo inválido"}}};function j8(){return{localeError:tb()}}function zB($,Q,X,Y){let J=Math.abs($),U=J%10,G=J%100;if(G>=11&&G<=19)return Y;if(U===1)return Q;if(U>=2&&U<=4)return X;return Y}var sb=()=>{let $={string:{unit:{one:"символ",few:"символа",many:"символов"},verb:"иметь"},file:{unit:{one:"байт",few:"байта",many:"байт"},verb:"иметь"},array:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"},set:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"число";case"object":{if(Array.isArray(J))return"массив";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"ввод",email:"email адрес",url:"URL",emoji:"эмодзи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата и время",date:"ISO дата",time:"ISO время",duration:"ISO длительность",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"строка в формате base64",base64url:"строка в формате base64url",json_string:"JSON строка",e164:"номер E.164",jwt:"JWT",template_literal:"ввод"};return(J)=>{switch(J.code){case"invalid_type":return`Неверный ввод: ожидалось ${J.expected}, получено ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Неверный ввод: ожидалось ${u(J.values[0])}`;return`Неверный вариант: ожидалось одно из ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G){let z=Number(J.maximum),H=zB(z,G.unit.one,G.unit.few,G.unit.many);return`Слишком большое значение: ожидалось, что ${J.origin??"значение"} будет иметь ${U}${J.maximum.toString()} ${H}`}return`Слишком большое значение: ожидалось, что ${J.origin??"значение"} будет ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G){let z=Number(J.minimum),H=zB(z,G.unit.one,G.unit.few,G.unit.many);return`Слишком маленькое значение: ожидалось, что ${J.origin} будет иметь ${U}${J.minimum.toString()} ${H}`}return`Слишком маленькое значение: ожидалось, что ${J.origin} будет ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Неверная строка: должна начинаться с "${U.prefix}"`;if(U.format==="ends_with")return`Неверная строка: должна заканчиваться на "${U.suffix}"`;if(U.format==="includes")return`Неверная строка: должна содержать "${U.includes}"`;if(U.format==="regex")return`Неверная строка: должна соответствовать шаблону ${U.pattern}`;return`Неверный ${Y[U.format]??J.format}`}case"not_multiple_of":return`Неверное число: должно быть кратным ${J.divisor}`;case"unrecognized_keys":return`Нераспознанн${J.keys.length>1?"ые":"ый"} ключ${J.keys.length>1?"и":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Неверный ключ в ${J.origin}`;case"invalid_union":return"Неверные входные данные";case"invalid_element":return`Неверное значение в ${J.origin}`;default:return"Неверные входные данные"}}};function w8(){return{localeError:sb()}}var eb=()=>{let $={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"število";case"object":{if(Array.isArray(J))return"tabela";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"vnos",email:"e-poštni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in čas",date:"ISO datum",time:"ISO čas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 številka",jwt:"JWT",template_literal:"vnos"};return(J)=>{switch(J.code){case"invalid_type":return`Neveljaven vnos: pričakovano ${J.expected}, prejeto ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Neveljaven vnos: pričakovano ${u(J.values[0])}`;return`Neveljavna možnost: pričakovano eno izmed ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Preveliko: pričakovano, da bo ${J.origin??"vrednost"} imelo ${U}${J.maximum.toString()} ${G.unit??"elementov"}`;return`Preveliko: pričakovano, da bo ${J.origin??"vrednost"} ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Premajhno: pričakovano, da bo ${J.origin} imelo ${U}${J.minimum.toString()} ${G.unit}`;return`Premajhno: pričakovano, da bo ${J.origin} ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Neveljaven niz: mora se začeti z "${U.prefix}"`;if(U.format==="ends_with")return`Neveljaven niz: mora se končati z "${U.suffix}"`;if(U.format==="includes")return`Neveljaven niz: mora vsebovati "${U.includes}"`;if(U.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${U.pattern}`;return`Neveljaven ${Y[U.format]??J.format}`}case"not_multiple_of":return`Neveljavno število: mora biti večkratnik ${J.divisor}`;case"unrecognized_keys":return`Neprepoznan${J.keys.length>1?"i ključi":" ključ"}: ${k(J.keys,", ")}`;case"invalid_key":return`Neveljaven ključ v ${J.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${J.origin}`;default:return"Neveljaven vnos"}}};function K8(){return{localeError:eb()}}var $x=()=>{let $={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehålla"},set:{unit:"objekt",verb:"att innehålla"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"antal";case"object":{if(Array.isArray(J))return"lista";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"reguljärt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad sträng",base64url:"base64url-kodad sträng",json_string:"JSON-sträng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return(J)=>{switch(J.code){case"invalid_type":return`Ogiltig inmatning: förväntat ${J.expected}, fick ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Ogiltig inmatning: förväntat ${u(J.values[0])}`;return`Ogiltigt val: förväntade en av ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`För stor(t): förväntade ${J.origin??"värdet"} att ha ${U}${J.maximum.toString()} ${G.unit??"element"}`;return`För stor(t): förväntat ${J.origin??"värdet"} att ha ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`För lite(t): förväntade ${J.origin??"värdet"} att ha ${U}${J.minimum.toString()} ${G.unit}`;return`För lite(t): förväntade ${J.origin??"värdet"} att ha ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Ogiltig sträng: måste börja med "${U.prefix}"`;if(U.format==="ends_with")return`Ogiltig sträng: måste sluta med "${U.suffix}"`;if(U.format==="includes")return`Ogiltig sträng: måste innehålla "${U.includes}"`;if(U.format==="regex")return`Ogiltig sträng: måste matcha mönstret "${U.pattern}"`;return`Ogiltig(t) ${Y[U.format]??J.format}`}case"not_multiple_of":return`Ogiltigt tal: måste vara en multipel av ${J.divisor}`;case"unrecognized_keys":return`${J.keys.length>1?"Okända nycklar":"Okänd nyckel"}: ${k(J.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${J.origin??"värdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt värde i ${J.origin??"värdet"}`;default:return"Ogiltig input"}}};function N8(){return{localeError:$x()}}var Qx=()=>{let $={string:{unit:"எழுத்துக்கள்",verb:"கொண்டிருக்க வேண்டும்"},file:{unit:"பைட்டுகள்",verb:"கொண்டிருக்க வேண்டும்"},array:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"},set:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"எண் அல்லாதது":"எண்";case"object":{if(Array.isArray(J))return"அணி";if(J===null)return"வெறுமை";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"உள்ளீடு",email:"மின்னஞ்சல் முகவரி",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO தேதி நேரம்",date:"ISO தேதி",time:"ISO நேரம்",duration:"ISO கால அளவு",ipv4:"IPv4 முகவரி",ipv6:"IPv6 முகவரி",cidrv4:"IPv4 வரம்பு",cidrv6:"IPv6 வரம்பு",base64:"base64-encoded சரம்",base64url:"base64url-encoded சரம்",json_string:"JSON சரம்",e164:"E.164 எண்",jwt:"JWT",template_literal:"input"};return(J)=>{switch(J.code){case"invalid_type":return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${J.expected}, பெறப்பட்டது ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${u(J.values[0])}`;return`தவறான விருப்பம்: எதிர்பார்க்கப்பட்டது ${k(J.values,"|")} இல் ஒன்று`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${J.origin??"மதிப்பு"} ${U}${J.maximum.toString()} ${G.unit??"உறுப்புகள்"} ஆக இருக்க வேண்டும்`;return`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${J.origin??"மதிப்பு"} ${U}${J.maximum.toString()} ஆக இருக்க வேண்டும்`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${J.origin} ${U}${J.minimum.toString()} ${G.unit} ஆக இருக்க வேண்டும்`;return`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${J.origin} ${U}${J.minimum.toString()} ஆக இருக்க வேண்டும்`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`தவறான சரம்: "${U.prefix}" இல் தொடங்க வேண்டும்`;if(U.format==="ends_with")return`தவறான சரம்: "${U.suffix}" இல் முடிவடைய வேண்டும்`;if(U.format==="includes")return`தவறான சரம்: "${U.includes}" ஐ உள்ளடக்க வேண்டும்`;if(U.format==="regex")return`தவறான சரம்: ${U.pattern} முறைபாட்டுடன் பொருந்த வேண்டும்`;return`தவறான ${Y[U.format]??J.format}`}case"not_multiple_of":return`தவறான எண்: ${J.divisor} இன் பலமாக இருக்க வேண்டும்`;case"unrecognized_keys":return`அடையாளம் தெரியாத விசை${J.keys.length>1?"கள்":""}: ${k(J.keys,", ")}`;case"invalid_key":return`${J.origin} இல் தவறான விசை`;case"invalid_union":return"தவறான உள்ளீடு";case"invalid_element":return`${J.origin} இல் தவறான மதிப்பு`;default:return"தவறான உள்ளீடு"}}};function V8(){return{localeError:Qx()}}var Xx=()=>{let $={string:{unit:"ตัวอักษร",verb:"ควรมี"},file:{unit:"ไบต์",verb:"ควรมี"},array:{unit:"รายการ",verb:"ควรมี"},set:{unit:"รายการ",verb:"ควรมี"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"ไม่ใช่ตัวเลข (NaN)":"ตัวเลข";case"object":{if(Array.isArray(J))return"อาร์เรย์ (Array)";if(J===null)return"ไม่มีค่า (null)";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"ข้อมูลที่ป้อน",email:"ที่อยู่อีเมล",url:"URL",emoji:"อิโมจิ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"วันที่เวลาแบบ ISO",date:"วันที่แบบ ISO",time:"เวลาแบบ ISO",duration:"ช่วงเวลาแบบ ISO",ipv4:"ที่อยู่ IPv4",ipv6:"ที่อยู่ IPv6",cidrv4:"ช่วง IP แบบ IPv4",cidrv6:"ช่วง IP แบบ IPv6",base64:"ข้อความแบบ Base64",base64url:"ข้อความแบบ Base64 สำหรับ URL",json_string:"ข้อความแบบ JSON",e164:"เบอร์โทรศัพท์ระหว่างประเทศ (E.164)",jwt:"โทเคน JWT",template_literal:"ข้อมูลที่ป้อน"};return(J)=>{switch(J.code){case"invalid_type":return`ประเภทข้อมูลไม่ถูกต้อง: ควรเป็น ${J.expected} แต่ได้รับ ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`ค่าไม่ถูกต้อง: ควรเป็น ${u(J.values[0])}`;return`ตัวเลือกไม่ถูกต้อง: ควรเป็นหนึ่งใน ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"ไม่เกิน":"น้อยกว่า",G=Q(J.origin);if(G)return`เกินกำหนด: ${J.origin??"ค่า"} ควรมี${U} ${J.maximum.toString()} ${G.unit??"รายการ"}`;return`เกินกำหนด: ${J.origin??"ค่า"} ควรมี${U} ${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?"อย่างน้อย":"มากกว่า",G=Q(J.origin);if(G)return`น้อยกว่ากำหนด: ${J.origin} ควรมี${U} ${J.minimum.toString()} ${G.unit}`;return`น้อยกว่ากำหนด: ${J.origin} ควรมี${U} ${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`รูปแบบไม่ถูกต้อง: ข้อความต้องขึ้นต้นด้วย "${U.prefix}"`;if(U.format==="ends_with")return`รูปแบบไม่ถูกต้อง: ข้อความต้องลงท้ายด้วย "${U.suffix}"`;if(U.format==="includes")return`รูปแบบไม่ถูกต้อง: ข้อความต้องมี "${U.includes}" อยู่ในข้อความ`;if(U.format==="regex")return`รูปแบบไม่ถูกต้อง: ต้องตรงกับรูปแบบที่กำหนด ${U.pattern}`;return`รูปแบบไม่ถูกต้อง: ${Y[U.format]??J.format}`}case"not_multiple_of":return`ตัวเลขไม่ถูกต้อง: ต้องเป็นจำนวนที่หารด้วย ${J.divisor} ได้ลงตัว`;case"unrecognized_keys":return`พบคีย์ที่ไม่รู้จัก: ${k(J.keys,", ")}`;case"invalid_key":return`คีย์ไม่ถูกต้องใน ${J.origin}`;case"invalid_union":return"ข้อมูลไม่ถูกต้อง: ไม่ตรงกับรูปแบบยูเนียนที่กำหนดไว้";case"invalid_element":return`ข้อมูลไม่ถูกต้องใน ${J.origin}`;default:return"ข้อมูลไม่ถูกต้อง"}}};function B8(){return{localeError:Xx()}}var Jx=($)=>{let Q=typeof $;switch(Q){case"number":return Number.isNaN($)?"NaN":"number";case"object":{if(Array.isArray($))return"array";if($===null)return"null";if(Object.getPrototypeOf($)!==Object.prototype&&$.constructor)return $.constructor.name}}return Q},Yx=()=>{let $={string:{unit:"karakter",verb:"olmalı"},file:{unit:"bayt",verb:"olmalı"},array:{unit:"öğe",verb:"olmalı"},set:{unit:"öğe",verb:"olmalı"}};function Q(Y){return $[Y]??null}let X={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO süre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralığı",cidrv6:"IPv6 aralığı",base64:"base64 ile şifrelenmiş metin",base64url:"base64url ile şifrelenmiş metin",json_string:"JSON dizesi",e164:"E.164 sayısı",jwt:"JWT",template_literal:"Şablon dizesi"};return(Y)=>{switch(Y.code){case"invalid_type":return`Geçersiz değer: beklenen ${Y.expected}, alınan ${Jx(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Geçersiz değer: beklenen ${u(Y.values[0])}`;return`Geçersiz seçenek: aşağıdakilerden biri olmalı: ${k(Y.values,"|")}`;case"too_big":{let J=Y.inclusive?"<=":"<",U=Q(Y.origin);if(U)return`Çok büyük: beklenen ${Y.origin??"değer"} ${J}${Y.maximum.toString()} ${U.unit??"öğe"}`;return`Çok büyük: beklenen ${Y.origin??"değer"} ${J}${Y.maximum.toString()}`}case"too_small":{let J=Y.inclusive?">=":">",U=Q(Y.origin);if(U)return`Çok küçük: beklenen ${Y.origin} ${J}${Y.minimum.toString()} ${U.unit}`;return`Çok küçük: beklenen ${Y.origin} ${J}${Y.minimum.toString()}`}case"invalid_format":{let J=Y;if(J.format==="starts_with")return`Geçersiz metin: "${J.prefix}" ile başlamalı`;if(J.format==="ends_with")return`Geçersiz metin: "${J.suffix}" ile bitmeli`;if(J.format==="includes")return`Geçersiz metin: "${J.includes}" içermeli`;if(J.format==="regex")return`Geçersiz metin: ${J.pattern} desenine uymalı`;return`Geçersiz ${X[J.format]??Y.format}`}case"not_multiple_of":return`Geçersiz sayı: ${Y.divisor} ile tam bölünebilmeli`;case"unrecognized_keys":return`Tanınmayan anahtar${Y.keys.length>1?"lar":""}: ${k(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} içinde geçersiz anahtar`;case"invalid_union":return"Geçersiz değer";case"invalid_element":return`${Y.origin} içinde geçersiz değer`;default:return"Geçersiz değer"}}};function D8(){return{localeError:Yx()}}var Ux=()=>{let $={string:{unit:"символів",verb:"матиме"},file:{unit:"байтів",verb:"матиме"},array:{unit:"елементів",verb:"матиме"},set:{unit:"елементів",verb:"матиме"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"число";case"object":{if(Array.isArray(J))return"масив";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"вхідні дані",email:"адреса електронної пошти",url:"URL",emoji:"емодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"дата та час ISO",date:"дата ISO",time:"час ISO",duration:"тривалість ISO",ipv4:"адреса IPv4",ipv6:"адреса IPv6",cidrv4:"діапазон IPv4",cidrv6:"діапазон IPv6",base64:"рядок у кодуванні base64",base64url:"рядок у кодуванні base64url",json_string:"рядок JSON",e164:"номер E.164",jwt:"JWT",template_literal:"вхідні дані"};return(J)=>{switch(J.code){case"invalid_type":return`Неправильні вхідні дані: очікується ${J.expected}, отримано ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Неправильні вхідні дані: очікується ${u(J.values[0])}`;return`Неправильна опція: очікується одне з ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Занадто велике: очікується, що ${J.origin??"значення"} ${G.verb} ${U}${J.maximum.toString()} ${G.unit??"елементів"}`;return`Занадто велике: очікується, що ${J.origin??"значення"} буде ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Занадто мале: очікується, що ${J.origin} ${G.verb} ${U}${J.minimum.toString()} ${G.unit}`;return`Занадто мале: очікується, що ${J.origin} буде ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Неправильний рядок: повинен починатися з "${U.prefix}"`;if(U.format==="ends_with")return`Неправильний рядок: повинен закінчуватися на "${U.suffix}"`;if(U.format==="includes")return`Неправильний рядок: повинен містити "${U.includes}"`;if(U.format==="regex")return`Неправильний рядок: повинен відповідати шаблону ${U.pattern}`;return`Неправильний ${Y[U.format]??J.format}`}case"not_multiple_of":return`Неправильне число: повинно бути кратним ${J.divisor}`;case"unrecognized_keys":return`Нерозпізнаний ключ${J.keys.length>1?"і":""}: ${k(J.keys,", ")}`;case"invalid_key":return`Неправильний ключ у ${J.origin}`;case"invalid_union":return"Неправильні вхідні дані";case"invalid_element":return`Неправильне значення у ${J.origin}`;default:return"Неправильні вхідні дані"}}};function O8(){return{localeError:Ux()}}var qx=()=>{let $={string:{unit:"حروف",verb:"ہونا"},file:{unit:"بائٹس",verb:"ہونا"},array:{unit:"آئٹمز",verb:"ہونا"},set:{unit:"آئٹمز",verb:"ہونا"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"نمبر";case"object":{if(Array.isArray(J))return"آرے";if(J===null)return"نل";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"ان پٹ",email:"ای میل ایڈریس",url:"یو آر ایل",emoji:"ایموجی",uuid:"یو یو آئی ڈی",uuidv4:"یو یو آئی ڈی وی 4",uuidv6:"یو یو آئی ڈی وی 6",nanoid:"نینو آئی ڈی",guid:"جی یو آئی ڈی",cuid:"سی یو آئی ڈی",cuid2:"سی یو آئی ڈی 2",ulid:"یو ایل آئی ڈی",xid:"ایکس آئی ڈی",ksuid:"کے ایس یو آئی ڈی",datetime:"آئی ایس او ڈیٹ ٹائم",date:"آئی ایس او تاریخ",time:"آئی ایس او وقت",duration:"آئی ایس او مدت",ipv4:"آئی پی وی 4 ایڈریس",ipv6:"آئی پی وی 6 ایڈریس",cidrv4:"آئی پی وی 4 رینج",cidrv6:"آئی پی وی 6 رینج",base64:"بیس 64 ان کوڈڈ سٹرنگ",base64url:"بیس 64 یو آر ایل ان کوڈڈ سٹرنگ",json_string:"جے ایس او این سٹرنگ",e164:"ای 164 نمبر",jwt:"جے ڈبلیو ٹی",template_literal:"ان پٹ"};return(J)=>{switch(J.code){case"invalid_type":return`غلط ان پٹ: ${J.expected} متوقع تھا، ${X(J.input)} موصول ہوا`;case"invalid_value":if(J.values.length===1)return`غلط ان پٹ: ${u(J.values[0])} متوقع تھا`;return`غلط آپشن: ${k(J.values,"|")} میں سے ایک متوقع تھا`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`بہت بڑا: ${J.origin??"ویلیو"} کے ${U}${J.maximum.toString()} ${G.unit??"عناصر"} ہونے متوقع تھے`;return`بہت بڑا: ${J.origin??"ویلیو"} کا ${U}${J.maximum.toString()} ہونا متوقع تھا`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`بہت چھوٹا: ${J.origin} کے ${U}${J.minimum.toString()} ${G.unit} ہونے متوقع تھے`;return`بہت چھوٹا: ${J.origin} کا ${U}${J.minimum.toString()} ہونا متوقع تھا`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`غلط سٹرنگ: "${U.prefix}" سے شروع ہونا چاہیے`;if(U.format==="ends_with")return`غلط سٹرنگ: "${U.suffix}" پر ختم ہونا چاہیے`;if(U.format==="includes")return`غلط سٹرنگ: "${U.includes}" شامل ہونا چاہیے`;if(U.format==="regex")return`غلط سٹرنگ: پیٹرن ${U.pattern} سے میچ ہونا چاہیے`;return`غلط ${Y[U.format]??J.format}`}case"not_multiple_of":return`غلط نمبر: ${J.divisor} کا مضاعف ہونا چاہیے`;case"unrecognized_keys":return`غیر تسلیم شدہ کی${J.keys.length>1?"ز":""}: ${k(J.keys,"، ")}`;case"invalid_key":return`${J.origin} میں غلط کی`;case"invalid_union":return"غلط ان پٹ";case"invalid_element":return`${J.origin} میں غلط ویلیو`;default:return"غلط ان پٹ"}}};function A8(){return{localeError:qx()}}var Gx=()=>{let $={string:{unit:"ký tự",verb:"có"},file:{unit:"byte",verb:"có"},array:{unit:"phần tử",verb:"có"},set:{unit:"phần tử",verb:"có"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"số";case"object":{if(Array.isArray(J))return"mảng";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"đầu vào",email:"địa chỉ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngày giờ ISO",date:"ngày ISO",time:"giờ ISO",duration:"khoảng thời gian ISO",ipv4:"địa chỉ IPv4",ipv6:"địa chỉ IPv6",cidrv4:"dải IPv4",cidrv6:"dải IPv6",base64:"chuỗi mã hóa base64",base64url:"chuỗi mã hóa base64url",json_string:"chuỗi JSON",e164:"số E.164",jwt:"JWT",template_literal:"đầu vào"};return(J)=>{switch(J.code){case"invalid_type":return`Đầu vào không hợp lệ: mong đợi ${J.expected}, nhận được ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`Đầu vào không hợp lệ: mong đợi ${u(J.values[0])}`;return`Tùy chọn không hợp lệ: mong đợi một trong các giá trị ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`Quá lớn: mong đợi ${J.origin??"giá trị"} ${G.verb} ${U}${J.maximum.toString()} ${G.unit??"phần tử"}`;return`Quá lớn: mong đợi ${J.origin??"giá trị"} ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`Quá nhỏ: mong đợi ${J.origin} ${G.verb} ${U}${J.minimum.toString()} ${G.unit}`;return`Quá nhỏ: mong đợi ${J.origin} ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`Chuỗi không hợp lệ: phải bắt đầu bằng "${U.prefix}"`;if(U.format==="ends_with")return`Chuỗi không hợp lệ: phải kết thúc bằng "${U.suffix}"`;if(U.format==="includes")return`Chuỗi không hợp lệ: phải bao gồm "${U.includes}"`;if(U.format==="regex")return`Chuỗi không hợp lệ: phải khớp với mẫu ${U.pattern}`;return`${Y[U.format]??J.format} không hợp lệ`}case"not_multiple_of":return`Số không hợp lệ: phải là bội số của ${J.divisor}`;case"unrecognized_keys":return`Khóa không được nhận dạng: ${k(J.keys,", ")}`;case"invalid_key":return`Khóa không hợp lệ trong ${J.origin}`;case"invalid_union":return"Đầu vào không hợp lệ";case"invalid_element":return`Giá trị không hợp lệ trong ${J.origin}`;default:return"Đầu vào không hợp lệ"}}};function F8(){return{localeError:Gx()}}var zx=()=>{let $={string:{unit:"字符",verb:"包含"},file:{unit:"字节",verb:"包含"},array:{unit:"项",verb:"包含"},set:{unit:"项",verb:"包含"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"非数字(NaN)":"数字";case"object":{if(Array.isArray(J))return"数组";if(J===null)return"空值(null)";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"输入",email:"电子邮件",url:"URL",emoji:"表情符号",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日期时间",date:"ISO日期",time:"ISO时间",duration:"ISO时长",ipv4:"IPv4地址",ipv6:"IPv6地址",cidrv4:"IPv4网段",cidrv6:"IPv6网段",base64:"base64编码字符串",base64url:"base64url编码字符串",json_string:"JSON字符串",e164:"E.164号码",jwt:"JWT",template_literal:"输入"};return(J)=>{switch(J.code){case"invalid_type":return`无效输入：期望 ${J.expected}，实际接收 ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`无效输入：期望 ${u(J.values[0])}`;return`无效选项：期望以下之一 ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`数值过大：期望 ${J.origin??"值"} ${U}${J.maximum.toString()} ${G.unit??"个元素"}`;return`数值过大：期望 ${J.origin??"值"} ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`数值过小：期望 ${J.origin} ${U}${J.minimum.toString()} ${G.unit}`;return`数值过小：期望 ${J.origin} ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`无效字符串：必须以 "${U.prefix}" 开头`;if(U.format==="ends_with")return`无效字符串：必须以 "${U.suffix}" 结尾`;if(U.format==="includes")return`无效字符串：必须包含 "${U.includes}"`;if(U.format==="regex")return`无效字符串：必须满足正则表达式 ${U.pattern}`;return`无效${Y[U.format]??J.format}`}case"not_multiple_of":return`无效数字：必须是 ${J.divisor} 的倍数`;case"unrecognized_keys":return`出现未知的键(key): ${k(J.keys,", ")}`;case"invalid_key":return`${J.origin} 中的键(key)无效`;case"invalid_union":return"无效输入";case"invalid_element":return`${J.origin} 中包含无效值(value)`;default:return"无效输入"}}};function L8(){return{localeError:zx()}}var Wx=()=>{let $={string:{unit:"字元",verb:"擁有"},file:{unit:"位元組",verb:"擁有"},array:{unit:"項目",verb:"擁有"},set:{unit:"項目",verb:"擁有"}};function Q(J){return $[J]??null}let X=(J)=>{let U=typeof J;switch(U){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return U},Y={regex:"輸入",email:"郵件地址",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 日期時間",date:"ISO 日期",time:"ISO 時間",duration:"ISO 期間",ipv4:"IPv4 位址",ipv6:"IPv6 位址",cidrv4:"IPv4 範圍",cidrv6:"IPv6 範圍",base64:"base64 編碼字串",base64url:"base64url 編碼字串",json_string:"JSON 字串",e164:"E.164 數值",jwt:"JWT",template_literal:"輸入"};return(J)=>{switch(J.code){case"invalid_type":return`無效的輸入值：預期為 ${J.expected}，但收到 ${X(J.input)}`;case"invalid_value":if(J.values.length===1)return`無效的輸入值：預期為 ${u(J.values[0])}`;return`無效的選項：預期為以下其中之一 ${k(J.values,"|")}`;case"too_big":{let U=J.inclusive?"<=":"<",G=Q(J.origin);if(G)return`數值過大：預期 ${J.origin??"值"} 應為 ${U}${J.maximum.toString()} ${G.unit??"個元素"}`;return`數值過大：預期 ${J.origin??"值"} 應為 ${U}${J.maximum.toString()}`}case"too_small":{let U=J.inclusive?">=":">",G=Q(J.origin);if(G)return`數值過小：預期 ${J.origin} 應為 ${U}${J.minimum.toString()} ${G.unit}`;return`數值過小：預期 ${J.origin} 應為 ${U}${J.minimum.toString()}`}case"invalid_format":{let U=J;if(U.format==="starts_with")return`無效的字串：必須以 "${U.prefix}" 開頭`;if(U.format==="ends_with")return`無效的字串：必須以 "${U.suffix}" 結尾`;if(U.format==="includes")return`無效的字串：必須包含 "${U.includes}"`;if(U.format==="regex")return`無效的字串：必須符合格式 ${U.pattern}`;return`無效的 ${Y[U.format]??J.format}`}case"not_multiple_of":return`無效的數字：必須為 ${J.divisor} 的倍數`;case"unrecognized_keys":return`無法識別的鍵值${J.keys.length>1?"們":""}：${k(J.keys,"、")}`;case"invalid_key":return`${J.origin} 中有無效的鍵值`;case"invalid_union":return"無效的輸入值";case"invalid_element":return`${J.origin} 中有無效的值`;default:return"無效的輸入值"}}};function v8(){return{localeError:Wx()}}var I8=Symbol("ZodOutput"),E8=Symbol("ZodInput");class SX{constructor(){this._map=new Map,this._idmap=new Map}add($,...Q){let X=Q[0];if(this._map.set($,X),X&&typeof X==="object"&&"id"in X){if(this._idmap.has(X.id))throw Error(`ID ${X.id} already exists in the registry`);this._idmap.set(X.id,$)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove($){let Q=this._map.get($);if(Q&&typeof Q==="object"&&"id"in Q)this._idmap.delete(Q.id);return this._map.delete($),this}get($){let Q=$._zod.parent;if(Q){let X={...this.get(Q)??{}};return delete X.id,{...X,...this._map.get($)}}return this._map.get($)}has($){return this._map.has($)}}function aY(){return new SX}var W0=aY();function M8($,Q){return new $({type:"string",...h(Q)})}function P8($,Q){return new $({type:"string",coerce:!0,...h(Q)})}function tY($,Q){return new $({type:"string",format:"email",check:"string_format",abort:!1,...h(Q)})}function TX($,Q){return new $({type:"string",format:"guid",check:"string_format",abort:!1,...h(Q)})}function sY($,Q){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,...h(Q)})}function eY($,Q){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...h(Q)})}function $5($,Q){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...h(Q)})}function Q5($,Q){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...h(Q)})}function X5($,Q){return new $({type:"string",format:"url",check:"string_format",abort:!1,...h(Q)})}function J5($,Q){return new $({type:"string",format:"emoji",check:"string_format",abort:!1,...h(Q)})}function Y5($,Q){return new $({type:"string",format:"nanoid",check:"string_format",abort:!1,...h(Q)})}function U5($,Q){return new $({type:"string",format:"cuid",check:"string_format",abort:!1,...h(Q)})}function q5($,Q){return new $({type:"string",format:"cuid2",check:"string_format",abort:!1,...h(Q)})}function G5($,Q){return new $({type:"string",format:"ulid",check:"string_format",abort:!1,...h(Q)})}function z5($,Q){return new $({type:"string",format:"xid",check:"string_format",abort:!1,...h(Q)})}function W5($,Q){return new $({type:"string",format:"ksuid",check:"string_format",abort:!1,...h(Q)})}function H5($,Q){return new $({type:"string",format:"ipv4",check:"string_format",abort:!1,...h(Q)})}function j5($,Q){return new $({type:"string",format:"ipv6",check:"string_format",abort:!1,...h(Q)})}function w5($,Q){return new $({type:"string",format:"cidrv4",check:"string_format",abort:!1,...h(Q)})}function K5($,Q){return new $({type:"string",format:"cidrv6",check:"string_format",abort:!1,...h(Q)})}function N5($,Q){return new $({type:"string",format:"base64",check:"string_format",abort:!1,...h(Q)})}function V5($,Q){return new $({type:"string",format:"base64url",check:"string_format",abort:!1,...h(Q)})}function B5($,Q){return new $({type:"string",format:"e164",check:"string_format",abort:!1,...h(Q)})}function D5($,Q){return new $({type:"string",format:"jwt",check:"string_format",abort:!1,...h(Q)})}var R8={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Z8($,Q){return new $({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...h(Q)})}function S8($,Q){return new $({type:"string",format:"date",check:"string_format",...h(Q)})}function T8($,Q){return new $({type:"string",format:"time",check:"string_format",precision:null,...h(Q)})}function C8($,Q){return new $({type:"string",format:"duration",check:"string_format",...h(Q)})}function b8($,Q){return new $({type:"number",checks:[],...h(Q)})}function x8($,Q){return new $({type:"number",coerce:!0,checks:[],...h(Q)})}function k8($,Q){return new $({type:"number",check:"number_format",abort:!1,format:"safeint",...h(Q)})}function f8($,Q){return new $({type:"number",check:"number_format",abort:!1,format:"float32",...h(Q)})}function y8($,Q){return new $({type:"number",check:"number_format",abort:!1,format:"float64",...h(Q)})}function _8($,Q){return new $({type:"number",check:"number_format",abort:!1,format:"int32",...h(Q)})}function g8($,Q){return new $({type:"number",check:"number_format",abort:!1,format:"uint32",...h(Q)})}function h8($,Q){return new $({type:"boolean",...h(Q)})}function m8($,Q){return new $({type:"boolean",coerce:!0,...h(Q)})}function c8($,Q){return new $({type:"bigint",...h(Q)})}function u8($,Q){return new $({type:"bigint",coerce:!0,...h(Q)})}function i8($,Q){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...h(Q)})}function d8($,Q){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...h(Q)})}function l8($,Q){return new $({type:"symbol",...h(Q)})}function p8($,Q){return new $({type:"undefined",...h(Q)})}function n8($,Q){return new $({type:"null",...h(Q)})}function r8($){return new $({type:"any"})}function n4($){return new $({type:"unknown"})}function o8($,Q){return new $({type:"never",...h(Q)})}function a8($,Q){return new $({type:"void",...h(Q)})}function t8($,Q){return new $({type:"date",...h(Q)})}function s8($,Q){return new $({type:"date",coerce:!0,...h(Q)})}function e8($,Q){return new $({type:"nan",...h(Q)})}function T0($,Q){return new uY({check:"less_than",...h(Q),value:$,inclusive:!1})}function f6($,Q){return new uY({check:"less_than",...h(Q),value:$,inclusive:!0})}function C0($,Q){return new iY({check:"greater_than",...h(Q),value:$,inclusive:!1})}function A6($,Q){return new iY({check:"greater_than",...h(Q),value:$,inclusive:!0})}function $z($){return C0(0,$)}function Qz($){return T0(0,$)}function Xz($){return f6(0,$)}function Jz($){return A6(0,$)}function g1($,Q){return new D9({check:"multiple_of",...h(Q),value:$})}function r4($,Q){return new F9({check:"max_size",...h(Q),maximum:$})}function h1($,Q){return new L9({check:"min_size",...h(Q),minimum:$})}function CX($,Q){return new v9({check:"size_equals",...h(Q),size:$})}function o4($,Q){return new I9({check:"max_length",...h(Q),maximum:$})}function G1($,Q){return new E9({check:"min_length",...h(Q),minimum:$})}function a4($,Q){return new M9({check:"length_equals",...h(Q),length:$})}function bX($,Q){return new P9({check:"string_format",format:"regex",...h(Q),pattern:$})}function xX($){return new R9({check:"string_format",format:"lowercase",...h($)})}function kX($){return new Z9({check:"string_format",format:"uppercase",...h($)})}function fX($,Q){return new S9({check:"string_format",format:"includes",...h(Q),includes:$})}function yX($,Q){return new T9({check:"string_format",format:"starts_with",...h(Q),prefix:$})}function _X($,Q){return new C9({check:"string_format",format:"ends_with",...h(Q),suffix:$})}function Yz($,Q,X){return new b9({check:"property",property:$,schema:Q,...h(X)})}function gX($,Q){return new x9({check:"mime_type",mime:$,...h(Q)})}function b0($){return new k9({check:"overwrite",tx:$})}function hX($){return b0((Q)=>Q.normalize($))}function mX(){return b0(($)=>$.trim())}function cX(){return b0(($)=>$.toLowerCase())}function uX(){return b0(($)=>$.toUpperCase())}function iX($,Q,X){return new $({type:"array",element:Q,...h(X)})}function Hx($,Q,X){return new $({type:"union",options:Q,...h(X)})}function jx($,Q,X,Y){return new $({type:"union",options:X,discriminator:Q,...h(Y)})}function wx($,Q,X){return new $({type:"intersection",left:Q,right:X})}function Uz($,Q,X,Y){let J=X instanceof Q$;return new $({type:"tuple",items:Q,rest:J?X:null,...h(J?Y:X)})}function Kx($,Q,X,Y){return new $({type:"record",keyType:Q,valueType:X,...h(Y)})}function Nx($,Q,X,Y){return new $({type:"map",keyType:Q,valueType:X,...h(Y)})}function Vx($,Q,X){return new $({type:"set",valueType:Q,...h(X)})}function Bx($,Q,X){let Y=Array.isArray(Q)?Object.fromEntries(Q.map((J)=>[J,J])):Q;return new $({type:"enum",entries:Y,...h(X)})}function Dx($,Q,X){return new $({type:"enum",entries:Q,...h(X)})}function Ox($,Q,X){return new $({type:"literal",values:Array.isArray(Q)?Q:[Q],...h(X)})}function qz($,Q){return new $({type:"file",...h(Q)})}function Ax($,Q){return new $({type:"transform",transform:Q})}function Fx($,Q){return new $({type:"optional",innerType:Q})}function Lx($,Q){return new $({type:"nullable",innerType:Q})}function vx($,Q,X){return new $({type:"default",innerType:Q,get defaultValue(){return typeof X==="function"?X():X}})}function Ix($,Q,X){return new $({type:"nonoptional",innerType:Q,...h(X)})}function Ex($,Q){return new $({type:"success",innerType:Q})}function Mx($,Q,X){return new $({type:"catch",innerType:Q,catchValue:typeof X==="function"?X:()=>X})}function Px($,Q,X){return new $({type:"pipe",in:Q,out:X})}function Rx($,Q){return new $({type:"readonly",innerType:Q})}function Zx($,Q,X){return new $({type:"template_literal",parts:Q,...h(X)})}function Sx($,Q){return new $({type:"lazy",getter:Q})}function Tx($,Q){return new $({type:"promise",innerType:Q})}function Gz($,Q,X){let Y=h(X);return Y.abort??(Y.abort=!0),new $({type:"custom",check:"custom",fn:Q,...Y})}function zz($,Q,X){return new $({type:"custom",check:"custom",fn:Q,...h(X)})}function Wz($,Q){let X=h(Q),Y=X.truthy??["true","1","yes","on","y","enabled"],J=X.falsy??["false","0","no","off","n","disabled"];if(X.case!=="sensitive")Y=Y.map((B)=>typeof B==="string"?B.toLowerCase():B),J=J.map((B)=>typeof B==="string"?B.toLowerCase():B);let U=new Set(Y),G=new Set(J),z=$.Pipe??PX,H=$.Boolean??IX,W=$.String??y1,N=new($.Transform??MX)({type:"transform",transform:(B,D)=>{let F=B;if(X.case!=="sensitive")F=F.toLowerCase();if(U.has(F))return!0;else if(G.has(F))return!1;else return D.issues.push({code:"invalid_value",expected:"stringbool",values:[...U,...G],input:D.value,inst:N}),{}},error:X.error}),K=new z({type:"pipe",in:new W({type:"string",error:X.error}),out:N,error:X.error});return new z({type:"pipe",in:K,out:new H({type:"boolean",error:X.error}),error:X.error})}function Hz($,Q,X,Y={}){let J=h(Y),U={...h(Y),check:"string_format",type:"string",format:Q,fn:typeof X==="function"?X:(z)=>X.test(z),...J};if(X instanceof RegExp)U.pattern=X;return new $(U)}class jz{constructor($){this._def=$,this.def=$}implement($){if(typeof $!=="function")throw Error("implement() must be called with a function");let Q=(...X)=>{let Y=this._def.input?yY(this._def.input,X,void 0,{callee:Q}):X;if(!Array.isArray(Y))throw Error("Invalid arguments schema: not an array or tuple schema.");let J=$(...Y);return this._def.output?yY(this._def.output,J,void 0,{callee:Q}):J};return Q}implementAsync($){if(typeof $!=="function")throw Error("implement() must be called with a function");let Q=async(...X)=>{let Y=this._def.input?await gY(this._def.input,X,void 0,{callee:Q}):X;if(!Array.isArray(Y))throw Error("Invalid arguments schema: not an array or tuple schema.");let J=await $(...Y);return this._def.output?gY(this._def.output,J,void 0,{callee:Q}):J};return Q}input(...$){let Q=this.constructor;if(Array.isArray($[0]))return new Q({type:"function",input:new _1({type:"tuple",items:$[0],rest:$[1]}),output:this._def.output});return new Q({type:"function",input:$[0],output:this._def.output})}output($){return new this.constructor({type:"function",input:this._def.input,output:$})}}function wz($){return new jz({type:"function",input:Array.isArray($?.input)?Uz(_1,$?.input):$?.input??iX(EX,n4(p4)),output:$?.output??n4(p4)})}class O5{constructor($){this.counter=0,this.metadataRegistry=$?.metadata??W0,this.target=$?.target??"draft-2020-12",this.unrepresentable=$?.unrepresentable??"throw",this.override=$?.override??(()=>{}),this.io=$?.io??"output",this.seen=new Map}process($,Q={path:[],schemaPath:[]}){var X;let Y=$._zod.def,J={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},U=this.seen.get($);if(U){if(U.count++,Q.schemaPath.includes($))U.cycle=Q.path;return U.schema}let G={schema:{},count:1,cycle:void 0,path:Q.path};this.seen.set($,G);let z=$._zod.toJSONSchema?.();if(z)G.schema=z;else{let j={...Q,schemaPath:[...Q.schemaPath,$],path:Q.path},N=$._zod.parent;if(N)G.ref=N,this.process(N,j),this.seen.get(N).isParent=!0;else{let K=G.schema;switch(Y.type){case"string":{let w=K;w.type="string";let{minimum:B,maximum:D,format:F,patterns:V,contentEncoding:O}=$._zod.bag;if(typeof B==="number")w.minLength=B;if(typeof D==="number")w.maxLength=D;if(F){if(w.format=J[F]??F,w.format==="")delete w.format}if(O)w.contentEncoding=O;if(V&&V.size>0){let A=[...V];if(A.length===1)w.pattern=A[0].source;else if(A.length>1)G.schema.allOf=[...A.map((L)=>({...this.target==="draft-7"?{type:"string"}:{},pattern:L.source}))]}break}case"number":{let w=K,{minimum:B,maximum:D,format:F,multipleOf:V,exclusiveMaximum:O,exclusiveMinimum:A}=$._zod.bag;if(typeof F==="string"&&F.includes("int"))w.type="integer";else w.type="number";if(typeof A==="number")w.exclusiveMinimum=A;if(typeof B==="number"){if(w.minimum=B,typeof A==="number")if(A>=B)delete w.minimum;else delete w.exclusiveMinimum}if(typeof O==="number")w.exclusiveMaximum=O;if(typeof D==="number"){if(w.maximum=D,typeof O==="number")if(O<=D)delete w.maximum;else delete w.exclusiveMaximum}if(typeof V==="number")w.multipleOf=V;break}case"boolean":{let w=K;w.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{K.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"never":{K.not={};break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let w=K,{minimum:B,maximum:D}=$._zod.bag;if(typeof B==="number")w.minItems=B;if(typeof D==="number")w.maxItems=D;w.type="array",w.items=this.process(Y.element,{...j,path:[...j.path,"items"]});break}case"object":{let w=K;w.type="object",w.properties={};let B=Y.shape;for(let V in B)w.properties[V]=this.process(B[V],{...j,path:[...j.path,"properties",V]});let D=new Set(Object.keys(B)),F=new Set([...D].filter((V)=>{let O=Y.shape[V]._zod;if(this.io==="input")return O.optin===void 0;else return O.optout===void 0}));if(F.size>0)w.required=Array.from(F);if(Y.catchall?._zod.def.type==="never")w.additionalProperties=!1;else if(!Y.catchall){if(this.io==="output")w.additionalProperties=!1}else if(Y.catchall)w.additionalProperties=this.process(Y.catchall,{...j,path:[...j.path,"additionalProperties"]});break}case"union":{let w=K;w.anyOf=Y.options.map((B,D)=>this.process(B,{...j,path:[...j.path,"anyOf",D]}));break}case"intersection":{let w=K,B=this.process(Y.left,{...j,path:[...j.path,"allOf",0]}),D=this.process(Y.right,{...j,path:[...j.path,"allOf",1]}),F=(O)=>("allOf"in O)&&Object.keys(O).length===1,V=[...F(B)?B.allOf:[B],...F(D)?D.allOf:[D]];w.allOf=V;break}case"tuple":{let w=K;w.type="array";let B=Y.items.map((V,O)=>this.process(V,{...j,path:[...j.path,"prefixItems",O]}));if(this.target==="draft-2020-12")w.prefixItems=B;else w.items=B;if(Y.rest){let V=this.process(Y.rest,{...j,path:[...j.path,"items"]});if(this.target==="draft-2020-12")w.items=V;else w.additionalItems=V}if(Y.rest)w.items=this.process(Y.rest,{...j,path:[...j.path,"items"]});let{minimum:D,maximum:F}=$._zod.bag;if(typeof D==="number")w.minItems=D;if(typeof F==="number")w.maxItems=F;break}case"record":{let w=K;w.type="object",w.propertyNames=this.process(Y.keyType,{...j,path:[...j.path,"propertyNames"]}),w.additionalProperties=this.process(Y.valueType,{...j,path:[...j.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let w=K,B=NX(Y.entries);if(B.every((D)=>typeof D==="number"))w.type="number";if(B.every((D)=>typeof D==="string"))w.type="string";w.enum=B;break}case"literal":{let w=K,B=[];for(let D of Y.values)if(D===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof D==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else B.push(Number(D));else B.push(D);if(B.length===0);else if(B.length===1){let D=B[0];w.type=D===null?"null":typeof D,w.const=D}else{if(B.every((D)=>typeof D==="number"))w.type="number";if(B.every((D)=>typeof D==="string"))w.type="string";if(B.every((D)=>typeof D==="boolean"))w.type="string";if(B.every((D)=>D===null))w.type="null";w.enum=B}break}case"file":{let w=K,B={type:"string",format:"binary",contentEncoding:"binary"},{minimum:D,maximum:F,mime:V}=$._zod.bag;if(D!==void 0)B.minLength=D;if(F!==void 0)B.maxLength=F;if(V)if(V.length===1)B.contentMediaType=V[0],Object.assign(w,B);else w.anyOf=V.map((O)=>{return{...B,contentMediaType:O}});else Object.assign(w,B);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let w=this.process(Y.innerType,j);K.anyOf=[w,{type:"null"}];break}case"nonoptional":{this.process(Y.innerType,j),G.ref=Y.innerType;break}case"success":{let w=K;w.type="boolean";break}case"default":{this.process(Y.innerType,j),G.ref=Y.innerType,K.default=JSON.parse(JSON.stringify(Y.defaultValue));break}case"prefault":{if(this.process(Y.innerType,j),G.ref=Y.innerType,this.io==="input")K._prefault=JSON.parse(JSON.stringify(Y.defaultValue));break}case"catch":{this.process(Y.innerType,j),G.ref=Y.innerType;let w;try{w=Y.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}K.default=w;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let w=K,B=$._zod.pattern;if(!B)throw Error("Pattern not found in template literal");w.type="string",w.pattern=B.source;break}case"pipe":{let w=this.io==="input"?Y.in._zod.def.type==="transform"?Y.out:Y.in:Y.out;this.process(w,j),G.ref=w;break}case"readonly":{this.process(Y.innerType,j),G.ref=Y.innerType,K.readOnly=!0;break}case"promise":{this.process(Y.innerType,j),G.ref=Y.innerType;break}case"optional":{this.process(Y.innerType,j),G.ref=Y.innerType;break}case"lazy":{let w=$._zod.innerType;this.process(w,j),G.ref=w;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}default:}}}let H=this.metadataRegistry.get($);if(H)Object.assign(G.schema,H);if(this.io==="input"&&s$($))delete G.schema.examples,delete G.schema.default;if(this.io==="input"&&G.schema._prefault)(X=G.schema).default??(X.default=G.schema._prefault);return delete G.schema._prefault,this.seen.get($).schema}emit($,Q){let X={cycles:Q?.cycles??"ref",reused:Q?.reused??"inline",external:Q?.external??void 0},Y=this.seen.get($);if(!Y)throw Error("Unprocessed schema. This is a bug in Zod.");let J=(W)=>{let j=this.target==="draft-2020-12"?"$defs":"definitions";if(X.external){let B=X.external.registry.get(W[0])?.id,D=X.external.uri??((V)=>V);if(B)return{ref:D(B)};let F=W[1].defId??W[1].schema.id??`schema${this.counter++}`;return W[1].defId=F,{defId:F,ref:`${D("__shared")}#/${j}/${F}`}}if(W[1]===Y)return{ref:"#"};let K=`${"#"}/${j}/`,w=W[1].schema.id??`__schema${this.counter++}`;return{defId:w,ref:K+w}},U=(W)=>{if(W[1].schema.$ref)return;let j=W[1],{ref:N,defId:K}=J(W);if(j.def={...j.schema},K)j.defId=K;let w=j.schema;for(let B in w)delete w[B];w.$ref=N};if(X.cycles==="throw")for(let W of this.seen.entries()){let j=W[1];if(j.cycle)throw Error(`Cycle detected: #/${j.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let W of this.seen.entries()){let j=W[1];if($===W[0]){U(W);continue}if(X.external){let K=X.external.registry.get(W[0])?.id;if($!==W[0]&&K){U(W);continue}}if(this.metadataRegistry.get(W[0])?.id){U(W);continue}if(j.cycle){U(W);continue}if(j.count>1){if(X.reused==="ref"){U(W);continue}}}let G=(W,j)=>{let N=this.seen.get(W),K=N.def??N.schema,w={...K};if(N.ref===null)return;let B=N.ref;if(N.ref=null,B){G(B,j);let D=this.seen.get(B).schema;if(D.$ref&&j.target==="draft-7")K.allOf=K.allOf??[],K.allOf.push(D);else Object.assign(K,D),Object.assign(K,w)}if(!N.isParent)this.override({zodSchema:W,jsonSchema:K,path:N.path??[]})};for(let W of[...this.seen.entries()].reverse())G(W[0],{target:this.target});let z={};if(this.target==="draft-2020-12")z.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")z.$schema="http://json-schema.org/draft-07/schema#";else console.warn(`Invalid target: ${this.target}`);if(X.external?.uri){let W=X.external.registry.get($)?.id;if(!W)throw Error("Schema is missing an `id` property");z.$id=X.external.uri(W)}Object.assign(z,Y.def);let H=X.external?.defs??{};for(let W of this.seen.entries()){let j=W[1];if(j.def&&j.defId)H[j.defId]=j.def}if(X.external);else if(Object.keys(H).length>0)if(this.target==="draft-2020-12")z.$defs=H;else z.definitions=H;try{return JSON.parse(JSON.stringify(z))}catch(W){throw Error("Error converting schema to JSON.")}}}function dX($,Q){if($ instanceof SX){let Y=new O5(Q),J={};for(let z of $._idmap.entries()){let[H,W]=z;Y.process(W)}let U={},G={registry:$,uri:Q?.uri,defs:J};for(let z of $._idmap.entries()){let[H,W]=z;U[H]=Y.emit(W,{...Q,external:G})}if(Object.keys(J).length>0){let z=Y.target==="draft-2020-12"?"$defs":"definitions";U.__shared={[z]:J}}return{schemas:U}}let X=new O5(Q);return X.process($),X.emit($,Q)}function s$($,Q){let X=Q??{seen:new Set};if(X.seen.has($))return!1;X.seen.add($);let J=$._zod.def;switch(J.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return s$(J.element,X);case"object":{for(let U in J.shape)if(s$(J.shape[U],X))return!0;return!1}case"union":{for(let U of J.options)if(s$(U,X))return!0;return!1}case"intersection":return s$(J.left,X)||s$(J.right,X);case"tuple":{for(let U of J.items)if(s$(U,X))return!0;if(J.rest&&s$(J.rest,X))return!0;return!1}case"record":return s$(J.keyType,X)||s$(J.valueType,X);case"map":return s$(J.keyType,X)||s$(J.valueType,X);case"set":return s$(J.valueType,X);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return s$(J.innerType,X);case"lazy":return s$(J.getter(),X);case"default":return s$(J.innerType,X);case"prefault":return s$(J.innerType,X);case"custom":return!1;case"transform":return!0;case"pipe":return s$(J.in,X)||s$(J.out,X);case"success":return!1;case"catch":return!1;default:}throw Error(`Unknown schema type: ${J.type}`)}var WB={};var I5={};i0(I5,{time:()=>Vz,duration:()=>Bz,datetime:()=>Kz,date:()=>Nz,ZodISOTime:()=>L5,ZodISODuration:()=>v5,ZodISODateTime:()=>A5,ZodISODate:()=>F5});var A5=M("ZodISODateTime",($,Q)=>{r9.init($,Q),T$.init($,Q)});function Kz($){return Z8(A5,$)}var F5=M("ZodISODate",($,Q)=>{o9.init($,Q),T$.init($,Q)});function Nz($){return S8(F5,$)}var L5=M("ZodISOTime",($,Q)=>{a9.init($,Q),T$.init($,Q)});function Vz($){return T8(L5,$)}var v5=M("ZodISODuration",($,Q)=>{t9.init($,Q),T$.init($,Q)});function Bz($){return C8(v5,$)}var jB=($,Q)=>{FX.init($,Q),$.name="ZodError",Object.defineProperties($,{format:{value:(X)=>vX($,X)},flatten:{value:(X)=>LX($,X)},addIssue:{value:(X)=>$.issues.push(X)},addIssues:{value:(X)=>$.issues.push(...X)},isEmpty:{get(){return $.issues.length===0}}})},bx=M("ZodError",jB),t4=M("ZodError",jB,{Parent:Error});var Dz=fY(t4),Oz=_Y(t4),Az=hY(t4),lX=mY(t4);var G$=M("ZodType",($,Q)=>{return Q$.init($,Q),$.def=Q,Object.defineProperty($,"_def",{value:Q}),$.check=(...X)=>{return $.clone({...Q,checks:[...Q.checks??[],...X.map((Y)=>typeof Y==="function"?{_zod:{check:Y,def:{check:"custom"},onattach:[]}}:Y)]})},$.clone=(X,Y)=>M6($,X,Y),$.brand=()=>$,$.register=(X,Y)=>{return X.add($,Y),$},$.parse=(X,Y)=>Dz($,X,Y,{callee:$.parse}),$.safeParse=(X,Y)=>Az($,X,Y),$.parseAsync=async(X,Y)=>Oz($,X,Y,{callee:$.parseAsync}),$.safeParseAsync=async(X,Y)=>lX($,X,Y),$.spa=$.safeParseAsync,$.refine=(X,Y)=>$.check(sB(X,Y)),$.superRefine=(X)=>$.check(eB(X)),$.overwrite=(X)=>$.check(b0(X)),$.optional=()=>P5($),$.nullable=()=>R5($),$.nullish=()=>P5(R5($)),$.nonoptional=(X)=>mB($,X),$.array=()=>cz($),$.or=(X)=>b5([$,X]),$.and=(X)=>PB($,X),$.transform=(X)=>Z5($,lz(X)),$.default=(X)=>_B($,X),$.prefault=(X)=>hB($,X),$.catch=(X)=>iB($,X),$.pipe=(X)=>Z5($,X),$.readonly=()=>pB($),$.describe=(X)=>{let Y=$.clone();return W0.add(Y,{description:X}),Y},Object.defineProperty($,"description",{get(){return W0.get($)?.description},configurable:!0}),$.meta=(...X)=>{if(X.length===0)return W0.get($);let Y=$.clone();return W0.add(Y,X[0]),Y},$.isOptional=()=>$.safeParse(void 0).success,$.isNullable=()=>$.safeParse(null).success,$}),vz=M("_ZodString",($,Q)=>{y1.init($,Q),G$.init($,Q);let X=$._zod.bag;$.format=X.format??null,$.minLength=X.minimum??null,$.maxLength=X.maximum??null,$.regex=(...Y)=>$.check(bX(...Y)),$.includes=(...Y)=>$.check(fX(...Y)),$.startsWith=(...Y)=>$.check(yX(...Y)),$.endsWith=(...Y)=>$.check(_X(...Y)),$.min=(...Y)=>$.check(G1(...Y)),$.max=(...Y)=>$.check(o4(...Y)),$.length=(...Y)=>$.check(a4(...Y)),$.nonempty=(...Y)=>$.check(G1(1,...Y)),$.lowercase=(Y)=>$.check(xX(Y)),$.uppercase=(Y)=>$.check(kX(Y)),$.trim=()=>$.check(mX()),$.normalize=(...Y)=>$.check(hX(...Y)),$.toLowerCase=()=>$.check(cX()),$.toUpperCase=()=>$.check(uX())}),nX=M("ZodString",($,Q)=>{y1.init($,Q),vz.init($,Q),$.email=(X)=>$.check(tY(Iz,X)),$.url=(X)=>$.check(X5(Ez,X)),$.jwt=(X)=>$.check(D5(hz,X)),$.emoji=(X)=>$.check(J5(Mz,X)),$.guid=(X)=>$.check(TX(E5,X)),$.uuid=(X)=>$.check(sY(k0,X)),$.uuidv4=(X)=>$.check(eY(k0,X)),$.uuidv6=(X)=>$.check($5(k0,X)),$.uuidv7=(X)=>$.check(Q5(k0,X)),$.nanoid=(X)=>$.check(Y5(Pz,X)),$.guid=(X)=>$.check(TX(E5,X)),$.cuid=(X)=>$.check(U5(Rz,X)),$.cuid2=(X)=>$.check(q5(Zz,X)),$.ulid=(X)=>$.check(G5(Sz,X)),$.base64=(X)=>$.check(N5(yz,X)),$.base64url=(X)=>$.check(V5(_z,X)),$.xid=(X)=>$.check(z5(Tz,X)),$.ksuid=(X)=>$.check(W5(Cz,X)),$.ipv4=(X)=>$.check(H5(bz,X)),$.ipv6=(X)=>$.check(j5(xz,X)),$.cidrv4=(X)=>$.check(w5(kz,X)),$.cidrv6=(X)=>$.check(K5(fz,X)),$.e164=(X)=>$.check(B5(gz,X)),$.datetime=(X)=>$.check(Kz(X)),$.date=(X)=>$.check(Nz(X)),$.time=(X)=>$.check(Vz(X)),$.duration=(X)=>$.check(Bz(X))});function Fz($){return M8(nX,$)}var T$=M("ZodStringFormat",($,Q)=>{R$.init($,Q),vz.init($,Q)}),Iz=M("ZodEmail",($,Q)=>{h9.init($,Q),T$.init($,Q)});function kx($){return tY(Iz,$)}var E5=M("ZodGUID",($,Q)=>{_9.init($,Q),T$.init($,Q)});function fx($){return TX(E5,$)}var k0=M("ZodUUID",($,Q)=>{g9.init($,Q),T$.init($,Q)});function yx($){return sY(k0,$)}function _x($){return eY(k0,$)}function gx($){return $5(k0,$)}function hx($){return Q5(k0,$)}var Ez=M("ZodURL",($,Q)=>{m9.init($,Q),T$.init($,Q)});function mx($){return X5(Ez,$)}var Mz=M("ZodEmoji",($,Q)=>{c9.init($,Q),T$.init($,Q)});function cx($){return J5(Mz,$)}var Pz=M("ZodNanoID",($,Q)=>{u9.init($,Q),T$.init($,Q)});function ux($){return Y5(Pz,$)}var Rz=M("ZodCUID",($,Q)=>{i9.init($,Q),T$.init($,Q)});function ix($){return U5(Rz,$)}var Zz=M("ZodCUID2",($,Q)=>{d9.init($,Q),T$.init($,Q)});function dx($){return q5(Zz,$)}var Sz=M("ZodULID",($,Q)=>{l9.init($,Q),T$.init($,Q)});function lx($){return G5(Sz,$)}var Tz=M("ZodXID",($,Q)=>{p9.init($,Q),T$.init($,Q)});function px($){return z5(Tz,$)}var Cz=M("ZodKSUID",($,Q)=>{n9.init($,Q),T$.init($,Q)});function nx($){return W5(Cz,$)}var bz=M("ZodIPv4",($,Q)=>{s9.init($,Q),T$.init($,Q)});function rx($){return H5(bz,$)}var xz=M("ZodIPv6",($,Q)=>{e9.init($,Q),T$.init($,Q)});function ox($){return j5(xz,$)}var kz=M("ZodCIDRv4",($,Q)=>{$G.init($,Q),T$.init($,Q)});function ax($){return w5(kz,$)}var fz=M("ZodCIDRv6",($,Q)=>{QG.init($,Q),T$.init($,Q)});function tx($){return K5(fz,$)}var yz=M("ZodBase64",($,Q)=>{JG.init($,Q),T$.init($,Q)});function sx($){return N5(yz,$)}var _z=M("ZodBase64URL",($,Q)=>{YG.init($,Q),T$.init($,Q)});function ex($){return V5(_z,$)}var gz=M("ZodE164",($,Q)=>{UG.init($,Q),T$.init($,Q)});function $k($){return B5(gz,$)}var hz=M("ZodJWT",($,Q)=>{qG.init($,Q),T$.init($,Q)});function Qk($){return D5(hz,$)}var wB=M("ZodCustomStringFormat",($,Q)=>{GG.init($,Q),T$.init($,Q)});function Xk($,Q,X={}){return Hz(wB,$,Q,X)}var rX=M("ZodNumber",($,Q)=>{nY.init($,Q),G$.init($,Q),$.gt=(Y,J)=>$.check(C0(Y,J)),$.gte=(Y,J)=>$.check(A6(Y,J)),$.min=(Y,J)=>$.check(A6(Y,J)),$.lt=(Y,J)=>$.check(T0(Y,J)),$.lte=(Y,J)=>$.check(f6(Y,J)),$.max=(Y,J)=>$.check(f6(Y,J)),$.int=(Y)=>$.check(Lz(Y)),$.safe=(Y)=>$.check(Lz(Y)),$.positive=(Y)=>$.check(C0(0,Y)),$.nonnegative=(Y)=>$.check(A6(0,Y)),$.negative=(Y)=>$.check(T0(0,Y)),$.nonpositive=(Y)=>$.check(f6(0,Y)),$.multipleOf=(Y,J)=>$.check(g1(Y,J)),$.step=(Y,J)=>$.check(g1(Y,J)),$.finite=()=>$;let X=$._zod.bag;$.minValue=Math.max(X.minimum??Number.NEGATIVE_INFINITY,X.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,$.maxValue=Math.min(X.maximum??Number.POSITIVE_INFINITY,X.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,$.isInt=(X.format??"").includes("int")||Number.isSafeInteger(X.multipleOf??0.5),$.isFinite=!0,$.format=X.format??null});function KB($){return b8(rX,$)}var s4=M("ZodNumberFormat",($,Q)=>{zG.init($,Q),rX.init($,Q)});function Lz($){return k8(s4,$)}function Jk($){return f8(s4,$)}function Yk($){return y8(s4,$)}function Uk($){return _8(s4,$)}function qk($){return g8(s4,$)}var oX=M("ZodBoolean",($,Q)=>{IX.init($,Q),G$.init($,Q)});function NB($){return h8(oX,$)}var aX=M("ZodBigInt",($,Q)=>{rY.init($,Q),G$.init($,Q),$.gte=(Y,J)=>$.check(A6(Y,J)),$.min=(Y,J)=>$.check(A6(Y,J)),$.gt=(Y,J)=>$.check(C0(Y,J)),$.gte=(Y,J)=>$.check(A6(Y,J)),$.min=(Y,J)=>$.check(A6(Y,J)),$.lt=(Y,J)=>$.check(T0(Y,J)),$.lte=(Y,J)=>$.check(f6(Y,J)),$.max=(Y,J)=>$.check(f6(Y,J)),$.positive=(Y)=>$.check(C0(BigInt(0),Y)),$.negative=(Y)=>$.check(T0(BigInt(0),Y)),$.nonpositive=(Y)=>$.check(f6(BigInt(0),Y)),$.nonnegative=(Y)=>$.check(A6(BigInt(0),Y)),$.multipleOf=(Y,J)=>$.check(g1(Y,J));let X=$._zod.bag;$.minValue=X.minimum??null,$.maxValue=X.maximum??null,$.format=X.format??null});function Gk($){return c8(aX,$)}var mz=M("ZodBigIntFormat",($,Q)=>{WG.init($,Q),aX.init($,Q)});function zk($){return i8(mz,$)}function Wk($){return d8(mz,$)}var VB=M("ZodSymbol",($,Q)=>{HG.init($,Q),G$.init($,Q)});function Hk($){return l8(VB,$)}var BB=M("ZodUndefined",($,Q)=>{jG.init($,Q),G$.init($,Q)});function jk($){return p8(BB,$)}var DB=M("ZodNull",($,Q)=>{wG.init($,Q),G$.init($,Q)});function OB($){return n8(DB,$)}var AB=M("ZodAny",($,Q)=>{KG.init($,Q),G$.init($,Q)});function wk(){return r8(AB)}var FB=M("ZodUnknown",($,Q)=>{p4.init($,Q),G$.init($,Q)});function M5(){return n4(FB)}var LB=M("ZodNever",($,Q)=>{NG.init($,Q),G$.init($,Q)});function S5($){return o8(LB,$)}var vB=M("ZodVoid",($,Q)=>{VG.init($,Q),G$.init($,Q)});function Kk($){return a8(vB,$)}var T5=M("ZodDate",($,Q)=>{BG.init($,Q),G$.init($,Q),$.min=(Y,J)=>$.check(A6(Y,J)),$.max=(Y,J)=>$.check(f6(Y,J));let X=$._zod.bag;$.minDate=X.minimum?new Date(X.minimum):null,$.maxDate=X.maximum?new Date(X.maximum):null});function Nk($){return t8(T5,$)}var IB=M("ZodArray",($,Q)=>{EX.init($,Q),G$.init($,Q),$.element=Q.element,$.min=(X,Y)=>$.check(G1(X,Y)),$.nonempty=(X)=>$.check(G1(1,X)),$.max=(X,Y)=>$.check(o4(X,Y)),$.length=(X,Y)=>$.check(a4(X,Y)),$.unwrap=()=>$.element});function cz($,Q){return iX(IB,$,Q)}function Vk($){let Q=$._zod.def.shape;return xB(Object.keys(Q))}var C5=M("ZodObject",($,Q)=>{DG.init($,Q),G$.init($,Q),i.defineLazy($,"shape",()=>Q.shape),$.keyof=()=>CB(Object.keys($._zod.def.shape)),$.catchall=(X)=>$.clone({...$._zod.def,catchall:X}),$.passthrough=()=>$.clone({...$._zod.def,catchall:M5()}),$.loose=()=>$.clone({...$._zod.def,catchall:M5()}),$.strict=()=>$.clone({...$._zod.def,catchall:S5()}),$.strip=()=>$.clone({...$._zod.def,catchall:void 0}),$.extend=(X)=>{return i.extend($,X)},$.merge=(X)=>i.merge($,X),$.pick=(X)=>i.pick($,X),$.omit=(X)=>i.omit($,X),$.partial=(...X)=>i.partial(pz,$,X[0]),$.required=(...X)=>i.required(nz,$,X[0])});function Bk($,Q){let X={type:"object",get shape(){return i.assignProp(this,"shape",{...$}),this.shape},...i.normalizeParams(Q)};return new C5(X)}function Dk($,Q){return new C5({type:"object",get shape(){return i.assignProp(this,"shape",{...$}),this.shape},catchall:S5(),...i.normalizeParams(Q)})}function Ok($,Q){return new C5({type:"object",get shape(){return i.assignProp(this,"shape",{...$}),this.shape},catchall:M5(),...i.normalizeParams(Q)})}var uz=M("ZodUnion",($,Q)=>{oY.init($,Q),G$.init($,Q),$.options=Q.options});function b5($,Q){return new uz({type:"union",options:$,...i.normalizeParams(Q)})}var EB=M("ZodDiscriminatedUnion",($,Q)=>{uz.init($,Q),OG.init($,Q)});function Ak($,Q,X){return new EB({type:"union",options:Q,discriminator:$,...i.normalizeParams(X)})}var MB=M("ZodIntersection",($,Q)=>{AG.init($,Q),G$.init($,Q)});function PB($,Q){return new MB({type:"intersection",left:$,right:Q})}var RB=M("ZodTuple",($,Q)=>{_1.init($,Q),G$.init($,Q),$.rest=(X)=>$.clone({...$._zod.def,rest:X})});function Fk($,Q,X){let Y=Q instanceof Q$,J=Y?X:Q;return new RB({type:"tuple",items:$,rest:Y?Q:null,...i.normalizeParams(J)})}var iz=M("ZodRecord",($,Q)=>{FG.init($,Q),G$.init($,Q),$.keyType=Q.keyType,$.valueType=Q.valueType});function ZB($,Q,X){return new iz({type:"record",keyType:$,valueType:Q,...i.normalizeParams(X)})}function Lk($,Q,X){return new iz({type:"record",keyType:b5([$,S5()]),valueType:Q,...i.normalizeParams(X)})}var SB=M("ZodMap",($,Q)=>{LG.init($,Q),G$.init($,Q),$.keyType=Q.keyType,$.valueType=Q.valueType});function vk($,Q,X){return new SB({type:"map",keyType:$,valueType:Q,...i.normalizeParams(X)})}var TB=M("ZodSet",($,Q)=>{vG.init($,Q),G$.init($,Q),$.min=(...X)=>$.check(h1(...X)),$.nonempty=(X)=>$.check(h1(1,X)),$.max=(...X)=>$.check(r4(...X)),$.size=(...X)=>$.check(CX(...X))});function Ik($,Q){return new TB({type:"set",valueType:$,...i.normalizeParams(Q)})}var pX=M("ZodEnum",($,Q)=>{IG.init($,Q),G$.init($,Q),$.enum=Q.entries,$.options=Object.values(Q.entries);let X=new Set(Object.keys(Q.entries));$.extract=(Y,J)=>{let U={};for(let G of Y)if(X.has(G))U[G]=Q.entries[G];else throw Error(`Key ${G} not found in enum`);return new pX({...Q,checks:[],...i.normalizeParams(J),entries:U})},$.exclude=(Y,J)=>{let U={...Q.entries};for(let G of Y)if(X.has(G))delete U[G];else throw Error(`Key ${G} not found in enum`);return new pX({...Q,checks:[],...i.normalizeParams(J),entries:U})}});function CB($,Q){let X=Array.isArray($)?Object.fromEntries($.map((Y)=>[Y,Y])):$;return new pX({type:"enum",entries:X,...i.normalizeParams(Q)})}function Ek($,Q){return new pX({type:"enum",entries:$,...i.normalizeParams(Q)})}var bB=M("ZodLiteral",($,Q)=>{EG.init($,Q),G$.init($,Q),$.values=new Set(Q.values),Object.defineProperty($,"value",{get(){if(Q.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return Q.values[0]}})});function xB($,Q){return new bB({type:"literal",values:Array.isArray($)?$:[$],...i.normalizeParams(Q)})}var kB=M("ZodFile",($,Q)=>{MG.init($,Q),G$.init($,Q),$.min=(X,Y)=>$.check(h1(X,Y)),$.max=(X,Y)=>$.check(r4(X,Y)),$.mime=(X,Y)=>$.check(gX(Array.isArray(X)?X:[X],Y))});function Mk($){return qz(kB,$)}var dz=M("ZodTransform",($,Q)=>{MX.init($,Q),G$.init($,Q),$._zod.parse=(X,Y)=>{X.addIssue=(U)=>{if(typeof U==="string")X.issues.push(i.issue(U,X.value,Q));else{let G=U;if(G.fatal)G.continue=!1;G.code??(G.code="custom"),G.input??(G.input=X.value),G.inst??(G.inst=$),G.continue??(G.continue=!0),X.issues.push(i.issue(G))}};let J=Q.transform(X.value,X);if(J instanceof Promise)return J.then((U)=>{return X.value=U,X});return X.value=J,X}});function lz($){return new dz({type:"transform",transform:$})}var pz=M("ZodOptional",($,Q)=>{PG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType});function P5($){return new pz({type:"optional",innerType:$})}var fB=M("ZodNullable",($,Q)=>{RG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType});function R5($){return new fB({type:"nullable",innerType:$})}function Pk($){return P5(R5($))}var yB=M("ZodDefault",($,Q)=>{ZG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType,$.removeDefault=$.unwrap});function _B($,Q){return new yB({type:"default",innerType:$,get defaultValue(){return typeof Q==="function"?Q():Q}})}var gB=M("ZodPrefault",($,Q)=>{SG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType});function hB($,Q){return new gB({type:"prefault",innerType:$,get defaultValue(){return typeof Q==="function"?Q():Q}})}var nz=M("ZodNonOptional",($,Q)=>{TG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType});function mB($,Q){return new nz({type:"nonoptional",innerType:$,...i.normalizeParams(Q)})}var cB=M("ZodSuccess",($,Q)=>{CG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType});function Rk($){return new cB({type:"success",innerType:$})}var uB=M("ZodCatch",($,Q)=>{bG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType,$.removeCatch=$.unwrap});function iB($,Q){return new uB({type:"catch",innerType:$,catchValue:typeof Q==="function"?Q:()=>Q})}var dB=M("ZodNaN",($,Q)=>{xG.init($,Q),G$.init($,Q)});function Zk($){return e8(dB,$)}var rz=M("ZodPipe",($,Q)=>{PX.init($,Q),G$.init($,Q),$.in=Q.in,$.out=Q.out});function Z5($,Q){return new rz({type:"pipe",in:$,out:Q})}var lB=M("ZodReadonly",($,Q)=>{kG.init($,Q),G$.init($,Q)});function pB($){return new lB({type:"readonly",innerType:$})}var nB=M("ZodTemplateLiteral",($,Q)=>{fG.init($,Q),G$.init($,Q)});function Sk($,Q){return new nB({type:"template_literal",parts:$,...i.normalizeParams(Q)})}var rB=M("ZodLazy",($,Q)=>{_G.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.getter()});function oB($){return new rB({type:"lazy",getter:$})}var aB=M("ZodPromise",($,Q)=>{yG.init($,Q),G$.init($,Q),$.unwrap=()=>$._zod.def.innerType});function Tk($){return new aB({type:"promise",innerType:$})}var x5=M("ZodCustom",($,Q)=>{gG.init($,Q),G$.init($,Q)});function tB($){let Q=new c$({check:"custom"});return Q._zod.check=$,Q}function Ck($,Q){return Gz(x5,$??(()=>!0),Q)}function sB($,Q={}){return zz(x5,$,Q)}function eB($){let Q=tB((X)=>{return X.addIssue=(Y)=>{if(typeof Y==="string")X.issues.push(i.issue(Y,X.value,Q._zod.def));else{let J=Y;if(J.fatal)J.continue=!1;J.code??(J.code="custom"),J.input??(J.input=X.value),J.inst??(J.inst=Q),J.continue??(J.continue=!Q._zod.def.abort),X.issues.push(i.issue(J))}},$(X.value,X)});return Q}function bk($,Q={error:`Input not instance of ${$.name}`}){let X=new x5({type:"custom",check:"custom",fn:(Y)=>Y instanceof $,abort:!0,...i.normalizeParams(Q)});return X._zod.bag.Class=$,X}var xk=(...$)=>Wz({Pipe:rz,Boolean:oX,String:nX,Transform:dz},...$);function kk($){let Q=oB(()=>{return b5([Fz($),KB(),NB(),OB(),cz(Q),ZB(Fz(),Q)])});return Q}function fk($,Q){return Z5(lz($),Q)}var yk={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function _k($){r$({customError:$})}function gk(){return r$().customError}var oz={};i0(oz,{string:()=>hk,number:()=>mk,date:()=>ik,boolean:()=>ck,bigint:()=>uk});function hk($){return P8(nX,$)}function mk($){return x8(rX,$)}function ck($){return m8(oX,$)}function uk($){return u8(aX,$)}function ik($){return s8(T5,$)}r$(RX());function F$(...$){return $.reduce((Q,X)=>({...Q,...X!=null?X:{}}),{})}async function JD($,Q){if($==null)return Promise.resolve();let X=Q==null?void 0:Q.abortSignal;return new Promise((Y,J)=>{if(X==null?void 0:X.aborted){J($D());return}let U=setTimeout(()=>{G(),Y()},$),G=()=>{clearTimeout(U),X==null||X.removeEventListener("abort",z)},z=()=>{G(),J($D())};X==null||X.addEventListener("abort",z)})}function $D(){return new DOMException("Delay was aborted","AbortError")}function e4($){return Object.fromEntries([...$.headers])}var y0=({prefix:$,size:Q=16,alphabet:X="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:Y="-"}={})=>{let J=()=>{let U=X.length,G=Array(Q);for(let z=0;z<Q;z++)G[z]=X[Math.random()*U|0];return G.join("")};if($==null)return J;if(X.includes(Y))throw new CY({argument:"separator",message:`The separator "${Y}" must not be part of the alphabet "${X}".`});return()=>`${$}${Y}${J()}`},p$=y0();function tX($){if($==null)return"unknown error";if(typeof $==="string")return $;if($ instanceof Error)return $.message;return JSON.stringify($)}function f0($){return($ instanceof Error||$ instanceof DOMException)&&($.name==="AbortError"||$.name==="ResponseAborted"||$.name==="TimeoutError")}var dk=["fetch failed","failed to fetch"];function YD({error:$,url:Q,requestBodyValues:X}){if(f0($))return $;if($ instanceof TypeError&&dk.includes($.message.toLowerCase())){let Y=$.cause;if(Y!=null)return new x$({message:`Cannot connect to API: ${Y.message}`,cause:Y,url:Q,requestBodyValues:X,isRetryable:!0})}return $}function f5($=globalThis){var Q,X,Y;if($.window)return"runtime/browser";if((Q=$.navigator)==null?void 0:Q.userAgent)return`runtime/${$.navigator.userAgent.toLowerCase()}`;if((Y=(X=$.process)==null?void 0:X.versions)==null?void 0:Y.node)return`runtime/node.js/${$.process.version.substring(0)}`;if($.EdgeRuntime)return"runtime/vercel-edge";return"runtime/unknown"}function lk($){return Object.fromEntries(Object.entries($).filter(([Q,X])=>X!=null))}function K6($,...Q){let X=lk($!=null?$:{}),Y=new Headers(X),J=Y.get("user-agent")||"";return Y.set("user-agent",[J,...Q].filter(Boolean).join(" ")),Object.fromEntries(Y)}var UD="3.0.12",pk=()=>globalThis.fetch,$W=async({url:$,headers:Q={},successfulResponseHandler:X,failedResponseHandler:Y,abortSignal:J,fetch:U=pk()})=>{try{let G=await U($,{method:"GET",headers:K6(Q,`ai-sdk/provider-utils/${UD}`,f5()),signal:J}),z=e4(G);if(!G.ok){let H;try{H=await Y({response:G,url:$,requestBodyValues:{}})}catch(W){if(f0(W)||x$.isInstance(W))throw W;throw new x$({message:"Failed to process error response",cause:W,statusCode:G.status,url:$,responseHeaders:z,requestBodyValues:{}})}throw H.value}try{return await X({response:G,url:$,requestBodyValues:{}})}catch(H){if(H instanceof Error){if(f0(H)||x$.isInstance(H))throw H}throw new x$({message:"Failed to process successful response",cause:H,statusCode:G.status,url:$,responseHeaders:z,requestBodyValues:{}})}}catch(G){throw YD({error:G,url:$,requestBodyValues:{}})}};function qD({mediaType:$,url:Q,supportedUrls:X}){return Q=Q.toLowerCase(),$=$.toLowerCase(),Object.entries(X).map(([Y,J])=>{let U=Y.toLowerCase();return U==="*"||U==="*/*"?{mediaTypePrefix:"",regexes:J}:{mediaTypePrefix:U.replace(/\*/,""),regexes:J}}).filter(({mediaTypePrefix:Y})=>$.startsWith(Y)).flatMap(({regexes:Y})=>Y).some((Y)=>Y.test(Q))}function $Q({apiKey:$,environmentVariableName:Q,apiKeyParameterName:X="apiKey",description:Y}){if(typeof $==="string")return $;if($!=null)throw new WX({message:`${Y} API key must be a string.`});if(typeof process>"u")throw new WX({message:`${Y} API key is missing. Pass it using the '${X}' parameter. Environment variables is not supported in this environment.`});if($=process.env[Q],$==null)throw new WX({message:`${Y} API key is missing. Pass it using the '${X}' parameter or the ${Q} environment variable.`});if(typeof $!=="string")throw new WX({message:`${Y} API key must be a string. The value of the ${Q} environment variable is not a string.`});return $}function _0({settingValue:$,environmentVariableName:Q}){if(typeof $==="string")return $;if($!=null||typeof process>"u")return;if($=process.env[Q],$==null||typeof $!=="string")return;return $}function GD($){var Q;let[X,Y=""]=$.toLowerCase().split("/");return(Q={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[Y])!=null?Q:Y}var nk=/"__proto__"\s*:/,rk=/"constructor"\s*:/;function ok($){let Q=JSON.parse($);if(Q===null||typeof Q!=="object")return Q;if(nk.test($)===!1&&rk.test($)===!1)return Q;return ak(Q)}function ak($){let Q=[$];while(Q.length){let X=Q;Q=[];for(let Y of X){if(Object.prototype.hasOwnProperty.call(Y,"__proto__"))throw SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(Y,"constructor")&&Object.prototype.hasOwnProperty.call(Y.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let J in Y){let U=Y[J];if(U&&typeof U==="object")Q.push(U)}}}return $}function QW($){let{stackTraceLimit:Q}=Error;Error.stackTraceLimit=0;try{return ok($)}finally{Error.stackTraceLimit=Q}}var k5=Symbol.for("vercel.ai.validator");function tk($){return{[k5]:!0,validate:$}}function sk($){return typeof $==="object"&&$!==null&&k5 in $&&$[k5]===!0&&"validate"in $}function J$($){let Q;return()=>{if(Q==null)Q=$();return Q}}function ek($){return sk($)?$:typeof $==="function"?$():$f($)}function $f($){return tk(async(Q)=>{let X=await $["~standard"].validate(Q);return X.issues==null?{success:!0,value:X.value}:{success:!1,error:new q6({value:Q,cause:X.issues})}})}async function u$({value:$,schema:Q}){let X=await e$({value:$,schema:Q});if(!X.success)throw q6.wrap({value:$,cause:X.error});return X.value}async function e$({value:$,schema:Q}){let X=ek(Q);try{if(X.validate==null)return{success:!0,value:$,rawValue:$};let Y=await X.validate($);if(Y.success)return{success:!0,value:Y.value,rawValue:$};return{success:!1,error:q6.wrap({value:$,cause:Y.error}),rawValue:$}}catch(Y){return{success:!1,error:q6.wrap({value:$,cause:Y}),rawValue:$}}}async function Qf({text:$,schema:Q}){try{let X=QW($);if(Q==null)return X;return u$({value:X,schema:Q})}catch(X){if(C1.isInstance(X)||q6.isInstance(X))throw X;throw new C1({text:$,cause:X})}}async function y6({text:$,schema:Q}){try{let X=QW($);if(Q==null)return{success:!0,value:X,rawValue:X};return await e$({value:X,schema:Q})}catch(X){return{success:!1,error:C1.isInstance(X)?X:new C1({text:$,cause:X}),rawValue:void 0}}}function XW($){try{return QW($),!0}catch(Q){return!1}}function Xf({stream:$,schema:Q}){return $.pipeThrough(new TextDecoderStream).pipeThrough(new M7).pipeThrough(new TransformStream({async transform({data:X},Y){if(X==="[DONE]")return;Y.enqueue(await y6({text:X,schema:Q}))}}))}async function Z$({provider:$,providerOptions:Q,schema:X}){if((Q==null?void 0:Q[$])==null)return;let Y=await e$({value:Q[$],schema:X});if(!Y.success)throw new CY({argument:"providerOptions",message:`invalid ${$} provider options`,cause:Y.error});return Y.value}var Jf=()=>globalThis.fetch,L$=async({url:$,headers:Q,body:X,failedResponseHandler:Y,successfulResponseHandler:J,abortSignal:U,fetch:G})=>WD({url:$,headers:{"Content-Type":"application/json",...Q},body:{content:JSON.stringify(X),values:X},failedResponseHandler:Y,successfulResponseHandler:J,abortSignal:U,fetch:G}),zD=async({url:$,headers:Q,formData:X,failedResponseHandler:Y,successfulResponseHandler:J,abortSignal:U,fetch:G})=>WD({url:$,headers:Q,body:{content:X,values:Object.fromEntries(X.entries())},failedResponseHandler:Y,successfulResponseHandler:J,abortSignal:U,fetch:G}),WD=async({url:$,headers:Q={},body:X,successfulResponseHandler:Y,failedResponseHandler:J,abortSignal:U,fetch:G=Jf()})=>{try{let z=await G($,{method:"POST",headers:K6(Q,`ai-sdk/provider-utils/${UD}`,f5()),body:X.content,signal:U}),H=e4(z);if(!z.ok){let W;try{W=await J({response:z,url:$,requestBodyValues:X.values})}catch(j){if(f0(j)||x$.isInstance(j))throw j;throw new x$({message:"Failed to process error response",cause:j,statusCode:z.status,url:$,responseHeaders:H,requestBodyValues:X.values})}throw W.value}try{return await Y({response:z,url:$,requestBodyValues:X.values})}catch(W){if(W instanceof Error){if(f0(W)||x$.isInstance(W))throw W}throw new x$({message:"Failed to process successful response",cause:W,statusCode:z.status,url:$,responseHeaders:H,requestBodyValues:X.values})}}catch(z){throw YD({error:z,url:$,requestBodyValues:X.values})}};function HD($){return $}function i$({id:$,name:Q,inputSchema:X}){return({execute:Y,outputSchema:J,toModelOutput:U,onInputStart:G,onInputDelta:z,onInputAvailable:H,...W})=>HD({type:"provider-defined",id:$,name:Q,args:W,inputSchema:X,outputSchema:J,execute:Y,toModelOutput:U,onInputStart:G,onInputDelta:z,onInputAvailable:H})}function d$({id:$,name:Q,inputSchema:X,outputSchema:Y}){return({execute:J,toModelOutput:U,onInputStart:G,onInputDelta:z,onInputAvailable:H,...W})=>HD({type:"provider-defined",id:$,name:Q,args:W,inputSchema:X,outputSchema:Y,execute:J,toModelOutput:U,onInputStart:G,onInputDelta:z,onInputAvailable:H})}async function o$($){if(typeof $==="function")$=$();return Promise.resolve($)}var F6=({errorSchema:$,errorToMessage:Q,isRetryable:X})=>async({response:Y,url:J,requestBodyValues:U})=>{let G=await Y.text(),z=e4(Y);if(G.trim()==="")return{responseHeaders:z,value:new x$({message:Y.statusText,url:J,requestBodyValues:U,statusCode:Y.status,responseHeaders:z,responseBody:G,isRetryable:X==null?void 0:X(Y)})};try{let H=await Qf({text:G,schema:$});return{responseHeaders:z,value:new x$({message:Q(H),url:J,requestBodyValues:U,statusCode:Y.status,responseHeaders:z,responseBody:G,data:H,isRetryable:X==null?void 0:X(Y,H)})}}catch(H){return{responseHeaders:z,value:new x$({message:Y.statusText,url:J,requestBodyValues:U,statusCode:Y.status,responseHeaders:z,responseBody:G,isRetryable:X==null?void 0:X(Y)})}}},_6=($)=>async({response:Q})=>{let X=e4(Q);if(Q.body==null)throw new HV({});return{responseHeaders:X,value:Xf({stream:Q.body,schema:$})}};var M$=($)=>async({response:Q,url:X,requestBodyValues:Y})=>{let J=await Q.text(),U=await y6({text:J,schema:$}),G=e4(Q);if(!U.success)throw new x$({message:"Invalid JSON response",cause:U.error,statusCode:Q.status,responseHeaders:G,responseBody:J,url:X,requestBodyValues:Y});return{responseHeaders:G,value:U.value,rawValue:U.rawValue}},jD=()=>async({response:$,url:Q,requestBodyValues:X})=>{let Y=e4($);if(!$.body)throw new x$({message:"Response body is empty",url:Q,requestBodyValues:X,statusCode:$.status,responseHeaders:Y,responseBody:void 0});try{let J=await $.arrayBuffer();return{responseHeaders:Y,value:new Uint8Array(J)}}catch(J){throw new x$({message:"Failed to read response as array buffer",url:Q,requestBodyValues:X,statusCode:$.status,responseHeaders:Y,responseBody:void 0,cause:J})}};var Yf=($,Q)=>{let X=0;for(;X<$.length&&X<Q.length;X++)if($[X]!==Q[X])break;return[($.length-X).toString(),...Q.slice(X)].join("/")},Uf=Symbol("Let zodToJsonSchema decide on which parser to use"),QD={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},qf=($)=>typeof $==="string"?{...QD,name:$}:{...QD,...$};function R6(){return{}}function Gf($,Q){var X,Y,J;let U={type:"array"};if(((X=$.type)==null?void 0:X._def)&&((J=(Y=$.type)==null?void 0:Y._def)==null?void 0:J.typeName)!==g.ZodAny)U.items=I$($.type._def,{...Q,currentPath:[...Q.currentPath,"items"]});if($.minLength)U.minItems=$.minLength.value;if($.maxLength)U.maxItems=$.maxLength.value;if($.exactLength)U.minItems=$.exactLength.value,U.maxItems=$.exactLength.value;return U}function zf($){let Q={type:"integer",format:"int64"};if(!$.checks)return Q;for(let X of $.checks)switch(X.kind){case"min":if(X.inclusive)Q.minimum=X.value;else Q.exclusiveMinimum=X.value;break;case"max":if(X.inclusive)Q.maximum=X.value;else Q.exclusiveMaximum=X.value;break;case"multipleOf":Q.multipleOf=X.value;break}return Q}function Wf(){return{type:"boolean"}}function wD($,Q){return I$($.type._def,Q)}var Hf=($,Q)=>{return I$($.innerType._def,Q)};function KD($,Q,X){let Y=X!=null?X:Q.dateStrategy;if(Array.isArray(Y))return{anyOf:Y.map((J,U)=>KD($,Q,J))};switch(Y){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return jf($)}}var jf=($)=>{let Q={type:"integer",format:"unix-time"};for(let X of $.checks)switch(X.kind){case"min":Q.minimum=X.value;break;case"max":Q.maximum=X.value;break}return Q};function wf($,Q){return{...I$($.innerType._def,Q),default:$.defaultValue()}}function Kf($,Q){return Q.effectStrategy==="input"?I$($.schema._def,Q):R6()}function Nf($){return{type:"string",enum:Array.from($.values)}}var Vf=($)=>{if("type"in $&&$.type==="string")return!1;return"allOf"in $};function Bf($,Q){let X=[I$($.left._def,{...Q,currentPath:[...Q.currentPath,"allOf","0"]}),I$($.right._def,{...Q,currentPath:[...Q.currentPath,"allOf","1"]})].filter((J)=>!!J),Y=[];return X.forEach((J)=>{if(Vf(J))Y.push(...J.allOf);else{let U=J;if("additionalProperties"in J&&J.additionalProperties===!1){let{additionalProperties:G,...z}=J;U=z}Y.push(U)}}),Y.length?{allOf:Y}:void 0}function Df($){let Q=typeof $.value;if(Q!=="bigint"&&Q!=="number"&&Q!=="boolean"&&Q!=="string")return{type:Array.isArray($.value)?"array":"object"};return{type:Q==="bigint"?"integer":Q,const:$.value}}var az=void 0,n6={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(az===void 0)az=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return az},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ND($,Q){let X={type:"string"};if($.checks)for(let Y of $.checks)switch(Y.kind){case"min":X.minLength=typeof X.minLength==="number"?Math.max(X.minLength,Y.value):Y.value;break;case"max":X.maxLength=typeof X.maxLength==="number"?Math.min(X.maxLength,Y.value):Y.value;break;case"email":switch(Q.emailStrategy){case"format:email":r6(X,"email",Y.message,Q);break;case"format:idn-email":r6(X,"idn-email",Y.message,Q);break;case"pattern:zod":w6(X,n6.email,Y.message,Q);break}break;case"url":r6(X,"uri",Y.message,Q);break;case"uuid":r6(X,"uuid",Y.message,Q);break;case"regex":w6(X,Y.regex,Y.message,Q);break;case"cuid":w6(X,n6.cuid,Y.message,Q);break;case"cuid2":w6(X,n6.cuid2,Y.message,Q);break;case"startsWith":w6(X,RegExp(`^${tz(Y.value,Q)}`),Y.message,Q);break;case"endsWith":w6(X,RegExp(`${tz(Y.value,Q)}$`),Y.message,Q);break;case"datetime":r6(X,"date-time",Y.message,Q);break;case"date":r6(X,"date",Y.message,Q);break;case"time":r6(X,"time",Y.message,Q);break;case"duration":r6(X,"duration",Y.message,Q);break;case"length":X.minLength=typeof X.minLength==="number"?Math.max(X.minLength,Y.value):Y.value,X.maxLength=typeof X.maxLength==="number"?Math.min(X.maxLength,Y.value):Y.value;break;case"includes":{w6(X,RegExp(tz(Y.value,Q)),Y.message,Q);break}case"ip":{if(Y.version!=="v6")r6(X,"ipv4",Y.message,Q);if(Y.version!=="v4")r6(X,"ipv6",Y.message,Q);break}case"base64url":w6(X,n6.base64url,Y.message,Q);break;case"jwt":w6(X,n6.jwt,Y.message,Q);break;case"cidr":{if(Y.version!=="v6")w6(X,n6.ipv4Cidr,Y.message,Q);if(Y.version!=="v4")w6(X,n6.ipv6Cidr,Y.message,Q);break}case"emoji":w6(X,n6.emoji(),Y.message,Q);break;case"ulid":{w6(X,n6.ulid,Y.message,Q);break}case"base64":{switch(Q.base64Strategy){case"format:binary":{r6(X,"binary",Y.message,Q);break}case"contentEncoding:base64":{X.contentEncoding="base64";break}case"pattern:zod":{w6(X,n6.base64,Y.message,Q);break}}break}case"nanoid":w6(X,n6.nanoid,Y.message,Q);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return X}function tz($,Q){return Q.patternStrategy==="escape"?Af($):$}var Of=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Af($){let Q="";for(let X=0;X<$.length;X++){if(!Of.has($[X]))Q+="\\";Q+=$[X]}return Q}function r6($,Q,X,Y){var J;if($.format||((J=$.anyOf)==null?void 0:J.some((U)=>U.format))){if(!$.anyOf)$.anyOf=[];if($.format)$.anyOf.push({format:$.format}),delete $.format;$.anyOf.push({format:Q,...X&&Y.errorMessages&&{errorMessage:{format:X}}})}else $.format=Q}function w6($,Q,X,Y){var J;if($.pattern||((J=$.allOf)==null?void 0:J.some((U)=>U.pattern))){if(!$.allOf)$.allOf=[];if($.pattern)$.allOf.push({pattern:$.pattern}),delete $.pattern;$.allOf.push({pattern:XD(Q,Y),...X&&Y.errorMessages&&{errorMessage:{pattern:X}}})}else $.pattern=XD(Q,Y)}function XD($,Q){var X;if(!Q.applyRegexFlags||!$.flags)return $.source;let Y={i:$.flags.includes("i"),m:$.flags.includes("m"),s:$.flags.includes("s")},J=Y.i?$.source.toLowerCase():$.source,U="",G=!1,z=!1,H=!1;for(let W=0;W<J.length;W++){if(G){U+=J[W],G=!1;continue}if(Y.i){if(z){if(J[W].match(/[a-z]/)){if(H)U+=J[W],U+=`${J[W-2]}-${J[W]}`.toUpperCase(),H=!1;else if(J[W+1]==="-"&&((X=J[W+2])==null?void 0:X.match(/[a-z]/)))U+=J[W],H=!0;else U+=`${J[W]}${J[W].toUpperCase()}`;continue}}else if(J[W].match(/[a-z]/)){U+=`[${J[W]}${J[W].toUpperCase()}]`;continue}}if(Y.m){if(J[W]==="^"){U+=`(^|(?<=[\r
]))`;continue}else if(J[W]==="$"){U+=`($|(?=[\r
]))`;continue}}if(Y.s&&J[W]==="."){U+=z?`${J[W]}\r
`:`[${J[W]}\r
]`;continue}if(U+=J[W],J[W]==="\\")G=!0;else if(z&&J[W]==="]")z=!1;else if(!z&&J[W]==="[")z=!0}try{new RegExp(U)}catch(W){return console.warn(`Could not convert regex pattern at ${Q.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),$.source}return U}function VD($,Q){var X,Y,J,U,G,z;let H={type:"object",additionalProperties:(X=I$($.valueType._def,{...Q,currentPath:[...Q.currentPath,"additionalProperties"]}))!=null?X:Q.allowedAdditionalProperties};if(((Y=$.keyType)==null?void 0:Y._def.typeName)===g.ZodString&&((J=$.keyType._def.checks)==null?void 0:J.length)){let{type:W,...j}=ND($.keyType._def,Q);return{...H,propertyNames:j}}else if(((U=$.keyType)==null?void 0:U._def.typeName)===g.ZodEnum)return{...H,propertyNames:{enum:$.keyType._def.values}};else if(((G=$.keyType)==null?void 0:G._def.typeName)===g.ZodBranded&&$.keyType._def.type._def.typeName===g.ZodString&&((z=$.keyType._def.type._def.checks)==null?void 0:z.length)){let{type:W,...j}=wD($.keyType._def,Q);return{...H,propertyNames:j}}return H}function Ff($,Q){if(Q.mapStrategy==="record")return VD($,Q);let X=I$($.keyType._def,{...Q,currentPath:[...Q.currentPath,"items","items","0"]})||R6(),Y=I$($.valueType._def,{...Q,currentPath:[...Q.currentPath,"items","items","1"]})||R6();return{type:"array",maxItems:125,items:{type:"array",items:[X,Y],minItems:2,maxItems:2}}}function Lf($){let Q=$.values,Y=Object.keys($.values).filter((U)=>{return typeof Q[Q[U]]!=="number"}).map((U)=>Q[U]),J=Array.from(new Set(Y.map((U)=>typeof U)));return{type:J.length===1?J[0]==="string"?"string":"number":["string","number"],enum:Y}}function vf(){return{not:R6()}}function If(){return{type:"null"}}var sz={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Ef($,Q){let X=$.options instanceof Map?Array.from($.options.values()):$.options;if(X.every((Y)=>(Y._def.typeName in sz)&&(!Y._def.checks||!Y._def.checks.length))){let Y=X.reduce((J,U)=>{let G=sz[U._def.typeName];return G&&!J.includes(G)?[...J,G]:J},[]);return{type:Y.length>1?Y:Y[0]}}else if(X.every((Y)=>Y._def.typeName==="ZodLiteral"&&!Y.description)){let Y=X.reduce((J,U)=>{let G=typeof U._def.value;switch(G){case"string":case"number":case"boolean":return[...J,G];case"bigint":return[...J,"integer"];case"object":if(U._def.value===null)return[...J,"null"];case"symbol":case"undefined":case"function":default:return J}},[]);if(Y.length===X.length){let J=Y.filter((U,G,z)=>z.indexOf(U)===G);return{type:J.length>1?J:J[0],enum:X.reduce((U,G)=>{return U.includes(G._def.value)?U:[...U,G._def.value]},[])}}}else if(X.every((Y)=>Y._def.typeName==="ZodEnum"))return{type:"string",enum:X.reduce((Y,J)=>[...Y,...J._def.values.filter((U)=>!Y.includes(U))],[])};return Mf($,Q)}var Mf=($,Q)=>{let X=($.options instanceof Map?Array.from($.options.values()):$.options).map((Y,J)=>I$(Y._def,{...Q,currentPath:[...Q.currentPath,"anyOf",`${J}`]})).filter((Y)=>!!Y&&(!Q.strictUnions||typeof Y==="object"&&Object.keys(Y).length>0));return X.length?{anyOf:X}:void 0};function Pf($,Q){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes($.innerType._def.typeName)&&(!$.innerType._def.checks||!$.innerType._def.checks.length))return{type:[sz[$.innerType._def.typeName],"null"]};let X=I$($.innerType._def,{...Q,currentPath:[...Q.currentPath,"anyOf","0"]});return X&&{anyOf:[X,{type:"null"}]}}function Rf($){let Q={type:"number"};if(!$.checks)return Q;for(let X of $.checks)switch(X.kind){case"int":Q.type="integer";break;case"min":if(X.inclusive)Q.minimum=X.value;else Q.exclusiveMinimum=X.value;break;case"max":if(X.inclusive)Q.maximum=X.value;else Q.exclusiveMaximum=X.value;break;case"multipleOf":Q.multipleOf=X.value;break}return Q}function Zf($,Q){let X={type:"object",properties:{}},Y=[],J=$.shape();for(let G in J){let z=J[G];if(z===void 0||z._def===void 0)continue;let H=Tf(z),W=I$(z._def,{...Q,currentPath:[...Q.currentPath,"properties",G],propertyPath:[...Q.currentPath,"properties",G]});if(W===void 0)continue;if(X.properties[G]=W,!H)Y.push(G)}if(Y.length)X.required=Y;let U=Sf($,Q);if(U!==void 0)X.additionalProperties=U;return X}function Sf($,Q){if($.catchall._def.typeName!=="ZodNever")return I$($.catchall._def,{...Q,currentPath:[...Q.currentPath,"additionalProperties"]});switch($.unknownKeys){case"passthrough":return Q.allowedAdditionalProperties;case"strict":return Q.rejectedAdditionalProperties;case"strip":return Q.removeAdditionalStrategy==="strict"?Q.allowedAdditionalProperties:Q.rejectedAdditionalProperties}}function Tf($){try{return $.isOptional()}catch(Q){return!0}}var Cf=($,Q)=>{var X;if(Q.currentPath.toString()===((X=Q.propertyPath)==null?void 0:X.toString()))return I$($.innerType._def,Q);let Y=I$($.innerType._def,{...Q,currentPath:[...Q.currentPath,"anyOf","1"]});return Y?{anyOf:[{not:R6()},Y]}:R6()},bf=($,Q)=>{if(Q.pipeStrategy==="input")return I$($.in._def,Q);else if(Q.pipeStrategy==="output")return I$($.out._def,Q);let X=I$($.in._def,{...Q,currentPath:[...Q.currentPath,"allOf","0"]}),Y=I$($.out._def,{...Q,currentPath:[...Q.currentPath,"allOf",X?"1":"0"]});return{allOf:[X,Y].filter((J)=>J!==void 0)}};function xf($,Q){return I$($.type._def,Q)}function kf($,Q){let Y={type:"array",uniqueItems:!0,items:I$($.valueType._def,{...Q,currentPath:[...Q.currentPath,"items"]})};if($.minSize)Y.minItems=$.minSize.value;if($.maxSize)Y.maxItems=$.maxSize.value;return Y}function ff($,Q){if($.rest)return{type:"array",minItems:$.items.length,items:$.items.map((X,Y)=>I$(X._def,{...Q,currentPath:[...Q.currentPath,"items",`${Y}`]})).reduce((X,Y)=>Y===void 0?X:[...X,Y],[]),additionalItems:I$($.rest._def,{...Q,currentPath:[...Q.currentPath,"additionalItems"]})};else return{type:"array",minItems:$.items.length,maxItems:$.items.length,items:$.items.map((X,Y)=>I$(X._def,{...Q,currentPath:[...Q.currentPath,"items",`${Y}`]})).reduce((X,Y)=>Y===void 0?X:[...X,Y],[])}}function yf(){return{not:R6()}}function _f(){return R6()}var gf=($,Q)=>{return I$($.innerType._def,Q)},hf=($,Q,X)=>{switch(Q){case g.ZodString:return ND($,X);case g.ZodNumber:return Rf($);case g.ZodObject:return Zf($,X);case g.ZodBigInt:return zf($);case g.ZodBoolean:return Wf();case g.ZodDate:return KD($,X);case g.ZodUndefined:return yf();case g.ZodNull:return If();case g.ZodArray:return Gf($,X);case g.ZodUnion:case g.ZodDiscriminatedUnion:return Ef($,X);case g.ZodIntersection:return Bf($,X);case g.ZodTuple:return ff($,X);case g.ZodRecord:return VD($,X);case g.ZodLiteral:return Df($);case g.ZodEnum:return Nf($);case g.ZodNativeEnum:return Lf($);case g.ZodNullable:return Pf($,X);case g.ZodOptional:return Cf($,X);case g.ZodMap:return Ff($,X);case g.ZodSet:return kf($,X);case g.ZodLazy:return()=>$.getter()._def;case g.ZodPromise:return xf($,X);case g.ZodNaN:case g.ZodNever:return vf();case g.ZodEffects:return Kf($,X);case g.ZodAny:return R6();case g.ZodUnknown:return _f();case g.ZodDefault:return wf($,X);case g.ZodBranded:return wD($,X);case g.ZodReadonly:return gf($,X);case g.ZodCatch:return Hf($,X);case g.ZodPipeline:return bf($,X);case g.ZodFunction:case g.ZodVoid:case g.ZodSymbol:return;default:return((Y)=>{return})(Q)}};function I$($,Q,X=!1){var Y;let J=Q.seen.get($);if(Q.override){let H=(Y=Q.override)==null?void 0:Y.call(Q,$,Q,J,X);if(H!==Uf)return H}if(J&&!X){let H=mf(J,Q);if(H!==void 0)return H}let U={def:$,path:Q.currentPath,jsonSchema:void 0};Q.seen.set($,U);let G=hf($,$.typeName,Q),z=typeof G==="function"?I$(G(),Q):G;if(z)cf($,Q,z);if(Q.postProcess){let H=Q.postProcess(z,$,Q);return U.jsonSchema=z,H}return U.jsonSchema=z,z}var mf=($,Q)=>{switch(Q.$refStrategy){case"root":return{$ref:$.path.join("/")};case"relative":return{$ref:Yf(Q.currentPath,$.path)};case"none":case"seen":{if($.path.length<Q.currentPath.length&&$.path.every((X,Y)=>Q.currentPath[Y]===X))return console.warn(`Recursive reference detected at ${Q.currentPath.join("/")}! Defaulting to any`),R6();return Q.$refStrategy==="seen"?R6():void 0}}},cf=($,Q,X)=>{if($.description)X.description=$.description;return X},uf=($)=>{let Q=qf($),X=Q.name!==void 0?[...Q.basePath,Q.definitionPath,Q.name]:Q.basePath;return{...Q,currentPath:X,propertyPath:void 0,seen:new Map(Object.entries(Q.definitions).map(([Y,J])=>[J._def,{def:J._def,path:[...Q.basePath,Q.definitionPath,Y],jsonSchema:void 0}]))}},df=($,Q)=>{var X;let Y=uf(Q),J=typeof Q==="object"&&Q.definitions?Object.entries(Q.definitions).reduce((W,[j,N])=>{var K;return{...W,[j]:(K=I$(N._def,{...Y,currentPath:[...Y.basePath,Y.definitionPath,j]},!0))!=null?K:R6()}},{}):void 0,U=typeof Q==="string"?Q:(Q==null?void 0:Q.nameStrategy)==="title"?void 0:Q==null?void 0:Q.name,G=(X=I$($._def,U===void 0?Y:{...Y,currentPath:[...Y.basePath,Y.definitionPath,U]},!1))!=null?X:R6(),z=typeof Q==="object"&&Q.name!==void 0&&Q.nameStrategy==="title"?Q.name:void 0;if(z!==void 0)G.title=z;let H=U===void 0?J?{...G,[Y.definitionPath]:J}:G:{$ref:[...Y.$refStrategy==="relative"?[]:Y.basePath,Y.definitionPath,U].join("/"),[Y.definitionPath]:{...J,[U]:G}};return H.$schema="http://json-schema.org/draft-07/schema#",H},lf=df;function pf($,Q){var X;let Y=(X=Q==null?void 0:Q.useReferences)!=null?X:!1;return JW(()=>lf($,{$refStrategy:Y?"root":"none"}),{validate:async(J)=>{let U=await $.safeParseAsync(J);return U.success?{success:!0,value:U.data}:{success:!1,error:U.error}}})}function nf($,Q){var X;let Y=(X=Q==null?void 0:Q.useReferences)!=null?X:!1;return JW(()=>dX($,{target:"draft-7",io:"output",reused:Y?"ref":"inline"}),{validate:async(J)=>{let U=await lX($,J);return U.success?{success:!0,value:U.data}:{success:!1,error:U.error}}})}function rf($){return"_zod"in $}function x($,Q){if(rf($))return nf($,Q);else return pf($,Q)}var ez=Symbol.for("vercel.ai.schema");function d($){let Q;return()=>{if(Q==null)Q=$();return Q}}function JW($,{validate:Q}={}){return{[ez]:!0,_type:void 0,[k5]:!0,get jsonSchema(){if(typeof $==="function")$=$();return $},validate:Q}}function of($){return typeof $==="object"&&$!==null&&ez in $&&$[ez]===!0&&"jsonSchema"in $&&"validate"in $}function H0($){return $==null?JW({properties:{},additionalProperties:!1}):of($)?$:typeof $==="function"?$():x($)}var{btoa:af,atob:tf}=globalThis;function z1($){let Q=$.replace(/-/g,"+").replace(/_/g,"/"),X=tf(Q);return Uint8Array.from(X,(Y)=>Y.codePointAt(0))}function QQ($){let Q="";for(let X=0;X<$.length;X++)Q+=String.fromCodePoint($[X]);return af(Q)}function L6($){return $ instanceof Uint8Array?QQ($):$}function W1($){return $==null?void 0:$.replace(/\/$/,"")}function sf($){return $!=null&&typeof $[Symbol.asyncIterator]==="function"}async function*YW({execute:$,input:Q,options:X}){let Y=$(Q,X);if(sf(Y)){let J;for await(let U of Y)J=U,yield{type:"preliminary",output:U};yield{type:"final",output:J}}else yield{type:"final",output:await Y}}var UW=q.object({error:q.object({message:q.string(),type:q.string().nullish(),param:q.any().nullish(),code:q.union([q.string(),q.number()]).nullish()})}),j0=F6({errorSchema:UW,errorToMessage:($)=>$.error.message});function ef({prompt:$,systemMessageMode:Q="system"}){let X=[],Y=[];for(let{role:J,content:U}of $)switch(J){case"system":{switch(Q){case"system":{X.push({role:"system",content:U});break}case"developer":{X.push({role:"developer",content:U});break}case"remove":{Y.push({type:"other",message:"system messages are removed for this model"});break}default:throw Error(`Unsupported system message mode: ${Q}`)}break}case"user":{if(U.length===1&&U[0].type==="text"){X.push({role:"user",content:U[0].text});break}X.push({role:"user",content:U.map((G,z)=>{var H,W,j;switch(G.type){case"text":return{type:"text",text:G.text};case"file":if(G.mediaType.startsWith("image/")){let N=G.mediaType==="image/*"?"image/jpeg":G.mediaType;return{type:"image_url",image_url:{url:G.data instanceof URL?G.data.toString():`data:${N};base64,${L6(G.data)}`,detail:(W=(H=G.providerOptions)==null?void 0:H.openai)==null?void 0:W.imageDetail}}}else if(G.mediaType.startsWith("audio/")){if(G.data instanceof URL)throw new K$({functionality:"audio file parts with URLs"});switch(G.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:L6(G.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:L6(G.data),format:"mp3"}};default:throw new K$({functionality:`audio content parts with media type ${G.mediaType}`})}}else if(G.mediaType==="application/pdf"){if(G.data instanceof URL)throw new K$({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof G.data==="string"&&G.data.startsWith("file-")?{file_id:G.data}:{filename:(j=G.filename)!=null?j:`part-${z}.pdf`,file_data:`data:application/pdf;base64,${L6(G.data)}`}}}else throw new K$({functionality:`file part media type ${G.mediaType}`})}})});break}case"assistant":{let G="",z=[];for(let H of U)switch(H.type){case"text":{G+=H.text;break}case"tool-call":{z.push({id:H.toolCallId,type:"function",function:{name:H.toolName,arguments:JSON.stringify(H.input)}});break}}X.push({role:"assistant",content:G,tool_calls:z.length>0?z:void 0});break}case"tool":{for(let G of U){let z=G.output,H;switch(z.type){case"text":case"error-text":H=z.value;break;case"content":case"json":case"error-json":H=JSON.stringify(z.value);break}X.push({role:"tool",tool_call_id:G.toolCallId,content:H})}break}default:throw Error(`Unsupported role: ${J}`)}return{messages:X,warnings:Y}}function BD({id:$,model:Q,created:X}){return{id:$!=null?$:void 0,modelId:Q!=null?Q:void 0,timestamp:X!=null?new Date(X*1000):void 0}}function DD($){switch($){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var $y=J$(()=>x(q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({message:q.object({role:q.literal("assistant").nullish(),content:q.string().nullish(),tool_calls:q.array(q.object({id:q.string().nullish(),type:q.literal("function"),function:q.object({name:q.string(),arguments:q.string()})})).nullish(),annotations:q.array(q.object({type:q.literal("url_citation"),start_index:q.number(),end_index:q.number(),url:q.string(),title:q.string()})).nullish()}),index:q.number(),logprobs:q.object({content:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullish()}).nullish(),finish_reason:q.string().nullish()})),usage:q.object({prompt_tokens:q.number().nullish(),completion_tokens:q.number().nullish(),total_tokens:q.number().nullish(),prompt_tokens_details:q.object({cached_tokens:q.number().nullish()}).nullish(),completion_tokens_details:q.object({reasoning_tokens:q.number().nullish(),accepted_prediction_tokens:q.number().nullish(),rejected_prediction_tokens:q.number().nullish()}).nullish()}).nullish()}))),Qy=J$(()=>x(q.union([q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({delta:q.object({role:q.enum(["assistant"]).nullish(),content:q.string().nullish(),tool_calls:q.array(q.object({index:q.number(),id:q.string().nullish(),type:q.literal("function").nullish(),function:q.object({name:q.string().nullish(),arguments:q.string().nullish()})})).nullish(),annotations:q.array(q.object({type:q.literal("url_citation"),start_index:q.number(),end_index:q.number(),url:q.string(),title:q.string()})).nullish()}).nullish(),logprobs:q.object({content:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullish()}).nullish(),finish_reason:q.string().nullish(),index:q.number()})),usage:q.object({prompt_tokens:q.number().nullish(),completion_tokens:q.number().nullish(),total_tokens:q.number().nullish(),prompt_tokens_details:q.object({cached_tokens:q.number().nullish()}).nullish(),completion_tokens_details:q.object({reasoning_tokens:q.number().nullish(),accepted_prediction_tokens:q.number().nullish(),rejected_prediction_tokens:q.number().nullish()}).nullish()}).nullish()}),UW]))),Xy=J$(()=>x(q.object({logitBias:q.record(q.coerce.number(),q.number()).optional(),logprobs:q.union([q.boolean(),q.number()]).optional(),parallelToolCalls:q.boolean().optional(),user:q.string().optional(),reasoningEffort:q.enum(["minimal","low","medium","high"]).optional(),maxCompletionTokens:q.number().optional(),store:q.boolean().optional(),metadata:q.record(q.string().max(64),q.string().max(512)).optional(),prediction:q.record(q.string(),q.any()).optional(),structuredOutputs:q.boolean().optional(),serviceTier:q.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:q.boolean().optional(),textVerbosity:q.enum(["low","medium","high"]).optional(),promptCacheKey:q.string().optional(),safetyIdentifier:q.string().optional()})));function Jy({tools:$,toolChoice:Q,structuredOutputs:X,strictJsonSchema:Y}){$=($==null?void 0:$.length)?$:void 0;let J=[];if($==null)return{tools:void 0,toolChoice:void 0,toolWarnings:J};let U=[];for(let z of $)switch(z.type){case"function":U.push({type:"function",function:{name:z.name,description:z.description,parameters:z.inputSchema,strict:X?Y:void 0}});break;default:J.push({type:"unsupported-tool",tool:z});break}if(Q==null)return{tools:U,toolChoice:void 0,toolWarnings:J};let G=Q.type;switch(G){case"auto":case"none":case"required":return{tools:U,toolChoice:G,toolWarnings:J};case"tool":return{tools:U,toolChoice:{type:"function",function:{name:Q.toolName}},toolWarnings:J};default:throw new K$({functionality:`tool choice type: ${G}`})}}var Yy=class{constructor($,Q){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=$,this.config=Q}get provider(){return this.config.provider}async getArgs({prompt:$,maxOutputTokens:Q,temperature:X,topP:Y,topK:J,frequencyPenalty:U,presencePenalty:G,stopSequences:z,responseFormat:H,seed:W,tools:j,toolChoice:N,providerOptions:K}){var w,B,D,F;let V=[],O=(w=await Z$({provider:"openai",providerOptions:K,schema:Xy}))!=null?w:{},A=(B=O.structuredOutputs)!=null?B:!0;if(J!=null)V.push({type:"unsupported-setting",setting:"topK"});if((H==null?void 0:H.type)==="json"&&H.schema!=null&&!A)V.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{messages:L,warnings:I}=ef({prompt:$,systemMessageMode:Gy(this.modelId)});V.push(...I);let P=(D=O.strictJsonSchema)!=null?D:!1,v={model:this.modelId,logit_bias:O.logitBias,logprobs:O.logprobs===!0||typeof O.logprobs==="number"?!0:void 0,top_logprobs:typeof O.logprobs==="number"?O.logprobs:typeof O.logprobs==="boolean"?O.logprobs?0:void 0:void 0,user:O.user,parallel_tool_calls:O.parallelToolCalls,max_tokens:Q,temperature:X,top_p:Y,frequency_penalty:U,presence_penalty:G,response_format:(H==null?void 0:H.type)==="json"?A&&H.schema!=null?{type:"json_schema",json_schema:{schema:H.schema,strict:P,name:(F=H.name)!=null?F:"response",description:H.description}}:{type:"json_object"}:void 0,stop:z,seed:W,verbosity:O.textVerbosity,max_completion_tokens:O.maxCompletionTokens,store:O.store,metadata:O.metadata,prediction:O.prediction,reasoning_effort:O.reasoningEffort,service_tier:O.serviceTier,prompt_cache_key:O.promptCacheKey,safety_identifier:O.safetyIdentifier,messages:L};if(PD(this.modelId)){if(v.temperature!=null)v.temperature=void 0,V.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"});if(v.top_p!=null)v.top_p=void 0,V.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"});if(v.frequency_penalty!=null)v.frequency_penalty=void 0,V.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"});if(v.presence_penalty!=null)v.presence_penalty=void 0,V.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"});if(v.logit_bias!=null)v.logit_bias=void 0,V.push({type:"other",message:"logitBias is not supported for reasoning models"});if(v.logprobs!=null)v.logprobs=void 0,V.push({type:"other",message:"logprobs is not supported for reasoning models"});if(v.top_logprobs!=null)v.top_logprobs=void 0,V.push({type:"other",message:"topLogprobs is not supported for reasoning models"});if(v.max_tokens!=null){if(v.max_completion_tokens==null)v.max_completion_tokens=v.max_tokens;v.max_tokens=void 0}}else if(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview")){if(v.temperature!=null)v.temperature=void 0,V.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})}if(O.serviceTier==="flex"&&!Uy(this.modelId))V.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),v.service_tier=void 0;if(O.serviceTier==="priority"&&!qy(this.modelId))V.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),v.service_tier=void 0;let{tools:Z,toolChoice:R,toolWarnings:C}=Jy({tools:j,toolChoice:N,structuredOutputs:A,strictJsonSchema:P});return{args:{...v,tools:Z,tool_choice:R},warnings:[...V,...C]}}async doGenerate($){var Q,X,Y,J,U,G,z,H,W,j,N,K,w,B;let{args:D,warnings:F}=await this.getArgs($),{responseHeaders:V,value:O,rawValue:A}=await L$({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),body:D,failedResponseHandler:j0,successfulResponseHandler:M$($y),abortSignal:$.abortSignal,fetch:this.config.fetch}),L=O.choices[0],I=[],P=L.message.content;if(P!=null&&P.length>0)I.push({type:"text",text:P});for(let C of(Q=L.message.tool_calls)!=null?Q:[])I.push({type:"tool-call",toolCallId:(X=C.id)!=null?X:p$(),toolName:C.function.name,input:C.function.arguments});for(let C of(Y=L.message.annotations)!=null?Y:[])I.push({type:"source",sourceType:"url",id:p$(),url:C.url,title:C.title});let v=(J=O.usage)==null?void 0:J.completion_tokens_details,Z=(U=O.usage)==null?void 0:U.prompt_tokens_details,R={openai:{}};if((v==null?void 0:v.accepted_prediction_tokens)!=null)R.openai.acceptedPredictionTokens=v==null?void 0:v.accepted_prediction_tokens;if((v==null?void 0:v.rejected_prediction_tokens)!=null)R.openai.rejectedPredictionTokens=v==null?void 0:v.rejected_prediction_tokens;if(((G=L.logprobs)==null?void 0:G.content)!=null)R.openai.logprobs=L.logprobs.content;return{content:I,finishReason:DD(L.finish_reason),usage:{inputTokens:(H=(z=O.usage)==null?void 0:z.prompt_tokens)!=null?H:void 0,outputTokens:(j=(W=O.usage)==null?void 0:W.completion_tokens)!=null?j:void 0,totalTokens:(K=(N=O.usage)==null?void 0:N.total_tokens)!=null?K:void 0,reasoningTokens:(w=v==null?void 0:v.reasoning_tokens)!=null?w:void 0,cachedInputTokens:(B=Z==null?void 0:Z.cached_tokens)!=null?B:void 0},request:{body:D},response:{...BD(O),headers:V,body:A},warnings:F,providerMetadata:R}}async doStream($){let{args:Q,warnings:X}=await this.getArgs($),Y={...Q,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:J,value:U}=await L$({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),body:Y,failedResponseHandler:j0,successfulResponseHandler:_6(Qy),abortSignal:$.abortSignal,fetch:this.config.fetch}),G=[],z="unknown",H={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},W=!0,j=!1,N={openai:{}};return{stream:U.pipeThrough(new TransformStream({start(K){K.enqueue({type:"stream-start",warnings:X})},transform(K,w){var B,D,F,V,O,A,L,I,P,v,Z,R,C,S,n,c,T,y,f,l,N$,D$,U$,v$;if($.includeRawChunks)w.enqueue({type:"raw",rawValue:K.rawValue});if(!K.success){z="error",w.enqueue({type:"error",error:K.error});return}let V$=K.value;if("error"in V$){z="error",w.enqueue({type:"error",error:V$.error});return}if(W)W=!1,w.enqueue({type:"response-metadata",...BD(V$)});if(V$.usage!=null){if(H.inputTokens=(B=V$.usage.prompt_tokens)!=null?B:void 0,H.outputTokens=(D=V$.usage.completion_tokens)!=null?D:void 0,H.totalTokens=(F=V$.usage.total_tokens)!=null?F:void 0,H.reasoningTokens=(O=(V=V$.usage.completion_tokens_details)==null?void 0:V.reasoning_tokens)!=null?O:void 0,H.cachedInputTokens=(L=(A=V$.usage.prompt_tokens_details)==null?void 0:A.cached_tokens)!=null?L:void 0,((I=V$.usage.completion_tokens_details)==null?void 0:I.accepted_prediction_tokens)!=null)N.openai.acceptedPredictionTokens=(P=V$.usage.completion_tokens_details)==null?void 0:P.accepted_prediction_tokens;if(((v=V$.usage.completion_tokens_details)==null?void 0:v.rejected_prediction_tokens)!=null)N.openai.rejectedPredictionTokens=(Z=V$.usage.completion_tokens_details)==null?void 0:Z.rejected_prediction_tokens}let r=V$.choices[0];if((r==null?void 0:r.finish_reason)!=null)z=DD(r.finish_reason);if(((R=r==null?void 0:r.logprobs)==null?void 0:R.content)!=null)N.openai.logprobs=r.logprobs.content;if((r==null?void 0:r.delta)==null)return;let E=r.delta;if(E.content!=null){if(!j)w.enqueue({type:"text-start",id:"0"}),j=!0;w.enqueue({type:"text-delta",id:"0",delta:E.content})}if(E.tool_calls!=null)for(let s of E.tool_calls){let N6=s.index;if(G[N6]==null){if(s.type!=="function")throw new bY({data:s,message:"Expected 'function' type."});if(s.id==null)throw new bY({data:s,message:"Expected 'id' to be a string."});if(((C=s.function)==null?void 0:C.name)==null)throw new bY({data:s,message:"Expected 'function.name' to be a string."});w.enqueue({type:"tool-input-start",id:s.id,toolName:s.function.name}),G[N6]={id:s.id,type:"function",function:{name:s.function.name,arguments:(S=s.function.arguments)!=null?S:""},hasFinished:!1};let a$=G[N6];if(((n=a$.function)==null?void 0:n.name)!=null&&((c=a$.function)==null?void 0:c.arguments)!=null){if(a$.function.arguments.length>0)w.enqueue({type:"tool-input-delta",id:a$.id,delta:a$.function.arguments});if(XW(a$.function.arguments))w.enqueue({type:"tool-input-end",id:a$.id}),w.enqueue({type:"tool-call",toolCallId:(T=a$.id)!=null?T:p$(),toolName:a$.function.name,input:a$.function.arguments}),a$.hasFinished=!0}continue}let y$=G[N6];if(y$.hasFinished)continue;if(((y=s.function)==null?void 0:y.arguments)!=null)y$.function.arguments+=(l=(f=s.function)==null?void 0:f.arguments)!=null?l:"";if(w.enqueue({type:"tool-input-delta",id:y$.id,delta:(N$=s.function.arguments)!=null?N$:""}),((D$=y$.function)==null?void 0:D$.name)!=null&&((U$=y$.function)==null?void 0:U$.arguments)!=null&&XW(y$.function.arguments))w.enqueue({type:"tool-input-end",id:y$.id}),w.enqueue({type:"tool-call",toolCallId:(v$=y$.id)!=null?v$:p$(),toolName:y$.function.name,input:y$.function.arguments}),y$.hasFinished=!0}if(E.annotations!=null)for(let s of E.annotations)w.enqueue({type:"source",sourceType:"url",id:p$(),url:s.url,title:s.title})},flush(K){if(j)K.enqueue({type:"text-end",id:"0"});K.enqueue({type:"finish",finishReason:z,usage:H,...N!=null?{providerMetadata:N}:{}})}})),request:{body:Y},response:{headers:J}}}};function PD($){return($.startsWith("o")||$.startsWith("gpt-5"))&&!$.startsWith("gpt-5-chat")}function Uy($){return $.startsWith("o3")||$.startsWith("o4-mini")||$.startsWith("gpt-5")&&!$.startsWith("gpt-5-chat")}function qy($){return $.startsWith("gpt-4")||$.startsWith("gpt-5-mini")||$.startsWith("gpt-5")&&!$.startsWith("gpt-5-nano")&&!$.startsWith("gpt-5-chat")||$.startsWith("o3")||$.startsWith("o4-mini")}function Gy($){var Q,X;if(!PD($))return"system";return(X=(Q=zy[$])==null?void 0:Q.systemMessageMode)!=null?X:"developer"}var zy={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function Wy({prompt:$,user:Q="user",assistant:X="assistant"}){let Y="";if($[0].role==="system")Y+=`${$[0].content}

`,$=$.slice(1);for(let{role:J,content:U}of $)switch(J){case"system":throw new R0({message:"Unexpected system message in prompt: ${content}",prompt:$});case"user":{let G=U.map((z)=>{switch(z.type){case"text":return z.text}}).filter(Boolean).join("");Y+=`${Q}:
${G}

`;break}case"assistant":{let G=U.map((z)=>{switch(z.type){case"text":return z.text;case"tool-call":throw new K$({functionality:"tool-call messages"})}}).join("");Y+=`${X}:
${G}

`;break}case"tool":throw new K$({functionality:"tool messages"});default:throw Error(`Unsupported role: ${J}`)}return Y+=`${X}:
`,{prompt:Y,stopSequences:[`
${Q}:`]}}function OD({id:$,model:Q,created:X}){return{id:$!=null?$:void 0,modelId:Q!=null?Q:void 0,timestamp:X!=null?new Date(X*1000):void 0}}function AD($){switch($){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Hy=J$(()=>x(q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({text:q.string(),finish_reason:q.string(),logprobs:q.object({tokens:q.array(q.string()),token_logprobs:q.array(q.number()),top_logprobs:q.array(q.record(q.string(),q.number())).nullish()}).nullish()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number(),total_tokens:q.number()}).nullish()}))),jy=J$(()=>x(q.union([q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({text:q.string(),finish_reason:q.string().nullish(),index:q.number(),logprobs:q.object({tokens:q.array(q.string()),token_logprobs:q.array(q.number()),top_logprobs:q.array(q.record(q.string(),q.number())).nullish()}).nullish()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number(),total_tokens:q.number()}).nullish()}),UW]))),FD=J$(()=>x(q.object({echo:q.boolean().optional(),logitBias:q.record(q.string(),q.number()).optional(),suffix:q.string().optional(),user:q.string().optional(),logprobs:q.union([q.boolean(),q.number()]).optional()}))),wy=class{constructor($,Q){this.specificationVersion="v2",this.supportedUrls={},this.modelId=$,this.config=Q}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:$,maxOutputTokens:Q,temperature:X,topP:Y,topK:J,frequencyPenalty:U,presencePenalty:G,stopSequences:z,responseFormat:H,tools:W,toolChoice:j,seed:N,providerOptions:K}){let w=[],B={...await Z$({provider:"openai",providerOptions:K,schema:FD}),...await Z$({provider:this.providerOptionsName,providerOptions:K,schema:FD})};if(J!=null)w.push({type:"unsupported-setting",setting:"topK"});if(W==null?void 0:W.length)w.push({type:"unsupported-setting",setting:"tools"});if(j!=null)w.push({type:"unsupported-setting",setting:"toolChoice"});if(H!=null&&H.type!=="text")w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:D,stopSequences:F}=Wy({prompt:$}),V=[...F!=null?F:[],...z!=null?z:[]];return{args:{model:this.modelId,echo:B.echo,logit_bias:B.logitBias,logprobs:(B==null?void 0:B.logprobs)===!0?0:(B==null?void 0:B.logprobs)===!1?void 0:B==null?void 0:B.logprobs,suffix:B.suffix,user:B.user,max_tokens:Q,temperature:X,top_p:Y,frequency_penalty:U,presence_penalty:G,seed:N,prompt:D,stop:V.length>0?V:void 0},warnings:w}}async doGenerate($){var Q,X,Y;let{args:J,warnings:U}=await this.getArgs($),{responseHeaders:G,value:z,rawValue:H}=await L$({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),body:J,failedResponseHandler:j0,successfulResponseHandler:M$(Hy),abortSignal:$.abortSignal,fetch:this.config.fetch}),W=z.choices[0],j={openai:{}};if(W.logprobs!=null)j.openai.logprobs=W.logprobs;return{content:[{type:"text",text:W.text}],usage:{inputTokens:(Q=z.usage)==null?void 0:Q.prompt_tokens,outputTokens:(X=z.usage)==null?void 0:X.completion_tokens,totalTokens:(Y=z.usage)==null?void 0:Y.total_tokens},finishReason:AD(W.finish_reason),request:{body:J},response:{...OD(z),headers:G,body:H},providerMetadata:j,warnings:U}}async doStream($){let{args:Q,warnings:X}=await this.getArgs($),Y={...Q,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:J,value:U}=await L$({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),body:Y,failedResponseHandler:j0,successfulResponseHandler:_6(jy),abortSignal:$.abortSignal,fetch:this.config.fetch}),G="unknown",z={openai:{}},H={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},W=!0;return{stream:U.pipeThrough(new TransformStream({start(j){j.enqueue({type:"stream-start",warnings:X})},transform(j,N){if($.includeRawChunks)N.enqueue({type:"raw",rawValue:j.rawValue});if(!j.success){G="error",N.enqueue({type:"error",error:j.error});return}let K=j.value;if("error"in K){G="error",N.enqueue({type:"error",error:K.error});return}if(W)W=!1,N.enqueue({type:"response-metadata",...OD(K)}),N.enqueue({type:"text-start",id:"0"});if(K.usage!=null)H.inputTokens=K.usage.prompt_tokens,H.outputTokens=K.usage.completion_tokens,H.totalTokens=K.usage.total_tokens;let w=K.choices[0];if((w==null?void 0:w.finish_reason)!=null)G=AD(w.finish_reason);if((w==null?void 0:w.logprobs)!=null)z.openai.logprobs=w.logprobs;if((w==null?void 0:w.text)!=null&&w.text.length>0)N.enqueue({type:"text-delta",id:"0",delta:w.text})},flush(j){if(!W)j.enqueue({type:"text-end",id:"0"});j.enqueue({type:"finish",finishReason:G,providerMetadata:z,usage:H})}})),request:{body:Y},response:{headers:J}}}},Ky=J$(()=>x(q.object({dimensions:q.number().optional(),user:q.string().optional()}))),Ny=J$(()=>x(q.object({data:q.array(q.object({embedding:q.array(q.number())})),usage:q.object({prompt_tokens:q.number()}).nullish()}))),Vy=class{constructor($,Q){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=$,this.config=Q}get provider(){return this.config.provider}async doEmbed({values:$,headers:Q,abortSignal:X,providerOptions:Y}){var J;if($.length>this.maxEmbeddingsPerCall)throw new xY({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:$});let U=(J=await Z$({provider:"openai",providerOptions:Y,schema:Ky}))!=null?J:{},{responseHeaders:G,value:z,rawValue:H}=await L$({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:F$(this.config.headers(),Q),body:{model:this.modelId,input:$,encoding_format:"float",dimensions:U.dimensions,user:U.user},failedResponseHandler:j0,successfulResponseHandler:M$(Ny),abortSignal:X,fetch:this.config.fetch});return{embeddings:z.data.map((W)=>W.embedding),usage:z.usage?{tokens:z.usage.prompt_tokens}:void 0,response:{headers:G,body:H}}}},By=J$(()=>x(q.object({data:q.array(q.object({b64_json:q.string(),revised_prompt:q.string().optional()}))}))),Dy={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},Oy=new Set(["gpt-image-1","gpt-image-1-mini"]),Ay=class{constructor($,Q){this.modelId=$,this.config=Q,this.specificationVersion="v2"}get maxImagesPerCall(){var $;return($=Dy[this.modelId])!=null?$:1}get provider(){return this.config.provider}async doGenerate({prompt:$,n:Q,size:X,aspectRatio:Y,seed:J,providerOptions:U,headers:G,abortSignal:z}){var H,W,j,N;let K=[];if(Y!=null)K.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."});if(J!=null)K.push({type:"unsupported-setting",setting:"seed"});let w=(j=(W=(H=this.config._internal)==null?void 0:H.currentDate)==null?void 0:W.call(H))!=null?j:new Date,{value:B,responseHeaders:D}=await L$({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:F$(this.config.headers(),G),body:{model:this.modelId,prompt:$,n:Q,size:X,...(N=U.openai)!=null?N:{},...!Oy.has(this.modelId)?{response_format:"b64_json"}:{}},failedResponseHandler:j0,successfulResponseHandler:M$(By),abortSignal:z,fetch:this.config.fetch});return{images:B.data.map((F)=>F.b64_json),warnings:K,response:{timestamp:w,modelId:this.modelId,headers:D},providerMetadata:{openai:{images:B.data.map((F)=>F.revised_prompt?{revisedPrompt:F.revised_prompt}:null)}}}}},Fy=d(()=>x(q.object({code:q.string().nullish(),containerId:q.string()}))),Ly=d(()=>x(q.object({outputs:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("logs"),logs:q.string()}),q.object({type:q.literal("image"),url:q.string()})])).nullish()}))),vy=d(()=>x(q.object({container:q.union([q.string(),q.object({fileIds:q.array(q.string()).optional()})]).optional()}))),Iy=d$({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:Fy,outputSchema:Ly}),Ey=($={})=>{return Iy($)},RD=q.object({key:q.string(),type:q.enum(["eq","ne","gt","gte","lt","lte"]),value:q.union([q.string(),q.number(),q.boolean()])}),ZD=q.object({type:q.enum(["and","or"]),filters:q.array(q.union([RD,q.lazy(()=>ZD)]))}),My=d(()=>x(q.object({vectorStoreIds:q.array(q.string()),maxNumResults:q.number().optional(),ranking:q.object({ranker:q.string().optional(),scoreThreshold:q.number().optional()}).optional(),filters:q.union([RD,ZD]).optional()}))),Py=d(()=>x(q.object({queries:q.array(q.string()),results:q.array(q.object({attributes:q.record(q.string(),q.unknown()),fileId:q.string(),filename:q.string(),score:q.number(),text:q.string()})).nullable()}))),Ry=d$({id:"openai.file_search",name:"file_search",inputSchema:q.object({}),outputSchema:Py}),Zy=d(()=>x(q.object({background:q.enum(["auto","opaque","transparent"]).optional(),inputFidelity:q.enum(["low","high"]).optional(),inputImageMask:q.object({fileId:q.string().optional(),imageUrl:q.string().optional()}).optional(),model:q.string().optional(),moderation:q.enum(["auto"]).optional(),outputCompression:q.number().int().min(0).max(100).optional(),outputFormat:q.enum(["png","jpeg","webp"]).optional(),partialImages:q.number().int().min(0).max(3).optional(),quality:q.enum(["auto","low","medium","high"]).optional(),size:q.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),Sy=d(()=>x(q.object({}))),Ty=d(()=>x(q.object({result:q.string()}))),Cy=d$({id:"openai.image_generation",name:"image_generation",inputSchema:Sy,outputSchema:Ty}),by=($={})=>{return Cy($)},SD=d(()=>x(q.object({action:q.object({type:q.literal("exec"),command:q.array(q.string()),timeoutMs:q.number().optional(),user:q.string().optional(),workingDirectory:q.string().optional(),env:q.record(q.string(),q.string()).optional()})}))),TD=d(()=>x(q.object({output:q.string()}))),xy=d$({id:"openai.local_shell",name:"local_shell",inputSchema:SD,outputSchema:TD}),ky=d(()=>x(q.object({filters:q.object({allowedDomains:q.array(q.string()).optional()}).optional(),searchContextSize:q.enum(["low","medium","high"]).optional(),userLocation:q.object({type:q.literal("approximate"),country:q.string().optional(),city:q.string().optional(),region:q.string().optional(),timezone:q.string().optional()}).optional()}))),fy=d(()=>x(q.object({}))),yy=d(()=>x(q.object({action:q.discriminatedUnion("type",[q.object({type:q.literal("search"),query:q.string().optional()}),q.object({type:q.literal("openPage"),url:q.string()}),q.object({type:q.literal("find"),url:q.string(),pattern:q.string()})])}))),_y=d$({id:"openai.web_search",name:"web_search",inputSchema:fy,outputSchema:yy}),gy=($={})=>_y($),hy=d(()=>x(q.object({searchContextSize:q.enum(["low","medium","high"]).optional(),userLocation:q.object({type:q.literal("approximate"),country:q.string().optional(),city:q.string().optional(),region:q.string().optional(),timezone:q.string().optional()}).optional()}))),my=d(()=>x(q.object({}))),cy=d(()=>x(q.object({action:q.discriminatedUnion("type",[q.object({type:q.literal("search"),query:q.string().optional()}),q.object({type:q.literal("openPage"),url:q.string()}),q.object({type:q.literal("find"),url:q.string(),pattern:q.string()})])}))),uy=d$({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:my,outputSchema:cy}),iy={codeInterpreter:Ey,fileSearch:Ry,imageGeneration:by,localShell:xy,webSearchPreview:uy,webSearch:gy};function LD($,Q){if(!Q)return!1;return Q.some((X)=>$.startsWith(X))}async function dy({prompt:$,systemMessageMode:Q,fileIdPrefixes:X,store:Y,hasLocalShellTool:J=!1}){var U,G,z,H;let W=[],j=[];for(let{role:N,content:K}of $)switch(N){case"system":{switch(Q){case"system":{W.push({role:"system",content:K});break}case"developer":{W.push({role:"developer",content:K});break}case"remove":{j.push({type:"other",message:"system messages are removed for this model"});break}default:throw Error(`Unsupported system message mode: ${Q}`)}break}case"user":{W.push({role:"user",content:K.map((w,B)=>{var D,F,V;switch(w.type){case"text":return{type:"input_text",text:w.text};case"file":if(w.mediaType.startsWith("image/")){let O=w.mediaType==="image/*"?"image/jpeg":w.mediaType;return{type:"input_image",...w.data instanceof URL?{image_url:w.data.toString()}:typeof w.data==="string"&&LD(w.data,X)?{file_id:w.data}:{image_url:`data:${O};base64,${L6(w.data)}`},detail:(F=(D=w.providerOptions)==null?void 0:D.openai)==null?void 0:F.imageDetail}}else if(w.mediaType==="application/pdf"){if(w.data instanceof URL)return{type:"input_file",file_url:w.data.toString()};return{type:"input_file",...typeof w.data==="string"&&LD(w.data,X)?{file_id:w.data}:{filename:(V=w.filename)!=null?V:`part-${B}.pdf`,file_data:`data:application/pdf;base64,${L6(w.data)}`}}}else throw new K$({functionality:`file part media type ${w.mediaType}`})}})});break}case"assistant":{let w={},B={};for(let D of K)switch(D.type){case"text":{let F=(G=(U=D.providerOptions)==null?void 0:U.openai)==null?void 0:G.itemId;if(Y&&F!=null){W.push({type:"item_reference",id:F});break}W.push({role:"assistant",content:[{type:"output_text",text:D.text}],id:F});break}case"tool-call":{if(B[D.toolCallId]=D,D.providerExecuted)break;let F=(H=(z=D.providerOptions)==null?void 0:z.openai)==null?void 0:H.itemId;if(Y&&F!=null){W.push({type:"item_reference",id:F});break}if(J&&D.toolName==="local_shell"){let V=await u$({value:D.input,schema:SD});W.push({type:"local_shell_call",call_id:D.toolCallId,id:F,action:{type:"exec",command:V.action.command,timeout_ms:V.action.timeoutMs,user:V.action.user,working_directory:V.action.workingDirectory,env:V.action.env}});break}W.push({type:"function_call",call_id:D.toolCallId,name:D.toolName,arguments:JSON.stringify(D.input),id:F});break}case"tool-result":{if(Y)W.push({type:"item_reference",id:D.toolCallId});else j.push({type:"other",message:`Results for OpenAI tool ${D.toolName} are not sent to the API when store is false`});break}case"reasoning":{let F=await Z$({provider:"openai",providerOptions:D.providerOptions,schema:ly}),V=F==null?void 0:F.itemId;if(V!=null){let O=w[V];if(Y){if(O===void 0)W.push({type:"item_reference",id:V}),w[V]={type:"reasoning",id:V,summary:[]}}else{let A=[];if(D.text.length>0)A.push({type:"summary_text",text:D.text});else if(O!==void 0)j.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(D)}.`});if(O===void 0)w[V]={type:"reasoning",id:V,encrypted_content:F==null?void 0:F.reasoningEncryptedContent,summary:A},W.push(w[V]);else if(O.summary.push(...A),(F==null?void 0:F.reasoningEncryptedContent)!=null)O.encrypted_content=F.reasoningEncryptedContent}}else j.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(D)}.`});break}}break}case"tool":{for(let w of K){let B=w.output;if(J&&w.toolName==="local_shell"&&B.type==="json"){let F=await u$({value:B.value,schema:TD});W.push({type:"local_shell_call_output",call_id:w.toolCallId,output:F.output});break}let D;switch(B.type){case"text":case"error-text":D=B.value;break;case"json":case"error-json":D=JSON.stringify(B.value);break;case"content":D=B.value.map((F)=>{switch(F.type){case"text":return{type:"input_text",text:F.text};case"media":return F.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${F.mediaType};base64,${F.data}`}:{type:"input_file",filename:"data",file_data:`data:${F.mediaType};base64,${F.data}`}}});break}W.push({type:"function_call_output",call_id:w.toolCallId,output:D})}break}default:throw Error(`Unsupported role: ${N}`)}return{input:W,warnings:j}}var ly=q.object({itemId:q.string().nullish(),reasoningEncryptedContent:q.string().nullish()});function vD({finishReason:$,hasFunctionCall:Q}){switch($){case void 0:case null:return Q?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return Q?"tool-calls":"unknown"}}var py=J$(()=>x(q.union([q.object({type:q.literal("response.output_text.delta"),item_id:q.string(),delta:q.string(),logprobs:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullish()}),q.object({type:q.enum(["response.completed","response.incomplete"]),response:q.object({incomplete_details:q.object({reason:q.string()}).nullish(),usage:q.object({input_tokens:q.number(),input_tokens_details:q.object({cached_tokens:q.number().nullish()}).nullish(),output_tokens:q.number(),output_tokens_details:q.object({reasoning_tokens:q.number().nullish()}).nullish()}),service_tier:q.string().nullish()})}),q.object({type:q.literal("response.created"),response:q.object({id:q.string(),created_at:q.number(),model:q.string(),service_tier:q.string().nullish()})}),q.object({type:q.literal("response.output_item.added"),output_index:q.number(),item:q.discriminatedUnion("type",[q.object({type:q.literal("message"),id:q.string()}),q.object({type:q.literal("reasoning"),id:q.string(),encrypted_content:q.string().nullish()}),q.object({type:q.literal("function_call"),id:q.string(),call_id:q.string(),name:q.string(),arguments:q.string()}),q.object({type:q.literal("web_search_call"),id:q.string(),status:q.string()}),q.object({type:q.literal("computer_call"),id:q.string(),status:q.string()}),q.object({type:q.literal("file_search_call"),id:q.string()}),q.object({type:q.literal("image_generation_call"),id:q.string()}),q.object({type:q.literal("code_interpreter_call"),id:q.string(),container_id:q.string(),code:q.string().nullable(),outputs:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("logs"),logs:q.string()}),q.object({type:q.literal("image"),url:q.string()})])).nullable(),status:q.string()})])}),q.object({type:q.literal("response.output_item.done"),output_index:q.number(),item:q.discriminatedUnion("type",[q.object({type:q.literal("message"),id:q.string()}),q.object({type:q.literal("reasoning"),id:q.string(),encrypted_content:q.string().nullish()}),q.object({type:q.literal("function_call"),id:q.string(),call_id:q.string(),name:q.string(),arguments:q.string(),status:q.literal("completed")}),q.object({type:q.literal("code_interpreter_call"),id:q.string(),code:q.string().nullable(),container_id:q.string(),outputs:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("logs"),logs:q.string()}),q.object({type:q.literal("image"),url:q.string()})])).nullable()}),q.object({type:q.literal("image_generation_call"),id:q.string(),result:q.string()}),q.object({type:q.literal("web_search_call"),id:q.string(),status:q.string(),action:q.discriminatedUnion("type",[q.object({type:q.literal("search"),query:q.string().nullish()}),q.object({type:q.literal("open_page"),url:q.string()}),q.object({type:q.literal("find"),url:q.string(),pattern:q.string()})])}),q.object({type:q.literal("file_search_call"),id:q.string(),queries:q.array(q.string()),results:q.array(q.object({attributes:q.record(q.string(),q.unknown()),file_id:q.string(),filename:q.string(),score:q.number(),text:q.string()})).nullish()}),q.object({type:q.literal("local_shell_call"),id:q.string(),call_id:q.string(),action:q.object({type:q.literal("exec"),command:q.array(q.string()),timeout_ms:q.number().optional(),user:q.string().optional(),working_directory:q.string().optional(),env:q.record(q.string(),q.string()).optional()})}),q.object({type:q.literal("computer_call"),id:q.string(),status:q.literal("completed")})])}),q.object({type:q.literal("response.function_call_arguments.delta"),item_id:q.string(),output_index:q.number(),delta:q.string()}),q.object({type:q.literal("response.image_generation_call.partial_image"),item_id:q.string(),output_index:q.number(),partial_image_b64:q.string()}),q.object({type:q.literal("response.code_interpreter_call_code.delta"),item_id:q.string(),output_index:q.number(),delta:q.string()}),q.object({type:q.literal("response.code_interpreter_call_code.done"),item_id:q.string(),output_index:q.number(),code:q.string()}),q.object({type:q.literal("response.output_text.annotation.added"),annotation:q.discriminatedUnion("type",[q.object({type:q.literal("url_citation"),url:q.string(),title:q.string()}),q.object({type:q.literal("file_citation"),file_id:q.string(),filename:q.string().nullish(),index:q.number().nullish(),start_index:q.number().nullish(),end_index:q.number().nullish(),quote:q.string().nullish()})])}),q.object({type:q.literal("response.reasoning_summary_part.added"),item_id:q.string(),summary_index:q.number()}),q.object({type:q.literal("response.reasoning_summary_text.delta"),item_id:q.string(),summary_index:q.number(),delta:q.string()}),q.object({type:q.literal("response.reasoning_summary_part.done"),item_id:q.string(),summary_index:q.number()}),q.object({type:q.literal("error"),code:q.string(),message:q.string(),param:q.string().nullish(),sequence_number:q.number()}),q.object({type:q.string()}).loose().transform(($)=>({type:"unknown_chunk",message:$.type}))]))),ny=J$(()=>x(q.object({id:q.string(),created_at:q.number(),error:q.object({code:q.string(),message:q.string()}).nullish(),model:q.string(),output:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("message"),role:q.literal("assistant"),id:q.string(),content:q.array(q.object({type:q.literal("output_text"),text:q.string(),logprobs:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullish(),annotations:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("url_citation"),start_index:q.number(),end_index:q.number(),url:q.string(),title:q.string()}),q.object({type:q.literal("file_citation"),file_id:q.string(),filename:q.string().nullish(),index:q.number().nullish(),start_index:q.number().nullish(),end_index:q.number().nullish(),quote:q.string().nullish()}),q.object({type:q.literal("container_file_citation")})]))}))}),q.object({type:q.literal("web_search_call"),id:q.string(),status:q.string(),action:q.discriminatedUnion("type",[q.object({type:q.literal("search"),query:q.string().nullish()}),q.object({type:q.literal("open_page"),url:q.string()}),q.object({type:q.literal("find"),url:q.string(),pattern:q.string()})])}),q.object({type:q.literal("file_search_call"),id:q.string(),queries:q.array(q.string()),results:q.array(q.object({attributes:q.record(q.string(),q.unknown()),file_id:q.string(),filename:q.string(),score:q.number(),text:q.string()})).nullish()}),q.object({type:q.literal("code_interpreter_call"),id:q.string(),code:q.string().nullable(),container_id:q.string(),outputs:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("logs"),logs:q.string()}),q.object({type:q.literal("image"),url:q.string()})])).nullable()}),q.object({type:q.literal("image_generation_call"),id:q.string(),result:q.string()}),q.object({type:q.literal("local_shell_call"),id:q.string(),call_id:q.string(),action:q.object({type:q.literal("exec"),command:q.array(q.string()),timeout_ms:q.number().optional(),user:q.string().optional(),working_directory:q.string().optional(),env:q.record(q.string(),q.string()).optional()})}),q.object({type:q.literal("function_call"),call_id:q.string(),name:q.string(),arguments:q.string(),id:q.string()}),q.object({type:q.literal("computer_call"),id:q.string(),status:q.string().optional()}),q.object({type:q.literal("reasoning"),id:q.string(),encrypted_content:q.string().nullish(),summary:q.array(q.object({type:q.literal("summary_text"),text:q.string()}))})])),service_tier:q.string().nullish(),incomplete_details:q.object({reason:q.string()}).nullish(),usage:q.object({input_tokens:q.number(),input_tokens_details:q.object({cached_tokens:q.number().nullish()}).nullish(),output_tokens:q.number(),output_tokens_details:q.object({reasoning_tokens:q.number().nullish()}).nullish()})}))),CD=20,ry=["o1","o1-2024-12-17","o3-mini","o3-mini-2025-01-31","o3","o3-2025-04-16","o4-mini","o4-mini-2025-04-16","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06"],rs=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...ry],oy=J$(()=>x(q.object({include:q.array(q.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:q.string().nullish(),logprobs:q.union([q.boolean(),q.number().min(1).max(CD)]).optional(),maxToolCalls:q.number().nullish(),metadata:q.any().nullish(),parallelToolCalls:q.boolean().nullish(),previousResponseId:q.string().nullish(),promptCacheKey:q.string().nullish(),reasoningEffort:q.string().nullish(),reasoningSummary:q.string().nullish(),safetyIdentifier:q.string().nullish(),serviceTier:q.enum(["auto","flex","priority","default"]).nullish(),store:q.boolean().nullish(),strictJsonSchema:q.boolean().nullish(),textVerbosity:q.enum(["low","medium","high"]).nullish(),truncation:q.enum(["auto","disabled"]).nullish(),user:q.string().nullish()})));async function ay({tools:$,toolChoice:Q,strictJsonSchema:X}){$=($==null?void 0:$.length)?$:void 0;let Y=[];if($==null)return{tools:void 0,toolChoice:void 0,toolWarnings:Y};let J=[];for(let G of $)switch(G.type){case"function":J.push({type:"function",name:G.name,description:G.description,parameters:G.inputSchema,strict:X});break;case"provider-defined":{switch(G.id){case"openai.file_search":{let z=await u$({value:G.args,schema:My});J.push({type:"file_search",vector_store_ids:z.vectorStoreIds,max_num_results:z.maxNumResults,ranking_options:z.ranking?{ranker:z.ranking.ranker,score_threshold:z.ranking.scoreThreshold}:void 0,filters:z.filters});break}case"openai.local_shell":{J.push({type:"local_shell"});break}case"openai.web_search_preview":{let z=await u$({value:G.args,schema:hy});J.push({type:"web_search_preview",search_context_size:z.searchContextSize,user_location:z.userLocation});break}case"openai.web_search":{let z=await u$({value:G.args,schema:ky});J.push({type:"web_search",filters:z.filters!=null?{allowed_domains:z.filters.allowedDomains}:void 0,search_context_size:z.searchContextSize,user_location:z.userLocation});break}case"openai.code_interpreter":{let z=await u$({value:G.args,schema:vy});J.push({type:"code_interpreter",container:z.container==null?{type:"auto",file_ids:void 0}:typeof z.container==="string"?z.container:{type:"auto",file_ids:z.container.fileIds}});break}case"openai.image_generation":{let z=await u$({value:G.args,schema:Zy});J.push({type:"image_generation",background:z.background,input_fidelity:z.inputFidelity,input_image_mask:z.inputImageMask?{file_id:z.inputImageMask.fileId,image_url:z.inputImageMask.imageUrl}:void 0,model:z.model,size:z.size,quality:z.quality,moderation:z.moderation,output_format:z.outputFormat,output_compression:z.outputCompression});break}}break}default:Y.push({type:"unsupported-tool",tool:G});break}if(Q==null)return{tools:J,toolChoice:void 0,toolWarnings:Y};let U=Q.type;switch(U){case"auto":case"none":case"required":return{tools:J,toolChoice:U,toolWarnings:Y};case"tool":return{tools:J,toolChoice:Q.toolName==="code_interpreter"||Q.toolName==="file_search"||Q.toolName==="image_generation"||Q.toolName==="web_search_preview"||Q.toolName==="web_search"?{type:Q.toolName}:{type:"function",name:Q.toolName},toolWarnings:Y};default:throw new K$({functionality:`tool choice type: ${U}`})}}var ty=class{constructor($,Q){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=$,this.config=Q}get provider(){return this.config.provider}async getArgs({maxOutputTokens:$,temperature:Q,stopSequences:X,topP:Y,topK:J,presencePenalty:U,frequencyPenalty:G,seed:z,prompt:H,providerOptions:W,tools:j,toolChoice:N,responseFormat:K}){var w,B,D,F;let V=[],O=G_(this.modelId);if(J!=null)V.push({type:"unsupported-setting",setting:"topK"});if(z!=null)V.push({type:"unsupported-setting",setting:"seed"});if(U!=null)V.push({type:"unsupported-setting",setting:"presencePenalty"});if(G!=null)V.push({type:"unsupported-setting",setting:"frequencyPenalty"});if(X!=null)V.push({type:"unsupported-setting",setting:"stopSequences"});let A=await Z$({provider:"openai",providerOptions:W,schema:oy}),{input:L,warnings:I}=await dy({prompt:H,systemMessageMode:O.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(w=A==null?void 0:A.store)!=null?w:!0,hasLocalShellTool:R("openai.local_shell")});V.push(...I);let P=(B=A==null?void 0:A.strictJsonSchema)!=null?B:!1,v=A==null?void 0:A.include;function Z(l){if(v==null)v=[l];else if(!v.includes(l))v=[...v,l]}function R(l){return(j==null?void 0:j.find((N$)=>N$.type==="provider-defined"&&N$.id===l))!=null}let C=typeof(A==null?void 0:A.logprobs)==="number"?A==null?void 0:A.logprobs:(A==null?void 0:A.logprobs)===!0?CD:void 0;if(C)Z("message.output_text.logprobs");let S=(D=j==null?void 0:j.find((l)=>l.type==="provider-defined"&&(l.id==="openai.web_search"||l.id==="openai.web_search_preview")))==null?void 0:D.name;if(S)Z("web_search_call.action.sources");if(R("openai.code_interpreter"))Z("code_interpreter_call.outputs");let n=A==null?void 0:A.store;if(n===!1&&O.isReasoningModel)Z("reasoning.encrypted_content");let c={model:this.modelId,input:L,temperature:Q,top_p:Y,max_output_tokens:$,...((K==null?void 0:K.type)==="json"||(A==null?void 0:A.textVerbosity))&&{text:{...(K==null?void 0:K.type)==="json"&&{format:K.schema!=null?{type:"json_schema",strict:P,name:(F=K.name)!=null?F:"response",description:K.description,schema:K.schema}:{type:"json_object"}},...(A==null?void 0:A.textVerbosity)&&{verbosity:A.textVerbosity}}},max_tool_calls:A==null?void 0:A.maxToolCalls,metadata:A==null?void 0:A.metadata,parallel_tool_calls:A==null?void 0:A.parallelToolCalls,previous_response_id:A==null?void 0:A.previousResponseId,store:n,user:A==null?void 0:A.user,instructions:A==null?void 0:A.instructions,service_tier:A==null?void 0:A.serviceTier,include:v,prompt_cache_key:A==null?void 0:A.promptCacheKey,safety_identifier:A==null?void 0:A.safetyIdentifier,top_logprobs:C,truncation:A==null?void 0:A.truncation,...O.isReasoningModel&&((A==null?void 0:A.reasoningEffort)!=null||(A==null?void 0:A.reasoningSummary)!=null)&&{reasoning:{...(A==null?void 0:A.reasoningEffort)!=null&&{effort:A.reasoningEffort},...(A==null?void 0:A.reasoningSummary)!=null&&{summary:A.reasoningSummary}}}};if(O.isReasoningModel){if(c.temperature!=null)c.temperature=void 0,V.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"});if(c.top_p!=null)c.top_p=void 0,V.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})}else{if((A==null?void 0:A.reasoningEffort)!=null)V.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"});if((A==null?void 0:A.reasoningSummary)!=null)V.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})}if((A==null?void 0:A.serviceTier)==="flex"&&!O.supportsFlexProcessing)V.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete c.service_tier;if((A==null?void 0:A.serviceTier)==="priority"&&!O.supportsPriorityProcessing)V.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete c.service_tier;let{tools:T,toolChoice:y,toolWarnings:f}=await ay({tools:j,toolChoice:N,strictJsonSchema:P});return{webSearchToolName:S,args:{...c,tools:T,tool_choice:y},warnings:[...V,...f],store:n}}async doGenerate($){var Q,X,Y,J,U,G,z,H,W,j,N,K,w,B,D,F,V,O,A;let{args:L,warnings:I,webSearchToolName:P}=await this.getArgs($),v=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:Z,value:R,rawValue:C}=await L$({url:v,headers:F$(this.config.headers(),$.headers),body:L,failedResponseHandler:j0,successfulResponseHandler:M$(ny),abortSignal:$.abortSignal,fetch:this.config.fetch});if(R.error)throw new x$({message:R.error.message,url:v,requestBodyValues:L,statusCode:400,responseHeaders:Z,responseBody:C,isRetryable:!1});let S=[],n=[],c=!1;for(let y of R.output)switch(y.type){case"reasoning":{if(y.summary.length===0)y.summary.push({type:"summary_text",text:""});for(let f of y.summary)S.push({type:"reasoning",text:f.text,providerMetadata:{openai:{itemId:y.id,reasoningEncryptedContent:(Q=y.encrypted_content)!=null?Q:null}}});break}case"image_generation_call":{S.push({type:"tool-call",toolCallId:y.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),S.push({type:"tool-result",toolCallId:y.id,toolName:"image_generation",result:{result:y.result},providerExecuted:!0});break}case"local_shell_call":{S.push({type:"tool-call",toolCallId:y.call_id,toolName:"local_shell",input:JSON.stringify({action:y.action}),providerMetadata:{openai:{itemId:y.id}}});break}case"message":{for(let f of y.content){if(((Y=(X=$.providerOptions)==null?void 0:X.openai)==null?void 0:Y.logprobs)&&f.logprobs)n.push(f.logprobs);S.push({type:"text",text:f.text,providerMetadata:{openai:{itemId:y.id}}});for(let l of f.annotations)if(l.type==="url_citation")S.push({type:"source",sourceType:"url",id:(G=(U=(J=this.config).generateId)==null?void 0:U.call(J))!=null?G:p$(),url:l.url,title:l.title});else if(l.type==="file_citation")S.push({type:"source",sourceType:"document",id:(W=(H=(z=this.config).generateId)==null?void 0:H.call(z))!=null?W:p$(),mediaType:"text/plain",title:(N=(j=l.quote)!=null?j:l.filename)!=null?N:"Document",filename:(K=l.filename)!=null?K:l.file_id})}break}case"function_call":{c=!0,S.push({type:"tool-call",toolCallId:y.call_id,toolName:y.name,input:y.arguments,providerMetadata:{openai:{itemId:y.id}}});break}case"web_search_call":{S.push({type:"tool-call",toolCallId:y.id,toolName:P!=null?P:"web_search",input:JSON.stringify({}),providerExecuted:!0}),S.push({type:"tool-result",toolCallId:y.id,toolName:P!=null?P:"web_search",result:ED(y.action),providerExecuted:!0});break}case"computer_call":{S.push({type:"tool-call",toolCallId:y.id,toolName:"computer_use",input:"",providerExecuted:!0}),S.push({type:"tool-result",toolCallId:y.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:y.status||"completed"},providerExecuted:!0});break}case"file_search_call":{S.push({type:"tool-call",toolCallId:y.id,toolName:"file_search",input:"{}",providerExecuted:!0}),S.push({type:"tool-result",toolCallId:y.id,toolName:"file_search",result:{queries:y.queries,results:(B=(w=y.results)==null?void 0:w.map((f)=>({attributes:f.attributes,fileId:f.file_id,filename:f.filename,score:f.score,text:f.text})))!=null?B:null},providerExecuted:!0});break}case"code_interpreter_call":{S.push({type:"tool-call",toolCallId:y.id,toolName:"code_interpreter",input:JSON.stringify({code:y.code,containerId:y.container_id}),providerExecuted:!0}),S.push({type:"tool-result",toolCallId:y.id,toolName:"code_interpreter",result:{outputs:y.outputs},providerExecuted:!0});break}}let T={openai:{responseId:R.id}};if(n.length>0)T.openai.logprobs=n;if(typeof R.service_tier==="string")T.openai.serviceTier=R.service_tier;return{content:S,finishReason:vD({finishReason:(D=R.incomplete_details)==null?void 0:D.reason,hasFunctionCall:c}),usage:{inputTokens:R.usage.input_tokens,outputTokens:R.usage.output_tokens,totalTokens:R.usage.input_tokens+R.usage.output_tokens,reasoningTokens:(V=(F=R.usage.output_tokens_details)==null?void 0:F.reasoning_tokens)!=null?V:void 0,cachedInputTokens:(A=(O=R.usage.input_tokens_details)==null?void 0:O.cached_tokens)!=null?A:void 0},request:{body:L},response:{id:R.id,timestamp:new Date(R.created_at*1000),modelId:R.model,headers:Z,body:C},providerMetadata:T,warnings:I}}async doStream($){let{args:Q,warnings:X,webSearchToolName:Y,store:J}=await this.getArgs($),{responseHeaders:U,value:G}=await L$({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),body:{...Q,stream:!0},failedResponseHandler:j0,successfulResponseHandler:_6(py),abortSignal:$.abortSignal,fetch:this.config.fetch}),z=this,H="unknown",W={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},j=[],N=null,K={},w=!1,B={},D;return{stream:G.pipeThrough(new TransformStream({start(F){F.enqueue({type:"stream-start",warnings:X})},transform(F,V){var O,A,L,I,P,v,Z,R,C,S,n,c,T,y,f,l,N$,D$,U$,v$,V$,r;if($.includeRawChunks)V.enqueue({type:"raw",rawValue:F.rawValue});if(!F.success){H="error",V.enqueue({type:"error",error:F.error});return}let E=F.value;if(ID(E)){if(E.item.type==="function_call")K[E.output_index]={toolName:E.item.name,toolCallId:E.item.call_id},V.enqueue({type:"tool-input-start",id:E.item.call_id,toolName:E.item.name});else if(E.item.type==="web_search_call")K[E.output_index]={toolName:Y!=null?Y:"web_search",toolCallId:E.item.id},V.enqueue({type:"tool-input-start",id:E.item.id,toolName:Y!=null?Y:"web_search",providerExecuted:!0}),V.enqueue({type:"tool-input-end",id:E.item.id}),V.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"web_search",input:JSON.stringify({}),providerExecuted:!0});else if(E.item.type==="computer_call")K[E.output_index]={toolName:"computer_use",toolCallId:E.item.id},V.enqueue({type:"tool-input-start",id:E.item.id,toolName:"computer_use",providerExecuted:!0});else if(E.item.type==="code_interpreter_call")K[E.output_index]={toolName:"code_interpreter",toolCallId:E.item.id,codeInterpreter:{containerId:E.item.container_id}},V.enqueue({type:"tool-input-start",id:E.item.id,toolName:"code_interpreter",providerExecuted:!0}),V.enqueue({type:"tool-input-delta",id:E.item.id,delta:`{"containerId":"${E.item.container_id}","code":"`});else if(E.item.type==="file_search_call")V.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"file_search",input:"{}",providerExecuted:!0});else if(E.item.type==="image_generation_call")V.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0});else if(E.item.type==="message")V.enqueue({type:"text-start",id:E.item.id,providerMetadata:{openai:{itemId:E.item.id}}});else if(ID(E)&&E.item.type==="reasoning")B[E.item.id]={encryptedContent:E.item.encrypted_content,summaryParts:{0:"active"}},V.enqueue({type:"reasoning-start",id:`${E.item.id}:0`,providerMetadata:{openai:{itemId:E.item.id,reasoningEncryptedContent:(O=E.item.encrypted_content)!=null?O:null}}})}else if(ey(E)){if(E.item.type==="function_call")K[E.output_index]=void 0,w=!0,V.enqueue({type:"tool-input-end",id:E.item.call_id}),V.enqueue({type:"tool-call",toolCallId:E.item.call_id,toolName:E.item.name,input:E.item.arguments,providerMetadata:{openai:{itemId:E.item.id}}});else if(E.item.type==="web_search_call")K[E.output_index]=void 0,V.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"web_search",result:ED(E.item.action),providerExecuted:!0});else if(E.item.type==="computer_call")K[E.output_index]=void 0,V.enqueue({type:"tool-input-end",id:E.item.id}),V.enqueue({type:"tool-call",toolCallId:E.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),V.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:E.item.status||"completed"},providerExecuted:!0});else if(E.item.type==="file_search_call")K[E.output_index]=void 0,V.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"file_search",result:{queries:E.item.queries,results:(L=(A=E.item.results)==null?void 0:A.map((s)=>({attributes:s.attributes,fileId:s.file_id,filename:s.filename,score:s.score,text:s.text})))!=null?L:null},providerExecuted:!0});else if(E.item.type==="code_interpreter_call")K[E.output_index]=void 0,V.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"code_interpreter",result:{outputs:E.item.outputs},providerExecuted:!0});else if(E.item.type==="image_generation_call")V.enqueue({type:"tool-result",toolCallId:E.item.id,toolName:"image_generation",result:{result:E.item.result},providerExecuted:!0});else if(E.item.type==="local_shell_call")K[E.output_index]=void 0,V.enqueue({type:"tool-call",toolCallId:E.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:E.item.action.command,timeoutMs:E.item.action.timeout_ms,user:E.item.action.user,workingDirectory:E.item.action.working_directory,env:E.item.action.env}}),providerMetadata:{openai:{itemId:E.item.id}}});else if(E.item.type==="message")V.enqueue({type:"text-end",id:E.item.id});else if(E.item.type==="reasoning"){let s=B[E.item.id],N6=Object.entries(s.summaryParts).filter(([y$,a$])=>a$==="active"||a$==="can-conclude").map(([y$])=>y$);for(let y$ of N6)V.enqueue({type:"reasoning-end",id:`${E.item.id}:${y$}`,providerMetadata:{openai:{itemId:E.item.id,reasoningEncryptedContent:(I=E.item.encrypted_content)!=null?I:null}}});delete B[E.item.id]}}else if(X_(E)){let s=K[E.output_index];if(s!=null)V.enqueue({type:"tool-input-delta",id:s.toolCallId,delta:E.delta})}else if(J_(E)){let s=K[E.output_index];if(s!=null)V.enqueue({type:"tool-input-delta",id:s.toolCallId,delta:JSON.stringify(E.delta).slice(1,-1)})}else if(Y_(E)){let s=K[E.output_index];if(s!=null)V.enqueue({type:"tool-input-delta",id:s.toolCallId,delta:'"}'}),V.enqueue({type:"tool-input-end",id:s.toolCallId}),V.enqueue({type:"tool-call",toolCallId:s.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:E.code,containerId:s.codeInterpreter.containerId}),providerExecuted:!0})}else if(Q_(E))N=E.response.id,V.enqueue({type:"response-metadata",id:E.response.id,timestamp:new Date(E.response.created_at*1000),modelId:E.response.model});else if(sy(E)){if(V.enqueue({type:"text-delta",id:E.item_id,delta:E.delta}),((v=(P=$.providerOptions)==null?void 0:P.openai)==null?void 0:v.logprobs)&&E.logprobs)j.push(E.logprobs)}else if(E.type==="response.reasoning_summary_part.added"){if(E.summary_index>0){let s=B[E.item_id];s.summaryParts[E.summary_index]="active";for(let N6 of Object.keys(s.summaryParts))if(s.summaryParts[N6]==="can-conclude")V.enqueue({type:"reasoning-end",id:`${E.item_id}:${N6}`,providerMetadata:{openai:{itemId:E.item_id}}}),s.summaryParts[N6]="concluded";V.enqueue({type:"reasoning-start",id:`${E.item_id}:${E.summary_index}`,providerMetadata:{openai:{itemId:E.item_id,reasoningEncryptedContent:(R=(Z=B[E.item_id])==null?void 0:Z.encryptedContent)!=null?R:null}}})}}else if(E.type==="response.reasoning_summary_text.delta")V.enqueue({type:"reasoning-delta",id:`${E.item_id}:${E.summary_index}`,delta:E.delta,providerMetadata:{openai:{itemId:E.item_id}}});else if(E.type==="response.reasoning_summary_part.done")if(J)V.enqueue({type:"reasoning-end",id:`${E.item_id}:${E.summary_index}`,providerMetadata:{openai:{itemId:E.item_id}}}),B[E.item_id].summaryParts[E.summary_index]="concluded";else B[E.item_id].summaryParts[E.summary_index]="can-conclude";else if($_(E)){if(H=vD({finishReason:(C=E.response.incomplete_details)==null?void 0:C.reason,hasFunctionCall:w}),W.inputTokens=E.response.usage.input_tokens,W.outputTokens=E.response.usage.output_tokens,W.totalTokens=E.response.usage.input_tokens+E.response.usage.output_tokens,W.reasoningTokens=(n=(S=E.response.usage.output_tokens_details)==null?void 0:S.reasoning_tokens)!=null?n:void 0,W.cachedInputTokens=(T=(c=E.response.usage.input_tokens_details)==null?void 0:c.cached_tokens)!=null?T:void 0,typeof E.response.service_tier==="string")D=E.response.service_tier}else if(U_(E)){if(E.annotation.type==="url_citation")V.enqueue({type:"source",sourceType:"url",id:(l=(f=(y=z.config).generateId)==null?void 0:f.call(y))!=null?l:p$(),url:E.annotation.url,title:E.annotation.title});else if(E.annotation.type==="file_citation")V.enqueue({type:"source",sourceType:"document",id:(U$=(D$=(N$=z.config).generateId)==null?void 0:D$.call(N$))!=null?U$:p$(),mediaType:"text/plain",title:(V$=(v$=E.annotation.quote)!=null?v$:E.annotation.filename)!=null?V$:"Document",filename:(r=E.annotation.filename)!=null?r:E.annotation.file_id})}else if(q_(E))V.enqueue({type:"error",error:E})},flush(F){let V={openai:{responseId:N}};if(j.length>0)V.openai.logprobs=j;if(D!==void 0)V.openai.serviceTier=D;F.enqueue({type:"finish",finishReason:H,usage:W,providerMetadata:V})}})),request:{body:Q},response:{headers:U}}}};function sy($){return $.type==="response.output_text.delta"}function ey($){return $.type==="response.output_item.done"}function $_($){return $.type==="response.completed"||$.type==="response.incomplete"}function Q_($){return $.type==="response.created"}function X_($){return $.type==="response.function_call_arguments.delta"}function J_($){return $.type==="response.code_interpreter_call_code.delta"}function Y_($){return $.type==="response.code_interpreter_call_code.done"}function ID($){return $.type==="response.output_item.added"}function U_($){return $.type==="response.output_text.annotation.added"}function q_($){return $.type==="error"}function G_($){let Q=$.startsWith("o3")||$.startsWith("o4-mini")||$.startsWith("gpt-5")&&!$.startsWith("gpt-5-chat"),X=$.startsWith("gpt-4")||$.startsWith("gpt-5-mini")||$.startsWith("gpt-5")&&!$.startsWith("gpt-5-nano")&&!$.startsWith("gpt-5-chat")||$.startsWith("o3")||$.startsWith("o4-mini"),Y={systemMessageMode:"system",supportsFlexProcessing:Q,supportsPriorityProcessing:X};if($.startsWith("gpt-5-chat"))return{...Y,isReasoningModel:!1};if($.startsWith("o")||$.startsWith("gpt-5")||$.startsWith("codex-")||$.startsWith("computer-use")){if($.startsWith("o1-mini")||$.startsWith("o1-preview"))return{...Y,isReasoningModel:!0,systemMessageMode:"remove"};return{...Y,isReasoningModel:!0,systemMessageMode:"developer"}}return{...Y,isReasoningModel:!1}}function ED($){var Q;switch($.type){case"search":return{action:{type:"search",query:(Q=$.query)!=null?Q:void 0}};case"open_page":return{action:{type:"openPage",url:$.url}};case"find":return{action:{type:"find",url:$.url,pattern:$.pattern}}}}var z_=J$(()=>x(q.object({instructions:q.string().nullish(),speed:q.number().min(0.25).max(4).default(1).nullish()}))),W_=class{constructor($,Q){this.modelId=$,this.config=Q,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:$,voice:Q="alloy",outputFormat:X="mp3",speed:Y,instructions:J,language:U,providerOptions:G}){let z=[],H=await Z$({provider:"openai",providerOptions:G,schema:z_}),W={model:this.modelId,input:$,voice:Q,response_format:"mp3",speed:Y,instructions:J};if(X)if(["mp3","opus","aac","flac","wav","pcm"].includes(X))W.response_format=X;else z.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${X}. Using mp3 instead.`});if(H){let j={};for(let N in j){let K=j[N];if(K!==void 0)W[N]=K}}if(U)z.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${U}" was ignored.`});return{requestBody:W,warnings:z}}async doGenerate($){var Q,X,Y;let J=(Y=(X=(Q=this.config._internal)==null?void 0:Q.currentDate)==null?void 0:X.call(Q))!=null?Y:new Date,{requestBody:U,warnings:G}=await this.getArgs($),{value:z,responseHeaders:H,rawValue:W}=await L$({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),body:U,failedResponseHandler:j0,successfulResponseHandler:jD(),abortSignal:$.abortSignal,fetch:this.config.fetch});return{audio:z,warnings:G,request:{body:JSON.stringify(U)},response:{timestamp:J,modelId:this.modelId,headers:H,body:W}}}},H_=J$(()=>x(q.object({text:q.string(),language:q.string().nullish(),duration:q.number().nullish(),words:q.array(q.object({word:q.string(),start:q.number(),end:q.number()})).nullish(),segments:q.array(q.object({id:q.number(),seek:q.number(),start:q.number(),end:q.number(),text:q.string(),tokens:q.array(q.number()),temperature:q.number(),avg_logprob:q.number(),compression_ratio:q.number(),no_speech_prob:q.number()})).nullish()}))),j_=J$(()=>x(q.object({include:q.array(q.string()).optional(),language:q.string().optional(),prompt:q.string().optional(),temperature:q.number().min(0).max(1).default(0).optional(),timestampGranularities:q.array(q.enum(["word","segment"])).default(["segment"]).optional()}))),MD={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},w_=class{constructor($,Q){this.modelId=$,this.config=Q,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:$,mediaType:Q,providerOptions:X}){let Y=[],J=await Z$({provider:"openai",providerOptions:X,schema:j_}),U=new FormData,G=$ instanceof Uint8Array?new Blob([$]):new Blob([z1($)]);U.append("model",this.modelId);let z=GD(Q);if(U.append("file",new File([G],"audio",{type:Q}),`audio.${z}`),J){let H={include:J.include,language:J.language,prompt:J.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:J.temperature,timestamp_granularities:J.timestampGranularities};for(let[W,j]of Object.entries(H))if(j!=null)if(Array.isArray(j))for(let N of j)U.append(`${W}[]`,String(N));else U.append(W,String(j))}return{formData:U,warnings:Y}}async doGenerate($){var Q,X,Y,J,U,G,z,H;let W=(Y=(X=(Q=this.config._internal)==null?void 0:Q.currentDate)==null?void 0:X.call(Q))!=null?Y:new Date,{formData:j,warnings:N}=await this.getArgs($),{value:K,responseHeaders:w,rawValue:B}=await zD({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:F$(this.config.headers(),$.headers),formData:j,failedResponseHandler:j0,successfulResponseHandler:M$(H_),abortSignal:$.abortSignal,fetch:this.config.fetch}),D=K.language!=null&&K.language in MD?MD[K.language]:void 0;return{text:K.text,segments:(z=(G=(J=K.segments)==null?void 0:J.map((F)=>({text:F.text,startSecond:F.start,endSecond:F.end})))!=null?G:(U=K.words)==null?void 0:U.map((F)=>({text:F.word,startSecond:F.start,endSecond:F.end})))!=null?z:[],language:D,durationInSeconds:(H=K.duration)!=null?H:void 0,warnings:N,response:{timestamp:W,modelId:this.modelId,headers:w,body:B}}}},K_="2.0.53";function qW($={}){var Q,X;let Y=(Q=W1(_0({settingValue:$.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?Q:"https://api.openai.com/v1",J=(X=$.name)!=null?X:"openai",U=()=>K6({Authorization:`Bearer ${$Q({apiKey:$.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":$.organization,"OpenAI-Project":$.project,...$.headers},`ai-sdk/openai/${K_}`),G=(D)=>new Yy(D,{provider:`${J}.chat`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch}),z=(D)=>new wy(D,{provider:`${J}.completion`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch}),H=(D)=>new Vy(D,{provider:`${J}.embedding`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch}),W=(D)=>new Ay(D,{provider:`${J}.image`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch}),j=(D)=>new w_(D,{provider:`${J}.transcription`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch}),N=(D)=>new W_(D,{provider:`${J}.speech`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch}),K=(D)=>{if(new.target)throw Error("The OpenAI model function cannot be called with the new keyword.");return w(D)},w=(D)=>{return new ty(D,{provider:`${J}.responses`,url:({path:F})=>`${Y}${F}`,headers:U,fetch:$.fetch,fileIdPrefixes:["file-"]})},B=function(D){return K(D)};return B.languageModel=K,B.chat=G,B.completion=z,B.responses=w,B.embedding=H,B.textEmbedding=H,B.textEmbeddingModel=H,B.image=W,B.imageModel=W,B.transcription=j,B.transcriptionModel=j,B.speech=N,B.speechModel=N,B.tools=iy,B}var Ue=qW();var N_="2.0.35",V_=d(()=>x(q.object({type:q.literal("error"),error:q.object({type:q.string(),message:q.string()})}))),bD=F6({errorSchema:V_,errorToMessage:($)=>$.error.message}),B_=d(()=>x(q.object({type:q.literal("message"),id:q.string().nullish(),model:q.string().nullish(),content:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("text"),text:q.string(),citations:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("web_search_result_location"),cited_text:q.string(),url:q.string(),title:q.string(),encrypted_index:q.string()}),q.object({type:q.literal("page_location"),cited_text:q.string(),document_index:q.number(),document_title:q.string().nullable(),start_page_number:q.number(),end_page_number:q.number()}),q.object({type:q.literal("char_location"),cited_text:q.string(),document_index:q.number(),document_title:q.string().nullable(),start_char_index:q.number(),end_char_index:q.number()})])).optional()}),q.object({type:q.literal("thinking"),thinking:q.string(),signature:q.string()}),q.object({type:q.literal("redacted_thinking"),data:q.string()}),q.object({type:q.literal("tool_use"),id:q.string(),name:q.string(),input:q.unknown()}),q.object({type:q.literal("server_tool_use"),id:q.string(),name:q.string(),input:q.record(q.string(),q.unknown()).nullish()}),q.object({type:q.literal("web_fetch_tool_result"),tool_use_id:q.string(),content:q.union([q.object({type:q.literal("web_fetch_result"),url:q.string(),retrieved_at:q.string(),content:q.object({type:q.literal("document"),title:q.string().nullable(),citations:q.object({enabled:q.boolean()}).optional(),source:q.object({type:q.literal("text"),media_type:q.string(),data:q.string()})})}),q.object({type:q.literal("web_fetch_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("web_search_tool_result"),tool_use_id:q.string(),content:q.union([q.array(q.object({type:q.literal("web_search_result"),url:q.string(),title:q.string(),encrypted_content:q.string(),page_age:q.string().nullish()})),q.object({type:q.literal("web_search_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("code_execution_tool_result"),tool_use_id:q.string(),content:q.union([q.object({type:q.literal("code_execution_result"),stdout:q.string(),stderr:q.string(),return_code:q.number()}),q.object({type:q.literal("code_execution_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("bash_code_execution_tool_result"),tool_use_id:q.string(),content:q.discriminatedUnion("type",[q.object({type:q.literal("bash_code_execution_result"),content:q.array(q.object({type:q.literal("bash_code_execution_output"),file_id:q.string()})),stdout:q.string(),stderr:q.string(),return_code:q.number()}),q.object({type:q.literal("bash_code_execution_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("text_editor_code_execution_tool_result"),tool_use_id:q.string(),content:q.discriminatedUnion("type",[q.object({type:q.literal("text_editor_code_execution_tool_result_error"),error_code:q.string()}),q.object({type:q.literal("text_editor_code_execution_view_result"),content:q.string(),file_type:q.string(),num_lines:q.number().nullable(),start_line:q.number().nullable(),total_lines:q.number().nullable()}),q.object({type:q.literal("text_editor_code_execution_create_result"),is_file_update:q.boolean()}),q.object({type:q.literal("text_editor_code_execution_str_replace_result"),lines:q.array(q.string()).nullable(),new_lines:q.number().nullable(),new_start:q.number().nullable(),old_lines:q.number().nullable(),old_start:q.number().nullable()})])})])),stop_reason:q.string().nullish(),stop_sequence:q.string().nullish(),usage:q.looseObject({input_tokens:q.number(),output_tokens:q.number(),cache_creation_input_tokens:q.number().nullish(),cache_read_input_tokens:q.number().nullish()}),container:q.object({expires_at:q.string(),id:q.string(),skills:q.array(q.object({type:q.union([q.literal("anthropic"),q.literal("custom")]),skill_id:q.string(),version:q.string()})).nullish()}).nullish()}))),D_=d(()=>x(q.discriminatedUnion("type",[q.object({type:q.literal("message_start"),message:q.object({id:q.string().nullish(),model:q.string().nullish(),usage:q.looseObject({input_tokens:q.number(),cache_creation_input_tokens:q.number().nullish(),cache_read_input_tokens:q.number().nullish()})})}),q.object({type:q.literal("content_block_start"),index:q.number(),content_block:q.discriminatedUnion("type",[q.object({type:q.literal("text"),text:q.string()}),q.object({type:q.literal("thinking"),thinking:q.string()}),q.object({type:q.literal("tool_use"),id:q.string(),name:q.string()}),q.object({type:q.literal("redacted_thinking"),data:q.string()}),q.object({type:q.literal("server_tool_use"),id:q.string(),name:q.string(),input:q.record(q.string(),q.unknown()).nullish()}),q.object({type:q.literal("web_fetch_tool_result"),tool_use_id:q.string(),content:q.union([q.object({type:q.literal("web_fetch_result"),url:q.string(),retrieved_at:q.string(),content:q.object({type:q.literal("document"),title:q.string().nullable(),citations:q.object({enabled:q.boolean()}).optional(),source:q.object({type:q.literal("text"),media_type:q.string(),data:q.string()})})}),q.object({type:q.literal("web_fetch_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("web_search_tool_result"),tool_use_id:q.string(),content:q.union([q.array(q.object({type:q.literal("web_search_result"),url:q.string(),title:q.string(),encrypted_content:q.string(),page_age:q.string().nullish()})),q.object({type:q.literal("web_search_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("code_execution_tool_result"),tool_use_id:q.string(),content:q.union([q.object({type:q.literal("code_execution_result"),stdout:q.string(),stderr:q.string(),return_code:q.number()}),q.object({type:q.literal("code_execution_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("bash_code_execution_tool_result"),tool_use_id:q.string(),content:q.discriminatedUnion("type",[q.object({type:q.literal("bash_code_execution_result"),content:q.array(q.object({type:q.literal("bash_code_execution_output"),file_id:q.string()})),stdout:q.string(),stderr:q.string(),return_code:q.number()}),q.object({type:q.literal("bash_code_execution_tool_result_error"),error_code:q.string()})])}),q.object({type:q.literal("text_editor_code_execution_tool_result"),tool_use_id:q.string(),content:q.discriminatedUnion("type",[q.object({type:q.literal("text_editor_code_execution_tool_result_error"),error_code:q.string()}),q.object({type:q.literal("text_editor_code_execution_view_result"),content:q.string(),file_type:q.string(),num_lines:q.number().nullable(),start_line:q.number().nullable(),total_lines:q.number().nullable()}),q.object({type:q.literal("text_editor_code_execution_create_result"),is_file_update:q.boolean()}),q.object({type:q.literal("text_editor_code_execution_str_replace_result"),lines:q.array(q.string()).nullable(),new_lines:q.number().nullable(),new_start:q.number().nullable(),old_lines:q.number().nullable(),old_start:q.number().nullable()})])})])}),q.object({type:q.literal("content_block_delta"),index:q.number(),delta:q.discriminatedUnion("type",[q.object({type:q.literal("input_json_delta"),partial_json:q.string()}),q.object({type:q.literal("text_delta"),text:q.string()}),q.object({type:q.literal("thinking_delta"),thinking:q.string()}),q.object({type:q.literal("signature_delta"),signature:q.string()}),q.object({type:q.literal("citations_delta"),citation:q.discriminatedUnion("type",[q.object({type:q.literal("web_search_result_location"),cited_text:q.string(),url:q.string(),title:q.string(),encrypted_index:q.string()}),q.object({type:q.literal("page_location"),cited_text:q.string(),document_index:q.number(),document_title:q.string().nullable(),start_page_number:q.number(),end_page_number:q.number()}),q.object({type:q.literal("char_location"),cited_text:q.string(),document_index:q.number(),document_title:q.string().nullable(),start_char_index:q.number(),end_char_index:q.number()})])})])}),q.object({type:q.literal("content_block_stop"),index:q.number()}),q.object({type:q.literal("error"),error:q.object({type:q.string(),message:q.string()})}),q.object({type:q.literal("message_delta"),delta:q.object({stop_reason:q.string().nullish(),stop_sequence:q.string().nullish(),container:q.object({expires_at:q.string(),id:q.string(),skills:q.array(q.object({type:q.union([q.literal("anthropic"),q.literal("custom")]),skill_id:q.string(),version:q.string()})).nullish()}).nullish()}),usage:q.looseObject({output_tokens:q.number(),cache_creation_input_tokens:q.number().nullish()})}),q.object({type:q.literal("message_stop")}),q.object({type:q.literal("ping")})]))),O_=d(()=>x(q.object({signature:q.string().optional(),redactedData:q.string().optional()}))),xD=q.object({citations:q.object({enabled:q.boolean()}).optional(),title:q.string().optional(),context:q.string().optional()}),A_=q.object({sendReasoning:q.boolean().optional(),thinking:q.object({type:q.union([q.literal("enabled"),q.literal("disabled")]),budgetTokens:q.number().optional()}).optional(),disableParallelToolUse:q.boolean().optional(),cacheControl:q.object({type:q.literal("ephemeral"),ttl:q.union([q.literal("5m"),q.literal("1h")]).optional()}).optional(),container:q.object({id:q.string().optional(),skills:q.array(q.object({type:q.union([q.literal("anthropic"),q.literal("custom")]),skillId:q.string(),version:q.string().optional()})).optional()}).optional()}),kD=4;function F_($){var Q;let X=$==null?void 0:$.anthropic;return(Q=X==null?void 0:X.cacheControl)!=null?Q:X==null?void 0:X.cache_control}var GW=class{constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl($,Q){let X=F_($);if(!X)return;if(!Q.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${Q.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>kD){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${kD} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return X}getWarnings(){return this.warnings}},L_=d(()=>x(q.object({maxCharacters:q.number().optional()}))),v_=d(()=>x(q.object({command:q.enum(["view","create","str_replace","insert"]),path:q.string(),file_text:q.string().optional(),insert_line:q.number().int().optional(),new_str:q.string().optional(),old_str:q.string().optional(),view_range:q.array(q.number().int()).optional()}))),I_=i$({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:v_}),E_=($={})=>{return I_($)},M_=d(()=>x(q.object({maxUses:q.number().optional(),allowedDomains:q.array(q.string()).optional(),blockedDomains:q.array(q.string()).optional(),userLocation:q.object({type:q.literal("approximate"),city:q.string().optional(),region:q.string().optional(),country:q.string().optional(),timezone:q.string().optional()}).optional()}))),_D=d(()=>x(q.array(q.object({url:q.string(),title:q.string(),pageAge:q.string().nullable(),encryptedContent:q.string(),type:q.literal("web_search_result")})))),P_=d(()=>x(q.object({query:q.string()}))),R_=d$({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:P_,outputSchema:_D}),Z_=($={})=>{return R_($)},S_=d(()=>x(q.object({maxUses:q.number().optional(),allowedDomains:q.array(q.string()).optional(),blockedDomains:q.array(q.string()).optional(),citations:q.object({enabled:q.boolean()}).optional(),maxContentTokens:q.number().optional()}))),gD=d(()=>x(q.object({type:q.literal("web_fetch_result"),url:q.string(),content:q.object({type:q.literal("document"),title:q.string(),citations:q.object({enabled:q.boolean()}).optional(),source:q.union([q.object({type:q.literal("base64"),mediaType:q.literal("application/pdf"),data:q.string()}),q.object({type:q.literal("text"),mediaType:q.literal("text/plain"),data:q.string()})])}),retrievedAt:q.string().nullable()}))),T_=d(()=>x(q.object({url:q.string()}))),C_=d$({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:T_,outputSchema:gD}),b_=($={})=>{return C_($)};async function x_({tools:$,toolChoice:Q,disableParallelToolUse:X,cacheControlValidator:Y}){$=($==null?void 0:$.length)?$:void 0;let J=[],U=new Set,G=Y||new GW;if($==null)return{tools:void 0,toolChoice:void 0,toolWarnings:J,betas:U};let z=[];for(let W of $)switch(W.type){case"function":{let j=G.getCacheControl(W.providerOptions,{type:"tool definition",canCache:!0});z.push({name:W.name,description:W.description,input_schema:W.inputSchema,cache_control:j});break}case"provider-defined":{switch(W.id){case"anthropic.code_execution_20250522":{U.add("code-execution-2025-05-22"),z.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{U.add("code-execution-2025-08-25"),z.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{U.add("computer-use-2025-01-24"),z.push({name:"computer",type:"computer_20250124",display_width_px:W.args.displayWidthPx,display_height_px:W.args.displayHeightPx,display_number:W.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{U.add("computer-use-2024-10-22"),z.push({name:"computer",type:"computer_20241022",display_width_px:W.args.displayWidthPx,display_height_px:W.args.displayHeightPx,display_number:W.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{U.add("computer-use-2025-01-24"),z.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{U.add("computer-use-2024-10-22"),z.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{U.add("computer-use-2025-01-24"),z.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let j=await u$({value:W.args,schema:L_});z.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:j.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{U.add("computer-use-2025-01-24"),z.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{U.add("computer-use-2024-10-22"),z.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{U.add("context-management-2025-06-27"),z.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{U.add("web-fetch-2025-09-10");let j=await u$({value:W.args,schema:S_});z.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:j.maxUses,allowed_domains:j.allowedDomains,blocked_domains:j.blockedDomains,citations:j.citations,max_content_tokens:j.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let j=await u$({value:W.args,schema:M_});z.push({type:"web_search_20250305",name:"web_search",max_uses:j.maxUses,allowed_domains:j.allowedDomains,blocked_domains:j.blockedDomains,user_location:j.userLocation,cache_control:void 0});break}default:{J.push({type:"unsupported-tool",tool:W});break}}break}default:{J.push({type:"unsupported-tool",tool:W});break}}if(Q==null)return{tools:z,toolChoice:X?{type:"auto",disable_parallel_tool_use:X}:void 0,toolWarnings:J,betas:U};let H=Q.type;switch(H){case"auto":return{tools:z,toolChoice:{type:"auto",disable_parallel_tool_use:X},toolWarnings:J,betas:U};case"required":return{tools:z,toolChoice:{type:"any",disable_parallel_tool_use:X},toolWarnings:J,betas:U};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:J,betas:U};case"tool":return{tools:z,toolChoice:{type:"tool",name:Q.toolName,disable_parallel_tool_use:X},toolWarnings:J,betas:U};default:throw new K$({functionality:`tool choice type: ${H}`})}}var hD=d(()=>x(q.object({type:q.literal("code_execution_result"),stdout:q.string(),stderr:q.string(),return_code:q.number()}))),k_=d(()=>x(q.object({code:q.string()}))),f_=d$({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:k_,outputSchema:hD}),y_=($={})=>{return f_($)},mD=d(()=>x(q.discriminatedUnion("type",[q.object({type:q.literal("bash_code_execution_result"),content:q.array(q.object({type:q.literal("bash_code_execution_output"),file_id:q.string()})),stdout:q.string(),stderr:q.string(),return_code:q.number()}),q.object({type:q.literal("bash_code_execution_tool_result_error"),error_code:q.string()}),q.object({type:q.literal("text_editor_code_execution_tool_result_error"),error_code:q.string()}),q.object({type:q.literal("text_editor_code_execution_view_result"),content:q.string(),file_type:q.string(),num_lines:q.number().nullable(),start_line:q.number().nullable(),total_lines:q.number().nullable()}),q.object({type:q.literal("text_editor_code_execution_create_result"),is_file_update:q.boolean()}),q.object({type:q.literal("text_editor_code_execution_str_replace_result"),lines:q.array(q.string()).nullable(),new_lines:q.number().nullable(),new_start:q.number().nullable(),old_lines:q.number().nullable(),old_start:q.number().nullable()})]))),__=d(()=>x(q.discriminatedUnion("type",[q.object({type:q.literal("bash_code_execution"),command:q.string()}),q.discriminatedUnion("command",[q.object({type:q.literal("text_editor_code_execution"),command:q.literal("view"),path:q.string()}),q.object({type:q.literal("text_editor_code_execution"),command:q.literal("create"),path:q.string(),file_text:q.string().nullish()}),q.object({type:q.literal("text_editor_code_execution"),command:q.literal("str_replace"),path:q.string(),old_str:q.string(),new_str:q.string()})])]))),g_=d$({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:__,outputSchema:mD}),h_=($={})=>{return g_($)};function m_($){if(typeof $==="string")return Buffer.from($,"base64").toString("utf-8");if($ instanceof Uint8Array)return new TextDecoder().decode($);if($ instanceof URL)throw new K$({functionality:"URL-based text documents are not supported for citations"});throw new K$({functionality:`unsupported data type for text documents: ${typeof $}`})}async function c_({prompt:$,sendReasoning:Q,warnings:X,cacheControlValidator:Y}){var J,U,G,z,H;let W=new Set,j=u_($),N=Y||new GW,K=void 0,w=[];async function B(F){var V,O;let A=await Z$({provider:"anthropic",providerOptions:F,schema:xD});return(O=(V=A==null?void 0:A.citations)==null?void 0:V.enabled)!=null?O:!1}async function D(F){let V=await Z$({provider:"anthropic",providerOptions:F,schema:xD});return{title:V==null?void 0:V.title,context:V==null?void 0:V.context}}for(let F=0;F<j.length;F++){let V=j[F],O=F===j.length-1,A=V.type;switch(A){case"system":{if(K!=null)throw new K$({functionality:"Multiple system messages that are separated by user/assistant messages"});K=V.messages.map(({content:L,providerOptions:I})=>({type:"text",text:L,cache_control:N.getCacheControl(I,{type:"system message",canCache:!0})}));break}case"user":{let L=[];for(let I of V.messages){let{role:P,content:v}=I;switch(P){case"user":{for(let Z=0;Z<v.length;Z++){let R=v[Z],C=Z===v.length-1,S=(J=N.getCacheControl(R.providerOptions,{type:"user message part",canCache:!0}))!=null?J:C?N.getCacheControl(I.providerOptions,{type:"user message",canCache:!0}):void 0;switch(R.type){case"text":{L.push({type:"text",text:R.text,cache_control:S});break}case"file":{if(R.mediaType.startsWith("image/"))L.push({type:"image",source:R.data instanceof URL?{type:"url",url:R.data.toString()}:{type:"base64",media_type:R.mediaType==="image/*"?"image/jpeg":R.mediaType,data:L6(R.data)},cache_control:S});else if(R.mediaType==="application/pdf"){W.add("pdfs-2024-09-25");let n=await B(R.providerOptions),c=await D(R.providerOptions);L.push({type:"document",source:R.data instanceof URL?{type:"url",url:R.data.toString()}:{type:"base64",media_type:"application/pdf",data:L6(R.data)},title:(U=c.title)!=null?U:R.filename,...c.context&&{context:c.context},...n&&{citations:{enabled:!0}},cache_control:S})}else if(R.mediaType==="text/plain"){let n=await B(R.providerOptions),c=await D(R.providerOptions);L.push({type:"document",source:R.data instanceof URL?{type:"url",url:R.data.toString()}:{type:"text",media_type:"text/plain",data:m_(R.data)},title:(G=c.title)!=null?G:R.filename,...c.context&&{context:c.context},...n&&{citations:{enabled:!0}},cache_control:S})}else throw new K$({functionality:`media type: ${R.mediaType}`});break}}}break}case"tool":{for(let Z=0;Z<v.length;Z++){let R=v[Z],C=Z===v.length-1,S=(z=N.getCacheControl(R.providerOptions,{type:"tool result part",canCache:!0}))!=null?z:C?N.getCacheControl(I.providerOptions,{type:"tool result message",canCache:!0}):void 0,n=R.output,c;switch(n.type){case"content":c=n.value.map((T)=>{switch(T.type){case"text":return{type:"text",text:T.text};case"media":{if(T.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:T.mediaType,data:T.data}};if(T.mediaType==="application/pdf")return W.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:T.mediaType,data:T.data}};throw new K$({functionality:`media type: ${T.mediaType}`})}}});break;case"text":case"error-text":c=n.value;break;case"json":case"error-json":default:c=JSON.stringify(n.value);break}L.push({type:"tool_result",tool_use_id:R.toolCallId,content:c,is_error:n.type==="error-text"||n.type==="error-json"?!0:void 0,cache_control:S})}break}default:throw Error(`Unsupported role: ${P}`)}}w.push({role:"user",content:L});break}case"assistant":{let L=[];for(let I=0;I<V.messages.length;I++){let P=V.messages[I],v=I===V.messages.length-1,{content:Z}=P;for(let R=0;R<Z.length;R++){let C=Z[R],S=R===Z.length-1,n=(H=N.getCacheControl(C.providerOptions,{type:"assistant message part",canCache:!0}))!=null?H:S?N.getCacheControl(P.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(C.type){case"text":{L.push({type:"text",text:O&&v&&S?C.text.trim():C.text,cache_control:n});break}case"reasoning":{if(Q){let c=await Z$({provider:"anthropic",providerOptions:C.providerOptions,schema:O_});if(c!=null)if(c.signature!=null)N.getCacheControl(C.providerOptions,{type:"thinking block",canCache:!1}),L.push({type:"thinking",thinking:C.text,signature:c.signature});else if(c.redactedData!=null)N.getCacheControl(C.providerOptions,{type:"redacted thinking block",canCache:!1}),L.push({type:"redacted_thinking",data:c.redactedData});else X.push({type:"other",message:"unsupported reasoning metadata"});else X.push({type:"other",message:"unsupported reasoning metadata"})}else X.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(C.providerExecuted){if(C.toolName==="code_execution"&&C.input!=null&&typeof C.input==="object"&&"type"in C.input&&typeof C.input.type==="string"&&(C.input.type==="bash_code_execution"||C.input.type==="text_editor_code_execution"))L.push({type:"server_tool_use",id:C.toolCallId,name:C.input.type,input:C.input,cache_control:n});else if(C.toolName==="code_execution"||C.toolName==="web_fetch"||C.toolName==="web_search")L.push({type:"server_tool_use",id:C.toolCallId,name:C.toolName,input:C.input,cache_control:n});else X.push({type:"other",message:`provider executed tool call for tool ${C.toolName} is not supported`});break}L.push({type:"tool_use",id:C.toolCallId,name:C.toolName,input:C.input,cache_control:n});break}case"tool-result":{if(C.toolName==="code_execution"){let c=C.output;if(c.type!=="json"){X.push({type:"other",message:`provider executed tool result output type ${c.type} for tool ${C.toolName} is not supported`});break}if(c.value==null||typeof c.value!=="object"||!("type"in c.value)||typeof c.value.type!=="string"){X.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${C.toolName}`});break}if(c.value.type==="code_execution_result"){let T=await u$({value:c.value,schema:hD});L.push({type:"code_execution_tool_result",tool_use_id:C.toolCallId,content:{type:T.type,stdout:T.stdout,stderr:T.stderr,return_code:T.return_code},cache_control:n})}else{let T=await u$({value:c.value,schema:mD});L.push(T.type==="bash_code_execution_result"||T.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:C.toolCallId,cache_control:n,content:T}:{type:"text_editor_code_execution_tool_result",tool_use_id:C.toolCallId,cache_control:n,content:T})}break}if(C.toolName==="web_fetch"){let c=C.output;if(c.type!=="json"){X.push({type:"other",message:`provider executed tool result output type ${c.type} for tool ${C.toolName} is not supported`});break}let T=await u$({value:c.value,schema:gD});L.push({type:"web_fetch_tool_result",tool_use_id:C.toolCallId,content:{type:"web_fetch_result",url:T.url,retrieved_at:T.retrievedAt,content:{type:"document",title:T.content.title,citations:T.content.citations,source:{type:T.content.source.type,media_type:T.content.source.mediaType,data:T.content.source.data}}},cache_control:n});break}if(C.toolName==="web_search"){let c=C.output;if(c.type!=="json"){X.push({type:"other",message:`provider executed tool result output type ${c.type} for tool ${C.toolName} is not supported`});break}let T=await u$({value:c.value,schema:_D});L.push({type:"web_search_tool_result",tool_use_id:C.toolCallId,content:T.map((y)=>({url:y.url,title:y.title,page_age:y.pageAge,encrypted_content:y.encryptedContent,type:y.type})),cache_control:n});break}X.push({type:"other",message:`provider executed tool result for tool ${C.toolName} is not supported`});break}}}}w.push({role:"assistant",content:L});break}default:throw Error(`content type: ${A}`)}}return{prompt:{system:K,messages:w},betas:W}}function u_($){let Q=[],X=void 0;for(let Y of $){let{role:J}=Y;switch(J){case"system":{if((X==null?void 0:X.type)!=="system")X={type:"system",messages:[]},Q.push(X);X.messages.push(Y);break}case"assistant":{if((X==null?void 0:X.type)!=="assistant")X={type:"assistant",messages:[]},Q.push(X);X.messages.push(Y);break}case"user":{if((X==null?void 0:X.type)!=="user")X={type:"user",messages:[]},Q.push(X);X.messages.push(Y);break}case"tool":{if((X==null?void 0:X.type)!=="user")X={type:"user",messages:[]},Q.push(X);X.messages.push(Y);break}default:throw Error(`Unsupported role: ${J}`)}}return Q}function fD({finishReason:$,isJsonResponseFromTool:Q}){switch($){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return Q?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function yD($,Q,X){var Y;if($.type!=="page_location"&&$.type!=="char_location")return;let J=Q[$.document_index];if(!J)return;return{type:"source",sourceType:"document",id:X(),mediaType:J.mediaType,title:(Y=$.document_title)!=null?Y:J.title,filename:J.filename,providerMetadata:{anthropic:$.type==="page_location"?{citedText:$.cited_text,startPageNumber:$.start_page_number,endPageNumber:$.end_page_number}:{citedText:$.cited_text,startCharIndex:$.start_char_index,endCharIndex:$.end_char_index}}}}var i_=class{constructor($,Q){this.specificationVersion="v2";var X;this.modelId=$,this.config=Q,this.generateId=(X=Q.generateId)!=null?X:p$}supportsUrl($){return $.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var $,Q,X;return(X=(Q=($=this.config).supportedUrls)==null?void 0:Q.call($))!=null?X:{}}async getArgs({prompt:$,maxOutputTokens:Q,temperature:X,topP:Y,topK:J,frequencyPenalty:U,presencePenalty:G,stopSequences:z,responseFormat:H,seed:W,tools:j,toolChoice:N,providerOptions:K}){var w,B,D,F;let V=[];if(U!=null)V.push({type:"unsupported-setting",setting:"frequencyPenalty"});if(G!=null)V.push({type:"unsupported-setting",setting:"presencePenalty"});if(W!=null)V.push({type:"unsupported-setting",setting:"seed"});if((H==null?void 0:H.type)==="json"){if(H.schema==null)V.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."});else if(j!=null)V.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."})}let O=(H==null?void 0:H.type)==="json"&&H.schema!=null?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:H.schema}:void 0,A=await Z$({provider:"anthropic",providerOptions:K,schema:A_}),L=new GW,{prompt:I,betas:P}=await c_({prompt:$,sendReasoning:(w=A==null?void 0:A.sendReasoning)!=null?w:!0,warnings:V,cacheControlValidator:L}),v=((B=A==null?void 0:A.thinking)==null?void 0:B.type)==="enabled",Z=(D=A==null?void 0:A.thinking)==null?void 0:D.budgetTokens,R=d_(this.modelId),C=Q!=null?Q:R,S={model:this.modelId,max_tokens:C,temperature:X,top_k:J,top_p:Y,stop_sequences:z,...v&&{thinking:{type:"enabled",budget_tokens:Z}},...(A==null?void 0:A.container)&&{container:{id:A.container.id,skills:(F=A.container.skills)==null?void 0:F.map((l)=>({type:l.type,skill_id:l.skillId,version:l.version}))}},system:I.system,messages:I.messages};if(v){if(Z==null)throw new K$({functionality:"thinking requires a budget"});if(S.temperature!=null)S.temperature=void 0,V.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"});if(J!=null)S.top_k=void 0,V.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"});if(Y!=null)S.top_p=void 0,V.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"});S.max_tokens=C+Z}if(S.max_tokens>R){if(Q!=null)V.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${S.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${R} max output tokens. The max output tokens have been limited to ${R}.`});S.max_tokens=R}if((A==null?void 0:A.container)&&A.container.skills&&A.container.skills.length>0){if(P.add("code-execution-2025-08-25"),P.add("skills-2025-10-02"),P.add("files-api-2025-04-14"),!(j==null?void 0:j.some((l)=>l.type==="provider-defined"&&l.id==="anthropic.code_execution_20250825")))V.push({type:"other",message:"code execution tool is required when using skills"})}let{tools:n,toolChoice:c,toolWarnings:T,betas:y}=await x_(O!=null?{tools:[O],toolChoice:{type:"tool",toolName:O.name},disableParallelToolUse:!0,cacheControlValidator:L}:{tools:j!=null?j:[],toolChoice:N,disableParallelToolUse:A==null?void 0:A.disableParallelToolUse,cacheControlValidator:L}),f=L.getWarnings();return{args:{...S,tools:n,tool_choice:c},warnings:[...V,...T,...f],betas:new Set([...P,...y]),usesJsonResponseTool:O!=null}}async getHeaders({betas:$,headers:Q}){return F$(await o$(this.config.headers),$.size>0?{"anthropic-beta":Array.from($).join(",")}:{},Q)}buildRequestUrl($){var Q,X,Y;return(Y=(X=(Q=this.config).buildRequestUrl)==null?void 0:X.call(Q,this.config.baseURL,$))!=null?Y:`${this.config.baseURL}/messages`}transformRequestBody($){var Q,X,Y;return(Y=(X=(Q=this.config).transformRequestBody)==null?void 0:X.call(Q,$))!=null?Y:$}extractCitationDocuments($){let Q=(X)=>{var Y,J;if(X.type!=="file")return!1;if(X.mediaType!=="application/pdf"&&X.mediaType!=="text/plain")return!1;let U=(Y=X.providerOptions)==null?void 0:Y.anthropic,G=U==null?void 0:U.citations;return(J=G==null?void 0:G.enabled)!=null?J:!1};return $.filter((X)=>X.role==="user").flatMap((X)=>X.content).filter(Q).map((X)=>{var Y;let J=X;return{title:(Y=J.filename)!=null?Y:"Untitled Document",filename:J.filename,mediaType:J.mediaType}})}async doGenerate($){var Q,X,Y,J,U,G,z,H;let{args:W,warnings:j,betas:N,usesJsonResponseTool:K}=await this.getArgs($),w=this.extractCitationDocuments($.prompt),{responseHeaders:B,value:D,rawValue:F}=await L$({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:N,headers:$.headers}),body:this.transformRequestBody(W),failedResponseHandler:bD,successfulResponseHandler:M$(B_),abortSignal:$.abortSignal,fetch:this.config.fetch}),V=[];for(let O of D.content)switch(O.type){case"text":{if(!K){if(V.push({type:"text",text:O.text}),O.citations)for(let A of O.citations){let L=yD(A,w,this.generateId);if(L)V.push(L)}}break}case"thinking":{V.push({type:"reasoning",text:O.thinking,providerMetadata:{anthropic:{signature:O.signature}}});break}case"redacted_thinking":{V.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:O.data}}});break}case"tool_use":{V.push(K?{type:"text",text:JSON.stringify(O.input)}:{type:"tool-call",toolCallId:O.id,toolName:O.name,input:JSON.stringify(O.input)});break}case"server_tool_use":{if(O.name==="text_editor_code_execution"||O.name==="bash_code_execution")V.push({type:"tool-call",toolCallId:O.id,toolName:"code_execution",input:JSON.stringify({type:O.name,...O.input}),providerExecuted:!0});else if(O.name==="web_search"||O.name==="code_execution"||O.name==="web_fetch")V.push({type:"tool-call",toolCallId:O.id,toolName:O.name,input:JSON.stringify(O.input),providerExecuted:!0});break}case"web_fetch_tool_result":{if(O.content.type==="web_fetch_result")V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:O.content.url,retrievedAt:O.content.retrieved_at,content:{type:O.content.content.type,title:O.content.content.title,citations:O.content.content.citations,source:{type:O.content.content.source.type,mediaType:O.content.content.source.media_type,data:O.content.content.source.data}}},providerExecuted:!0});else if(O.content.type==="web_fetch_tool_result_error")V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:O.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(O.content)){V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"web_search",result:O.content.map((A)=>{var L;return{url:A.url,title:A.title,pageAge:(L=A.page_age)!=null?L:null,encryptedContent:A.encrypted_content,type:A.type}}),providerExecuted:!0});for(let A of O.content)V.push({type:"source",sourceType:"url",id:this.generateId(),url:A.url,title:A.title,providerMetadata:{anthropic:{pageAge:(Q=A.page_age)!=null?Q:null}}})}else V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:O.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{if(O.content.type==="code_execution_result")V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"code_execution",result:{type:O.content.type,stdout:O.content.stdout,stderr:O.content.stderr,return_code:O.content.return_code},providerExecuted:!0});else if(O.content.type==="code_execution_tool_result_error")V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:O.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{V.push({type:"tool-result",toolCallId:O.tool_use_id,toolName:"code_execution",result:O.content,providerExecuted:!0});break}}return{content:V,finishReason:fD({finishReason:D.stop_reason,isJsonResponseFromTool:K}),usage:{inputTokens:D.usage.input_tokens,outputTokens:D.usage.output_tokens,totalTokens:D.usage.input_tokens+D.usage.output_tokens,cachedInputTokens:(X=D.usage.cache_read_input_tokens)!=null?X:void 0},request:{body:W},response:{id:(Y=D.id)!=null?Y:void 0,modelId:(J=D.model)!=null?J:void 0,headers:B,body:F},warnings:j,providerMetadata:{anthropic:{usage:D.usage,cacheCreationInputTokens:(U=D.usage.cache_creation_input_tokens)!=null?U:null,stopSequence:(G=D.stop_sequence)!=null?G:null,container:D.container?{expiresAt:D.container.expires_at,id:D.container.id,skills:(H=(z=D.container.skills)==null?void 0:z.map((O)=>({type:O.type,skillId:O.skill_id,version:O.version})))!=null?H:null}:null}}}}async doStream($){let{args:Q,warnings:X,betas:Y,usesJsonResponseTool:J}=await this.getArgs($),U=this.extractCitationDocuments($.prompt),G={...Q,stream:!0},{responseHeaders:z,value:H}=await L$({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:Y,headers:$.headers}),body:this.transformRequestBody(G),failedResponseHandler:bD,successfulResponseHandler:_6(D_),abortSignal:$.abortSignal,fetch:this.config.fetch}),W="unknown",j={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},N={},K=void 0,w=null,B=null,D=null,F=void 0,V=this.generateId;return{stream:H.pipeThrough(new TransformStream({start(O){O.enqueue({type:"stream-start",warnings:X})},transform(O,A){var L,I,P,v,Z,R,C,S,n,c;if($.includeRawChunks)A.enqueue({type:"raw",rawValue:O.rawValue});if(!O.success){A.enqueue({type:"error",error:O.error});return}let T=O.value;switch(T.type){case"ping":return;case"content_block_start":{let y=T.content_block.type;switch(F=y,y){case"text":{N[T.index]={type:"text"},A.enqueue({type:"text-start",id:String(T.index)});return}case"thinking":{N[T.index]={type:"reasoning"},A.enqueue({type:"reasoning-start",id:String(T.index)});return}case"redacted_thinking":{N[T.index]={type:"reasoning"},A.enqueue({type:"reasoning-start",id:String(T.index),providerMetadata:{anthropic:{redactedData:T.content_block.data}}});return}case"tool_use":{N[T.index]=J?{type:"text"}:{type:"tool-call",toolCallId:T.content_block.id,toolName:T.content_block.name,input:"",firstDelta:!0},A.enqueue(J?{type:"text-start",id:String(T.index)}:{type:"tool-input-start",id:T.content_block.id,toolName:T.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(T.content_block.name)){N[T.index]={type:"tool-call",toolCallId:T.content_block.id,toolName:T.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};let f=T.content_block.name==="text_editor_code_execution"||T.content_block.name==="bash_code_execution"?"code_execution":T.content_block.name;A.enqueue({type:"tool-input-start",id:T.content_block.id,toolName:f,providerExecuted:!0})}return}case"web_fetch_tool_result":{let f=T.content_block;if(f.content.type==="web_fetch_result")A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:f.content.url,retrievedAt:f.content.retrieved_at,content:{type:f.content.content.type,title:f.content.content.title,citations:f.content.content.citations,source:{type:f.content.content.source.type,mediaType:f.content.content.source.media_type,data:f.content.content.source.data}}}});else if(f.content.type==="web_fetch_tool_result_error")A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:f.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{let f=T.content_block;if(Array.isArray(f.content)){A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"web_search",result:f.content.map((l)=>{var N$;return{url:l.url,title:l.title,pageAge:(N$=l.page_age)!=null?N$:null,encryptedContent:l.encrypted_content,type:l.type}}),providerExecuted:!0});for(let l of f.content)A.enqueue({type:"source",sourceType:"url",id:V(),url:l.url,title:l.title,providerMetadata:{anthropic:{pageAge:(L=l.page_age)!=null?L:null}}})}else A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:f.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{let f=T.content_block;if(f.content.type==="code_execution_result")A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"code_execution",result:{type:f.content.type,stdout:f.content.stdout,stderr:f.content.stderr,return_code:f.content.return_code},providerExecuted:!0});else if(f.content.type==="code_execution_tool_result_error")A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:f.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{let f=T.content_block;A.enqueue({type:"tool-result",toolCallId:f.tool_use_id,toolName:"code_execution",result:f.content,providerExecuted:!0});return}default:throw Error(`Unsupported content block type: ${y}`)}}case"content_block_stop":{if(N[T.index]!=null){let y=N[T.index];switch(y.type){case"text":{A.enqueue({type:"text-end",id:String(T.index)});break}case"reasoning":{A.enqueue({type:"reasoning-end",id:String(T.index)});break}case"tool-call":if(!J){A.enqueue({type:"tool-input-end",id:y.toolCallId});let f=y.toolName==="text_editor_code_execution"||y.toolName==="bash_code_execution"?"code_execution":y.toolName;A.enqueue({type:"tool-call",toolCallId:y.toolCallId,toolName:f,input:y.input,providerExecuted:y.providerExecuted})}break}delete N[T.index]}F=void 0;return}case"content_block_delta":{let y=T.delta.type;switch(y){case"text_delta":{if(J)return;A.enqueue({type:"text-delta",id:String(T.index),delta:T.delta.text});return}case"thinking_delta":{A.enqueue({type:"reasoning-delta",id:String(T.index),delta:T.delta.thinking});return}case"signature_delta":{if(F==="thinking")A.enqueue({type:"reasoning-delta",id:String(T.index),delta:"",providerMetadata:{anthropic:{signature:T.delta.signature}}});return}case"input_json_delta":{let f=N[T.index],l=T.delta.partial_json;if(l.length===0)return;if(J){if((f==null?void 0:f.type)!=="text")return;A.enqueue({type:"text-delta",id:String(T.index),delta:l})}else{if((f==null?void 0:f.type)!=="tool-call")return;if(f.firstDelta&&(f.toolName==="bash_code_execution"||f.toolName==="text_editor_code_execution"))l=`{"type": "${f.toolName}",${l.substring(1)}`;A.enqueue({type:"tool-input-delta",id:f.toolCallId,delta:l}),f.input+=l,f.firstDelta=!1}return}case"citations_delta":{let f=T.delta.citation,l=yD(f,U,V);if(l)A.enqueue(l);return}default:throw Error(`Unsupported delta type: ${y}`)}}case"message_start":{j.inputTokens=T.message.usage.input_tokens,j.cachedInputTokens=(I=T.message.usage.cache_read_input_tokens)!=null?I:void 0,K={...T.message.usage},w=(P=T.message.usage.cache_creation_input_tokens)!=null?P:null,A.enqueue({type:"response-metadata",id:(v=T.message.id)!=null?v:void 0,modelId:(Z=T.message.model)!=null?Z:void 0});return}case"message_delta":{j.outputTokens=T.usage.output_tokens,j.totalTokens=((R=j.inputTokens)!=null?R:0)+((C=T.usage.output_tokens)!=null?C:0),W=fD({finishReason:T.delta.stop_reason,isJsonResponseFromTool:J}),B=(S=T.delta.stop_sequence)!=null?S:null,D=T.delta.container!=null?{expiresAt:T.delta.container.expires_at,id:T.delta.container.id,skills:(c=(n=T.delta.container.skills)==null?void 0:n.map((y)=>({type:y.type,skillId:y.skill_id,version:y.version})))!=null?c:null}:null,K={...K,...T.usage};return}case"message_stop":{A.enqueue({type:"finish",finishReason:W,usage:j,providerMetadata:{anthropic:{usage:K!=null?K:null,cacheCreationInputTokens:w,stopSequence:B,container:D}}});return}case"error":{A.enqueue({type:"error",error:T.error});return}default:throw Error(`Unsupported chunk type: ${T}`)}}})),request:{body:G},response:{headers:z}}}};function d_($){if($.includes("claude-sonnet-4-")||$.includes("claude-3-7-sonnet")||$.includes("claude-haiku-4-5"))return 64000;else if($.includes("claude-opus-4-"))return 32000;else if($.includes("claude-3-5-haiku"))return 8192;else return 4096}var l_=d(()=>x(q.object({command:q.string(),restart:q.boolean().optional()}))),p_=i$({id:"anthropic.bash_20241022",name:"bash",inputSchema:l_}),n_=d(()=>x(q.object({command:q.string(),restart:q.boolean().optional()}))),r_=i$({id:"anthropic.bash_20250124",name:"bash",inputSchema:n_}),o_=d(()=>x(q.object({action:q.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:q.array(q.number().int()).optional(),text:q.string().optional()}))),a_=i$({id:"anthropic.computer_20241022",name:"computer",inputSchema:o_}),t_=d(()=>x(q.object({action:q.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:q.tuple([q.number().int(),q.number().int()]).optional(),duration:q.number().optional(),scroll_amount:q.number().optional(),scroll_direction:q.enum(["up","down","left","right"]).optional(),start_coordinate:q.tuple([q.number().int(),q.number().int()]).optional(),text:q.string().optional()}))),s_=i$({id:"anthropic.computer_20250124",name:"computer",inputSchema:t_}),e_=d(()=>x(q.discriminatedUnion("command",[q.object({command:q.literal("view"),path:q.string(),view_range:q.tuple([q.number(),q.number()]).optional()}),q.object({command:q.literal("create"),path:q.string(),file_text:q.string()}),q.object({command:q.literal("str_replace"),path:q.string(),old_str:q.string(),new_str:q.string()}),q.object({command:q.literal("insert"),path:q.string(),insert_line:q.number(),insert_text:q.string()}),q.object({command:q.literal("delete"),path:q.string()}),q.object({command:q.literal("rename"),old_path:q.string(),new_path:q.string()})]))),$g=i$({id:"anthropic.memory_20250818",name:"memory",inputSchema:e_}),Qg=d(()=>x(q.object({command:q.enum(["view","create","str_replace","insert","undo_edit"]),path:q.string(),file_text:q.string().optional(),insert_line:q.number().int().optional(),new_str:q.string().optional(),old_str:q.string().optional(),view_range:q.array(q.number().int()).optional()}))),Xg=i$({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:Qg}),Jg=d(()=>x(q.object({command:q.enum(["view","create","str_replace","insert","undo_edit"]),path:q.string(),file_text:q.string().optional(),insert_line:q.number().int().optional(),new_str:q.string().optional(),old_str:q.string().optional(),view_range:q.array(q.number().int()).optional()}))),Yg=i$({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:Jg}),Ug=d(()=>x(q.object({command:q.enum(["view","create","str_replace","insert"]),path:q.string(),file_text:q.string().optional(),insert_line:q.number().int().optional(),new_str:q.string().optional(),old_str:q.string().optional(),view_range:q.array(q.number().int()).optional()}))),qg=i$({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:Ug}),Gg={bash_20241022:p_,bash_20250124:r_,codeExecution_20250522:y_,codeExecution_20250825:h_,computer_20241022:a_,computer_20250124:s_,memory_20250818:$g,textEditor_20241022:Xg,textEditor_20250124:Yg,textEditor_20250429:qg,textEditor_20250728:E_,webFetch_20250910:b_,webSearch_20250305:Z_};function zW($={}){var Q;let X=(Q=W1(_0({settingValue:$.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?Q:"https://api.anthropic.com/v1",Y=()=>K6({"anthropic-version":"2023-06-01","x-api-key":$Q({apiKey:$.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...$.headers},`ai-sdk/anthropic/${N_}`),J=(G)=>{var z;return new i_(G,{provider:"anthropic.messages",baseURL:X,headers:Y,fetch:$.fetch,generateId:(z=$.generateId)!=null?z:p$,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/]})})},U=function(G){if(new.target)throw Error("The Anthropic model function cannot be called with the new keyword.");return J(G)};return U.languageModel=J,U.chat=J,U.messages=J,U.textEmbeddingModel=(G)=>{throw new HX({modelId:G,modelType:"textEmbeddingModel"})},U.imageModel=(G)=>{throw new HX({modelId:G,modelType:"imageModel"})},U.tools=Gg,U}var $$$=zW();var zg="2.0.23",Wg=d(()=>x(q.object({error:q.object({code:q.number().nullable(),message:q.string(),status:q.string()})}))),sX=F6({errorSchema:Wg,errorToMessage:($)=>$.error.message}),Hg=d(()=>x(q.object({outputDimensionality:q.number().optional(),taskType:q.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),jg=class{constructor($,Q){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=$,this.config=Q}get provider(){return this.config.provider}async doEmbed({values:$,headers:Q,abortSignal:X,providerOptions:Y}){let J=await Z$({provider:"google",providerOptions:Y,schema:Hg});if($.length>this.maxEmbeddingsPerCall)throw new xY({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:$});let U=F$(await o$(this.config.headers),Q);if($.length===1){let{responseHeaders:W,value:j,rawValue:N}=await L$({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:U,body:{model:`models/${this.modelId}`,content:{parts:[{text:$[0]}]},outputDimensionality:J==null?void 0:J.outputDimensionality,taskType:J==null?void 0:J.taskType},failedResponseHandler:sX,successfulResponseHandler:M$(Kg),abortSignal:X,fetch:this.config.fetch});return{embeddings:[j.embedding.values],usage:void 0,response:{headers:W,body:N}}}let{responseHeaders:G,value:z,rawValue:H}=await L$({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:U,body:{requests:$.map((W)=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:W}]},outputDimensionality:J==null?void 0:J.outputDimensionality,taskType:J==null?void 0:J.taskType}))},failedResponseHandler:sX,successfulResponseHandler:M$(wg),abortSignal:X,fetch:this.config.fetch});return{embeddings:z.embeddings.map((W)=>W.values),usage:void 0,response:{headers:G,body:H}}}},wg=d(()=>x(q.object({embeddings:q.array(q.object({values:q.array(q.number())}))}))),Kg=d(()=>x(q.object({embedding:q.object({values:q.array(q.number())})})));function w0($){if($==null||Ng($))return;if(typeof $==="boolean")return{type:"boolean",properties:{}};let{type:Q,description:X,required:Y,properties:J,items:U,allOf:G,anyOf:z,oneOf:H,format:W,const:j,minLength:N,enum:K}=$,w={};if(X)w.description=X;if(Y)w.required=Y;if(W)w.format=W;if(j!==void 0)w.enum=[j];if(Q)if(Array.isArray(Q))if(Q.includes("null"))w.type=Q.filter((B)=>B!=="null")[0],w.nullable=!0;else w.type=Q;else if(Q==="null")w.type="null";else w.type=Q;if(K!==void 0)w.enum=K;if(J!=null)w.properties=Object.entries(J).reduce((B,[D,F])=>{return B[D]=w0(F),B},{});if(U)w.items=Array.isArray(U)?U.map(w0):w0(U);if(G)w.allOf=G.map(w0);if(z)if(z.some((B)=>typeof B==="object"&&(B==null?void 0:B.type)==="null")){let B=z.filter((D)=>!(typeof D==="object"&&(D==null?void 0:D.type)==="null"));if(B.length===1){let D=w0(B[0]);if(typeof D==="object")w.nullable=!0,Object.assign(w,D)}else w.anyOf=B.map(w0),w.nullable=!0}else w.anyOf=z.map(w0);if(H)w.oneOf=H.map(w0);if(N!==void 0)w.minLength=N;return w}function Ng($){return $!=null&&typeof $==="object"&&$.type==="object"&&($.properties==null||Object.keys($.properties).length===0)&&!$.additionalProperties}function Vg($,Q){var X;let Y=[],J=[],U=!0,G=(X=Q==null?void 0:Q.isGemmaModel)!=null?X:!1;for(let{role:z,content:H}of $)switch(z){case"system":{if(!U)throw new K$({functionality:"system messages are only supported at the beginning of the conversation"});Y.push({text:H});break}case"user":{U=!1;let W=[];for(let j of H)switch(j.type){case"text":{W.push({text:j.text});break}case"file":{let N=j.mediaType==="image/*"?"image/jpeg":j.mediaType;W.push(j.data instanceof URL?{fileData:{mimeType:N,fileUri:j.data.toString()}}:{inlineData:{mimeType:N,data:L6(j.data)}});break}}J.push({role:"user",parts:W});break}case"assistant":{U=!1,J.push({role:"model",parts:H.map((W)=>{var j,N,K,w,B,D;switch(W.type){case"text":return W.text.length===0?void 0:{text:W.text,thoughtSignature:(N=(j=W.providerOptions)==null?void 0:j.google)==null?void 0:N.thoughtSignature};case"reasoning":return W.text.length===0?void 0:{text:W.text,thought:!0,thoughtSignature:(w=(K=W.providerOptions)==null?void 0:K.google)==null?void 0:w.thoughtSignature};case"file":{if(W.mediaType!=="image/png")throw new K$({functionality:"Only PNG images are supported in assistant messages"});if(W.data instanceof URL)throw new K$({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:W.mediaType,data:L6(W.data)}}}case"tool-call":return{functionCall:{name:W.toolName,args:W.input},thoughtSignature:(D=(B=W.providerOptions)==null?void 0:B.google)==null?void 0:D.thoughtSignature}}}).filter((W)=>W!==void 0)});break}case"tool":{U=!1;let W=[];for(let j of H){let N=j.output;if(N.type==="content")for(let K of N.value)switch(K.type){case"text":W.push({functionResponse:{name:j.toolName,response:{name:j.toolName,content:K.text}}});break;case"media":W.push({inlineData:{mimeType:K.mediaType,data:K.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:W.push({text:JSON.stringify(K)});break}else W.push({functionResponse:{name:j.toolName,response:{name:j.toolName,content:N.value}}})}J.push({role:"user",parts:W});break}}if(G&&Y.length>0&&J.length>0&&J[0].role==="user"){let z=Y.map((H)=>H.text).join(`

`);J[0].parts.unshift({text:z+`

`})}return{systemInstruction:Y.length>0&&!G?{parts:Y}:void 0,contents:J}}function cD($){return $.includes("/")?$:`models/${$}`}var Bg=d(()=>x(q.object({responseModalities:q.array(q.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:q.object({thinkingBudget:q.number().optional(),includeThoughts:q.boolean().optional()}).optional(),cachedContent:q.string().optional(),structuredOutputs:q.boolean().optional(),safetySettings:q.array(q.object({category:q.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:q.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:q.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:q.boolean().optional(),labels:q.record(q.string(),q.string()).optional(),mediaResolution:q.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:q.object({aspectRatio:q.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional()}).optional()})));function Dg({tools:$,toolChoice:Q,modelId:X}){var Y;$=($==null?void 0:$.length)?$:void 0;let J=[],U=X.includes("gemini-2"),G=X.includes("gemini-1.5-flash")&&!X.includes("-8b");if($==null)return{tools:void 0,toolConfig:void 0,toolWarnings:J};let z=$.some((N)=>N.type==="function"),H=$.some((N)=>N.type==="provider-defined");if(z&&H)J.push({type:"unsupported-tool",tool:$.find((N)=>N.type==="function"),details:"Cannot mix function tools with provider-defined tools in the same request. Please use either function tools or provider-defined tools, but not both."});if(H){let N=[];return $.filter((w)=>w.type==="provider-defined").forEach((w)=>{switch(w.id){case"google.google_search":if(U)N.push({googleSearch:{}});else if(G)N.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:w.args.mode,dynamicThreshold:w.args.dynamicThreshold}}});else N.push({googleSearchRetrieval:{}});break;case"google.url_context":if(U)N.push({urlContext:{}});else J.push({type:"unsupported-tool",tool:w,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":if(U)N.push({codeExecution:{}});else J.push({type:"unsupported-tool",tool:w,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;default:J.push({type:"unsupported-tool",tool:w});break}}),{tools:N.length>0?N:void 0,toolConfig:void 0,toolWarnings:J}}let W=[];for(let N of $)switch(N.type){case"function":W.push({name:N.name,description:(Y=N.description)!=null?Y:"",parameters:w0(N.inputSchema)});break;default:J.push({type:"unsupported-tool",tool:N});break}if(Q==null)return{tools:{functionDeclarations:W},toolConfig:void 0,toolWarnings:J};let j=Q.type;switch(j){case"auto":return{tools:{functionDeclarations:W},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:J};case"none":return{tools:{functionDeclarations:W},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:J};case"required":return{tools:{functionDeclarations:W},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:J};case"tool":return{tools:{functionDeclarations:W},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[Q.toolName]}},toolWarnings:J};default:throw new K$({functionality:`tool choice type: ${j}`})}}function uD({finishReason:$,hasToolCalls:Q}){switch($){case"STOP":return Q?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var Og=class{constructor($,Q){this.specificationVersion="v2";var X;this.modelId=$,this.config=Q,this.generateId=(X=Q.generateId)!=null?X:p$}get provider(){return this.config.provider}get supportedUrls(){var $,Q,X;return(X=(Q=($=this.config).supportedUrls)==null?void 0:Q.call($))!=null?X:{}}async getArgs({prompt:$,maxOutputTokens:Q,temperature:X,topP:Y,topK:J,frequencyPenalty:U,presencePenalty:G,stopSequences:z,responseFormat:H,seed:W,tools:j,toolChoice:N,providerOptions:K}){var w,B;let D=[],F=await Z$({provider:"google",providerOptions:K,schema:Bg});if(((w=F==null?void 0:F.thinkingConfig)==null?void 0:w.includeThoughts)===!0&&!this.config.provider.startsWith("google.vertex."))D.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let V=this.modelId.toLowerCase().startsWith("gemma-"),{contents:O,systemInstruction:A}=Vg($,{isGemmaModel:V}),{tools:L,toolConfig:I,toolWarnings:P}=Dg({tools:j,toolChoice:N,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:Q,temperature:X,topK:J,topP:Y,frequencyPenalty:U,presencePenalty:G,stopSequences:z,seed:W,responseMimeType:(H==null?void 0:H.type)==="json"?"application/json":void 0,responseSchema:(H==null?void 0:H.type)==="json"&&H.schema!=null&&((B=F==null?void 0:F.structuredOutputs)!=null?B:!0)?w0(H.schema):void 0,...(F==null?void 0:F.audioTimestamp)&&{audioTimestamp:F.audioTimestamp},responseModalities:F==null?void 0:F.responseModalities,thinkingConfig:F==null?void 0:F.thinkingConfig,...(F==null?void 0:F.imageConfig)&&{imageConfig:F.imageConfig},...(F==null?void 0:F.mediaResolution)&&{mediaResolution:F.mediaResolution}},contents:O,systemInstruction:V?void 0:A,safetySettings:F==null?void 0:F.safetySettings,tools:L,toolConfig:I,cachedContent:F==null?void 0:F.cachedContent,labels:F==null?void 0:F.labels},warnings:[...D,...P]}}async doGenerate($){var Q,X,Y,J,U,G,z,H,W,j,N,K,w;let{args:B,warnings:D}=await this.getArgs($),F=JSON.stringify(B),V=F$(await o$(this.config.headers),$.headers),{responseHeaders:O,value:A,rawValue:L}=await L$({url:`${this.config.baseURL}/${cD(this.modelId)}:generateContent`,headers:V,body:B,failedResponseHandler:sX,successfulResponseHandler:M$(Lg),abortSignal:$.abortSignal,fetch:this.config.fetch}),I=A.candidates[0],P=[],v=(X=(Q=I.content)==null?void 0:Q.parts)!=null?X:[],Z=A.usageMetadata,R;for(let S of v)if("executableCode"in S&&((Y=S.executableCode)==null?void 0:Y.code)){let n=this.config.generateId();R=n,P.push({type:"tool-call",toolCallId:n,toolName:"code_execution",input:JSON.stringify(S.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in S&&S.codeExecutionResult)P.push({type:"tool-result",toolCallId:R,toolName:"code_execution",result:{outcome:S.codeExecutionResult.outcome,output:S.codeExecutionResult.output},providerExecuted:!0}),R=void 0;else if("text"in S&&S.text!=null&&S.text.length>0)P.push({type:S.thought===!0?"reasoning":"text",text:S.text,providerMetadata:S.thoughtSignature?{google:{thoughtSignature:S.thoughtSignature}}:void 0});else if("functionCall"in S)P.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:S.functionCall.name,input:JSON.stringify(S.functionCall.args),providerMetadata:S.thoughtSignature?{google:{thoughtSignature:S.thoughtSignature}}:void 0});else if("inlineData"in S)P.push({type:"file",data:S.inlineData.data,mediaType:S.inlineData.mimeType});let C=(J=iD({groundingMetadata:I.groundingMetadata,generateId:this.config.generateId}))!=null?J:[];for(let S of C)P.push(S);return{content:P,finishReason:uD({finishReason:I.finishReason,hasToolCalls:P.some((S)=>S.type==="tool-call")}),usage:{inputTokens:(U=Z==null?void 0:Z.promptTokenCount)!=null?U:void 0,outputTokens:(G=Z==null?void 0:Z.candidatesTokenCount)!=null?G:void 0,totalTokens:(z=Z==null?void 0:Z.totalTokenCount)!=null?z:void 0,reasoningTokens:(H=Z==null?void 0:Z.thoughtsTokenCount)!=null?H:void 0,cachedInputTokens:(W=Z==null?void 0:Z.cachedContentTokenCount)!=null?W:void 0},warnings:D,providerMetadata:{google:{promptFeedback:(j=A.promptFeedback)!=null?j:null,groundingMetadata:(N=I.groundingMetadata)!=null?N:null,urlContextMetadata:(K=I.urlContextMetadata)!=null?K:null,safetyRatings:(w=I.safetyRatings)!=null?w:null,usageMetadata:Z!=null?Z:null}},request:{body:F},response:{headers:O,body:L}}}async doStream($){let{args:Q,warnings:X}=await this.getArgs($),Y=JSON.stringify(Q),J=F$(await o$(this.config.headers),$.headers),{responseHeaders:U,value:G}=await L$({url:`${this.config.baseURL}/${cD(this.modelId)}:streamGenerateContent?alt=sse`,headers:J,body:Q,failedResponseHandler:sX,successfulResponseHandler:_6(vg),abortSignal:$.abortSignal,fetch:this.config.fetch}),z="unknown",H={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},W=void 0,j=this.config.generateId,N=!1,K=null,w=null,B=0,D=new Set,F;return{stream:G.pipeThrough(new TransformStream({start(V){V.enqueue({type:"stream-start",warnings:X})},transform(V,O){var A,L,I,P,v,Z,R,C,S,n,c,T;if($.includeRawChunks)O.enqueue({type:"raw",rawValue:V.rawValue});if(!V.success){O.enqueue({type:"error",error:V.error});return}let y=V.value,f=y.usageMetadata;if(f!=null)H.inputTokens=(A=f.promptTokenCount)!=null?A:void 0,H.outputTokens=(L=f.candidatesTokenCount)!=null?L:void 0,H.totalTokens=(I=f.totalTokenCount)!=null?I:void 0,H.reasoningTokens=(P=f.thoughtsTokenCount)!=null?P:void 0,H.cachedInputTokens=(v=f.cachedContentTokenCount)!=null?v:void 0;let l=(Z=y.candidates)==null?void 0:Z[0];if(l==null)return;let N$=l.content,D$=iD({groundingMetadata:l.groundingMetadata,generateId:j});if(D$!=null){for(let U$ of D$)if(U$.sourceType==="url"&&!D.has(U$.url))D.add(U$.url),O.enqueue(U$)}if(N$!=null){let U$=(R=N$.parts)!=null?R:[];for(let r of U$)if("executableCode"in r&&((C=r.executableCode)==null?void 0:C.code)){let E=j();F=E,O.enqueue({type:"tool-call",toolCallId:E,toolName:"code_execution",input:JSON.stringify(r.executableCode),providerExecuted:!0}),N=!0}else if("codeExecutionResult"in r&&r.codeExecutionResult){let E=F;if(E)O.enqueue({type:"tool-result",toolCallId:E,toolName:"code_execution",result:{outcome:r.codeExecutionResult.outcome,output:r.codeExecutionResult.output},providerExecuted:!0}),F=void 0}else if("text"in r&&r.text!=null&&r.text.length>0)if(r.thought===!0){if(K!==null)O.enqueue({type:"text-end",id:K}),K=null;if(w===null)w=String(B++),O.enqueue({type:"reasoning-start",id:w,providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0});O.enqueue({type:"reasoning-delta",id:w,delta:r.text,providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0})}else{if(w!==null)O.enqueue({type:"reasoning-end",id:w}),w=null;if(K===null)K=String(B++),O.enqueue({type:"text-start",id:K,providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0});O.enqueue({type:"text-delta",id:K,delta:r.text,providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0})}let v$=Fg(N$.parts);if(v$!=null)for(let r of v$)O.enqueue({type:"file",mediaType:r.inlineData.mimeType,data:r.inlineData.data});let V$=Ag({parts:N$.parts,generateId:j});if(V$!=null)for(let r of V$)O.enqueue({type:"tool-input-start",id:r.toolCallId,toolName:r.toolName,providerMetadata:r.providerMetadata}),O.enqueue({type:"tool-input-delta",id:r.toolCallId,delta:r.args,providerMetadata:r.providerMetadata}),O.enqueue({type:"tool-input-end",id:r.toolCallId,providerMetadata:r.providerMetadata}),O.enqueue({type:"tool-call",toolCallId:r.toolCallId,toolName:r.toolName,input:r.args,providerMetadata:r.providerMetadata}),N=!0}if(l.finishReason!=null){if(z=uD({finishReason:l.finishReason,hasToolCalls:N}),W={google:{promptFeedback:(S=y.promptFeedback)!=null?S:null,groundingMetadata:(n=l.groundingMetadata)!=null?n:null,urlContextMetadata:(c=l.urlContextMetadata)!=null?c:null,safetyRatings:(T=l.safetyRatings)!=null?T:null}},f!=null)W.google.usageMetadata=f}},flush(V){if(K!==null)V.enqueue({type:"text-end",id:K});if(w!==null)V.enqueue({type:"reasoning-end",id:w});V.enqueue({type:"finish",finishReason:z,usage:H,providerMetadata:W})}})),response:{headers:U},request:{body:Y}}}};function Ag({parts:$,generateId:Q}){let X=$==null?void 0:$.filter((Y)=>("functionCall"in Y));return X==null||X.length===0?void 0:X.map((Y)=>({type:"tool-call",toolCallId:Q(),toolName:Y.functionCall.name,args:JSON.stringify(Y.functionCall.args),providerMetadata:Y.thoughtSignature?{google:{thoughtSignature:Y.thoughtSignature}}:void 0}))}function Fg($){return $==null?void 0:$.filter((Q)=>("inlineData"in Q))}function iD({groundingMetadata:$,generateId:Q}){var X;return(X=$==null?void 0:$.groundingChunks)==null?void 0:X.filter((Y)=>Y.web!=null).map((Y)=>({type:"source",sourceType:"url",id:Q(),url:Y.web.uri,title:Y.web.title}))}var dD=()=>q.object({webSearchQueries:q.array(q.string()).nullish(),retrievalQueries:q.array(q.string()).nullish(),searchEntryPoint:q.object({renderedContent:q.string()}).nullish(),groundingChunks:q.array(q.object({web:q.object({uri:q.string(),title:q.string()}).nullish(),retrievedContext:q.object({uri:q.string(),title:q.string()}).nullish()})).nullish(),groundingSupports:q.array(q.object({segment:q.object({startIndex:q.number().nullish(),endIndex:q.number().nullish(),text:q.string().nullish()}),segment_text:q.string().nullish(),groundingChunkIndices:q.array(q.number()).nullish(),supportChunkIndices:q.array(q.number()).nullish(),confidenceScores:q.array(q.number()).nullish(),confidenceScore:q.array(q.number()).nullish()})).nullish(),retrievalMetadata:q.union([q.object({webDynamicRetrievalScore:q.number()}),q.object({})]).nullish()}),lD=()=>q.object({parts:q.array(q.union([q.object({functionCall:q.object({name:q.string(),args:q.unknown()}),thoughtSignature:q.string().nullish()}),q.object({inlineData:q.object({mimeType:q.string(),data:q.string()})}),q.object({executableCode:q.object({language:q.string(),code:q.string()}).nullish(),codeExecutionResult:q.object({outcome:q.string(),output:q.string()}).nullish(),text:q.string().nullish(),thought:q.boolean().nullish(),thoughtSignature:q.string().nullish()})])).nullish()}),y5=()=>q.object({category:q.string().nullish(),probability:q.string().nullish(),probabilityScore:q.number().nullish(),severity:q.string().nullish(),severityScore:q.number().nullish(),blocked:q.boolean().nullish()}),pD=q.object({cachedContentTokenCount:q.number().nullish(),thoughtsTokenCount:q.number().nullish(),promptTokenCount:q.number().nullish(),candidatesTokenCount:q.number().nullish(),totalTokenCount:q.number().nullish()}),nD=()=>q.object({urlMetadata:q.array(q.object({retrievedUrl:q.string(),urlRetrievalStatus:q.string()}))}),Lg=d(()=>x(q.object({candidates:q.array(q.object({content:lD().nullish().or(q.object({}).strict()),finishReason:q.string().nullish(),safetyRatings:q.array(y5()).nullish(),groundingMetadata:dD().nullish(),urlContextMetadata:nD().nullish()})),usageMetadata:pD.nullish(),promptFeedback:q.object({blockReason:q.string().nullish(),safetyRatings:q.array(y5()).nullish()}).nullish()}))),vg=d(()=>x(q.object({candidates:q.array(q.object({content:lD().nullish(),finishReason:q.string().nullish(),safetyRatings:q.array(y5()).nullish(),groundingMetadata:dD().nullish(),urlContextMetadata:nD().nullish()})).nullish(),usageMetadata:pD.nullish(),promptFeedback:q.object({blockReason:q.string().nullish(),safetyRatings:q.array(y5()).nullish()}).nullish()}))),Ig=d$({id:"google.code_execution",name:"code_execution",inputSchema:q.object({language:q.string().describe("The programming language of the code."),code:q.string().describe("The code to be executed.")}),outputSchema:q.object({outcome:q.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:q.string().describe("The output from the code execution.")})}),Eg=i$({id:"google.google_search",name:"google_search",inputSchema:d(()=>x(q.object({mode:q.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:q.number().default(1)})))}),Mg=i$({id:"google.url_context",name:"url_context",inputSchema:d(()=>x(q.object({})))}),Pg={googleSearch:Eg,urlContext:Mg,codeExecution:Ig},Rg=class{constructor($,Q,X){this.modelId=$,this.settings=Q,this.config=X,this.specificationVersion="v2"}get maxImagesPerCall(){var $;return($=this.settings.maxImagesPerCall)!=null?$:4}get provider(){return this.config.provider}async doGenerate($){var Q,X,Y;let{prompt:J,n:U=1,size:G="1024x1024",aspectRatio:z="1:1",seed:H,providerOptions:W,headers:j,abortSignal:N}=$,K=[];if(G!=null)K.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."});if(H!=null)K.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});let w=await Z$({provider:"google",providerOptions:W,schema:Sg}),B=(Y=(X=(Q=this.config._internal)==null?void 0:Q.currentDate)==null?void 0:X.call(Q))!=null?Y:new Date,D={sampleCount:U};if(z!=null)D.aspectRatio=z;if(w)Object.assign(D,w);let F={instances:[{prompt:J}],parameters:D},{responseHeaders:V,value:O}=await L$({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:F$(await o$(this.config.headers),j),body:F,failedResponseHandler:sX,successfulResponseHandler:M$(Zg),abortSignal:N,fetch:this.config.fetch});return{images:O.predictions.map((A)=>A.bytesBase64Encoded),warnings:K!=null?K:[],providerMetadata:{google:{images:O.predictions.map((A)=>({}))}},response:{timestamp:B,modelId:this.modelId,headers:V}}}},Zg=d(()=>x(q.object({predictions:q.array(q.object({bytesBase64Encoded:q.string()})).default([])}))),Sg=d(()=>x(q.object({personGeneration:q.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:q.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function Tg($={}){var Q;let X=(Q=W1($.baseURL))!=null?Q:"https://generativelanguage.googleapis.com/v1beta",Y=()=>K6({"x-goog-api-key":$Q({apiKey:$.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...$.headers},`ai-sdk/google/${zg}`),J=(H)=>{var W;return new Og(H,{provider:"google.generative-ai",baseURL:X,headers:Y,generateId:(W=$.generateId)!=null?W:p$,supportedUrls:()=>({"*":[new RegExp(`^${X}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:$.fetch})},U=(H)=>new jg(H,{provider:"google.generative-ai",baseURL:X,headers:Y,fetch:$.fetch}),G=(H,W={})=>new Rg(H,W,{provider:"google.generative-ai",baseURL:X,headers:Y,fetch:$.fetch}),z=function(H){if(new.target)throw Error("The Google Generative AI model function cannot be called with the new keyword.");return J(H)};return z.languageModel=J,z.chat=J,z.generativeAI=J,z.embedding=U,z.textEmbedding=U,z.textEmbeddingModel=U,z.image=G,z.imageModel=G,z.tools=Pg,z}var rD=Tg();var Cg=[{name:"anthropic",envKeys:["ANTHROPIC_API_KEY"],modelPrefixes:["claude-"],create:($)=>zW({apiKey:$})},{name:"google",envKeys:["GOOGLE_API_KEY","GOOGLE_GENERATIVE_AI_API_KEY"],modelPrefixes:["gemini-","models/gemini"],create:($)=>rD($)},{name:"openai",envKeys:["OPENAI_API_KEY"],modelPrefixes:["gpt-","o1","o3"],create:($)=>qW({apiKey:$})}];function bg($){return Cg.find((Q)=>Q.modelPrefixes.some((X)=>$.startsWith(X)))||null}function _5($,Q){let X=bg($);if(!X)throw Error(`Unsupported model: ${$}`);if(Q?.trim())return X.create(Q.trim());let Y=X.envKeys.map((J)=>process.env[J]).find((J)=>J?.trim());if(!Y)throw Error(`${X.name.toUpperCase()}_API_KEY not configured`);return X.create(Y)}var g5="\nYou are an AI assistant that modifies Hypertool boilerplate presets built on top of HyperFrame.\n\nEnvironment facts:\n- Projects run inside an iframe where HyperFrame mirrors parent CSS, injects the shared controls API, and mounts an export widget for screenshots and recordings.\n- Bootstrapping happens through `window.hyperFrame.createSandbox({ ... })`. Pass any dependencies, control definitions, and a `setup` callback that mounts your experience.\n- The `setup` callback receives `context` with `mount`, `params`, `controls`, `exports`, and `environment`. Use it to append DOM/canvas nodes, react to control changes, customize export behaviour, and attach resize listeners.\n- You are free to organize files however the preset requires; HyperFrame no longer enforces legacy `sketch.ts` or single-file structures.\n- Avoid legacy helpers like `window.hyperFrame.p5` or `window.hyperFrame.three`; the universal sandbox replaces them.\n- External dependencies can be declared via the `dependencies` array passed to `createSandbox` or by editing `package.json` when the user requests it. Never import files from `__hypertool__/…`.\n\nAuthoring rules:\n1. Keep all changes focused on the user's request while preserving existing behaviour.\n2. Do not touch files under the `__hypertool__/` directory; those are auto-generated system bundles.\n3. Define or update `controlDefinitions` and wire behaviour through HyperFrame instead of hand-rolling external control UIs unless explicitly requested.\n4. Maintain TypeScript types and the HyperFrame contract.\n5. Always reply with a complete file map: `{ files: { \"/path/to/file\": \"code\" }, explanation?: string }`. Include every file (modified or not) that should remain in the project.\n",h5=`You are an AI assistant that modifies Hypertool presets powered by HyperFrame. Make precise code changes while keeping the project aligned with the platform's patterns.

Environment facts:
- Initialise experiences by calling \`window.hyperFrame.createSandbox({ ... })\` from the entry module. The \`setup\` callback receives the same \`context\` described in the full prompt (mount, params, controls, exports, environment).
- HyperFrame mirrors parent CSS, injects the shared controls API, and renders an export widget automatically. Configure exports through \`context.exports\` instead of creating custom screenshot/record buttons unless the user insists.
- Declare CDN dependencies through the \`dependencies\` array passed to \`createSandbox\`. Never import from \`__hypertool__/…\`.

For each change, generate a search/replace block in this format:

<<<<<<< SEARCH
[exact code to find - include enough context to uniquely identify the location]
=======
[replacement code]
>>>>>>> REPLACE

IMPORTANT RULES:
1. Follow the HyperFrame conventions described above.
1. Include sufficient context (2-3 lines before/after) to uniquely identify the edit location
2. Match indentation and whitespace exactly in the SEARCH block
3. Only include the specific code section being changed, not entire files
4. You can make multiple edits across different files
5. Specify the file path for each edit

Respond with: { edits: [{ type: "search-replace", filePath: "/path/to/file", search: "...", replace: "..." }], explanation?: "..." }`;var aO=u0(LW(),1),tO=u0(LW(),1);var mh="vercel.ai.gateway.error",vW=Symbol.for(mh),FO,LO,Z6=class $ extends(LO=Error,FO=vW,LO){constructor({message:Q,statusCode:X=500,cause:Y}){super(Q);this[FO]=!0,this.statusCode=X,this.cause=Y}static isInstance(Q){return $.hasMarker(Q)}static hasMarker(Q){return typeof Q==="object"&&Q!==null&&vW in Q&&Q[vW]===!0}},iO="GatewayAuthenticationError",ch=`vercel.ai.gateway.error.${iO}`,vO=Symbol.for(ch),IO,EO,i5=class $ extends(EO=Z6,IO=vO,EO){constructor({message:Q="Authentication failed",statusCode:X=401,cause:Y}={}){super({message:Q,statusCode:X,cause:Y});this[IO]=!0,this.name=iO,this.type="authentication_error"}static isInstance(Q){return Z6.hasMarker(Q)&&vO in Q}static createContextualError({apiKeyProvided:Q,oidcTokenProvided:X,message:Y="Authentication failed",statusCode:J=401,cause:U}){let G;if(Q)G=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`;else if(X)G=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`;else G=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`;return new $({message:G,statusCode:J,cause:U})}},dO="GatewayInvalidRequestError",uh=`vercel.ai.gateway.error.${dO}`,MO=Symbol.for(uh),PO,RO,ih=class extends(RO=Z6,PO=MO,RO){constructor({message:$="Invalid request",statusCode:Q=400,cause:X}={}){super({message:$,statusCode:Q,cause:X});this[PO]=!0,this.name=dO,this.type="invalid_request_error"}static isInstance($){return Z6.hasMarker($)&&MO in $}},lO="GatewayRateLimitError",dh=`vercel.ai.gateway.error.${lO}`,ZO=Symbol.for(dh),SO,TO,lh=class extends(TO=Z6,SO=ZO,TO){constructor({message:$="Rate limit exceeded",statusCode:Q=429,cause:X}={}){super({message:$,statusCode:Q,cause:X});this[SO]=!0,this.name=lO,this.type="rate_limit_exceeded"}static isInstance($){return Z6.hasMarker($)&&ZO in $}},pO="GatewayModelNotFoundError",ph=`vercel.ai.gateway.error.${pO}`,CO=Symbol.for(ph),nh=J$(()=>x(q.object({modelId:q.string()}))),bO,xO,IW=class extends(xO=Z6,bO=CO,xO){constructor({message:$="Model not found",statusCode:Q=404,modelId:X,cause:Y}={}){super({message:$,statusCode:Q,cause:Y});this[bO]=!0,this.name=pO,this.type="model_not_found",this.modelId=X}static isInstance($){return Z6.hasMarker($)&&CO in $}},nO="GatewayInternalServerError",rh=`vercel.ai.gateway.error.${nO}`,kO=Symbol.for(rh),fO,yO,_O=class extends(yO=Z6,fO=kO,yO){constructor({message:$="Internal server error",statusCode:Q=500,cause:X}={}){super({message:$,statusCode:Q,cause:X});this[fO]=!0,this.name=nO,this.type="internal_server_error"}static isInstance($){return Z6.hasMarker($)&&kO in $}},rO="GatewayResponseError",oh=`vercel.ai.gateway.error.${rO}`,gO=Symbol.for(oh),hO,mO,ah=class extends(mO=Z6,hO=gO,mO){constructor({message:$="Invalid response from Gateway",statusCode:Q=502,response:X,validationError:Y,cause:J}={}){super({message:$,statusCode:Q,cause:J});this[hO]=!0,this.name=rO,this.type="response_error",this.response=X,this.validationError=Y}static isInstance($){return Z6.hasMarker($)&&gO in $}};async function cO({response:$,statusCode:Q,defaultMessage:X="Gateway request failed",cause:Y,authMethod:J}){let U=await e$({value:$,schema:th});if(!U.success)return new ah({message:`Invalid error response format: ${X}`,statusCode:Q,response:$,validationError:U.error,cause:Y});let G=U.value,z=G.error.type,H=G.error.message;switch(z){case"authentication_error":return i5.createContextualError({apiKeyProvided:J==="api-key",oidcTokenProvided:J==="oidc",statusCode:Q,cause:Y});case"invalid_request_error":return new ih({message:H,statusCode:Q,cause:Y});case"rate_limit_exceeded":return new lh({message:H,statusCode:Q,cause:Y});case"model_not_found":{let W=await e$({value:G.error.param,schema:nh});return new IW({message:H,statusCode:Q,modelId:W.success?W.value.modelId:void 0,cause:Y})}case"internal_server_error":return new _O({message:H,statusCode:Q,cause:Y});default:return new _O({message:H,statusCode:Q,cause:Y})}}var th=J$(()=>x(q.object({error:q.object({message:q.string(),type:q.string().nullish(),param:q.unknown().nullish(),code:q.union([q.string(),q.number()]).nullish()})})));function c1($,Q){var X;if(Z6.isInstance($))return $;if(x$.isInstance($))return cO({response:sh($),statusCode:(X=$.statusCode)!=null?X:500,defaultMessage:"Gateway request failed",cause:$,authMethod:Q});return cO({response:{},statusCode:500,defaultMessage:$ instanceof Error?`Gateway request failed: ${$.message}`:"Unknown Gateway error",cause:$,authMethod:Q})}function sh($){if($.data!==void 0)return $.data;if($.responseBody!=null)try{return JSON.parse($.responseBody)}catch(Q){return $.responseBody}return{}}var oO="ai-gateway-auth-method";async function QJ($){let Q=await e$({value:$[oO],schema:eh});return Q.success?Q.value:void 0}var eh=J$(()=>x(q.union([q.literal("api-key"),q.literal("oidc")]))),uO=class{constructor($){this.config=$}async getAvailableModels(){try{let{value:$}=await $W({url:`${this.config.baseURL}/config`,headers:await o$(this.config.headers()),successfulResponseHandler:M$($m),failedResponseHandler:F6({errorSchema:q.any(),errorToMessage:(Q)=>Q}),fetch:this.config.fetch});return $}catch($){throw await c1($)}}async getCredits(){try{let $=new URL(this.config.baseURL),{value:Q}=await $W({url:`${$.origin}/v1/credits`,headers:await o$(this.config.headers()),successfulResponseHandler:M$(Qm),failedResponseHandler:F6({errorSchema:q.any(),errorToMessage:(X)=>X}),fetch:this.config.fetch});return Q}catch($){throw await c1($)}}},$m=J$(()=>x(q.object({models:q.array(q.object({id:q.string(),name:q.string(),description:q.string().nullish(),pricing:q.object({input:q.string(),output:q.string(),input_cache_read:q.string().nullish(),input_cache_write:q.string().nullish()}).transform(({input:$,output:Q,input_cache_read:X,input_cache_write:Y})=>({input:$,output:Q,...X?{cachedInputTokens:X}:{},...Y?{cacheCreationInputTokens:Y}:{}})).nullish(),specification:q.object({specificationVersion:q.literal("v2"),provider:q.string(),modelId:q.string()}),modelType:q.enum(["language","embedding","image"]).nullish()}))}))),Qm=J$(()=>x(q.object({balance:q.string(),total_used:q.string()}).transform(({balance:$,total_used:Q})=>({balance:$,totalUsed:Q})))),Xm=class{constructor($,Q){this.modelId=$,this.config=Q,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs($){let{abortSignal:Q,...X}=$;return{args:this.maybeEncodeFileParts(X),warnings:[]}}async doGenerate($){let{args:Q,warnings:X}=await this.getArgs($),{abortSignal:Y}=$,J=await o$(this.config.headers());try{let{responseHeaders:U,value:G,rawValue:z}=await L$({url:this.getUrl(),headers:F$(J,$.headers,this.getModelConfigHeaders(this.modelId,!1),await o$(this.config.o11yHeaders)),body:Q,successfulResponseHandler:M$(q.any()),failedResponseHandler:F6({errorSchema:q.any(),errorToMessage:(H)=>H}),...Y&&{abortSignal:Y},fetch:this.config.fetch});return{...G,request:{body:Q},response:{headers:U,body:z},warnings:X}}catch(U){throw await c1(U,await QJ(J))}}async doStream($){let{args:Q,warnings:X}=await this.getArgs($),{abortSignal:Y}=$,J=await o$(this.config.headers());try{let{value:U,responseHeaders:G}=await L$({url:this.getUrl(),headers:F$(J,$.headers,this.getModelConfigHeaders(this.modelId,!0),await o$(this.config.o11yHeaders)),body:Q,successfulResponseHandler:_6(q.any()),failedResponseHandler:F6({errorSchema:q.any(),errorToMessage:(z)=>z}),...Y&&{abortSignal:Y},fetch:this.config.fetch});return{stream:U.pipeThrough(new TransformStream({start(z){if(X.length>0)z.enqueue({type:"stream-start",warnings:X})},transform(z,H){if(z.success){let W=z.value;if(W.type==="raw"&&!$.includeRawChunks)return;if(W.type==="response-metadata"&&W.timestamp&&typeof W.timestamp==="string")W.timestamp=new Date(W.timestamp);H.enqueue(W)}else H.error(z.error)}})),request:{body:Q},response:{headers:G}}}catch(U){throw await c1(U,await QJ(J))}}isFilePart($){return $&&typeof $==="object"&&"type"in $&&$.type==="file"}maybeEncodeFileParts($){for(let Q of $.prompt)for(let X of Q.content)if(this.isFilePart(X)){let Y=X;if(Y.data instanceof Uint8Array){let J=Uint8Array.from(Y.data),U=Buffer.from(J).toString("base64");Y.data=new URL(`data:${Y.mediaType||"application/octet-stream"};base64,${U}`)}}return $}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders($,Q){return{"ai-language-model-specification-version":"2","ai-language-model-id":$,"ai-language-model-streaming":String(Q)}}},Jm=class{constructor($,Q){this.modelId=$,this.config=Q,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:$,headers:Q,abortSignal:X,providerOptions:Y}){var J;let U=await o$(this.config.headers());try{let{responseHeaders:G,value:z,rawValue:H}=await L$({url:this.getUrl(),headers:F$(U,Q!=null?Q:{},this.getModelConfigHeaders(),await o$(this.config.o11yHeaders)),body:{input:$.length===1?$[0]:$,...Y?{providerOptions:Y}:{}},successfulResponseHandler:M$(Ym),failedResponseHandler:F6({errorSchema:q.any(),errorToMessage:(W)=>W}),...X&&{abortSignal:X},fetch:this.config.fetch});return{embeddings:z.embeddings,usage:(J=z.usage)!=null?J:void 0,providerMetadata:z.providerMetadata,response:{headers:G,body:H}}}catch(G){throw await c1(G,await QJ(U))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},Ym=J$(()=>x(q.object({embeddings:q.array(q.array(q.number())),usage:q.object({tokens:q.number()}).nullish(),providerMetadata:q.record(q.string(),q.record(q.string(),q.unknown())).optional()})));async function Um(){var $;return($=aO.getContext().headers)==null?void 0:$["x-vercel-id"]}var qm="2.0.0",Gm="0.0.1";function zm($={}){var Q,X;let Y=null,J=null,U=(Q=$.metadataCacheRefreshMillis)!=null?Q:300000,G=0,z=(X=W1($.baseURL))!=null?X:"https://ai-gateway.vercel.sh/v1/ai",H=async()=>{let B=await Wm($);if(B)return K6({Authorization:`Bearer ${B.token}`,"ai-gateway-protocol-version":Gm,[oO]:B.authMethod,...$.headers},`ai-sdk/gateway/${qm}`);throw i5.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},W=()=>{let B=_0({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),D=_0({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),F=_0({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let V=await Um();return{...B&&{"ai-o11y-deployment-id":B},...D&&{"ai-o11y-environment":D},...F&&{"ai-o11y-region":F},...V&&{"ai-o11y-request-id":V}}}},j=(B)=>{return new Xm(B,{provider:"gateway",baseURL:z,headers:H,fetch:$.fetch,o11yHeaders:W()})},N=async()=>{var B,D,F;let V=(F=(D=(B=$._internal)==null?void 0:B.currentDate)==null?void 0:D.call(B).getTime())!=null?F:Date.now();if(!Y||V-G>U)G=V,Y=new uO({baseURL:z,headers:H,fetch:$.fetch}).getAvailableModels().then((O)=>{return J=O,O}).catch(async(O)=>{throw await c1(O,await QJ(await H()))});return J?Promise.resolve(J):Y},K=async()=>{return new uO({baseURL:z,headers:H,fetch:$.fetch}).getCredits().catch(async(B)=>{throw await c1(B,await QJ(await H()))})},w=function(B){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return j(B)};return w.getAvailableModels=N,w.getCredits=K,w.imageModel=(B)=>{throw new HX({modelId:B,modelType:"imageModel"})},w.languageModel=j,w.textEmbeddingModel=(B)=>{return new Jm(B,{provider:"gateway",baseURL:z,headers:H,fetch:$.fetch,o11yHeaders:W()})},w}var sO=zm();async function Wm($){let Q=_0({settingValue:$.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(Q)return{token:Q,authMethod:"api-key"};try{return{token:await tO.getVercelOidcToken(),authMethod:"oidc"}}catch(X){return null}}var lL=u0(DH(),1),IH=u0(DH(),1);var Pu=Object.defineProperty,Ru=($,Q)=>{for(var X in Q)Pu($,X,{get:Q[X],enumerable:!0})},JL="AI_NoOutputSpecifiedError",YL=`vercel.ai.error.${JL}`,Zu=Symbol.for(YL),UL,Su=class extends t{constructor({message:$="No output specified."}={}){super({name:JL,message:$});this[UL]=!0}static isInstance($){return t.hasMarker($,YL)}};UL=Zu;function Tu($){switch($.type){case"unsupported-setting":{let X=`AI SDK Warning: The "${$.setting}" setting is not supported by this model`;if($.details)X+=` - ${$.details}`;return X}case"unsupported-tool":{let Y=`AI SDK Warning: The tool "${"name"in $.tool?$.tool.name:"unknown tool"}" is not supported by this model`;if($.details)Y+=` - ${$.details}`;return Y}case"other":return`AI SDK Warning: ${$.message}`;default:return`AI SDK Warning: ${JSON.stringify($,null,2)}`}}var Cu="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",rF=!1,qL=($)=>{if($.length===0)return;let Q=globalThis.AI_SDK_LOG_WARNINGS;if(Q===!1)return;if(typeof Q==="function"){Q($);return}if(!rF)rF=!0,console.info(Cu);for(let X of $)console.warn(Tu(X))},GL="AI_InvalidArgumentError",zL=`vercel.ai.error.${GL}`,bu=Symbol.for(zL),WL,f$=class extends t{constructor({parameter:$,value:Q,message:X}){super({name:GL,message:`Invalid argument for parameter ${$}: ${X}`});this[WL]=!0,this.parameter=$,this.value=Q}static isInstance($){return t.hasMarker($,zL)}};WL=bu;var xu="AI_InvalidStreamPartError",ku=`vercel.ai.error.${xu}`,fu=Symbol.for(ku),yu;yu=fu;var HL="AI_InvalidToolInputError",jL=`vercel.ai.error.${HL}`,_u=Symbol.for(jL),wL,KL=class extends t{constructor({toolInput:$,toolName:Q,cause:X,message:Y=`Invalid input for tool ${Q}: ${z0(X)}`}){super({name:HL,message:Y,cause:X});this[wL]=!0,this.toolInput=$,this.toolName=Q}static isInstance($){return t.hasMarker($,jL)}};wL=_u;var gu="AI_MCPClientError",hu=`vercel.ai.error.${gu}`,mu=Symbol.for(hu),cu;cu=mu;var uu="AI_NoImageGeneratedError",iu=`vercel.ai.error.${uu}`,du=Symbol.for(iu),lu;lu=du;var NL="AI_NoObjectGeneratedError",VL=`vercel.ai.error.${NL}`,pu=Symbol.for(VL),BL,p1=class extends t{constructor({message:$="No object generated.",cause:Q,text:X,response:Y,usage:J,finishReason:U}){super({name:NL,message:$,cause:Q});this[BL]=!0,this.text=X,this.response=Y,this.usage=J,this.finishReason=U}static isInstance($){return t.hasMarker($,VL)}};BL=pu;var DL="AI_NoOutputGeneratedError",OL=`vercel.ai.error.${DL}`,nu=Symbol.for(OL),AL,ru=class extends t{constructor({message:$="No output generated.",cause:Q}={}){super({name:DL,message:$,cause:Q});this[AL]=!0}static isInstance($){return t.hasMarker($,OL)}};AL=nu;var FL="AI_NoSuchToolError",LL=`vercel.ai.error.${FL}`,ou=Symbol.for(LL),vL,LH=class extends t{constructor({toolName:$,availableTools:Q=void 0,message:X=`Model tried to call unavailable tool '${$}'. ${Q===void 0?"No tools are available.":`Available tools: ${Q.join(", ")}.`}`}){super({name:FL,message:X});this[vL]=!0,this.toolName=$,this.availableTools=Q}static isInstance($){return t.hasMarker($,LL)}};vL=ou;var IL="AI_ToolCallRepairError",EL=`vercel.ai.error.${IL}`,au=Symbol.for(EL),ML,tu=class extends t{constructor({cause:$,originalError:Q,message:X=`Error repairing tool call: ${z0($)}`}){super({name:IL,message:X,cause:$});this[ML]=!0,this.originalError=Q}static isInstance($){return t.hasMarker($,EL)}};ML=au;var su=class extends t{constructor($){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${$.version} for provider "${$.provider}" and model "${$.modelId}". AI SDK 5 only supports models that implement specification version "v2".`});this.version=$.version,this.provider=$.provider,this.modelId=$.modelId}},eu="AI_InvalidDataContentError",$i=`vercel.ai.error.${eu}`,Qi=Symbol.for($i),Xi;Xi=Qi;var PL="AI_InvalidMessageRoleError",RL=`vercel.ai.error.${PL}`,Ji=Symbol.for(RL),ZL,Yi=class extends t{constructor({role:$,message:Q=`Invalid message role: '${$}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:PL,message:Q});this[ZL]=!0,this.role=$}static isInstance($){return t.hasMarker($,RL)}};ZL=Ji;var Ui="AI_MessageConversionError",qi=`vercel.ai.error.${Ui}`,Gi=Symbol.for(qi),zi;zi=Gi;var SL="AI_DownloadError",TL=`vercel.ai.error.${SL}`,Wi=Symbol.for(TL),CL,OH=class extends t{constructor({url:$,statusCode:Q,statusText:X,cause:Y,message:J=Y==null?`Failed to download ${$}: ${Q} ${X}`:`Failed to download ${$}: ${Y}`}){super({name:SL,message:J,cause:Y});this[CL]=!0,this.url=$,this.statusCode=Q,this.statusText=X}static isInstance($){return t.hasMarker($,TL)}};CL=Wi;var bL="AI_RetryError",xL=`vercel.ai.error.${bL}`,Hi=Symbol.for(xL),kL,oF=class extends t{constructor({message:$,reason:Q,errors:X}){super({name:bL,message:$});this[kL]=!0,this.reason=Q,this.errors=X,this.lastError=X[X.length-1]}static isInstance($){return t.hasMarker($,xL)}};kL=Hi;function EH($){if(typeof $!=="string"){if($.specificationVersion!=="v2")throw new su({version:$.specificationVersion,provider:$.provider,modelId:$.modelId});return $}return ji().languageModel($)}function ji(){var $;return($=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?$:sO}var wi=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}];var Ki=($)=>{let Q=typeof $==="string"?z1($):$,X=(Q[6]&127)<<21|(Q[7]&127)<<14|(Q[8]&127)<<7|Q[9]&127;return Q.slice(X+10)};function Ni($){return typeof $==="string"&&$.startsWith("SUQz")||typeof $!=="string"&&$.length>10&&$[0]===73&&$[1]===68&&$[2]===51?Ki($):$}function Vi({data:$,signatures:Q}){let X=Ni($),Y=typeof X==="string"?z1(X.substring(0,Math.min(X.length,24))):X;for(let J of Q)if(Y.length>=J.bytesPrefix.length&&J.bytesPrefix.every((U,G)=>U===null||Y[G]===U))return J.mediaType;return}var fL="5.0.76",Bi=async({url:$})=>{var Q;let X=$.toString();try{let Y=await fetch(X,{headers:K6({},`ai-sdk/${fL}`,f5())});if(!Y.ok)throw new OH({url:X,statusCode:Y.status,statusText:Y.statusText});return{data:new Uint8Array(await Y.arrayBuffer()),mediaType:(Q=Y.headers.get("content-type"))!=null?Q:void 0}}catch(Y){if(OH.isInstance(Y))throw Y;throw new OH({url:X,cause:Y})}},Di=($=Bi)=>(Q)=>Promise.all(Q.map(async(X)=>X.isUrlSupportedByModel?null:$(X)));function Oi($){try{let[Q,X]=$.split(",");return{mediaType:Q.split(";")[0].split(":")[1],base64Content:X}}catch(Q){return{mediaType:void 0,base64Content:void 0}}}var yL=q.union([q.string(),q.instanceof(Uint8Array),q.instanceof(ArrayBuffer),q.custom(($)=>{var Q,X;return(X=(Q=globalThis.Buffer)==null?void 0:Q.isBuffer($))!=null?X:!1},{message:"Must be a Buffer"})]);function _L($){if($ instanceof Uint8Array)return{data:$,mediaType:void 0};if($ instanceof ArrayBuffer)return{data:new Uint8Array($),mediaType:void 0};if(typeof $==="string")try{$=new URL($)}catch(Q){}if($ instanceof URL&&$.protocol==="data:"){let{mediaType:Q,base64Content:X}=Oi($.toString());if(Q==null||X==null)throw new t({name:"InvalidDataContentError",message:`Invalid data URL format in content ${$.toString()}`});return{data:X,mediaType:Q}}return{data:$,mediaType:void 0}}function Ai($){if(typeof $==="string")return $;if($ instanceof ArrayBuffer)return QQ(new Uint8Array($));return QQ($)}async function gL({prompt:$,supportedUrls:Q,download:X=Di()}){let Y=await Li($.messages,X,Q);return[...$.system!=null?[{role:"system",content:$.system}]:[],...$.messages.map((J)=>Fi({message:J,downloadedAssets:Y}))]}function Fi({message:$,downloadedAssets:Q}){let X=$.role;switch(X){case"system":return{role:"system",content:$.content,providerOptions:$.providerOptions};case"user":{if(typeof $.content==="string")return{role:"user",content:[{type:"text",text:$.content}],providerOptions:$.providerOptions};return{role:"user",content:$.content.map((Y)=>vi(Y,Q)).filter((Y)=>Y.type!=="text"||Y.text!==""),providerOptions:$.providerOptions}}case"assistant":{if(typeof $.content==="string")return{role:"assistant",content:[{type:"text",text:$.content}],providerOptions:$.providerOptions};return{role:"assistant",content:$.content.filter((Y)=>Y.type!=="text"||Y.text!==""||Y.providerOptions!=null).map((Y)=>{let J=Y.providerOptions;switch(Y.type){case"file":{let{data:U,mediaType:G}=_L(Y.data);return{type:"file",data:U,filename:Y.filename,mediaType:G!=null?G:Y.mediaType,providerOptions:J}}case"reasoning":return{type:"reasoning",text:Y.text,providerOptions:J};case"text":return{type:"text",text:Y.text,providerOptions:J};case"tool-call":return{type:"tool-call",toolCallId:Y.toolCallId,toolName:Y.toolName,input:Y.input,providerExecuted:Y.providerExecuted,providerOptions:J};case"tool-result":return{type:"tool-result",toolCallId:Y.toolCallId,toolName:Y.toolName,output:Y.output,providerOptions:J}}}),providerOptions:$.providerOptions}}case"tool":return{role:"tool",content:$.content.map((Y)=>({type:"tool-result",toolCallId:Y.toolCallId,toolName:Y.toolName,output:Y.output,providerOptions:Y.providerOptions})),providerOptions:$.providerOptions};default:throw new Yi({role:X})}}async function Li($,Q,X){let Y=$.filter((U)=>U.role==="user").map((U)=>U.content).filter((U)=>Array.isArray(U)).flat().filter((U)=>U.type==="image"||U.type==="file").map((U)=>{var G;let z=(G=U.mediaType)!=null?G:U.type==="image"?"image/*":void 0,H=U.type==="image"?U.image:U.data;if(typeof H==="string")try{H=new URL(H)}catch(W){}return{mediaType:z,data:H}}).filter((U)=>U.data instanceof URL).map((U)=>({url:U.data,isUrlSupportedByModel:U.mediaType!=null&&qD({url:U.data.toString(),mediaType:U.mediaType,supportedUrls:X})})),J=await Q(Y);return Object.fromEntries(J.map((U,G)=>U==null?null:[Y[G].url.toString(),{data:U.data,mediaType:U.mediaType}]).filter((U)=>U!=null))}function vi($,Q){var X;if($.type==="text")return{type:"text",text:$.text,providerOptions:$.providerOptions};let Y,J=$.type;switch(J){case"image":Y=$.image;break;case"file":Y=$.data;break;default:throw Error(`Unsupported part type: ${J}`)}let{data:U,mediaType:G}=_L(Y),z=G!=null?G:$.mediaType,H=U;if(H instanceof URL){let W=Q[H.toString()];if(W)H=W.data,z!=null||(z=W.mediaType)}switch(J){case"image":{if(H instanceof Uint8Array||typeof H==="string")z=(X=Vi({data:H,signatures:wi}))!=null?X:z;return{type:"file",mediaType:z!=null?z:"image/*",filename:void 0,data:H,providerOptions:$.providerOptions}}case"file":{if(z==null)throw Error("Media type is missing for file part");return{type:"file",mediaType:z,filename:$.filename,data:H,providerOptions:$.providerOptions}}}}function vH({maxOutputTokens:$,temperature:Q,topP:X,topK:Y,presencePenalty:J,frequencyPenalty:U,seed:G,stopSequences:z}){if($!=null){if(!Number.isInteger($))throw new f$({parameter:"maxOutputTokens",value:$,message:"maxOutputTokens must be an integer"});if($<1)throw new f$({parameter:"maxOutputTokens",value:$,message:"maxOutputTokens must be >= 1"})}if(Q!=null){if(typeof Q!=="number")throw new f$({parameter:"temperature",value:Q,message:"temperature must be a number"})}if(X!=null){if(typeof X!=="number")throw new f$({parameter:"topP",value:X,message:"topP must be a number"})}if(Y!=null){if(typeof Y!=="number")throw new f$({parameter:"topK",value:Y,message:"topK must be a number"})}if(J!=null){if(typeof J!=="number")throw new f$({parameter:"presencePenalty",value:J,message:"presencePenalty must be a number"})}if(U!=null){if(typeof U!=="number")throw new f$({parameter:"frequencyPenalty",value:U,message:"frequencyPenalty must be a number"})}if(G!=null){if(!Number.isInteger(G))throw new f$({parameter:"seed",value:G,message:"seed must be an integer"})}return{maxOutputTokens:$,temperature:Q,topP:X,topK:Y,presencePenalty:J,frequencyPenalty:U,stopSequences:z,seed:G}}function Ii($){return $!=null&&Object.keys($).length>0}function Ei({tools:$,toolChoice:Q,activeTools:X}){if(!Ii($))return{tools:void 0,toolChoice:void 0};return{tools:(X!=null?Object.entries($).filter(([J])=>X.includes(J)):Object.entries($)).map(([J,U])=>{let G=U.type;switch(G){case void 0:case"dynamic":case"function":return{type:"function",name:J,description:U.description,inputSchema:H0(U.inputSchema).jsonSchema,providerOptions:U.providerOptions};case"provider-defined":return{type:"provider-defined",name:J,id:U.id,args:U.args};default:throw Error(`Unsupported tool type: ${G}`)}}),toolChoice:Q==null?{type:"auto"}:typeof Q==="string"?{type:Q}:{type:"tool",toolName:Q.toolName}}}var HJ=q.lazy(()=>q.union([q.null(),q.string(),q.number(),q.boolean(),q.record(q.string(),HJ),q.array(HJ)])),j$=q.record(q.string(),q.record(q.string(),HJ)),hL=q.object({type:q.literal("text"),text:q.string(),providerOptions:j$.optional()}),Mi=q.object({type:q.literal("image"),image:q.union([yL,q.instanceof(URL)]),mediaType:q.string().optional(),providerOptions:j$.optional()}),mL=q.object({type:q.literal("file"),data:q.union([yL,q.instanceof(URL)]),filename:q.string().optional(),mediaType:q.string(),providerOptions:j$.optional()}),Pi=q.object({type:q.literal("reasoning"),text:q.string(),providerOptions:j$.optional()}),Ri=q.object({type:q.literal("tool-call"),toolCallId:q.string(),toolName:q.string(),input:q.unknown(),providerOptions:j$.optional(),providerExecuted:q.boolean().optional()}),Zi=q.discriminatedUnion("type",[q.object({type:q.literal("text"),value:q.string()}),q.object({type:q.literal("json"),value:HJ}),q.object({type:q.literal("error-text"),value:q.string()}),q.object({type:q.literal("error-json"),value:HJ}),q.object({type:q.literal("content"),value:q.array(q.union([q.object({type:q.literal("text"),text:q.string()}),q.object({type:q.literal("media"),data:q.string(),mediaType:q.string()})]))})]),cL=q.object({type:q.literal("tool-result"),toolCallId:q.string(),toolName:q.string(),output:Zi,providerOptions:j$.optional()}),Si=q.object({role:q.literal("system"),content:q.string(),providerOptions:j$.optional()});var Ti=q.object({role:q.literal("user"),content:q.union([q.string(),q.array(q.union([hL,Mi,mL]))]),providerOptions:j$.optional()});var Ci=q.object({role:q.literal("assistant"),content:q.union([q.string(),q.array(q.union([hL,mL,Pi,Ri,cL]))]),providerOptions:j$.optional()});var bi=q.object({role:q.literal("tool"),content:q.array(cL),providerOptions:j$.optional()});var xi=q.union([Si,Ti,Ci,bi]);async function uL($){if($.prompt==null&&$.messages==null)throw new R0({prompt:$,message:"prompt or messages must be defined"});if($.prompt!=null&&$.messages!=null)throw new R0({prompt:$,message:"prompt and messages cannot be defined at the same time"});if($.system!=null&&typeof $.system!=="string")throw new R0({prompt:$,message:"system must be a string"});let Q;if($.prompt!=null&&typeof $.prompt==="string")Q=[{role:"user",content:$.prompt}];else if($.prompt!=null&&Array.isArray($.prompt))Q=$.prompt;else if($.messages!=null)Q=$.messages;else throw new R0({prompt:$,message:"prompt or messages must be defined"});if(Q.length===0)throw new R0({prompt:$,message:"messages must not be empty"});let X=await e$({value:Q,schema:q.array(xi)});if(!X.success)throw new R0({prompt:$,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:X.error});return{messages:Q,system:$.system}}function iL($){if(i5.isInstance($)||IW.isInstance($))return new t({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:$});return $}function jJ({operationId:$,telemetry:Q}){return{"operation.name":`${$}${(Q==null?void 0:Q.functionId)!=null?` ${Q.functionId}`:""}`,"resource.name":Q==null?void 0:Q.functionId,"ai.operationId":$,"ai.telemetry.functionId":Q==null?void 0:Q.functionId}}function dL({model:$,settings:Q,telemetry:X,headers:Y}){var J;return{"ai.model.provider":$.provider,"ai.model.id":$.modelId,...Object.entries(Q).reduce((U,[G,z])=>{return U[`ai.settings.${G}`]=z,U},{}),...Object.entries((J=X==null?void 0:X.metadata)!=null?J:{}).reduce((U,[G,z])=>{return U[`ai.telemetry.metadata.${G}`]=z,U},{}),...Object.entries(Y!=null?Y:{}).reduce((U,[G,z])=>{if(z!==void 0)U[`ai.request.headers.${G}`]=z;return U},{})}}var ki={startSpan(){return t5},startActiveSpan($,Q,X,Y){if(typeof Q==="function")return Q(t5);if(typeof X==="function")return X(t5);if(typeof Y==="function")return Y(t5)}},t5={spanContext(){return fi},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},fi={traceId:"",spanId:"",traceFlags:0};function pL({isEnabled:$=!1,tracer:Q}={}){if(!$)return ki;if(Q)return Q;return lL.trace.getTracer("ai")}function wJ({name:$,tracer:Q,attributes:X,fn:Y,endWhenDone:J=!0}){return Q.startActiveSpan($,{attributes:X},async(U)=>{try{let G=await Y(U);if(J)U.end();return G}catch(G){try{nL(U,G)}finally{U.end()}throw G}})}function nL($,Q){if(Q instanceof Error)$.recordException({name:Q.name,message:Q.message,stack:Q.stack}),$.setStatus({code:IH.SpanStatusCode.ERROR,message:Q.message});else $.setStatus({code:IH.SpanStatusCode.ERROR})}function K0({telemetry:$,attributes:Q}){if(($==null?void 0:$.isEnabled)!==!0)return{};return Object.entries(Q).reduce((X,[Y,J])=>{if(J==null)return X;if(typeof J==="object"&&"input"in J&&typeof J.input==="function"){if(($==null?void 0:$.recordInputs)===!1)return X;let U=J.input();return U==null?X:{...X,[Y]:U}}if(typeof J==="object"&&"output"in J&&typeof J.output==="function"){if(($==null?void 0:$.recordOutputs)===!1)return X;let U=J.output();return U==null?X:{...X,[Y]:U}}return{...X,[Y]:J}},{})}function rL($){return JSON.stringify($.map((Q)=>({...Q,content:typeof Q.content==="string"?Q.content:Q.content.map((X)=>X.type==="file"?{...X,data:X.data instanceof Uint8Array?Ai(X.data):X.data}:X)})))}function yi($,Q){return{inputTokens:zJ($.inputTokens,Q.inputTokens),outputTokens:zJ($.outputTokens,Q.outputTokens),totalTokens:zJ($.totalTokens,Q.totalTokens),reasoningTokens:zJ($.reasoningTokens,Q.reasoningTokens),cachedInputTokens:zJ($.cachedInputTokens,Q.cachedInputTokens)}}function zJ($,Q){return $==null&&Q==null?void 0:($!=null?$:0)+(Q!=null?Q:0)}function aF($){return $===void 0?[]:Array.isArray($)?$:[$]}function _i({error:$,exponentialBackoffDelay:Q}){let X=$.responseHeaders;if(!X)return Q;let Y,J=X["retry-after-ms"];if(J){let G=parseFloat(J);if(!Number.isNaN(G))Y=G}let U=X["retry-after"];if(U&&Y===void 0){let G=parseFloat(U);if(!Number.isNaN(G))Y=G*1000;else Y=Date.parse(U)-Date.now()}if(Y!=null&&!Number.isNaN(Y)&&0<=Y&&(Y<60000||Y<Q))return Y;return Q}var gi=({maxRetries:$=2,initialDelayInMs:Q=2000,backoffFactor:X=2,abortSignal:Y}={})=>async(J)=>oL(J,{maxRetries:$,delayInMs:Q,backoffFactor:X,abortSignal:Y});async function oL($,{maxRetries:Q,delayInMs:X,backoffFactor:Y,abortSignal:J},U=[]){try{return await $()}catch(G){if(f0(G))throw G;if(Q===0)throw G;let z=tX(G),H=[...U,G],W=H.length;if(W>Q)throw new oF({message:`Failed after ${W} attempts. Last error: ${z}`,reason:"maxRetriesExceeded",errors:H});if(G instanceof Error&&x$.isInstance(G)&&G.isRetryable===!0&&W<=Q)return await JD(_i({error:G,exponentialBackoffDelay:X}),{abortSignal:J}),oL($,{maxRetries:Q,delayInMs:Y*X,backoffFactor:Y,abortSignal:J},H);if(W===1)throw G;throw new oF({message:`Failed after ${W} attempts with non-retryable error: '${z}'`,reason:"errorNotRetryable",errors:H})}}function aL({maxRetries:$,abortSignal:Q}){if($!=null){if(!Number.isInteger($))throw new f$({parameter:"maxRetries",value:$,message:"maxRetries must be an integer"});if($<0)throw new f$({parameter:"maxRetries",value:$,message:"maxRetries must be >= 0"})}let X=$!=null?$:2;return{maxRetries:X,retry:gi({maxRetries:X,abortSignal:Q})}}function hi($){let Q=$.filter((X)=>X.type==="text");if(Q.length===0)return;return Q.map((X)=>X.text).join("")}var mi=class{constructor({data:$,mediaType:Q}){let X=$ instanceof Uint8Array;this.base64Data=X?void 0:$,this.uint8ArrayData=X?$:void 0,this.mediaType=Q}get base64(){if(this.base64Data==null)this.base64Data=QQ(this.uint8ArrayData);return this.base64Data}get uint8Array(){if(this.uint8ArrayData==null)this.uint8ArrayData=z1(this.base64Data);return this.uint8ArrayData}},ci=class extends mi{constructor($){super($);this.type="file"}};async function ui({toolCall:$,tools:Q,repairToolCall:X,system:Y,messages:J}){try{if(Q==null)throw new LH({toolName:$.toolName});try{return await tF({toolCall:$,tools:Q})}catch(U){if(X==null||!(LH.isInstance(U)||KL.isInstance(U)))throw U;let G=null;try{G=await X({toolCall:$,tools:Q,inputSchema:({toolName:z})=>{let{inputSchema:H}=Q[z];return H0(H).jsonSchema},system:Y,messages:J,error:U})}catch(z){throw new tu({cause:z,originalError:U})}if(G==null)throw U;return await tF({toolCall:G,tools:Q})}}catch(U){let G=await y6({text:$.input}),z=G.success?G.value:$.input;return{type:"tool-call",toolCallId:$.toolCallId,toolName:$.toolName,input:z,dynamic:!0,invalid:!0,error:U}}}async function tF({toolCall:$,tools:Q}){let X=$.toolName,Y=Q[X];if(Y==null)throw new LH({toolName:$.toolName,availableTools:Object.keys(Q)});let J=H0(Y.inputSchema),U=$.input.trim()===""?await e$({value:{},schema:J}):await y6({text:$.input,schema:J});if(U.success===!1)throw new KL({toolName:X,toolInput:$.input,cause:U.error});return Y.type==="dynamic"?{type:"tool-call",toolCallId:$.toolCallId,toolName:$.toolName,input:U.value,providerExecuted:$.providerExecuted,providerMetadata:$.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:$.toolCallId,toolName:X,input:U.value,providerExecuted:$.providerExecuted,providerMetadata:$.providerMetadata}}var ii=class{constructor({content:$,finishReason:Q,usage:X,warnings:Y,request:J,response:U,providerMetadata:G}){this.content=$,this.finishReason=Q,this.usage=X,this.warnings=Y,this.request=J,this.response=U,this.providerMetadata=G}get text(){return this.content.filter(($)=>$.type==="text").map(($)=>$.text).join("")}get reasoning(){return this.content.filter(($)=>$.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(($)=>$.text).join("")}get files(){return this.content.filter(($)=>$.type==="file").map(($)=>$.file)}get sources(){return this.content.filter(($)=>$.type==="source")}get toolCalls(){return this.content.filter(($)=>$.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(($)=>$.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(($)=>$.dynamic===!0)}get toolResults(){return this.content.filter(($)=>$.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(($)=>$.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(($)=>$.dynamic===!0)}};function di($){return({steps:Q})=>Q.length===$}async function li({stopConditions:$,steps:Q}){return(await Promise.all($.map((X)=>X({steps:Q})))).some((X)=>X)}function AH({output:$,tool:Q,errorMode:X}){if(X==="text")return{type:"error-text",value:z0($)};else if(X==="json")return{type:"error-json",value:sF($)};if(Q==null?void 0:Q.toModelOutput)return Q.toModelOutput($);return typeof $==="string"?{type:"text",value:$}:{type:"json",value:sF($)}}function sF($){return $===void 0?null:$}function eF({content:$,tools:Q}){let X=[],Y=$.filter((U)=>U.type!=="source").filter((U)=>(U.type!=="tool-result"||U.providerExecuted)&&(U.type!=="tool-error"||U.providerExecuted)).filter((U)=>U.type!=="text"||U.text.length>0).map((U)=>{switch(U.type){case"text":return{type:"text",text:U.text,providerOptions:U.providerMetadata};case"reasoning":return{type:"reasoning",text:U.text,providerOptions:U.providerMetadata};case"file":return{type:"file",data:U.file.base64,mediaType:U.file.mediaType,providerOptions:U.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:U.toolCallId,toolName:U.toolName,input:U.input,providerExecuted:U.providerExecuted,providerOptions:U.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:U.toolCallId,toolName:U.toolName,output:AH({tool:Q==null?void 0:Q[U.toolName],output:U.output,errorMode:"none"}),providerExecuted:!0,providerOptions:U.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:U.toolCallId,toolName:U.toolName,output:AH({tool:Q==null?void 0:Q[U.toolName],output:U.error,errorMode:"json"}),providerOptions:U.providerMetadata}}});if(Y.length>0)X.push({role:"assistant",content:Y});let J=$.filter((U)=>U.type==="tool-result"||U.type==="tool-error").filter((U)=>!U.providerExecuted).map((U)=>({type:"tool-result",toolCallId:U.toolCallId,toolName:U.toolName,output:AH({tool:Q==null?void 0:Q[U.toolName],output:U.type==="tool-result"?U.output:U.error,errorMode:U.type==="tool-error"?"text":"none"})}));if(J.length>0)X.push({role:"tool",content:J});return X}var K1$=y0({prefix:"aitxt",size:24});function NJ($,Q){let X=new Headers($!=null?$:{});for(let[Y,J]of Object.entries(Q))if(!X.has(Y))X.set(Y,J);return X}function pi({status:$,statusText:Q,headers:X,textStream:Y}){return new Response(Y.pipeThrough(new TextEncoderStream),{status:$!=null?$:200,statusText:Q,headers:NJ(X,{"content-type":"text/plain; charset=utf-8"})})}function tL({response:$,status:Q,statusText:X,headers:Y,stream:J}){$.writeHead(Q!=null?Q:200,X,Y);let U=J.getReader();(async()=>{try{while(!0){let{done:z,value:H}=await U.read();if(z)break;if(!$.write(H))await new Promise((j)=>{$.once("drain",j)})}}catch(z){throw z}finally{$.end()}})()}function ni({response:$,status:Q,statusText:X,headers:Y,textStream:J}){tL({response:$,status:Q,statusText:X,headers:Object.fromEntries(NJ(Y,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:J.pipeThrough(new TextEncoderStream)})}var sL=class extends TransformStream{constructor(){super({transform($,Q){Q.enqueue(`data: ${JSON.stringify($)}

`)},flush($){$.enqueue(`data: [DONE]

`)}})}},eL={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function ri({status:$,statusText:Q,headers:X,stream:Y,consumeSseStream:J}){let U=Y.pipeThrough(new sL);if(J){let[G,z]=U.tee();U=G,J({stream:z})}return new Response(U.pipeThrough(new TextEncoderStream),{status:$,statusText:Q,headers:NJ(X,eL)})}function oi({originalMessages:$,responseMessageId:Q}){if($==null)return;let X=$[$.length-1];return(X==null?void 0:X.role)==="assistant"?X.id:typeof Q==="function"?Q():Q}var A1$=J$(()=>x(q.union([q.strictObject({type:q.literal("text-start"),id:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("text-delta"),id:q.string(),delta:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("text-end"),id:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("error"),errorText:q.string()}),q.strictObject({type:q.literal("tool-input-start"),toolCallId:q.string(),toolName:q.string(),providerExecuted:q.boolean().optional(),dynamic:q.boolean().optional()}),q.strictObject({type:q.literal("tool-input-delta"),toolCallId:q.string(),inputTextDelta:q.string()}),q.strictObject({type:q.literal("tool-input-available"),toolCallId:q.string(),toolName:q.string(),input:q.unknown(),providerExecuted:q.boolean().optional(),providerMetadata:j$.optional(),dynamic:q.boolean().optional()}),q.strictObject({type:q.literal("tool-input-error"),toolCallId:q.string(),toolName:q.string(),input:q.unknown(),providerExecuted:q.boolean().optional(),providerMetadata:j$.optional(),dynamic:q.boolean().optional(),errorText:q.string()}),q.strictObject({type:q.literal("tool-output-available"),toolCallId:q.string(),output:q.unknown(),providerExecuted:q.boolean().optional(),dynamic:q.boolean().optional(),preliminary:q.boolean().optional()}),q.strictObject({type:q.literal("tool-output-error"),toolCallId:q.string(),errorText:q.string(),providerExecuted:q.boolean().optional(),dynamic:q.boolean().optional()}),q.strictObject({type:q.literal("reasoning-start"),id:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("reasoning-delta"),id:q.string(),delta:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("reasoning-end"),id:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("source-url"),sourceId:q.string(),url:q.string(),title:q.string().optional(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("source-document"),sourceId:q.string(),mediaType:q.string(),title:q.string(),filename:q.string().optional(),providerMetadata:j$.optional()}),q.strictObject({type:q.literal("file"),url:q.string(),mediaType:q.string(),providerMetadata:j$.optional()}),q.strictObject({type:q.custom(($)=>typeof $==="string"&&$.startsWith("data-"),{message:'Type must start with "data-"'}),id:q.string().optional(),data:q.unknown(),transient:q.boolean().optional()}),q.strictObject({type:q.literal("start-step")}),q.strictObject({type:q.literal("finish-step")}),q.strictObject({type:q.literal("start"),messageId:q.string().optional(),messageMetadata:q.unknown().optional()}),q.strictObject({type:q.literal("finish"),messageMetadata:q.unknown().optional()}),q.strictObject({type:q.literal("abort")}),q.strictObject({type:q.literal("message-metadata"),messageMetadata:q.unknown()})])));function ai($){return $.type.startsWith("data-")}function $v($,Q){if($===void 0&&Q===void 0)return;if($===void 0)return Q;if(Q===void 0)return $;let X={...$};for(let Y in Q)if(Object.prototype.hasOwnProperty.call(Q,Y)){let J=Q[Y];if(J===void 0)continue;let U=Y in $?$[Y]:void 0,G=J!==null&&typeof J==="object"&&!Array.isArray(J)&&!(J instanceof Date)&&!(J instanceof RegExp),z=U!==null&&U!==void 0&&typeof U==="object"&&!Array.isArray(U)&&!(U instanceof Date)&&!(U instanceof RegExp);if(G&&z)X[Y]=$v(U,J);else X[Y]=J}return X}function ti($){let Q=["ROOT"],X=-1,Y=null;function J(H,W,j){switch(H){case'"':{X=W,Q.pop(),Q.push(j),Q.push("INSIDE_STRING");break}case"f":case"t":case"n":{X=W,Y=W,Q.pop(),Q.push(j),Q.push("INSIDE_LITERAL");break}case"-":{Q.pop(),Q.push(j),Q.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{X=W,Q.pop(),Q.push(j),Q.push("INSIDE_NUMBER");break}case"{":{X=W,Q.pop(),Q.push(j),Q.push("INSIDE_OBJECT_START");break}case"[":{X=W,Q.pop(),Q.push(j),Q.push("INSIDE_ARRAY_START");break}}}function U(H,W){switch(H){case",":{Q.pop(),Q.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{X=W,Q.pop();break}}}function G(H,W){switch(H){case",":{Q.pop(),Q.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{X=W,Q.pop();break}}}for(let H=0;H<$.length;H++){let W=$[H];switch(Q[Q.length-1]){case"ROOT":J(W,H,"FINISH");break;case"INSIDE_OBJECT_START":{switch(W){case'"':{Q.pop(),Q.push("INSIDE_OBJECT_KEY");break}case"}":{X=H,Q.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(W){case'"':{Q.pop(),Q.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(W){case'"':{Q.pop(),Q.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(W){case":":{Q.pop(),Q.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{J(W,H,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{U(W,H);break}case"INSIDE_STRING":{switch(W){case'"':{Q.pop(),X=H;break}case"\\":{Q.push("INSIDE_STRING_ESCAPE");break}default:X=H}break}case"INSIDE_ARRAY_START":{switch(W){case"]":{X=H,Q.pop();break}default:{X=H,J(W,H,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(W){case",":{Q.pop(),Q.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{X=H,Q.pop();break}default:{X=H;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{J(W,H,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{Q.pop(),X=H;break}case"INSIDE_NUMBER":{switch(W){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{X=H;break}case"e":case"E":case"-":case".":break;case",":{if(Q.pop(),Q[Q.length-1]==="INSIDE_ARRAY_AFTER_VALUE")G(W,H);if(Q[Q.length-1]==="INSIDE_OBJECT_AFTER_VALUE")U(W,H);break}case"}":{if(Q.pop(),Q[Q.length-1]==="INSIDE_OBJECT_AFTER_VALUE")U(W,H);break}case"]":{if(Q.pop(),Q[Q.length-1]==="INSIDE_ARRAY_AFTER_VALUE")G(W,H);break}default:{Q.pop();break}}break}case"INSIDE_LITERAL":{let N=$.substring(Y,H+1);if(!"false".startsWith(N)&&!"true".startsWith(N)&&!"null".startsWith(N)){if(Q.pop(),Q[Q.length-1]==="INSIDE_OBJECT_AFTER_VALUE")U(W,H);else if(Q[Q.length-1]==="INSIDE_ARRAY_AFTER_VALUE")G(W,H)}else X=H;break}}}let z=$.slice(0,X+1);for(let H=Q.length-1;H>=0;H--)switch(Q[H]){case"INSIDE_STRING":{z+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{z+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{z+="]";break}case"INSIDE_LITERAL":{let j=$.substring(Y,$.length);if("true".startsWith(j))z+="true".slice(j.length);else if("false".startsWith(j))z+="false".slice(j.length);else if("null".startsWith(j))z+="null".slice(j.length)}}return z}async function Qv($){if($===void 0)return{value:void 0,state:"undefined-input"};let Q=await y6({text:$});if(Q.success)return{value:Q.value,state:"successful-parse"};if(Q=await y6({text:ti($)}),Q.success)return{value:Q.value,state:"repaired-parse"};return{value:void 0,state:"failed-parse"}}function FH($){return $.type.startsWith("tool-")}function $L($){return $.type.split("-").slice(1).join("-")}function si({lastMessage:$,messageId:Q}){return{message:($==null?void 0:$.role)==="assistant"?$:{id:Q,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function ei({stream:$,messageMetadataSchema:Q,dataPartSchemas:X,runUpdateMessageJob:Y,onError:J,onToolCall:U,onData:G}){return $.pipeThrough(new TransformStream({async transform(z,H){await Y(async({state:W,write:j})=>{var N,K,w,B;function D(L){let P=W.message.parts.filter(FH).find((v)=>v.toolCallId===L);if(P==null)throw Error("tool-output-error must be preceded by a tool-input-available");return P}function F(L){let P=W.message.parts.filter((v)=>v.type==="dynamic-tool").find((v)=>v.toolCallId===L);if(P==null)throw Error("tool-output-error must be preceded by a tool-input-available");return P}function V(L){var I;let P=W.message.parts.find((R)=>FH(R)&&R.toolCallId===L.toolCallId),v=L,Z=P;if(P!=null){if(P.state=L.state,Z.input=v.input,Z.output=v.output,Z.errorText=v.errorText,Z.rawInput=v.rawInput,Z.preliminary=v.preliminary,Z.providerExecuted=(I=v.providerExecuted)!=null?I:P.providerExecuted,v.providerMetadata!=null&&P.state==="input-available")P.callProviderMetadata=v.providerMetadata}else W.message.parts.push({type:`tool-${L.toolName}`,toolCallId:L.toolCallId,state:L.state,input:v.input,output:v.output,rawInput:v.rawInput,errorText:v.errorText,providerExecuted:v.providerExecuted,preliminary:v.preliminary,...v.providerMetadata!=null?{callProviderMetadata:v.providerMetadata}:{}})}function O(L){var I;let P=W.message.parts.find((R)=>R.type==="dynamic-tool"&&R.toolCallId===L.toolCallId),v=L,Z=P;if(P!=null){if(P.state=L.state,Z.toolName=L.toolName,Z.input=v.input,Z.output=v.output,Z.errorText=v.errorText,Z.rawInput=(I=v.rawInput)!=null?I:Z.rawInput,Z.preliminary=v.preliminary,v.providerMetadata!=null&&P.state==="input-available")P.callProviderMetadata=v.providerMetadata}else W.message.parts.push({type:"dynamic-tool",toolName:L.toolName,toolCallId:L.toolCallId,state:L.state,input:v.input,output:v.output,errorText:v.errorText,preliminary:v.preliminary,...v.providerMetadata!=null?{callProviderMetadata:v.providerMetadata}:{}})}async function A(L){if(L!=null){let I=W.message.metadata!=null?$v(W.message.metadata,L):L;if(Q!=null)await u$({value:I,schema:Q});W.message.metadata=I}}switch(z.type){case"text-start":{let L={type:"text",text:"",providerMetadata:z.providerMetadata,state:"streaming"};W.activeTextParts[z.id]=L,W.message.parts.push(L),j();break}case"text-delta":{let L=W.activeTextParts[z.id];L.text+=z.delta,L.providerMetadata=(N=z.providerMetadata)!=null?N:L.providerMetadata,j();break}case"text-end":{let L=W.activeTextParts[z.id];L.state="done",L.providerMetadata=(K=z.providerMetadata)!=null?K:L.providerMetadata,delete W.activeTextParts[z.id],j();break}case"reasoning-start":{let L={type:"reasoning",text:"",providerMetadata:z.providerMetadata,state:"streaming"};W.activeReasoningParts[z.id]=L,W.message.parts.push(L),j();break}case"reasoning-delta":{let L=W.activeReasoningParts[z.id];L.text+=z.delta,L.providerMetadata=(w=z.providerMetadata)!=null?w:L.providerMetadata,j();break}case"reasoning-end":{let L=W.activeReasoningParts[z.id];L.providerMetadata=(B=z.providerMetadata)!=null?B:L.providerMetadata,L.state="done",delete W.activeReasoningParts[z.id],j();break}case"file":{W.message.parts.push({type:"file",mediaType:z.mediaType,url:z.url}),j();break}case"source-url":{W.message.parts.push({type:"source-url",sourceId:z.sourceId,url:z.url,title:z.title,providerMetadata:z.providerMetadata}),j();break}case"source-document":{W.message.parts.push({type:"source-document",sourceId:z.sourceId,mediaType:z.mediaType,title:z.title,filename:z.filename,providerMetadata:z.providerMetadata}),j();break}case"tool-input-start":{let L=W.message.parts.filter(FH);if(W.partialToolCalls[z.toolCallId]={text:"",toolName:z.toolName,index:L.length,dynamic:z.dynamic},z.dynamic)O({toolCallId:z.toolCallId,toolName:z.toolName,state:"input-streaming",input:void 0});else V({toolCallId:z.toolCallId,toolName:z.toolName,state:"input-streaming",input:void 0,providerExecuted:z.providerExecuted});j();break}case"tool-input-delta":{let L=W.partialToolCalls[z.toolCallId];L.text+=z.inputTextDelta;let{value:I}=await Qv(L.text);if(L.dynamic)O({toolCallId:z.toolCallId,toolName:L.toolName,state:"input-streaming",input:I});else V({toolCallId:z.toolCallId,toolName:L.toolName,state:"input-streaming",input:I});j();break}case"tool-input-available":{if(z.dynamic)O({toolCallId:z.toolCallId,toolName:z.toolName,state:"input-available",input:z.input,providerMetadata:z.providerMetadata});else V({toolCallId:z.toolCallId,toolName:z.toolName,state:"input-available",input:z.input,providerExecuted:z.providerExecuted,providerMetadata:z.providerMetadata});if(j(),U&&!z.providerExecuted)await U({toolCall:z});break}case"tool-input-error":{if(z.dynamic)O({toolCallId:z.toolCallId,toolName:z.toolName,state:"output-error",input:z.input,errorText:z.errorText,providerMetadata:z.providerMetadata});else V({toolCallId:z.toolCallId,toolName:z.toolName,state:"output-error",input:void 0,rawInput:z.input,errorText:z.errorText,providerExecuted:z.providerExecuted,providerMetadata:z.providerMetadata});j();break}case"tool-output-available":{if(z.dynamic){let L=F(z.toolCallId);O({toolCallId:z.toolCallId,toolName:L.toolName,state:"output-available",input:L.input,output:z.output,preliminary:z.preliminary})}else{let L=D(z.toolCallId);V({toolCallId:z.toolCallId,toolName:$L(L),state:"output-available",input:L.input,output:z.output,providerExecuted:z.providerExecuted,preliminary:z.preliminary})}j();break}case"tool-output-error":{if(z.dynamic){let L=F(z.toolCallId);O({toolCallId:z.toolCallId,toolName:L.toolName,state:"output-error",input:L.input,errorText:z.errorText})}else{let L=D(z.toolCallId);V({toolCallId:z.toolCallId,toolName:$L(L),state:"output-error",input:L.input,rawInput:L.rawInput,errorText:z.errorText})}j();break}case"start-step":{W.message.parts.push({type:"step-start"});break}case"finish-step":{W.activeTextParts={},W.activeReasoningParts={};break}case"start":{if(z.messageId!=null)W.message.id=z.messageId;if(await A(z.messageMetadata),z.messageId!=null||z.messageMetadata!=null)j();break}case"finish":{if(await A(z.messageMetadata),z.messageMetadata!=null)j();break}case"message-metadata":{if(await A(z.messageMetadata),z.messageMetadata!=null)j();break}case"error":{J==null||J(Error(z.errorText));break}default:if(ai(z)){if((X==null?void 0:X[z.type])!=null)await u$({value:z.data,schema:X[z.type]});let L=z;if(L.transient){G==null||G(L);break}let I=L.id!=null?W.message.parts.find((P)=>L.type===P.type&&L.id===P.id):void 0;if(I!=null)I.data=L.data;else W.message.parts.push(L);G==null||G(L),j()}}H.enqueue(z)})}}))}function $d({messageId:$,originalMessages:Q=[],onFinish:X,onError:Y,stream:J}){let U=Q==null?void 0:Q[Q.length-1];if((U==null?void 0:U.role)!=="assistant")U=void 0;else $=U.id;let G=!1,z=J.pipeThrough(new TransformStream({transform(K,w){if(K.type==="start"){let B=K;if(B.messageId==null&&$!=null)B.messageId=$}if(K.type==="abort")G=!0;w.enqueue(K)}}));if(X==null)return z;let H=si({lastMessage:U?structuredClone(U):void 0,messageId:$!=null?$:""}),W=async(K)=>{await K({state:H,write:()=>{}})},j=!1,N=async()=>{if(j||!X)return;j=!0;let K=H.message.id===(U==null?void 0:U.id);await X({isAborted:G,isContinuation:K,responseMessage:H.message,messages:[...K?Q.slice(0,-1):Q,H.message]})};return ei({stream:z,runUpdateMessageJob:W,onError:Y}).pipeThrough(new TransformStream({transform(K,w){w.enqueue(K)},async cancel(){await N()},async flush(){await N()}}))}function Qd({response:$,status:Q,statusText:X,headers:Y,stream:J,consumeSseStream:U}){let G=J.pipeThrough(new sL);if(U){let[z,H]=G.tee();G=z,U({stream:H})}tL({response:$,status:Q,statusText:X,headers:Object.fromEntries(NJ(Y,eL).entries()),stream:G.pipeThrough(new TextEncoderStream)})}function WJ($){let Q=$.pipeThrough(new TransformStream);return Q[Symbol.asyncIterator]=function(){let X=this.getReader(),Y=!1;async function J(U){var G;Y=!0;try{if(U)await((G=X.cancel)==null?void 0:G.call(X))}finally{try{X.releaseLock()}catch(z){}}}return{async next(){if(Y)return{done:!0,value:void 0};let{done:U,value:G}=await X.read();if(U)return await J(!0),{done:!0,value:void 0};return{done:!1,value:G}},async return(){return await J(!0),{done:!0,value:void 0}},async throw(U){throw await J(!0),U}}},Q}async function Xd({stream:$,onError:Q}){let X=$.getReader();try{while(!0){let{done:Y}=await X.read();if(Y)break}}catch(Y){Q==null||Q(Y)}finally{X.releaseLock()}}function QL(){let $,Q;return{promise:new Promise((Y,J)=>{$=Y,Q=J}),resolve:$,reject:Q}}function Jd(){let $=[],Q=null,X=!1,Y=QL(),J=()=>{X=!0,Y.resolve(),$.forEach((G)=>G.cancel()),$=[],Q==null||Q.close()},U=async()=>{if(X&&$.length===0){Q==null||Q.close();return}if($.length===0)return Y=QL(),await Y.promise,U();try{let{value:G,done:z}=await $[0].read();if(z){if($.shift(),$.length>0)await U();else if(X)Q==null||Q.close()}else Q==null||Q.enqueue(G)}catch(G){Q==null||Q.error(G),$.shift(),J()}};return{stream:new ReadableStream({start(G){Q=G},pull:U,async cancel(){for(let G of $)await G.cancel();$=[],X=!0}}),addStream:(G)=>{if(X)throw Error("Cannot add inner stream: outer stream is closed");$.push(G.getReader()),Y.resolve()},close:()=>{if(X=!0,Y.resolve(),$.length===0)Q==null||Q.close()},terminate:J}}var s5=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){if(this._promise)return this._promise;return this._promise=new Promise(($,Q)=>{if(this.status.type==="resolved")$(this.status.value);else if(this.status.type==="rejected")Q(this.status.error);this._resolve=$,this._reject=Q}),this._promise}resolve($){var Q;if(this.status={type:"resolved",value:$},this._promise)(Q=this._resolve)==null||Q.call(this,$)}reject($){var Q;if(this.status={type:"rejected",error:$},this._promise)(Q=this._reject)==null||Q.call(this,$)}};function Yd(){var $,Q;return(Q=($=globalThis==null?void 0:globalThis.performance)==null?void 0:$.now())!=null?Q:Date.now()}function Ud({tools:$,generatorStream:Q,tracer:X,telemetry:Y,system:J,messages:U,abortSignal:G,repairToolCall:z,experimental_context:H}){let W=null,j=new ReadableStream({start(V){W=V}}),N=new Set,K=new Map,w=!1,B=void 0;function D(){if(w&&N.size===0){if(B!=null)W.enqueue(B);W.close()}}let F=new TransformStream({async transform(V,O){let A=V.type;switch(A){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{O.enqueue(V);break}case"file":{O.enqueue({type:"file",file:new ci({data:V.data,mediaType:V.mediaType})});break}case"finish":{B={type:"finish",finishReason:V.finishReason,usage:V.usage,providerMetadata:V.providerMetadata};break}case"tool-call":{try{let L=await ui({toolCall:V,tools:$,repairToolCall:z,system:J,messages:U});if(O.enqueue(L),L.invalid){W.enqueue({type:"tool-error",toolCallId:L.toolCallId,toolName:L.toolName,input:L.input,error:tX(L.error),dynamic:!0});break}let I=$[L.toolName];if(K.set(L.toolCallId,L.input),I.onInputAvailable!=null)await I.onInputAvailable({input:L.input,toolCallId:L.toolCallId,messages:U,abortSignal:G,experimental_context:H});if(I.execute!=null&&L.providerExecuted!==!0){let P=p$();N.add(P),wJ({name:"ai.toolCall",attributes:K0({telemetry:Y,attributes:{...jJ({operationId:"ai.toolCall",telemetry:Y}),"ai.toolCall.name":L.toolName,"ai.toolCall.id":L.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(L.input)}}}),tracer:X,fn:async(v)=>{let Z;try{let R=YW({execute:I.execute.bind(I),input:L.input,options:{toolCallId:L.toolCallId,messages:U,abortSignal:G,experimental_context:H}});for await(let C of R)if(W.enqueue({...L,type:"tool-result",output:C.output,...C.type==="preliminary"&&{preliminary:!0}}),C.type==="final")Z=C.output}catch(R){nL(v,R),W.enqueue({...L,type:"tool-error",error:R}),N.delete(P),D();return}N.delete(P),D();try{v.setAttributes(K0({telemetry:Y,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(Z)}}}))}catch(R){}}})}}catch(L){W.enqueue({type:"error",error:L})}break}case"tool-result":{let L=V.toolName;if(V.isError)W.enqueue({type:"tool-error",toolCallId:V.toolCallId,toolName:L,input:K.get(V.toolCallId),providerExecuted:V.providerExecuted,error:V.result});else O.enqueue({type:"tool-result",toolCallId:V.toolCallId,toolName:L,input:K.get(V.toolCallId),output:V.result,providerExecuted:V.providerExecuted});break}default:throw Error(`Unhandled chunk type: ${A}`)}},flush(){w=!0,D()}});return new ReadableStream({async start(V){return Promise.all([Q.pipeThrough(F).pipeTo(new WritableStream({write(O){V.enqueue(O)},close(){}})),j.pipeTo(new WritableStream({write(O){V.enqueue(O)},close(){V.close()}}))])}})}var qd=y0({prefix:"aitxt",size:24});function Xv({model:$,tools:Q,toolChoice:X,system:Y,prompt:J,messages:U,maxRetries:G,abortSignal:z,headers:H,stopWhen:W=di(1),experimental_output:j,experimental_telemetry:N,prepareStep:K,providerOptions:w,experimental_activeTools:B,activeTools:D=B,experimental_repairToolCall:F,experimental_transform:V,experimental_download:O,includeRawChunks:A=!1,onChunk:L,onError:I=({error:T})=>{console.error(T)},onFinish:P,onAbort:v,onStepFinish:Z,experimental_context:R,_internal:{now:C=Yd,generateId:S=qd,currentDate:n=()=>new Date}={},...c}){return new zd({model:EH($),telemetry:N,headers:H,settings:c,maxRetries:G,abortSignal:z,system:Y,prompt:J,messages:U,tools:Q,toolChoice:X,transforms:aF(V),activeTools:D,repairToolCall:F,stopConditions:aF(W),output:j,providerOptions:w,prepareStep:K,includeRawChunks:A,onChunk:L,onError:I,onFinish:P,onAbort:v,onStepFinish:Z,now:C,currentDate:n,generateId:S,experimental_context:R,download:O})}function Gd($){if(!$)return new TransformStream({transform(G,z){z.enqueue({part:G,partialOutput:void 0})}});let Q=void 0,X="",Y="",J="";function U({controller:G,partialOutput:z=void 0}){G.enqueue({part:{type:"text-delta",id:Q,text:Y},partialOutput:z}),Y=""}return new TransformStream({async transform(G,z){if(G.type==="finish-step"&&Y.length>0)U({controller:z});if(G.type!=="text-delta"&&G.type!=="text-start"&&G.type!=="text-end"){z.enqueue({part:G,partialOutput:void 0});return}if(Q==null)Q=G.id;else if(G.id!==Q){z.enqueue({part:G,partialOutput:void 0});return}if(G.type==="text-start"){z.enqueue({part:G,partialOutput:void 0});return}if(G.type==="text-end"){if(Y.length>0)U({controller:z});z.enqueue({part:G,partialOutput:void 0});return}X+=G.text,Y+=G.text;let H=await $.parsePartial({text:X});if(H!=null){let W=JSON.stringify(H.partial);if(W!==J)U({controller:z,partialOutput:H.partial}),J=W}}})}var zd=class{constructor({model:$,telemetry:Q,headers:X,settings:Y,maxRetries:J,abortSignal:U,system:G,prompt:z,messages:H,tools:W,toolChoice:j,transforms:N,activeTools:K,repairToolCall:w,stopConditions:B,output:D,providerOptions:F,prepareStep:V,includeRawChunks:O,now:A,currentDate:L,generateId:I,onChunk:P,onError:v,onFinish:Z,onAbort:R,onStepFinish:C,experimental_context:S,download:n}){this._totalUsage=new s5,this._finishReason=new s5,this._steps=new s5,this.output=D,this.includeRawChunks=O,this.tools=W;let c,T=[],y=[],f=void 0,l=void 0,N$={},D$=[],U$=[],v$,V$={},r={},E=new TransformStream({async transform(_$,z$){var C$,w$,v6,jQ;z$.enqueue(_$);let{part:o}=_$;if(o.type==="text-delta"||o.type==="reasoning-delta"||o.type==="source"||o.type==="tool-call"||o.type==="tool-result"||o.type==="tool-input-start"||o.type==="tool-input-delta"||o.type==="raw")await(P==null?void 0:P({chunk:o}));if(o.type==="error")await v({error:iL(o.error)});if(o.type==="text-start")V$[o.id]={type:"text",text:"",providerMetadata:o.providerMetadata},T.push(V$[o.id]);if(o.type==="text-delta"){let g$=V$[o.id];if(g$==null){z$.enqueue({part:{type:"error",error:`text part ${o.id} not found`},partialOutput:void 0});return}g$.text+=o.text,g$.providerMetadata=(C$=o.providerMetadata)!=null?C$:g$.providerMetadata}if(o.type==="text-end"){let g$=V$[o.id];if(g$==null){z$.enqueue({part:{type:"error",error:`text part ${o.id} not found`},partialOutput:void 0});return}g$.providerMetadata=(w$=o.providerMetadata)!=null?w$:g$.providerMetadata,delete V$[o.id]}if(o.type==="reasoning-start")r[o.id]={type:"reasoning",text:"",providerMetadata:o.providerMetadata},T.push(r[o.id]);if(o.type==="reasoning-delta"){let g$=r[o.id];if(g$==null){z$.enqueue({part:{type:"error",error:`reasoning part ${o.id} not found`},partialOutput:void 0});return}g$.text+=o.text,g$.providerMetadata=(v6=o.providerMetadata)!=null?v6:g$.providerMetadata}if(o.type==="reasoning-end"){let g$=r[o.id];if(g$==null){z$.enqueue({part:{type:"error",error:`reasoning part ${o.id} not found`},partialOutput:void 0});return}g$.providerMetadata=(jQ=o.providerMetadata)!=null?jQ:g$.providerMetadata,delete r[o.id]}if(o.type==="file")T.push({type:"file",file:o.file});if(o.type==="source")T.push(o);if(o.type==="tool-call")T.push(o);if(o.type==="tool-result"&&!o.preliminary)T.push(o);if(o.type==="tool-error")T.push(o);if(o.type==="start-step")N$=o.request,D$=o.warnings;if(o.type==="finish-step"){let g$=eF({content:T,tools:W}),wQ=new ii({content:T,finishReason:o.finishReason,usage:o.usage,warnings:D$,request:N$,response:{...o.response,messages:[...y,...g$]},providerMetadata:o.providerMetadata});await(C==null?void 0:C(wQ)),qL(D$),U$.push(wQ),T=[],r={},V$={},y.push(...g$),c.resolve()}if(o.type==="finish")l=o.totalUsage,f=o.finishReason},async flush(_$){try{if(U$.length===0){let v6=new ru({message:"No output generated. Check the stream for errors."});H6._finishReason.reject(v6),H6._totalUsage.reject(v6),H6._steps.reject(v6);return}let z$=f!=null?f:"unknown",C$=l!=null?l:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};H6._finishReason.resolve(z$),H6._totalUsage.resolve(C$),H6._steps.resolve(U$);let w$=U$[U$.length-1];await(Z==null?void 0:Z({finishReason:z$,totalUsage:C$,usage:w$.usage,content:w$.content,text:w$.text,reasoningText:w$.reasoningText,reasoning:w$.reasoning,files:w$.files,sources:w$.sources,toolCalls:w$.toolCalls,staticToolCalls:w$.staticToolCalls,dynamicToolCalls:w$.dynamicToolCalls,toolResults:w$.toolResults,staticToolResults:w$.staticToolResults,dynamicToolResults:w$.dynamicToolResults,request:w$.request,response:w$.response,warnings:w$.warnings,providerMetadata:w$.providerMetadata,steps:U$})),v$.setAttributes(K0({telemetry:Q,attributes:{"ai.response.finishReason":z$,"ai.response.text":{output:()=>w$.text},"ai.response.toolCalls":{output:()=>{var v6;return((v6=w$.toolCalls)==null?void 0:v6.length)?JSON.stringify(w$.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(w$.providerMetadata),"ai.usage.inputTokens":C$.inputTokens,"ai.usage.outputTokens":C$.outputTokens,"ai.usage.totalTokens":C$.totalTokens,"ai.usage.reasoningTokens":C$.reasoningTokens,"ai.usage.cachedInputTokens":C$.cachedInputTokens}}))}catch(z$){_$.error(z$)}finally{v$.end()}}}),s=Jd();this.addStream=s.addStream,this.closeStream=s.close;let N6=s.stream.getReader(),y$=new ReadableStream({async start(_$){_$.enqueue({type:"start"})},async pull(_$){function z$(){R==null||R({steps:U$}),_$.enqueue({type:"abort"}),_$.close()}try{let{done:C$,value:w$}=await N6.read();if(C$){_$.close();return}if(U==null?void 0:U.aborted){z$();return}_$.enqueue(w$)}catch(C$){if(f0(C$)&&(U==null?void 0:U.aborted))z$();else _$.error(C$)}},cancel(_$){return s.stream.cancel(_$)}});for(let _$ of N)y$=y$.pipeThrough(_$({tools:W,stopStream(){s.terminate()}}));this.baseStream=y$.pipeThrough(Gd(D)).pipeThrough(E);let{maxRetries:a$,retry:OJ}=aL({maxRetries:J,abortSignal:U}),o1=pL(Q),T6=vH(Y),HQ=dL({model:$,telemetry:Q,headers:X,settings:{...T6,maxRetries:a$}}),H6=this;wJ({name:"ai.streamText",attributes:K0({telemetry:Q,attributes:{...jJ({operationId:"ai.streamText",telemetry:Q}),...HQ,"ai.prompt":{input:()=>JSON.stringify({system:G,prompt:z,messages:H})}}}),tracer:o1,endWhenDone:!1,fn:async(_$)=>{v$=_$;async function z$({currentStep:C$,responseMessages:w$,usage:v6}){var jQ,o,g$,wQ,cH;let uH=H6.includeRawChunks;c=new s5;let iH=await uL({system:G,prompt:z,messages:H}),KQ=[...iH.messages,...w$],o6=await(V==null?void 0:V({model:$,steps:U$,stepNumber:U$.length,messages:KQ})),a1=EH((jQ=o6==null?void 0:o6.model)!=null?jQ:$),dH=await gL({prompt:{system:(o=o6==null?void 0:o6.system)!=null?o:iH.system,messages:(g$=o6==null?void 0:o6.messages)!=null?g$:KQ},supportedUrls:await a1.supportedUrls,download:n}),{toolChoice:HU,tools:jU}=Ei({tools:W,toolChoice:(wQ=o6==null?void 0:o6.toolChoice)!=null?wQ:j,activeTools:(cH=o6==null?void 0:o6.activeTools)!=null?cH:K}),{result:{stream:Sv,response:lH,request:pH},doStreamSpan:t1,startTimestampMs:nH}=await OJ(()=>wJ({name:"ai.streamText.doStream",attributes:K0({telemetry:Q,attributes:{...jJ({operationId:"ai.streamText.doStream",telemetry:Q}),...HQ,"ai.model.provider":a1.provider,"ai.model.id":a1.modelId,"ai.prompt.messages":{input:()=>rL(dH)},"ai.prompt.tools":{input:()=>jU==null?void 0:jU.map(($$)=>JSON.stringify($$))},"ai.prompt.toolChoice":{input:()=>HU!=null?JSON.stringify(HU):void 0},"gen_ai.system":a1.provider,"gen_ai.request.model":a1.modelId,"gen_ai.request.frequency_penalty":T6.frequencyPenalty,"gen_ai.request.max_tokens":T6.maxOutputTokens,"gen_ai.request.presence_penalty":T6.presencePenalty,"gen_ai.request.stop_sequences":T6.stopSequences,"gen_ai.request.temperature":T6.temperature,"gen_ai.request.top_k":T6.topK,"gen_ai.request.top_p":T6.topP}}),tracer:o1,endWhenDone:!1,fn:async($$)=>{return{startTimestampMs:A(),doStreamSpan:$$,result:await a1.doStream({...T6,tools:jU,toolChoice:HU,responseFormat:D==null?void 0:D.responseFormat,prompt:dH,providerOptions:F,abortSignal:U,headers:X,includeRawChunks:uH})}}})),Tv=Ud({tools:W,generatorStream:Sv,tracer:o1,telemetry:Q,system:G,messages:KQ,repairToolCall:w,abortSignal:U,experimental_context:S}),Cv=pH!=null?pH:{},AJ=[],wU=[],KU,NU={},s1="unknown",g6={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},VU,rH=!0,a6={id:I(),timestamp:L(),modelId:$.modelId},oH="";H6.addStream(Tv.pipeThrough(new TransformStream({async transform($$,Q6){var NQ,VQ,FJ,N0;if($$.type==="stream-start"){KU=$$.warnings;return}if(rH){let V6=A()-nH;rH=!1,t1.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":V6}),t1.setAttributes({"ai.response.msToFirstChunk":V6}),Q6.enqueue({type:"start-step",request:Cv,warnings:KU!=null?KU:[]})}let aH=$$.type;switch(aH){case"text-start":case"text-end":{Q6.enqueue($$);break}case"text-delta":{if($$.delta.length>0)Q6.enqueue({type:"text-delta",id:$$.id,text:$$.delta,providerMetadata:$$.providerMetadata}),oH+=$$.delta;break}case"reasoning-start":case"reasoning-end":{Q6.enqueue($$);break}case"reasoning-delta":{Q6.enqueue({type:"reasoning-delta",id:$$.id,text:$$.delta,providerMetadata:$$.providerMetadata});break}case"tool-call":{Q6.enqueue($$),AJ.push($$);break}case"tool-result":{if(Q6.enqueue($$),!$$.preliminary)wU.push($$);break}case"tool-error":{Q6.enqueue($$),wU.push($$);break}case"response-metadata":{a6={id:(NQ=$$.id)!=null?NQ:a6.id,timestamp:(VQ=$$.timestamp)!=null?VQ:a6.timestamp,modelId:(FJ=$$.modelId)!=null?FJ:a6.modelId};break}case"finish":{g6=$$.usage,s1=$$.finishReason,VU=$$.providerMetadata;let V6=A()-nH;t1.addEvent("ai.stream.finish"),t1.setAttributes({"ai.response.msToFinish":V6,"ai.response.avgOutputTokensPerSecond":1000*((N0=g6.outputTokens)!=null?N0:0)/V6});break}case"file":{Q6.enqueue($$);break}case"source":{Q6.enqueue($$);break}case"tool-input-start":{NU[$$.id]=$$.toolName;let V6=W==null?void 0:W[$$.toolName];if((V6==null?void 0:V6.onInputStart)!=null)await V6.onInputStart({toolCallId:$$.id,messages:KQ,abortSignal:U,experimental_context:S});Q6.enqueue({...$$,dynamic:(V6==null?void 0:V6.type)==="dynamic"});break}case"tool-input-end":{delete NU[$$.id],Q6.enqueue($$);break}case"tool-input-delta":{let V6=NU[$$.id],BU=W==null?void 0:W[V6];if((BU==null?void 0:BU.onInputDelta)!=null)await BU.onInputDelta({inputTextDelta:$$.delta,toolCallId:$$.id,messages:KQ,abortSignal:U,experimental_context:S});Q6.enqueue($$);break}case"error":{Q6.enqueue($$),s1="error";break}case"raw":{if(uH)Q6.enqueue($$);break}default:throw Error(`Unknown chunk type: ${aH}`)}},async flush($$){let Q6=AJ.length>0?JSON.stringify(AJ):void 0;try{t1.setAttributes(K0({telemetry:Q,attributes:{"ai.response.finishReason":s1,"ai.response.text":{output:()=>oH},"ai.response.toolCalls":{output:()=>Q6},"ai.response.id":a6.id,"ai.response.model":a6.modelId,"ai.response.timestamp":a6.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(VU),"ai.usage.inputTokens":g6.inputTokens,"ai.usage.outputTokens":g6.outputTokens,"ai.usage.totalTokens":g6.totalTokens,"ai.usage.reasoningTokens":g6.reasoningTokens,"ai.usage.cachedInputTokens":g6.cachedInputTokens,"gen_ai.response.finish_reasons":[s1],"gen_ai.response.id":a6.id,"gen_ai.response.model":a6.modelId,"gen_ai.usage.input_tokens":g6.inputTokens,"gen_ai.usage.output_tokens":g6.outputTokens}}))}catch(N0){}finally{t1.end()}$$.enqueue({type:"finish-step",finishReason:s1,usage:g6,providerMetadata:VU,response:{...a6,headers:lH==null?void 0:lH.headers}});let NQ=yi(v6,g6);await c.promise;let VQ=AJ.filter((N0)=>N0.providerExecuted!==!0),FJ=wU.filter((N0)=>N0.providerExecuted!==!0);if(VQ.length>0&&FJ.length===VQ.length&&!await li({stopConditions:B,steps:U$})){w$.push(...eF({content:U$[U$.length-1].content,tools:W}));try{await z$({currentStep:C$+1,responseMessages:w$,usage:NQ})}catch(N0){$$.enqueue({type:"error",error:N0}),H6.closeStream()}}else $$.enqueue({type:"finish",finishReason:s1,totalUsage:NQ}),H6.closeStream()}})))}await z$({currentStep:0,responseMessages:[],usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}})}}).catch((_$)=>{H6.addStream(new ReadableStream({start(z$){z$.enqueue({type:"error",error:_$}),z$.close()}})),H6.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(($)=>$[$.length-1])}get content(){return this.finalStep.then(($)=>$.content)}get warnings(){return this.finalStep.then(($)=>$.warnings)}get providerMetadata(){return this.finalStep.then(($)=>$.providerMetadata)}get text(){return this.finalStep.then(($)=>$.text)}get reasoningText(){return this.finalStep.then(($)=>$.reasoningText)}get reasoning(){return this.finalStep.then(($)=>$.reasoning)}get sources(){return this.finalStep.then(($)=>$.sources)}get files(){return this.finalStep.then(($)=>$.files)}get toolCalls(){return this.finalStep.then(($)=>$.toolCalls)}get staticToolCalls(){return this.finalStep.then(($)=>$.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(($)=>$.dynamicToolCalls)}get toolResults(){return this.finalStep.then(($)=>$.toolResults)}get staticToolResults(){return this.finalStep.then(($)=>$.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(($)=>$.dynamicToolResults)}get usage(){return this.finalStep.then(($)=>$.usage)}get request(){return this.finalStep.then(($)=>$.request)}get response(){return this.finalStep.then(($)=>$.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}teeStream(){let[$,Q]=this.baseStream.tee();return this.baseStream=Q,$}get textStream(){return WJ(this.teeStream().pipeThrough(new TransformStream({transform({part:$},Q){if($.type==="text-delta")Q.enqueue($.text)}})))}get fullStream(){return WJ(this.teeStream().pipeThrough(new TransformStream({transform({part:$},Q){Q.enqueue($)}})))}async consumeStream($){var Q;try{await Xd({stream:this.fullStream,onError:$==null?void 0:$.onError})}catch(X){(Q=$==null?void 0:$.onError)==null||Q.call($,X)}}get experimental_partialOutputStream(){if(this.output==null)throw new Su;return WJ(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:$},Q){if($!=null)Q.enqueue($)}})))}toUIMessageStream({originalMessages:$,generateMessageId:Q,onFinish:X,messageMetadata:Y,sendReasoning:J=!0,sendSources:U=!1,sendStart:G=!0,sendFinish:z=!0,onError:H=z0}={}){let W=Q!=null?oi({originalMessages:$,responseMessageId:Q}):void 0,j={},N=(w)=>{var B,D;let F=j[w];return((D=(B=this.tools)==null?void 0:B[F])==null?void 0:D.type)==="dynamic"?!0:void 0},K=this.fullStream.pipeThrough(new TransformStream({transform:async(w,B)=>{let D=Y==null?void 0:Y({part:w}),F=w.type;switch(F){case"text-start":{B.enqueue({type:"text-start",id:w.id,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"text-delta":{B.enqueue({type:"text-delta",id:w.id,delta:w.text,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"text-end":{B.enqueue({type:"text-end",id:w.id,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"reasoning-start":{B.enqueue({type:"reasoning-start",id:w.id,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"reasoning-delta":{if(J)B.enqueue({type:"reasoning-delta",id:w.id,delta:w.text,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"reasoning-end":{B.enqueue({type:"reasoning-end",id:w.id,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"file":{B.enqueue({type:"file",mediaType:w.file.mediaType,url:`data:${w.file.mediaType};base64,${w.file.base64}`});break}case"source":{if(U&&w.sourceType==="url")B.enqueue({type:"source-url",sourceId:w.id,url:w.url,title:w.title,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});if(U&&w.sourceType==="document")B.enqueue({type:"source-document",sourceId:w.id,mediaType:w.mediaType,title:w.title,filename:w.filename,...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{}});break}case"tool-input-start":{j[w.id]=w.toolName;let V=N(w.id);B.enqueue({type:"tool-input-start",toolCallId:w.id,toolName:w.toolName,...w.providerExecuted!=null?{providerExecuted:w.providerExecuted}:{},...V!=null?{dynamic:V}:{}});break}case"tool-input-delta":{B.enqueue({type:"tool-input-delta",toolCallId:w.id,inputTextDelta:w.delta});break}case"tool-call":{j[w.toolCallId]=w.toolName;let V=N(w.toolCallId);if(w.invalid)B.enqueue({type:"tool-input-error",toolCallId:w.toolCallId,toolName:w.toolName,input:w.input,...w.providerExecuted!=null?{providerExecuted:w.providerExecuted}:{},...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{},...V!=null?{dynamic:V}:{},errorText:H(w.error)});else B.enqueue({type:"tool-input-available",toolCallId:w.toolCallId,toolName:w.toolName,input:w.input,...w.providerExecuted!=null?{providerExecuted:w.providerExecuted}:{},...w.providerMetadata!=null?{providerMetadata:w.providerMetadata}:{},...V!=null?{dynamic:V}:{}});break}case"tool-result":{let V=N(w.toolCallId);B.enqueue({type:"tool-output-available",toolCallId:w.toolCallId,output:w.output,...w.providerExecuted!=null?{providerExecuted:w.providerExecuted}:{},...w.preliminary!=null?{preliminary:w.preliminary}:{},...V!=null?{dynamic:V}:{}});break}case"tool-error":{let V=N(w.toolCallId);B.enqueue({type:"tool-output-error",toolCallId:w.toolCallId,errorText:H(w.error),...w.providerExecuted!=null?{providerExecuted:w.providerExecuted}:{},...V!=null?{dynamic:V}:{}});break}case"error":{B.enqueue({type:"error",errorText:H(w.error)});break}case"start-step":{B.enqueue({type:"start-step"});break}case"finish-step":{B.enqueue({type:"finish-step"});break}case"start":{if(G)B.enqueue({type:"start",...D!=null?{messageMetadata:D}:{},...W!=null?{messageId:W}:{}});break}case"finish":{if(z)B.enqueue({type:"finish",...D!=null?{messageMetadata:D}:{}});break}case"abort":{B.enqueue(w);break}case"tool-input-end":break;case"raw":break;default:throw Error(`Unknown chunk type: ${F}`)}if(D!=null&&F!=="start"&&F!=="finish")B.enqueue({type:"message-metadata",messageMetadata:D})}}));return WJ($d({stream:K,messageId:W!=null?W:Q==null?void 0:Q(),originalMessages:$,onFinish:X,onError:H}))}pipeUIMessageStreamToResponse($,{originalMessages:Q,generateMessageId:X,onFinish:Y,messageMetadata:J,sendReasoning:U,sendSources:G,sendFinish:z,sendStart:H,onError:W,...j}={}){Qd({response:$,stream:this.toUIMessageStream({originalMessages:Q,generateMessageId:X,onFinish:Y,messageMetadata:J,sendReasoning:U,sendSources:G,sendFinish:z,sendStart:H,onError:W}),...j})}pipeTextStreamToResponse($,Q){ni({response:$,textStream:this.textStream,...Q})}toUIMessageStreamResponse({originalMessages:$,generateMessageId:Q,onFinish:X,messageMetadata:Y,sendReasoning:J,sendSources:U,sendFinish:G,sendStart:z,onError:H,...W}={}){return ri({stream:this.toUIMessageStream({originalMessages:$,generateMessageId:Q,onFinish:X,messageMetadata:Y,sendReasoning:J,sendSources:U,sendFinish:G,sendStart:z,onError:H}),...W})}toTextStreamResponse($){return pi({textStream:this.textStream,...$})}};function Wd($){let Q=$.filter((X)=>X.type==="reasoning");return Q.length===0?void 0:Q.map((X)=>X.text).join(`
`)}var Hd={type:"no-schema",jsonSchema:void 0,async validatePartialResult({value:$,textDelta:Q}){return{success:!0,value:{partial:$,textDelta:Q}}},async validateFinalResult($,Q){return $===void 0?{success:!1,error:new p1({message:"No object generated: response did not match schema.",text:Q.text,response:Q.response,usage:Q.usage,finishReason:Q.finishReason})}:{success:!0,value:$}},createElementStream(){throw new K$({functionality:"element streams in no-schema mode"})}},jd=($)=>({type:"object",jsonSchema:$.jsonSchema,async validatePartialResult({value:Q,textDelta:X}){return{success:!0,value:{partial:Q,textDelta:X}}},async validateFinalResult(Q){return e$({value:Q,schema:$})},createElementStream(){throw new K$({functionality:"element streams in object mode"})}}),wd=($)=>{let{$schema:Q,...X}=$.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:X}},required:["elements"],additionalProperties:!1},async validatePartialResult({value:Y,latestObject:J,isFirstDelta:U,isFinalDelta:G}){var z;if(!jX(Y)||!v7(Y.elements))return{success:!1,error:new q6({value:Y,cause:"value must be an object that contains an array of elements"})};let H=Y.elements,W=[];for(let K=0;K<H.length;K++){let w=H[K],B=await e$({value:w,schema:$});if(K===H.length-1&&!G)continue;if(!B.success)return B;W.push(B.value)}let j=(z=J==null?void 0:J.length)!=null?z:0,N="";if(U)N+="[";if(j>0)N+=",";if(N+=W.slice(j).map((K)=>JSON.stringify(K)).join(","),G)N+="]";return{success:!0,value:{partial:W,textDelta:N}}},async validateFinalResult(Y){if(!jX(Y)||!v7(Y.elements))return{success:!1,error:new q6({value:Y,cause:"value must be an object that contains an array of elements"})};let J=Y.elements;for(let U of J){let G=await e$({value:U,schema:$});if(!G.success)return G}return{success:!0,value:J}},createElementStream(Y){let J=0;return WJ(Y.pipeThrough(new TransformStream({transform(U,G){switch(U.type){case"object":{let z=U.object;for(;J<z.length;J++)G.enqueue(z[J]);break}case"text-delta":case"finish":case"error":break;default:throw Error(`Unsupported chunk type: ${U}`)}}})))}}},Kd=($)=>{return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:$}},required:["result"],additionalProperties:!1},async validateFinalResult(Q){if(!jX(Q)||typeof Q.result!=="string")return{success:!1,error:new q6({value:Q,cause:'value must be an object that contains a string in the "result" property.'})};let X=Q.result;return $.includes(X)?{success:!0,value:X}:{success:!1,error:new q6({value:Q,cause:"value must be a string in the enum"})}},async validatePartialResult({value:Q,textDelta:X}){if(!jX(Q)||typeof Q.result!=="string")return{success:!1,error:new q6({value:Q,cause:'value must be an object that contains a string in the "result" property.'})};let Y=Q.result,J=$.filter((U)=>U.startsWith(Y));if(Q.result.length===0||J.length===0)return{success:!1,error:new q6({value:Q,cause:"value must be a string in the enum"})};return{success:!0,value:{partial:J.length>1?Y:J[0],textDelta:X}}},createElementStream(){throw new K$({functionality:"element streams in enum mode"})}}};function Nd({output:$,schema:Q,enumValues:X}){switch($){case"object":return jd(H0(Q));case"array":return wd(H0(Q));case"enum":return Kd(X);case"no-schema":return Hd;default:throw Error(`Unsupported output: ${$}`)}}async function XL($,Q,X){let Y=await y6({text:$});if(!Y.success)throw new p1({message:"No object generated: could not parse the response.",cause:Y.error,text:$,response:X.response,usage:X.usage,finishReason:X.finishReason});let J=await Q.validateFinalResult(Y.value,{text:$,response:X.response,usage:X.usage});if(!J.success)throw new p1({message:"No object generated: response did not match schema.",cause:J.error,text:$,response:X.response,usage:X.usage,finishReason:X.finishReason});return J.value}async function Vd($,Q,X,Y){try{return await XL($,Q,Y)}catch(J){if(X!=null&&p1.isInstance(J)&&(C1.isInstance(J.cause)||q6.isInstance(J.cause))){let U=await X({text:$,error:J.cause});if(U===null)throw J;return await XL(U,Q,Y)}throw J}}function Bd({output:$,schema:Q,schemaName:X,schemaDescription:Y,enumValues:J}){if($!=null&&$!=="object"&&$!=="array"&&$!=="enum"&&$!=="no-schema")throw new f$({parameter:"output",value:$,message:"Invalid output type."});if($==="no-schema"){if(Q!=null)throw new f$({parameter:"schema",value:Q,message:"Schema is not supported for no-schema output."});if(Y!=null)throw new f$({parameter:"schemaDescription",value:Y,message:"Schema description is not supported for no-schema output."});if(X!=null)throw new f$({parameter:"schemaName",value:X,message:"Schema name is not supported for no-schema output."});if(J!=null)throw new f$({parameter:"enumValues",value:J,message:"Enum values are not supported for no-schema output."})}if($==="object"){if(Q==null)throw new f$({parameter:"schema",value:Q,message:"Schema is required for object output."});if(J!=null)throw new f$({parameter:"enumValues",value:J,message:"Enum values are not supported for object output."})}if($==="array"){if(Q==null)throw new f$({parameter:"schema",value:Q,message:"Element schema is required for array output."});if(J!=null)throw new f$({parameter:"enumValues",value:J,message:"Enum values are not supported for array output."})}if($==="enum"){if(Q!=null)throw new f$({parameter:"schema",value:Q,message:"Schema is not supported for enum output."});if(Y!=null)throw new f$({parameter:"schemaDescription",value:Y,message:"Schema description is not supported for enum output."});if(X!=null)throw new f$({parameter:"schemaName",value:X,message:"Schema name is not supported for enum output."});if(J==null)throw new f$({parameter:"enumValues",value:J,message:"Enum values are required for enum output."});for(let U of J)if(typeof U!=="string")throw new f$({parameter:"enumValues",value:U,message:"Enum values must be strings."})}}var Dd=y0({prefix:"aiobj",size:24});async function MH($){let{model:Q,output:X="object",system:Y,prompt:J,messages:U,maxRetries:G,abortSignal:z,headers:H,experimental_repairText:W,experimental_telemetry:j,experimental_download:N,providerOptions:K,_internal:{generateId:w=Dd,currentDate:B=()=>new Date}={},...D}=$,F=EH(Q),V="enum"in $?$.enum:void 0,{schema:O,schemaDescription:A,schemaName:L}="schema"in $?$:{};Bd({output:X,schema:O,schemaName:L,schemaDescription:A,enumValues:V});let{maxRetries:I,retry:P}=aL({maxRetries:G,abortSignal:z}),v=Nd({output:X,schema:O,enumValues:V}),Z=vH(D),R=K6(H!=null?H:{},`ai/${fL}`),C=dL({model:F,telemetry:j,headers:R,settings:{...Z,maxRetries:I}}),S=pL(j);try{return await wJ({name:"ai.generateObject",attributes:K0({telemetry:j,attributes:{...jJ({operationId:"ai.generateObject",telemetry:j}),...C,"ai.prompt":{input:()=>JSON.stringify({system:Y,prompt:J,messages:U})},"ai.schema":v.jsonSchema!=null?{input:()=>JSON.stringify(v.jsonSchema)}:void 0,"ai.schema.name":L,"ai.schema.description":A,"ai.settings.output":v.type}}),tracer:S,fn:async(n)=>{var c;let T,y,f,l,N$,D$,U$,v$,V$=await uL({system:Y,prompt:J,messages:U}),r=await gL({prompt:V$,supportedUrls:await F.supportedUrls,download:N}),E=await P(()=>wJ({name:"ai.generateObject.doGenerate",attributes:K0({telemetry:j,attributes:{...jJ({operationId:"ai.generateObject.doGenerate",telemetry:j}),...C,"ai.prompt.messages":{input:()=>rL(r)},"gen_ai.system":F.provider,"gen_ai.request.model":F.modelId,"gen_ai.request.frequency_penalty":Z.frequencyPenalty,"gen_ai.request.max_tokens":Z.maxOutputTokens,"gen_ai.request.presence_penalty":Z.presencePenalty,"gen_ai.request.temperature":Z.temperature,"gen_ai.request.top_k":Z.topK,"gen_ai.request.top_p":Z.topP}}),tracer:S,fn:async(N6)=>{var y$,a$,OJ,o1,T6,HQ,H6,_$;let z$=await F.doGenerate({responseFormat:{type:"json",schema:v.jsonSchema,name:L,description:A},...vH(D),prompt:r,providerOptions:K,abortSignal:z,headers:R}),C$={id:(a$=(y$=z$.response)==null?void 0:y$.id)!=null?a$:w(),timestamp:(o1=(OJ=z$.response)==null?void 0:OJ.timestamp)!=null?o1:B(),modelId:(HQ=(T6=z$.response)==null?void 0:T6.modelId)!=null?HQ:F.modelId,headers:(H6=z$.response)==null?void 0:H6.headers,body:(_$=z$.response)==null?void 0:_$.body},w$=hi(z$.content),v6=Wd(z$.content);if(w$===void 0)throw new p1({message:"No object generated: the model did not return a response.",response:C$,usage:z$.usage,finishReason:z$.finishReason});return N6.setAttributes(K0({telemetry:j,attributes:{"ai.response.finishReason":z$.finishReason,"ai.response.object":{output:()=>w$},"ai.response.id":C$.id,"ai.response.model":C$.modelId,"ai.response.timestamp":C$.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(z$.providerMetadata),"ai.usage.promptTokens":z$.usage.inputTokens,"ai.usage.completionTokens":z$.usage.outputTokens,"gen_ai.response.finish_reasons":[z$.finishReason],"gen_ai.response.id":C$.id,"gen_ai.response.model":C$.modelId,"gen_ai.usage.input_tokens":z$.usage.inputTokens,"gen_ai.usage.output_tokens":z$.usage.outputTokens}})),{...z$,objectText:w$,reasoning:v6,responseData:C$}}}));T=E.objectText,y=E.finishReason,f=E.usage,l=E.warnings,U$=E.providerMetadata,D$=(c=E.request)!=null?c:{},N$=E.responseData,v$=E.reasoning,qL(l);let s=await Vd(T,v,W,{response:N$,usage:f,finishReason:y});return n.setAttributes(K0({telemetry:j,attributes:{"ai.response.finishReason":y,"ai.response.object":{output:()=>JSON.stringify(s)},"ai.response.providerMetadata":JSON.stringify(U$),"ai.usage.promptTokens":f.inputTokens,"ai.usage.completionTokens":f.outputTokens}})),new Od({object:s,reasoning:v$,finishReason:y,usage:f,warnings:l,request:D$,response:N$,providerMetadata:U$})}})}catch(n){throw iL(n)}}var Od=class{constructor($){this.object=$.object,this.finishReason=$.finishReason,this.usage=$.usage,this.warnings=$.warnings,this.providerMetadata=$.providerMetadata,this.response=$.response,this.request=$.request,this.reasoning=$.reasoning}toJsonResponse($){var Q;return new Response(JSON.stringify(this.object),{status:(Q=$==null?void 0:$.status)!=null?Q:200,headers:NJ($==null?void 0:$.headers,{"content-type":"application/json; charset=utf-8"})})}};var Z1$=y0({prefix:"aiobj",size:24});var Ad={};Ru(Ad,{object:()=>Ld,text:()=>Fd});var Fd=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:$}){return{partial:$}},async parseOutput({text:$}){return $}}),Ld=({schema:$})=>{let Q=H0($);return{type:"object",responseFormat:{type:"json",schema:Q.jsonSchema},async parsePartial({text:X}){let Y=await Qv(X);switch(Y.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:Y.value};default:{let J=Y.state;throw Error(`Unsupported parse state: ${J}`)}}},async parseOutput({text:X},Y){let J=await y6({text:X});if(!J.success)throw new p1({message:"No object generated: could not parse the response.",cause:J.error,text:X,response:Y.response,usage:Y.usage,finishReason:Y.finishReason});let U=await e$({value:J.value,schema:Q});if(!U.success)throw new p1({message:"No object generated: response did not match schema.",cause:U.error,text:X,response:Y.response,usage:Y.usage,finishReason:Y.finishReason});return U.value}}};var vd="AI_NoSuchProviderError",Id=`vercel.ai.error.${vd}`,Ed=Symbol.for(Id),Md;Md=Ed;var Pd=q.looseObject({name:q.string(),version:q.string()}),PH=q.looseObject({_meta:q.optional(q.object({}).loose())}),KJ=PH,Rd=q.object({method:q.string(),params:q.optional(PH)}),Zd=q.looseObject({experimental:q.optional(q.object({}).loose()),logging:q.optional(q.object({}).loose()),prompts:q.optional(q.looseObject({listChanged:q.optional(q.boolean())})),resources:q.optional(q.looseObject({subscribe:q.optional(q.boolean()),listChanged:q.optional(q.boolean())})),tools:q.optional(q.looseObject({listChanged:q.optional(q.boolean())}))}),b1$=KJ.extend({protocolVersion:q.string(),capabilities:Zd,serverInfo:Pd,instructions:q.optional(q.string())}),Sd=KJ.extend({nextCursor:q.optional(q.string())}),Td=q.object({name:q.string(),description:q.optional(q.string()),inputSchema:q.object({type:q.literal("object"),properties:q.optional(q.object({}).loose())}).loose()}).loose(),x1$=Sd.extend({tools:q.array(Td)}),Cd=q.object({type:q.literal("text"),text:q.string()}).loose(),bd=q.object({type:q.literal("image"),data:q.base64(),mimeType:q.string()}).loose(),Jv=q.object({uri:q.string(),mimeType:q.optional(q.string())}).loose(),xd=Jv.extend({text:q.string()}),kd=Jv.extend({blob:q.base64()}),fd=q.object({type:q.literal("resource"),resource:q.union([xd,kd])}).loose(),k1$=KJ.extend({content:q.array(q.union([Cd,bd,fd])),isError:q.boolean().default(!1).optional()}).or(KJ.extend({toolResult:q.unknown()})),e5="2.0",yd=q.object({jsonrpc:q.literal(e5),id:q.union([q.string(),q.number().int()])}).merge(Rd).strict(),_d=q.object({jsonrpc:q.literal(e5),id:q.union([q.string(),q.number().int()]),result:KJ}).strict(),gd=q.object({jsonrpc:q.literal(e5),id:q.union([q.string(),q.number().int()]),error:q.object({code:q.number().int(),message:q.string(),data:q.optional(q.unknown())})}).strict(),hd=q.object({jsonrpc:q.literal(e5)}).merge(q.object({method:q.string(),params:q.optional(PH)})).strict(),f1$=q.union([yd,hd,_d,gd]);var g1$=J$(()=>x(q.array(q.object({id:q.string(),role:q.enum(["system","user","assistant"]),metadata:q.unknown().optional(),parts:q.array(q.union([q.object({type:q.literal("text"),text:q.string(),state:q.enum(["streaming","done"]).optional(),providerMetadata:j$.optional()}),q.object({type:q.literal("reasoning"),text:q.string(),state:q.enum(["streaming","done"]).optional(),providerMetadata:j$.optional()}),q.object({type:q.literal("source-url"),sourceId:q.string(),url:q.string(),title:q.string().optional(),providerMetadata:j$.optional()}),q.object({type:q.literal("source-document"),sourceId:q.string(),mediaType:q.string(),title:q.string(),filename:q.string().optional(),providerMetadata:j$.optional()}),q.object({type:q.literal("file"),mediaType:q.string(),filename:q.string().optional(),url:q.string(),providerMetadata:j$.optional()}),q.object({type:q.literal("step-start")}),q.object({type:q.string().startsWith("data-"),id:q.string().optional(),data:q.unknown()}),q.object({type:q.literal("dynamic-tool"),toolName:q.string(),toolCallId:q.string(),state:q.literal("input-streaming"),input:q.unknown().optional(),output:q.never().optional(),errorText:q.never().optional()}),q.object({type:q.literal("dynamic-tool"),toolName:q.string(),toolCallId:q.string(),state:q.literal("input-available"),input:q.unknown(),output:q.never().optional(),errorText:q.never().optional(),callProviderMetadata:j$.optional()}),q.object({type:q.literal("dynamic-tool"),toolName:q.string(),toolCallId:q.string(),state:q.literal("output-available"),input:q.unknown(),output:q.unknown(),errorText:q.never().optional(),callProviderMetadata:j$.optional(),preliminary:q.boolean().optional()}),q.object({type:q.literal("dynamic-tool"),toolName:q.string(),toolCallId:q.string(),state:q.literal("output-error"),input:q.unknown(),output:q.never().optional(),errorText:q.string(),callProviderMetadata:j$.optional()}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("input-streaming"),providerExecuted:q.boolean().optional(),input:q.unknown().optional(),output:q.never().optional(),errorText:q.never().optional(),approval:q.never().optional()}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("input-available"),providerExecuted:q.boolean().optional(),input:q.unknown(),output:q.never().optional(),errorText:q.never().optional(),callProviderMetadata:j$.optional(),approval:q.never().optional()}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("approval-requested"),input:q.unknown(),providerExecuted:q.boolean().optional(),output:q.never().optional(),errorText:q.never().optional(),callProviderMetadata:j$.optional(),approval:q.object({id:q.string(),approved:q.never().optional(),reason:q.never().optional()})}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("approval-responded"),input:q.unknown(),providerExecuted:q.boolean().optional(),output:q.never().optional(),errorText:q.never().optional(),callProviderMetadata:j$.optional(),approval:q.object({id:q.string(),approved:q.boolean(),reason:q.string().optional()})}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("output-available"),providerExecuted:q.boolean().optional(),input:q.unknown(),output:q.unknown(),errorText:q.never().optional(),callProviderMetadata:j$.optional(),preliminary:q.boolean().optional(),approval:q.object({id:q.string(),approved:q.literal(!0),reason:q.string().optional()}).optional()}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("output-error"),providerExecuted:q.boolean().optional(),input:q.unknown(),output:q.never().optional(),errorText:q.string(),callProviderMetadata:j$.optional(),approval:q.object({id:q.string(),approved:q.literal(!0),reason:q.string().optional()}).optional()}),q.object({type:q.string().startsWith("tool-"),toolCallId:q.string(),state:q.literal("output-denied"),providerExecuted:q.boolean().optional(),input:q.unknown(),output:q.never().optional(),errorText:q.never().optional(),callProviderMetadata:j$.optional(),approval:q.object({id:q.string(),approved:q.literal(!1),reason:q.string().optional()})})]))}))));class $6{diff($,Q,X={}){let Y;if(typeof X==="function")Y=X,X={};else if("callback"in X)Y=X.callback;let J=this.castInput($,X),U=this.castInput(Q,X),G=this.removeEmpty(this.tokenize(J,X)),z=this.removeEmpty(this.tokenize(U,X));return this.diffWithOptionsObj(G,z,X,Y)}diffWithOptionsObj($,Q,X,Y){var J;let U=(V)=>{if(V=this.postProcess(V,X),Y){setTimeout(function(){Y(V)},0);return}else return V},G=Q.length,z=$.length,H=1,W=G+z;if(X.maxEditLength!=null)W=Math.min(W,X.maxEditLength);let j=(J=X.timeout)!==null&&J!==void 0?J:1/0,N=Date.now()+j,K=[{oldPos:-1,lastComponent:void 0}],w=this.extractCommon(K[0],Q,$,0,X);if(K[0].oldPos+1>=z&&w+1>=G)return U(this.buildValues(K[0].lastComponent,Q,$));let B=-1/0,D=1/0,F=()=>{for(let V=Math.max(B,-H);V<=Math.min(D,H);V+=2){let O,A=K[V-1],L=K[V+1];if(A)K[V-1]=void 0;let I=!1;if(L){let v=L.oldPos-V;I=L&&0<=v&&v<G}let P=A&&A.oldPos+1<z;if(!I&&!P){K[V]=void 0;continue}if(!P||I&&A.oldPos<L.oldPos)O=this.addToPath(L,!0,!1,0,X);else O=this.addToPath(A,!1,!0,1,X);if(w=this.extractCommon(O,Q,$,V,X),O.oldPos+1>=z&&w+1>=G)return U(this.buildValues(O.lastComponent,Q,$))||!0;else{if(K[V]=O,O.oldPos+1>=z)D=Math.min(D,V-1);if(w+1>=G)B=Math.max(B,V+1)}}H++};if(Y)(function V(){setTimeout(function(){if(H>W||Date.now()>N)return Y(void 0);if(!F())V()},0)})();else while(H<=W&&Date.now()<=N){let V=F();if(V)return V}}addToPath($,Q,X,Y,J){let U=$.lastComponent;if(U&&!J.oneChangePerToken&&U.added===Q&&U.removed===X)return{oldPos:$.oldPos+Y,lastComponent:{count:U.count+1,added:Q,removed:X,previousComponent:U.previousComponent}};else return{oldPos:$.oldPos+Y,lastComponent:{count:1,added:Q,removed:X,previousComponent:U}}}extractCommon($,Q,X,Y,J){let U=Q.length,G=X.length,z=$.oldPos,H=z-Y,W=0;while(H+1<U&&z+1<G&&this.equals(X[z+1],Q[H+1],J))if(H++,z++,W++,J.oneChangePerToken)$.lastComponent={count:1,previousComponent:$.lastComponent,added:!1,removed:!1};if(W&&!J.oneChangePerToken)$.lastComponent={count:W,previousComponent:$.lastComponent,added:!1,removed:!1};return $.oldPos=z,H}equals($,Q,X){if(X.comparator)return X.comparator($,Q);else return $===Q||!!X.ignoreCase&&$.toLowerCase()===Q.toLowerCase()}removeEmpty($){let Q=[];for(let X=0;X<$.length;X++)if($[X])Q.push($[X]);return Q}castInput($,Q){return $}tokenize($,Q){return Array.from($)}join($){return $.join("")}postProcess($,Q){return $}get useLongestToken(){return!1}buildValues($,Q,X){let Y=[],J;while($)Y.push($),J=$.previousComponent,delete $.previousComponent,$=J;Y.reverse();let U=Y.length,G=0,z=0,H=0;for(;G<U;G++){let W=Y[G];if(!W.removed){if(!W.added&&this.useLongestToken){let j=Q.slice(z,z+W.count);j=j.map(function(N,K){let w=X[H+K];return w.length>N.length?w:N}),W.value=this.join(j)}else W.value=this.join(Q.slice(z,z+W.count));if(z+=W.count,!W.added)H+=W.count}else W.value=this.join(X.slice(H,H+W.count)),H+=W.count}return Y}}class Yv extends $6{}var md=new Yv;function RH($,Q){let X;for(X=0;X<$.length&&X<Q.length;X++)if($[X]!=Q[X])return $.slice(0,X);return $.slice(0,X)}function ZH($,Q){let X;if(!$||!Q||$[$.length-1]!=Q[Q.length-1])return"";for(X=0;X<$.length&&X<Q.length;X++)if($[$.length-(X+1)]!=Q[Q.length-(X+1)])return $.slice(-X);return $.slice(-X)}function $U($,Q,X){if($.slice(0,Q.length)!=Q)throw Error(`string ${JSON.stringify($)} doesn't start with prefix ${JSON.stringify(Q)}; this is a bug`);return X+$.slice(Q.length)}function QU($,Q,X){if(!Q)return $+X;if($.slice(-Q.length)!=Q)throw Error(`string ${JSON.stringify($)} doesn't end with suffix ${JSON.stringify(Q)}; this is a bug`);return $.slice(0,-Q.length)+X}function GQ($,Q){return $U($,Q,"")}function VJ($,Q){return QU($,Q,"")}function SH($,Q){return Q.slice(0,cd($,Q))}function cd($,Q){let X=0;if($.length>Q.length)X=$.length-Q.length;let Y=Q.length;if($.length<Q.length)Y=$.length;let J=Array(Y),U=0;J[0]=0;for(let G=1;G<Y;G++){if(Q[G]==Q[U])J[G]=J[U];else J[G]=U;while(U>0&&Q[G]!=Q[U])U=J[U];if(Q[G]==Q[U])U++}U=0;for(let G=X;G<$.length;G++){while(U>0&&$[G]!=Q[U])U=J[U];if($[G]==Q[U])U++}return U}function Uv($){return $.includes(`\r
`)&&!$.startsWith(`
`)&&!$.match(/[^\r]\n/)}function qv($){return!$.includes(`\r
`)&&$.includes(`
`)}function zQ($){let Q;for(Q=$.length-1;Q>=0;Q--)if(!$[Q].match(/\s/))break;return $.substring(Q+1)}function c0($){let Q=$.match(/^\s*/);return Q?Q[0]:""}var XU="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",ud=new RegExp(`[${XU}]+|\\s+|[^${XU}]`,"ug");class zv extends $6{equals($,Q,X){if(X.ignoreCase)$=$.toLowerCase(),Q=Q.toLowerCase();return $.trim()===Q.trim()}tokenize($,Q={}){let X;if(Q.intlSegmenter){let U=Q.intlSegmenter;if(U.resolvedOptions().granularity!="word")throw Error('The segmenter passed must have a granularity of "word"');X=Array.from(U.segment($),(G)=>G.segment)}else X=$.match(ud)||[];let Y=[],J=null;return X.forEach((U)=>{if(/\s/.test(U))if(J==null)Y.push(U);else Y.push(Y.pop()+U);else if(J!=null&&/\s/.test(J))if(Y[Y.length-1]==J)Y.push(Y.pop()+U);else Y.push(J+U);else Y.push(U);J=U}),Y}join($){return $.map((Q,X)=>{if(X==0)return Q;else return Q.replace(/^\s+/,"")}).join("")}postProcess($,Q){if(!$||Q.oneChangePerToken)return $;let X=null,Y=null,J=null;if($.forEach((U)=>{if(U.added)Y=U;else if(U.removed)J=U;else{if(Y||J)Gv(X,J,Y,U);X=U,Y=null,J=null}}),Y||J)Gv(X,J,Y,null);return $}}var id=new zv;function Gv($,Q,X,Y){if(Q&&X){let J=c0(Q.value),U=zQ(Q.value),G=c0(X.value),z=zQ(X.value);if($){let H=RH(J,G);$.value=QU($.value,G,H),Q.value=GQ(Q.value,H),X.value=GQ(X.value,H)}if(Y){let H=ZH(U,z);Y.value=$U(Y.value,z,H),Q.value=VJ(Q.value,H),X.value=VJ(X.value,H)}}else if(X){if($){let J=c0(X.value);X.value=X.value.substring(J.length)}if(Y){let J=c0(Y.value);Y.value=Y.value.substring(J.length)}}else if($&&Y){let J=c0(Y.value),U=c0(Q.value),G=zQ(Q.value),z=RH(J,U);Q.value=GQ(Q.value,z);let H=ZH(GQ(J,z),G);Q.value=VJ(Q.value,H),Y.value=$U(Y.value,J,H),$.value=QU($.value,J,J.slice(0,J.length-H.length))}else if(Y){let J=c0(Y.value),U=zQ(Q.value),G=SH(U,J);Q.value=VJ(Q.value,G)}else if($){let J=zQ($.value),U=c0(Q.value),G=SH(J,U);Q.value=GQ(Q.value,G)}}class Wv extends $6{tokenize($){let Q=new RegExp(`(\\r?\\n)|[${XU}]+|[^\\S\\n\\r]+|[^${XU}]`,"ug");return $.match(Q)||[]}}var dd=new Wv;class Hv extends $6{constructor(){super(...arguments);this.tokenize=TH}equals($,Q,X){if(X.ignoreWhitespace){if(!X.newlineIsToken||!$.includes(`
`))$=$.trim();if(!X.newlineIsToken||!Q.includes(`
`))Q=Q.trim()}else if(X.ignoreNewlineAtEof&&!X.newlineIsToken){if($.endsWith(`
`))$=$.slice(0,-1);if(Q.endsWith(`
`))Q=Q.slice(0,-1)}return super.equals($,Q,X)}}var jv=new Hv;function JU($,Q,X){return jv.diff($,Q,X)}function TH($,Q){if(Q.stripTrailingCr)$=$.replace(/\r\n/g,`
`);let X=[],Y=$.split(/(\n|\r\n)/);if(!Y[Y.length-1])Y.pop();for(let J=0;J<Y.length;J++){let U=Y[J];if(J%2&&!Q.newlineIsToken)X[X.length-1]+=U;else X.push(U)}return X}function ld($){return $=="."||$=="!"||$=="?"}class wv extends $6{tokenize($){var Q;let X=[],Y=0;for(let J=0;J<$.length;J++){if(J==$.length-1){X.push($.slice(Y));break}if(ld($[J])&&$[J+1].match(/\s/)){X.push($.slice(Y,J+1)),J=Y=J+1;while((Q=$[J+1])===null||Q===void 0?void 0:Q.match(/\s/))J++;X.push($.slice(Y,J+1)),Y=J+1}}return X}}var pd=new wv;class Kv extends $6{tokenize($){return $.split(/([{}:;,]|\s+)/)}}var nd=new Kv;class Nv extends $6{constructor(){super(...arguments);this.tokenize=TH}get useLongestToken(){return!0}castInput($,Q){let{undefinedReplacement:X,stringifyReplacer:Y=(J,U)=>typeof U>"u"?X:U}=Q;return typeof $==="string"?$:JSON.stringify(YU($,null,null,Y),null,"  ")}equals($,Q,X){return super.equals($.replace(/,([\r\n])/g,"$1"),Q.replace(/,([\r\n])/g,"$1"),X)}}var rd=new Nv;function YU($,Q,X,Y,J){if(Q=Q||[],X=X||[],Y)$=Y(J===void 0?"":J,$);let U;for(U=0;U<Q.length;U+=1)if(Q[U]===$)return X[U];let G;if(Object.prototype.toString.call($)==="[object Array]"){Q.push($),G=Array($.length),X.push(G);for(U=0;U<$.length;U+=1)G[U]=YU($[U],Q,X,Y,String(U));return Q.pop(),X.pop(),G}if($&&$.toJSON)$=$.toJSON();if(typeof $==="object"&&$!==null){Q.push($),G={},X.push(G);let z=[],H;for(H in $)if(Object.prototype.hasOwnProperty.call($,H))z.push(H);z.sort();for(U=0;U<z.length;U+=1)H=z[U],G[H]=YU($[H],Q,X,Y,H);Q.pop(),X.pop()}else G=$;return G}class Vv extends $6{tokenize($){return $.slice()}join($){return $}removeEmpty($){return $}}var od=new Vv;function CH($){if(Array.isArray($))return $.map((Q)=>CH(Q));return Object.assign(Object.assign({},$),{hunks:$.hunks.map((Q)=>Object.assign(Object.assign({},Q),{lines:Q.lines.map((X,Y)=>{var J;return X.startsWith("\\")||X.endsWith("\r")||((J=Q.lines[Y+1])===null||J===void 0?void 0:J.startsWith("\\"))?X:X+"\r"})}))})}function bH($){if(Array.isArray($))return $.map((Q)=>bH(Q));return Object.assign(Object.assign({},$),{hunks:$.hunks.map((Q)=>Object.assign(Object.assign({},Q),{lines:Q.lines.map((X)=>X.endsWith("\r")?X.substring(0,X.length-1):X)}))})}function Bv($){if(!Array.isArray($))$=[$];return!$.some((Q)=>Q.hunks.some((X)=>X.lines.some((Y)=>!Y.startsWith("\\")&&Y.endsWith("\r"))))}function Dv($){if(!Array.isArray($))$=[$];return $.some((Q)=>Q.hunks.some((X)=>X.lines.some((Y)=>Y.endsWith("\r"))))&&$.every((Q)=>Q.hunks.every((X)=>X.lines.every((Y,J)=>{var U;return Y.startsWith("\\")||Y.endsWith("\r")||((U=X.lines[J+1])===null||U===void 0?void 0:U.startsWith("\\"))})))}function WQ($){let Q=$.split(/\n/),X=[],Y=0;function J(){let z={};X.push(z);while(Y<Q.length){let H=Q[Y];if(/^(---|\+\+\+|@@)\s/.test(H))break;let W=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(H);if(W)z.index=W[1];Y++}U(z),U(z),z.hunks=[];while(Y<Q.length){let H=Q[Y];if(/^(Index:\s|diff\s|---\s|\+\+\+\s|===================================================================)/.test(H))break;else if(/^@@/.test(H))z.hunks.push(G());else if(H)throw Error("Unknown line "+(Y+1)+" "+JSON.stringify(H));else Y++}}function U(z){let H=/^(---|\+\+\+)\s+(.*)\r?$/.exec(Q[Y]);if(H){let W=H[2].split("\t",2),j=(W[1]||"").trim(),N=W[0].replace(/\\\\/g,"\\");if(/^".*"$/.test(N))N=N.substr(1,N.length-2);if(H[1]==="---")z.oldFileName=N,z.oldHeader=j;else z.newFileName=N,z.newHeader=j;Y++}}function G(){var z;let H=Y,W=Q[Y++],j=W.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),N={oldStart:+j[1],oldLines:typeof j[2]>"u"?1:+j[2],newStart:+j[3],newLines:typeof j[4]>"u"?1:+j[4],lines:[]};if(N.oldLines===0)N.oldStart+=1;if(N.newLines===0)N.newStart+=1;let K=0,w=0;for(;Y<Q.length&&(w<N.oldLines||K<N.newLines||((z=Q[Y])===null||z===void 0?void 0:z.startsWith("\\")));Y++){let B=Q[Y].length==0&&Y!=Q.length-1?" ":Q[Y][0];if(B==="+"||B==="-"||B===" "||B==="\\"){if(N.lines.push(Q[Y]),B==="+")K++;else if(B==="-")w++;else if(B===" ")K++,w++}else throw Error(`Hunk at line ${H+1} contained invalid line ${Q[Y]}`)}if(!K&&N.newLines===1)N.newLines=0;if(!w&&N.oldLines===1)N.oldLines=0;if(K!==N.newLines)throw Error("Added line count did not match for hunk at line "+(H+1));if(w!==N.oldLines)throw Error("Removed line count did not match for hunk at line "+(H+1));return N}while(Y<Q.length)J();return X}function xH($,Q,X){let Y=!0,J=!1,U=!1,G=1;return function z(){if(Y&&!U){if(J)G++;else Y=!1;if($+G<=X)return $+G;U=!0}if(!J){if(!U)Y=!0;if(Q<=$-G)return $-G++;return J=!0,z()}return}}function UU($,Q,X={}){let Y;if(typeof Q==="string")Y=WQ(Q);else if(Array.isArray(Q))Y=Q;else Y=[Q];if(Y.length>1)throw Error("applyPatch only works with a single input.");return ad($,Y[0],X)}function ad($,Q,X={}){if(X.autoConvertLineEndings||X.autoConvertLineEndings==null){if(Uv($)&&Bv(Q))Q=CH(Q);else if(qv($)&&Dv(Q))Q=bH(Q)}let Y=$.split(`
`),J=Q.hunks,U=X.compareLine||((B,D,F,V)=>D===V),G=X.fuzzFactor||0,z=0;if(G<0||!Number.isInteger(G))throw Error("fuzzFactor must be a non-negative integer");if(!J.length)return $;let H="",W=!1,j=!1;for(let B=0;B<J[J.length-1].lines.length;B++){let D=J[J.length-1].lines[B];if(D[0]=="\\"){if(H[0]=="+")W=!0;else if(H[0]=="-")j=!0}H=D}if(W){if(j){if(!G&&Y[Y.length-1]=="")return!1}else if(Y[Y.length-1]=="")Y.pop();else if(!G)return!1}else if(j){if(Y[Y.length-1]!="")Y.push("");else if(!G)return!1}function N(B,D,F,V=0,O=!0,A=[],L=0){let I=0,P=!1;for(;V<B.length;V++){let v=B[V],Z=v.length>0?v[0]:" ",R=v.length>0?v.substr(1):v;if(Z==="-")if(U(D+1,Y[D],Z,R))D++,I=0;else{if(!F||Y[D]==null)return null;return A[L]=Y[D],N(B,D+1,F-1,V,!1,A,L+1)}if(Z==="+"){if(!O)return null;A[L]=R,L++,I=0,P=!0}if(Z===" ")if(I++,A[L]=Y[D],U(D+1,Y[D],Z,R))L++,O=!0,P=!1,D++;else{if(P||!F)return null;return Y[D]&&(N(B,D+1,F-1,V+1,!1,A,L+1)||N(B,D+1,F-1,V,!1,A,L+1))||N(B,D,F-1,V+1,!1,A,L)}}return L-=I,D-=I,A.length=L,{patchedLines:A,oldLineLastI:D-1}}let K=[],w=0;for(let B=0;B<J.length;B++){let D=J[B],F,V=Y.length-D.oldLines+G,O;for(let A=0;A<=G;A++){O=D.oldStart+w-1;let L=xH(O,z,V);for(;O!==void 0;O=L())if(F=N(D.lines,O,A),F)break;if(F)break}if(!F)return!1;for(let A=z;A<O;A++)K.push(Y[A]);for(let A=0;A<F.patchedLines.length;A++){let L=F.patchedLines[A];K.push(L)}z=F.oldLineLastI+1,w=O+1-D.oldStart}for(let B=z;B<Y.length;B++)K.push(Y[B]);return K.join(`
`)}function kH($,Q,X,Y,J,U,G){let z;if(!G)z={};else if(typeof G==="function")z={callback:G};else z=G;if(typeof z.context>"u")z.context=4;let H=z.context;if(z.newlineIsToken)throw Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(!z.callback)return W(JU(X,Y,z));else{let{callback:j}=z;JU(X,Y,Object.assign(Object.assign({},z),{callback:(N)=>{let K=W(N);j(K)}}))}function W(j){if(!j)return;j.push({value:"",lines:[]});function N(O){return O.map(function(A){return" "+A})}let K=[],w=0,B=0,D=[],F=1,V=1;for(let O=0;O<j.length;O++){let A=j[O],L=A.lines||td(A.value);if(A.lines=L,A.added||A.removed){if(!w){let I=j[O-1];if(w=F,B=V,I)D=H>0?N(I.lines.slice(-H)):[],w-=D.length,B-=D.length}for(let I of L)D.push((A.added?"+":"-")+I);if(A.added)V+=L.length;else F+=L.length}else{if(w)if(L.length<=H*2&&O<j.length-2)for(let I of N(L))D.push(I);else{let I=Math.min(L.length,H);for(let v of N(L.slice(0,I)))D.push(v);let P={oldStart:w,oldLines:F-w+I,newStart:B,newLines:V-B+I,lines:D};K.push(P),w=0,B=0,D=[]}F+=L.length,V+=L.length}}for(let O of K)for(let A=0;A<O.lines.length;A++)if(O.lines[A].endsWith(`
`))O.lines[A]=O.lines[A].slice(0,-1);else O.lines.splice(A+1,0,"\\ No newline at end of file"),A++;return{oldFileName:$,newFileName:Q,oldHeader:J,newHeader:U,hunks:K}}}function qU($){if(Array.isArray($))return $.map(qU).join(`
`);let Q=[];if($.oldFileName==$.newFileName)Q.push("Index: "+$.oldFileName);Q.push("==================================================================="),Q.push("--- "+$.oldFileName+(typeof $.oldHeader>"u"?"":"\t"+$.oldHeader)),Q.push("+++ "+$.newFileName+(typeof $.newHeader>"u"?"":"\t"+$.newHeader));for(let X=0;X<$.hunks.length;X++){let Y=$.hunks[X];if(Y.oldLines===0)Y.oldStart-=1;if(Y.newLines===0)Y.newStart-=1;Q.push("@@ -"+Y.oldStart+","+Y.oldLines+" +"+Y.newStart+","+Y.newLines+" @@");for(let J of Y.lines)Q.push(J)}return Q.join(`
`)+`
`}function fH($,Q,X,Y,J,U,G){if(typeof G==="function")G={callback:G};if(!(G===null||G===void 0?void 0:G.callback)){let z=kH($,Q,X,Y,J,U,G);if(!z)return;return qU(z)}else{let{callback:z}=G;kH($,Q,X,Y,J,U,Object.assign(Object.assign({},G),{callback:(H)=>{if(!H)z(void 0);else z(qU(H))}}))}}function td($){let Q=$.endsWith(`
`),X=$.split(`
`).map((Y)=>Y+`
`);if(Q)X.pop();else X.push(X.pop().slice(0,-1));return X}function sd($,Q,X,Y){let J=Q.indexOf(X);if(J===-1)throw Error(`Search string not found in file: ${$}`);let U=Q.substring(0,J)+Y+Q.substring(J+X.length);return fH($,$,Q,U,"before","after")}function ed($,Q,X){try{if(X.type==="search-replace"){if(!X.search||!X.replace)return{success:!1,filePath:$,error:"Search or replace string missing"};let Y=Q.indexOf(X.search);if(Y!==-1){let z=Q.substring(0,Y)+X.replace+Q.substring(Y+X.search.length);return{success:!0,filePath:$,newContent:z,hunksApplied:1,hunksTotal:1}}let J=X.search.replace(/\s+/g," ").trim();if(Q.replace(/\s+/g," ").trim().indexOf(J)!==-1){let z=sd($,Q,X.search,X.replace),H=WQ(z);if(H.length>0){let W=UU(Q,H[0]);if(W!==!1)return{success:!0,filePath:$,newContent:W,hunksApplied:1,hunksTotal:1}}}return{success:!1,filePath:$,error:`Search string not found in file: ${$}`}}else if(X.type==="unified-diff"){if(!X.diff)return{success:!1,filePath:$,error:"Diff string missing"};let Y=WQ(X.diff);if(Y.length===0)return{success:!1,filePath:$,error:"Failed to parse diff"};let J=UU(Q,Y[0]);if(J===!1)return{success:!1,filePath:$,error:"Failed to apply patch"};return{success:!0,filePath:$,newContent:J,hunksApplied:Y[0].hunks.length,hunksTotal:Y[0].hunks.length}}return{success:!1,filePath:$,error:`Unknown edit type: ${X.type}`}}catch(Y){return{success:!1,filePath:$,error:Y instanceof Error?Y.message:String(Y)}}}function GU($,Q){let X={...$};console.debug("[patches] initial files:",Object.keys(X));let Y=[],J=[];for(let U of Q){let G=U.filePath;if(!G.startsWith("/"))G="/"+G;let z=X[G];if(z===void 0){let W=G.startsWith("/")?G.slice(1):`/${G}`;if(z=X[W],z!==void 0)G=W}if(z===void 0){let W=Object.keys(X);console.debug("[patches] missing file",G,"available keys:",W);let j=W.map((N)=>N===G?`${N}*`:N).join(", ");J.push(`File not found: ${G} (available: ${j})`);continue}let H=ed(G,z,U);if(Y.push(H),H.success&&H.newContent)X[G]=H.newContent;else J.push(`Failed to apply edit to ${G}: ${H.error}`)}return{success:J.length===0,files:X,results:Y,errors:J}}function zU($,Q,X,Y){return{id:crypto.randomUUID(),timestamp:Date.now(),edits:$,beforeState:Q,afterState:X,explanation:Y}}class _H{history=[];currentIndex=-1;maxHistorySize;constructor($=100){this.maxHistorySize=$}push($){if(this.history=this.history.slice(0,this.currentIndex+1),this.history.push($),this.currentIndex=this.history.length-1,this.history.length>this.maxHistorySize){let Q=this.history.length-this.maxHistorySize;this.history=this.history.slice(Q),this.currentIndex-=Q}}undo(){if(!this.canUndo())return null;let $=this.history[this.currentIndex];return this.currentIndex--,$}redo(){if(!this.canRedo())return null;return this.currentIndex++,this.history[this.currentIndex]}canUndo(){return this.currentIndex>=0}canRedo(){return this.currentIndex<this.history.length-1}getCurrentState(){if(this.currentIndex<0)return null;return this.history[this.currentIndex].afterState}getUndoState(){if(!this.canUndo())return null;return this.history[this.currentIndex].beforeState}getRedoState(){if(!this.canRedo())return null;return this.history[this.currentIndex+1].afterState}getHistory(){return[...this.history]}getCurrentIndex(){return this.currentIndex}getEntryById($){return this.history.find((Q)=>Q.id===$)||null}getRecentEntries($=10){let Q=Math.max(0,this.history.length-$);return this.history.slice(Q)}clear(){this.history=[],this.currentIndex=-1}getSummary(){return{totalEntries:this.history.length,currentIndex:this.currentIndex,canUndo:this.canUndo(),canRedo:this.canRedo(),undoCount:this.currentIndex+1,redoCount:this.history.length-this.currentIndex-1}}toJSON(){return JSON.stringify({history:this.history,currentIndex:this.currentIndex})}static fromJSON($){let Q=JSON.parse($),X=new _H;return X.history=Q.history||[],X.currentIndex=Q.currentIndex??-1,X}}var yH=null;function n1(){if(!yH)yH=new _H;return yH}async function Ov({model:$,conversation:Q}){let X=Y$.object({files:Y$.record(Y$.string()),explanation:Y$.string().optional()}),J=(await MH({model:$,schema:X,prompt:Q})).object;if(!J||typeof J!=="object"||!J.files||typeof J.files!=="object")throw Error("AI failed to generate valid files");return{files:J.files,explanation:typeof J.explanation==="string"?J.explanation:void 0}}async function Av({model:$,conversation:Q,workingFiles:X}){let Y=Y$.object({edits:Y$.array(L7),explanation:Y$.string().optional()}),U=(await MH({model:$,schema:Y,prompt:Q})).object;if(!U||typeof U!=="object"||!U.edits||!Array.isArray(U.edits))throw Error("AI failed to generate valid edits");let z=U.edits.map((N)=>{let K=N.filePath.startsWith("/")?N.filePath:`/${N.filePath}`;return{...N,filePath:K}}).filter((N)=>!N.filePath.startsWith("/__hypertool__/"));if(z.length===0)throw Error("No valid edits generated");let H=GU(X,z);if(!H.success)throw Error(`Failed to apply patches: ${H.errors?.join(", ")}`);let W=n1(),j=zU(z,X,H.files,U.explanation);return W.push(j),{files:H.files,explanation:U.explanation,edits:z,historyId:j.id}}function WU({systemPrompt:$,files:Q,messages:X}){let Y=Object.entries(Q).map(([J,U])=>`File: ${J}
\`\`\`
${U}
\`\`\``).join(`

`);return[`System: ${$}`,`
Current project files:
${Y}
`,...X.map((J)=>`${J.role}: ${J.content}`)].join(`

`)}function Fv($,Q){let X={...$},Y=X["/index.html"]??'<!doctype html><html><head><meta charset="utf-8" /><title>p5 Sketch</title></head><body><script src="https://unpkg.com/p5@1.9.2/lib/p5.min.js"></script><script src="/sketch.js"></script></body></html>',J=X["/sketch.js"]??"function setup(){createCanvas(600,400);}function draw(){background('#0b0c10');}";if(/circle|orbit|ring/i.test(Q))J="function setup(){createCanvas(600,400);}function draw(){background('#0b0c10'); fill('#66fcf1'); noStroke(); circle(width/2,height/2,200);}";else if(/noise|perlin|flow/i.test(Q))J="let t=0;function setup(){createCanvas(600,400);}function draw(){background('#0b0c10'); stroke('#66fcf1'); noFill(); beginShape(); for(let x=0;x<width;x+=4){const y=noise(x*0.01,t)*height; vertex(x,y);} endShape(); t+=0.01;}";return X["/index.html"]=Y,X["/sketch.js"]=J,X}function $l($,Q){let X=$.replace(/^\/+/,"");return Q?.ensureLeadingSlash?`/${X}`:X}function BJ($,Q){return Object.fromEntries(Object.entries($).map(([X,Y])=>[$l(X,Q),Y]))}var gH;((J)=>{J[J.DEBUG=0]="DEBUG";J[J.INFO=1]="INFO";J[J.WARN=2]="WARN";J[J.ERROR=3]="ERROR"})(gH||={});class DJ{minLevel;context;requestId;constructor($,Q){this.context=$,this.requestId=Q;let X="development",Y=process.env.LOG_LEVEL?.toUpperCase();if(Y)this.minLevel=gH[Y]??1;else this.minLevel=X==="production"?1:0}child($,Q){return new DJ(this.context?`${this.context}:${$}`:$,Q||this.requestId)}withRequestId($){return new DJ(this.context,$)}shouldLog($){return $>=this.minLevel}formatLog($,Q,X,Y){let J={timestamp:new Date().toISOString(),level:gH[$],message:Q};if(this.context)J.context=this.context;if(this.requestId)J.requestId=this.requestId;if(X&&Object.keys(X).length>0)J.metadata=X;if(Y)J.error={name:Y.name,message:Y.message,stack:Y.stack};return J}writeLog($){{let X={DEBUG:"\x1B[36m",INFO:"\x1B[32m",WARN:"\x1B[33m",ERROR:"\x1B[31m",RESET:"\x1B[0m",DIM:"\x1B[2m"},Y=X[$.level]||X.RESET,J=$.context?`[${$.context}]`:"",U=$.requestId?`{${$.requestId}}`:"",G=new Date($.timestamp).toLocaleTimeString(),z=`${X.DIM}${G}${X.RESET} ${Y}${$.level.padEnd(5)}${X.RESET} ${J}${U} ${$.message}`;if(console.log(z),$.metadata)console.log(`${X.DIM}  Metadata:${X.RESET}`,$.metadata);if($.error){if(console.log(`${X.DIM}  Error:${X.RESET}`,$.error.message),$.error.stack)console.log(`${X.DIM}  Stack:${X.RESET}
${$.error.stack}`)}}}debug($,Q){if(!this.shouldLog(0))return;let X=this.formatLog(0,$,Q);this.writeLog(X)}info($,Q){if(!this.shouldLog(1))return;let X=this.formatLog(1,$,Q);this.writeLog(X)}warn($,Q){if(!this.shouldLog(2))return;let X=this.formatLog(2,$,Q);this.writeLog(X)}error($,Q,X){if(!this.shouldLog(3))return;let Y=Q instanceof Error?Q:void 0,J=Q&&!(Q instanceof Error)?{...X,errorData:Q}:X,U=this.formatLog(3,$,J,Y);this.writeLog(U)}time($){let Q=Date.now();return()=>{let X=Date.now()-Q;this.info(`${$} completed`,{durationMs:X})}}log($,Q,X,Y){if(!this.shouldLog($))return;let J=this.formatLog($,Q,X,Y);this.writeLog(J)}}var EQ$=new DJ;function r1($,Q){return new DJ($,Q)}var Iv=new X6;function Lv($){let Q={},X="__hypertool__/";return Object.entries($).forEach(([Y,J])=>{if(!(Y.startsWith("/")?Y.slice(1):Y).startsWith("__hypertool__/"))Q[Y]=J}),Q}function vv($,Q){let X={},Y={};return Object.entries($).forEach(([J,U])=>{let G=J.startsWith("/")?J:`/${J}`;if(G.startsWith("/__hypertool__/"))Y[G]=U;else X[G]=U}),Q?.debug("Split files into user and system categories",{userFileCount:Object.keys(X).length,systemFileCount:Object.keys(Y).length,userFiles:Object.keys(X),systemFiles:Object.keys(Y)}),{user:X,system:Y}}function hH($,Q){return{...$,...Q}}Iv.post("/",async($)=>{let Q=`ai-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,X=r1("api/ai",Q);X.info("AI request received");try{let Y=await $.req.json(),J=zX.safeParse(Y);if(!J.success)return X.warn("Invalid request body",{validationErrors:J.error.errors}),$.json({error:"Invalid body"},400);let{messages:U,model:G,systemPrompt:z,apiKey:H,currentFiles:W,editMode:j}=J.data;X.info("Request validated",{model:G,editMode:j,messageCount:U.length,hasApiKey:!!H,hasCustomSystemPrompt:!!z,hasCurrentFiles:!!(W&&Object.keys(W).length>0)});let N=X.time("AI request processing"),K=w1(),w=W&&Object.keys(W).length>0?W:K;X.debug("Loaded working files",{source:W&&Object.keys(W).length>0?"currentFiles":"boilerplate",totalFiles:Object.keys(w).length});let{user:B,system:D}=vv(w,X),F=Lv(B);X.debug("Prepared files for AI processing",{userFileCount:Object.keys(B).length,aiVisibleFileCount:Object.keys(F).length,systemFileCount:Object.keys(D).length,userFiles:Object.keys(B),aiVisibleFiles:Object.keys(F),systemFiles:Object.keys(D)});let V=j==="patch";X.info(`Using ${V?"patch":"full"} generation mode`);let A=_5(G,H).chat(G),L=V?h5:g5,I=WU({systemPrompt:z?.trim()||L,files:F,messages:U});if(X.debug("Built conversation prompt",{conversationLength:I.length,usingDefaultPrompt:!z?.trim()}),V){X.info("Starting patch generation");let P=await Av({model:A,conversation:I,workingFiles:w});X.info("Patch generation completed",{editCount:P.edits?.length||0,historyId:P.historyId,modifiedFiles:Object.keys(P.files).length});let v=V0(hH(D,P.files));return N(),$.json({files:BJ(v,{ensureLeadingSlash:!0}),explanation:P.explanation,edits:P.edits,historyId:P.historyId,mode:"patch"})}else{X.info("Starting full file generation");let P=await Ov({model:A,conversation:I});X.info("Full file generation completed",{fileCount:Object.keys(P.files).length,files:Object.keys(P.files)});let v=V0(hH(D,P.files));return N(),$.json({files:BJ(v,{ensureLeadingSlash:!0}),explanation:P.explanation,mode:"full"})}}catch(Y){X.error("AI SDK request failed",Y,{errorType:Y instanceof Error?Y.name:typeof Y});try{let J=await $.req.json(),U=zX.safeParse(J);if(U.success){let{messages:G,currentFiles:z}=U.data,H=w1(),W=z&&Object.keys(z).length>0?z:H,{user:j,system:N}=vv(W),K=Lv(j);X.warn("Applying fallback stub transformation");let w=Fv(K,G.map((D)=>D.content).join(`
`)),B=V0(hH(N,w));return $.json({files:B,explanation:"AI request failed; stub applied."})}}catch(J){X.error("Fallback generation also failed",J)}return $.json({error:"AI request failed"},500)}});var Ev=Iv;var Pv=new X6;function Ql($){let Q={},X="__hypertool__/";return Object.entries($).forEach(([Y,J])=>{if(!(Y.startsWith("/")?Y.slice(1):Y).startsWith("__hypertool__/"))Q[Y]=J}),Q}function Xl($,Q){let X={},Y={};return Object.entries($).forEach(([J,U])=>{let G=J.startsWith("/")?J:`/${J}`;if(G.startsWith("/__hypertool__/"))Y[G]=U;else X[G]=U}),Q?.debug("Split files into user and system categories",{userFileCount:Object.keys(X).length,systemFileCount:Object.keys(Y).length}),{user:X,system:Y}}function Mv($,Q){return{...$,...Q}}Pv.post("/",async($)=>{let Q=`ai-stream-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,X=r1("api/ai-stream",Q);X.info("AI streaming request received");try{let Y=await $.req.json(),J=zX.safeParse(Y);if(!J.success)return X.warn("Invalid request body",{validationErrors:J.error.errors}),$.json({error:"Invalid body"},400);let{messages:U,model:G,systemPrompt:z,apiKey:H,currentFiles:W,editMode:j}=J.data;X.info("Request validated",{model:G,editMode:j,messageCount:U.length});let N=w1(),K=W&&Object.keys(W).length>0?W:N,{user:w,system:B}=Xl(K,X),D=Ql(w),F=j==="patch",O=_5(G,H).chat(G),A=F?h5:g5,L=WU({systemPrompt:z?.trim()||A,files:D,messages:U});return X.info(`Starting ${F?"patch":"full"} generation with streaming`),c4($,async(I)=>{try{$.header("Content-Type","text/event-stream"),$.header("Cache-Control","no-cache"),$.header("Connection","keep-alive");let P=F?`${L}

IMPORTANT: First explain your changes in plain text, then output a JSON object with this exact structure:
{"edits": [{"type": "search-replace", "filePath": "/path", "search": "old code", "replace": "new code"}], "explanation": "optional"}`:`${L}

IMPORTANT: First explain your changes in plain text, then output a JSON object with this exact structure:
{"files": {"/path": "content"}, "explanation": "optional"}`,v=await Xv({model:O,prompt:P,temperature:0.7}),Z=0,R="";X.debug("Sending start event"),await I.write(`data: ${JSON.stringify({type:"start"})}

`),X.debug("Starting text stream");for await(let T of v.textStream)if(Z++,R+=T,await I.write(`data: ${JSON.stringify({type:"token",text:T})}

`),Z%50===0)X.debug(`Streamed ${Z} tokens, ${R.length} chars`);X.info("Streaming completed",{totalTokens:Z,totalChars:R.length});let C={},S=R.match(/\{[\s\S]*\}/);if(S)try{C=JSON.parse(S[0]),X.debug("Parsed JSON from response",{hasEdits:!!C.edits,hasFiles:!!C.files,editCount:C.edits?.length,fileCount:C.files?Object.keys(C.files).length:0})}catch(T){throw X.error("Failed to parse JSON from response",T),Error("Failed to parse AI response")}else throw X.error("No JSON found in response"),Error("No structured data in AI response");let n,c=C.explanation||R;if(F){let T=C.edits;if(!T||T.length===0)throw Error("No valid edits generated");let y=T.map((D$)=>{let U$=D$.filePath.startsWith("/")?D$.filePath:`/${D$.filePath}`;return{...D$,filePath:U$}}).filter((D$)=>!D$.filePath.startsWith("/__hypertool__/"));X.info("Applying patches",{editCount:y.length});let f=GU(K,y);if(!f.success)throw Error(`Failed to apply patches: ${f.errors?.join(", ")}`);let l=n1(),N$=zU(y,K,f.files,C.explanation);if(l.push(N$),n=V0(Mv(B,f.files)),!c){let D$=new Set(y.map((v$)=>v$.filePath)),U$=`Applied ${y.length} ${y.length===1?"edit":"edits"} to ${D$.size} ${D$.size===1?"file":"files"}:

`;y.forEach((v$,V$)=>{if(U$+=`\uD83D\uDCDD Edit ${V$+1}: ${v$.filePath}
`,U$+=`   Type: ${v$.type}
`,v$.search){let r=v$.search.length>100?v$.search.substring(0,100)+"...":v$.search;U$+=`   Search: "${r}"
`}if(v$.replace){let r=v$.replace.length>100?v$.replace.substring(0,100)+"...":v$.replace;U$+=`   Replace: "${r}"
`}U$+=`
`}),c=U$}X.info("Patches applied successfully",{historyId:N$.id})}else{let T=C.files;if(X.info("Full file generation",{fileCount:Object.keys(T||{}).length}),n=V0(Mv(B,T)),!c){let y=Object.keys(T),f=`Generated ${y.length} ${y.length===1?"file":"files"}:

`;y.forEach((l,N$)=>{let D$=T[l],U$=D$.split(`
`).length,v$=D$.length,V$=D$.length>150?D$.substring(0,150)+"...":D$;f+=`\uD83D\uDCC4 ${N$+1}. ${l}
`,f+=`   Lines: ${U$}, Characters: ${v$}
`,f+=`   Preview: ${V$.split(`
`)[0]}...

`}),c=f}}X.debug("Sending complete event with files"),await I.write(`data: ${JSON.stringify({type:"complete",files:BJ(n,{ensureLeadingSlash:!0}),explanation:c,mode:F?"patch":"full"})}

`),X.info("Stream successfully closed")}catch(P){X.error("Streaming error",P,{errorType:P instanceof Error?P.name:typeof P,errorMessage:P instanceof Error?P.message:String(P),stack:P instanceof Error?P.stack:void 0}),await I.write(`data: ${JSON.stringify({type:"error",error:P instanceof Error?P.message:"Streaming failed"})}

`)}})}catch(Y){return X.error("AI streaming request failed",Y),$.json({error:"AI streaming request failed"},500)}});var Rv=Pv;var mH=new X6,Jl=Y$.object({action:Y$.enum(["undo","redo","get","clear","summary"]),entryId:Y$.string().optional()});mH.get("/",async($)=>{let Q=`history-get-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,X=r1("api/history",Q);X.info("History GET request received");try{let Y=n1(),J=Y.getHistory(),U=Y.getSummary();return X.info("History retrieved successfully",{entryCount:J.length,canUndo:U.canUndo,canRedo:U.canRedo,currentIndex:U.currentIndex}),$.json({history:J.map((G)=>({id:G.id,timestamp:G.timestamp,explanation:G.explanation,editsCount:G.edits.length})),summary:U})}catch(Y){return X.error("History GET request failed",Y),$.json({error:"Failed to retrieve history"},500)}});mH.post("/",async($)=>{let Q=`history-post-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,X=r1("api/history",Q);X.info("History POST request received");try{let Y=await $.req.json(),J=Jl.safeParse(Y);if(!J.success)return X.warn("Invalid request body",{validationErrors:J.error.errors}),$.json({error:"Invalid request body"},400);let{action:U,entryId:G}=J.data;X.info("Processing history action",{action:U,entryId:G});let z=n1();switch(U){case"undo":{let H=z.undo();if(!H)return X.warn("Undo requested but nothing to undo"),$.json({error:"Nothing to undo"},400);return X.info("Undo completed successfully",{entryId:H.id,editsCount:H.edits.length}),$.json({success:!0,action:"undo",files:H.beforeState,entry:{id:H.id,timestamp:H.timestamp,explanation:H.explanation}})}case"redo":{let H=z.redo();if(!H)return X.warn("Redo requested but nothing to redo"),$.json({error:"Nothing to redo"},400);return X.info("Redo completed successfully",{entryId:H.id,editsCount:H.edits.length}),$.json({success:!0,action:"redo",files:H.afterState,entry:{id:H.id,timestamp:H.timestamp,explanation:H.explanation}})}case"get":{if(!G)return X.warn("Get action requested without entryId"),$.json({error:"entryId required for get action"},400);let H=z.getEntryById(G);if(!H)return X.warn("Entry not found",{entryId:G}),$.json({error:"Entry not found"},404);return X.info("Entry retrieved successfully",{entryId:H.id,editsCount:H.edits.length}),$.json({success:!0,entry:H})}case"clear":{let H=z.getHistory().length;return z.clear(),X.info("History cleared",{clearedEntries:H}),$.json({success:!0,action:"clear"})}case"summary":{let H=z.getSummary();return X.info("Summary retrieved",H),$.json({success:!0,summary:H})}default:return X.warn("Unknown action requested",{action:U}),$.json({error:`Unknown action: ${U}`},400)}}catch(Y){return X.error("History POST request failed",Y),$.json({error:"Failed to process history action"},500)}});var Zv=mH;var S6=new X6;S6.use("*",Vj());S6.use("*",Oj());S6.get("/",($)=>$.json({status:"ok",message:"Hypertool Backend API"}));S6.route("/boilerplate",Ej);S6.route("/download",oN);S6.route("/runtime-watch",sN);S6.route("/runtime-watch/snapshot",$V);S6.route("/ai",Ev);S6.route("/ai/stream",Rv);S6.route("/history",Zv);S6.notFound(($)=>$.json({error:"Not found"},404));S6.onError(($,Q)=>{return console.error("Error:",$),Q.json({error:"Internal server error"},500)});var wX$=S6.fetch;export{wX$ as default};

//# debugId=660C9416C8461B1964756E2164756E21
//# sourceMappingURL=index.js.map
