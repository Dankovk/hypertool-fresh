var XD=Object.defineProperty;var IH=(h,H)=>{for(var y in H)XD(h,y,{get:H[y],enumerable:!0,configurable:!0,set:(S)=>H[y]=()=>S})};var WD={};IH(WD,{studioTheme:()=>th,injectThemeVariables:()=>vh,createControls:()=>QH,createControlPanel:()=>XH,HypertoolControls:()=>wh});/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function B(h){return h}function G(h){return h===null||h===void 0}function t5(h){return h!==null&&typeof h==="object"}function E5(h){return h!==null&&typeof h==="object"}function ZD(h,H){if(h.length!==H.length)return!1;for(let y=0;y<h.length;y++)if(h[y]!==H[y])return!1;return!0}function Oh(h,H){return Array.from(new Set([...Object.keys(h),...Object.keys(H)])).reduce((S,D)=>{let O=h[D],W=H[D];return E5(O)&&E5(W)?Object.assign(Object.assign({},S),{[D]:Oh(O,W)}):Object.assign(Object.assign({},S),{[D]:D in H?W:O})},{})}function v5(h){if(!t5(h))return!1;return"target"in h}var YD={alreadydisposed:()=>"View has been already disposed",invalidparams:(h)=>`Invalid parameters for '${h.name}'`,nomatchingcontroller:(h)=>`No matching controller for '${h.key}'`,nomatchingview:(h)=>`No matching view for '${JSON.stringify(h.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:(h)=>`Not compatible with  plugin '${h.id}'`,propertynotfound:(h)=>`Property '${h.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class I{static alreadyDisposed(){return new I({type:"alreadydisposed"})}static notBindable(){return new I({type:"notbindable"})}static notCompatible(h,H){return new I({type:"notcompatible",context:{id:`${h}.${H}`}})}static propertyNotFound(h){return new I({type:"propertynotfound",context:{name:h}})}static shouldNeverHappen(){return new I({type:"shouldneverhappen"})}constructor(h){var H;this.message=(H=YD[h.type](B(h.context)))!==null&&H!==void 0?H:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=h.type}toString(){return this.message}}class eh{constructor(h,H){this.obj_=h,this.key=H}static isBindable(h){if(h===null)return!1;if(typeof h!=="object"&&typeof h!=="function")return!1;return!0}read(){return this.obj_[this.key]}write(h){this.obj_[this.key]=h}writeProperty(h,H){let y=this.read();if(!eh.isBindable(y))throw I.notBindable();if(!(h in y))throw I.propertyNotFound(h);y[h]=H}}class M{constructor(){this.observers_={}}on(h,H,y){var S;let D=this.observers_[h];if(!D)D=this.observers_[h]=[];return D.push({handler:H,key:(S=y===null||y===void 0?void 0:y.key)!==null&&S!==void 0?S:H}),this}off(h,H){let y=this.observers_[h];if(y)this.observers_[h]=y.filter((S)=>{return S.key!==H});return this}emit(h,H){let y=this.observers_[h];if(!y)return;y.forEach((S)=>{S.handler(H)})}}class gH{constructor(h,H){var y;this.constraint_=H===null||H===void 0?void 0:H.constraint,this.equals_=(y=H===null||H===void 0?void 0:H.equals)!==null&&y!==void 0?y:(S,D)=>S===D,this.emitter=new M,this.rawValue_=h}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(h){this.setRawValue(h,{forceEmit:!1,last:!0})}setRawValue(h,H){let y=H!==null&&H!==void 0?H:{forceEmit:!1,last:!0},S=this.constraint_?this.constraint_.constrain(h):h,D=this.rawValue_;if(!!this.equals_(D,S)&&!y.forceEmit)return;this.emitter.emit("beforechange",{sender:this}),this.rawValue_=S,this.emitter.emit("change",{options:y,previousRawValue:D,rawValue:S,sender:this})}}class pH{constructor(h){this.emitter=new M,this.value_=h}get rawValue(){return this.value_}set rawValue(h){this.setRawValue(h,{forceEmit:!1,last:!0})}setRawValue(h,H){let y=H!==null&&H!==void 0?H:{forceEmit:!1,last:!0},S=this.value_;if(S===h&&!y.forceEmit)return;this.emitter.emit("beforechange",{sender:this}),this.value_=h,this.emitter.emit("change",{options:y,previousRawValue:S,rawValue:this.value_,sender:this})}}class cH{constructor(h){this.emitter=new M,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=h,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(h){this.emitter.emit("beforechange",Object.assign(Object.assign({},h),{sender:this}))}onValueChange_(h){this.emitter.emit("change",Object.assign(Object.assign({},h),{sender:this}))}}function F(h,H){let y=H===null||H===void 0?void 0:H.constraint,S=H===null||H===void 0?void 0:H.equals;if(!y&&!S)return new pH(h);return new gH(h,H)}function RD(h){return[new cH(h),(H,y)=>{h.setRawValue(H,y)}]}class X{constructor(h){this.emitter=new M,this.valMap_=h;for(let H in this.valMap_)this.valMap_[H].emitter.on("change",()=>{this.emitter.emit("change",{key:H,sender:this})})}static createCore(h){return Object.keys(h).reduce((y,S)=>{return Object.assign(y,{[S]:F(h[S])})},{})}static fromObject(h){let H=this.createCore(h);return new X(H)}get(h){return this.valMap_[h].rawValue}set(h,H){this.valMap_[h].rawValue=H}value(h){return this.valMap_[h]}}class Zh{constructor(h){this.values=X.fromObject({max:h.max,min:h.min})}constrain(h){let H=this.values.get("max"),y=this.values.get("min");return Math.min(Math.max(h,y),H)}}class rH{constructor(h){this.values=X.fromObject({max:h.max,min:h.min})}constrain(h){let H=this.values.get("max"),y=this.values.get("min"),S=h;if(!G(y))S=Math.max(S,y);if(!G(H))S=Math.min(S,H);return S}}class lH{constructor(h,H=0){this.step=h,this.origin=H}constrain(h){let H=this.origin%this.step,y=Math.round((h-H)/this.step);return H+y*this.step}}class oH{constructor(h){this.text=h}evaluate(){return Number(this.text)}toString(){return this.text}}var UD={"**":(h,H)=>Math.pow(h,H),"*":(h,H)=>h*H,"/":(h,H)=>h/H,"%":(h,H)=>h%H,"+":(h,H)=>h+H,"-":(h,H)=>h-H,"<<":(h,H)=>h<<H,">>":(h,H)=>h>>H,">>>":(h,H)=>h>>>H,"&":(h,H)=>h&H,"^":(h,H)=>h^H,"|":(h,H)=>h|H};class eH{constructor(h,H,y){this.left=H,this.operator=h,this.right=y}evaluate(){let h=UD[this.operator];if(!h)throw new Error(`unexpected binary operator: '${this.operator}`);return h(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}var GD={"+":(h)=>h,"-":(h)=>-h,"~":(h)=>~h};class aH{constructor(h,H){this.operator=h,this.expression=H}evaluate(){let h=GD[this.operator];if(!h)throw new Error(`unexpected unary operator: '${this.operator}`);return h(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function m5(h){return(H,y)=>{for(let S=0;S<h.length;S++){let D=h[S](H,y);if(D!=="")return D}return""}}function Bh(h,H){var y;let S=h.substr(H).match(/^\s+/);return(y=S&&S[0])!==null&&y!==void 0?y:""}function FD(h,H){let y=h.substr(H,1);return y.match(/^[1-9]$/)?y:""}function Nh(h,H){var y;let S=h.substr(H).match(/^[0-9]+/);return(y=S&&S[0])!==null&&y!==void 0?y:""}function KD(h,H){let y=Nh(h,H);if(y!=="")return y;let S=h.substr(H,1);if(H+=1,S!=="-"&&S!=="+")return"";let D=Nh(h,H);if(D==="")return"";return S+D}function s5(h,H){let y=h.substr(H,1);if(H+=1,y.toLowerCase()!=="e")return"";let S=KD(h,H);if(S==="")return"";return y+S}function hy(h,H){let y=h.substr(H,1);if(y==="0")return y;let S=FD(h,H);if(H+=S.length,S==="")return"";return S+Nh(h,H)}function LD(h,H){let y=hy(h,H);if(H+=y.length,y==="")return"";let S=h.substr(H,1);if(H+=S.length,S!==".")return"";let D=Nh(h,H);return H+=D.length,y+S+D+s5(h,H)}function ID(h,H){let y=h.substr(H,1);if(H+=y.length,y!==".")return"";let S=Nh(h,H);if(H+=S.length,S==="")return"";return y+S+s5(h,H)}function MD(h,H){let y=hy(h,H);if(H+=y.length,y==="")return"";return y+s5(h,H)}var TD=m5([LD,ID,MD]);function kD(h,H){var y;let S=h.substr(H).match(/^[01]+/);return(y=S&&S[0])!==null&&y!==void 0?y:""}function PD(h,H){let y=h.substr(H,2);if(H+=y.length,y.toLowerCase()!=="0b")return"";let S=kD(h,H);if(S==="")return"";return y+S}function $D(h,H){var y;let S=h.substr(H).match(/^[0-7]+/);return(y=S&&S[0])!==null&&y!==void 0?y:""}function AD(h,H){let y=h.substr(H,2);if(H+=y.length,y.toLowerCase()!=="0o")return"";let S=$D(h,H);if(S==="")return"";return y+S}function jD(h,H){var y;let S=h.substr(H).match(/^[0-9a-f]+/i);return(y=S&&S[0])!==null&&y!==void 0?y:""}function BD(h,H){let y=h.substr(H,2);if(H+=y.length,y.toLowerCase()!=="0x")return"";let S=jD(h,H);if(S==="")return"";return y+S}var ND=m5([PD,AD,BD]),CD=m5([ND,TD]);function VD(h,H){let y=CD(h,H);if(H+=y.length,y==="")return null;return{evaluable:new oH(y),cursor:H}}function ED(h,H){let y=h.substr(H,1);if(H+=y.length,y!=="(")return null;let S=yy(h,H);if(!S)return null;H=S.cursor,H+=Bh(h,H).length;let D=h.substr(H,1);if(H+=D.length,D!==")")return null;return{evaluable:S.evaluable,cursor:H}}function _D(h,H){var y;return(y=VD(h,H))!==null&&y!==void 0?y:ED(h,H)}function Hy(h,H){let y=_D(h,H);if(y)return y;let S=h.substr(H,1);if(H+=S.length,S!=="+"&&S!=="-"&&S!=="~")return null;let D=Hy(h,H);if(!D)return null;return H=D.cursor,{cursor:H,evaluable:new aH(S,D.evaluable)}}function xD(h,H,y){y+=Bh(H,y).length;let S=h.filter((D)=>H.startsWith(D,y))[0];if(!S)return null;return y+=S.length,y+=Bh(H,y).length,{cursor:y,operator:S}}function fD(h,H){return(y,S)=>{let D=h(y,S);if(!D)return null;S=D.cursor;let O=D.evaluable;for(;;){let W=xD(H,y,S);if(!W)break;S=W.cursor;let w=h(y,S);if(!w)return null;S=w.cursor,O=new eH(W.operator,O,w.evaluable)}return O?{cursor:S,evaluable:O}:null}}var nD=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((h,H)=>{return fD(h,H)},Hy);function yy(h,H){return H+=Bh(h,H).length,nD(h,H)}function bD(h){let H=yy(h,0);if(!H)return null;if(H.cursor+Bh(h,H.cursor).length!==h.length)return null;return H.evaluable}function m(h){var H;let y=bD(h);return(H=y===null||y===void 0?void 0:y.evaluate())!==null&&H!==void 0?H:null}function Sy(h){if(typeof h==="number")return h;if(typeof h==="string"){let H=m(h);if(!G(H))return H}return 0}function uD(h){return String(h)}function j(h){return(H)=>{return H.toFixed(Math.max(Math.min(h,20),0))}}function R(h,H,y,S,D){let O=(h-H)/(y-H);return S+O*(D-S)}function MH(h){return String(h.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function T(h,H,y){return Math.min(Math.max(h,H),y)}function Dy(h,H){return(h%H+H)%H}function dD(h,H){return!G(h.step)?MH(h.step):Math.max(MH(H),2)}function Oy(h){var H;return(H=h.step)!==null&&H!==void 0?H:1}function Wy(h,H){var y;let S=Math.abs((y=h.step)!==null&&y!==void 0?y:H);return S===0?0.1:Math.pow(10,Math.floor(Math.log10(S))-1)}function wy(h,H){if(!G(h.step))return new lH(h.step,H);return null}function qy(h){if(!G(h.max)&&!G(h.min))return new Zh({max:h.max,min:h.min});if(!G(h.max)||!G(h.min))return new rH({max:h.max,min:h.min});return null}function zy(h,H){var y,S,D;return{formatter:(y=h.format)!==null&&y!==void 0?y:j(dD(h,H)),keyScale:(S=h.keyScale)!==null&&S!==void 0?S:Oy(h),pointerScale:(D=h.pointerScale)!==null&&D!==void 0?D:Wy(h,H)}}function Jy(h){return{format:h.optional.function,keyScale:h.optional.number,max:h.optional.number,min:h.optional.number,pointerScale:h.optional.number,step:h.optional.number}}function i5(h){return{constraint:h.constraint,textProps:X.fromObject(zy(h.params,h.initialValue))}}class e{constructor(h){this.controller=h}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(h){this.controller.viewProps.set("disabled",h)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(h){this.controller.viewProps.set("hidden",h)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(h){return this.controller.importState(h)}exportState(){return this.controller.exportState()}}class _h{constructor(h){this.target=h}}class Yh extends _h{constructor(h,H,y){super(h);this.value=H,this.last=y!==null&&y!==void 0?y:!0}}class Qy extends _h{constructor(h,H){super(h);this.expanded=H}}class Xy extends _h{constructor(h,H){super(h);this.index=H}}class Zy extends _h{constructor(h,H){super(h);this.native=H}}class Jh extends e{constructor(h){super(h);this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new M,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(h){this.controller.labelController.props.set("label",h)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(h){this.controller.tag=h}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}refresh(){this.controller.value.fetch()}onValueChange_(h){let H=this.controller.value;this.emitter_.emit("change",new Yh(this,B(H.binding.target.read()),h.options.last))}}class Yy{constructor(h,H){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=H,this.value_=h,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new M}get rawValue(){return this.value_.rawValue}set rawValue(h){this.value_.rawValue=h}setRawValue(h,H){this.value_.setRawValue(h,H)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(h){this.emitter.emit("beforechange",Object.assign(Object.assign({},h),{sender:this}))}onValueChange_(h){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},h),{sender:this}))}}function tD(h){if(!("binding"in h))return!1;let H=h.binding;return v5(H)&&"read"in H&&"write"in H}function vD(h,H){let S=Object.keys(H).reduce((D,O)=>{if(D===void 0)return;let W=H[O],w=W(h[O]);return w.succeeded?Object.assign(Object.assign({},D),{[O]:w.value}):void 0},{});return B(S)}function mD(h,H){return h.reduce((y,S)=>{if(y===void 0)return;let D=H(S);if(!D.succeeded||D.value===void 0)return;return[...y,D.value]},[])}function sD(h){if(h===null)return!1;return typeof h==="object"}function u(h){return(H)=>(y)=>{if(!H&&y===void 0)return{succeeded:!1,value:void 0};if(H&&y===void 0)return{succeeded:!0,value:void 0};let S=h(y);return S!==void 0?{succeeded:!0,value:S}:{succeeded:!1,value:void 0}}}function TH(h){return{custom:(H)=>u(H)(h),boolean:u((H)=>typeof H==="boolean"?H:void 0)(h),number:u((H)=>typeof H==="number"?H:void 0)(h),string:u((H)=>typeof H==="string"?H:void 0)(h),function:u((H)=>typeof H==="function"?H:void 0)(h),constant:(H)=>u((y)=>y===H?H:void 0)(h),raw:u((H)=>H)(h),object:(H)=>u((y)=>{if(!sD(y))return;return vD(y,H)})(h),array:(H)=>u((y)=>{if(!Array.isArray(y))return;return mD(y,H)})(h)}}var _5={optional:TH(!0),required:TH(!1)};function L(h,H){let y=H(_5),S=_5.required.object(y)(h);return S.succeeded?S.value:void 0}function N(h,H,y,S){if(H&&!H(h))return!1;let D=L(h,y);return D?S(D):!1}function C(h,H){var y;return Oh((y=h===null||h===void 0?void 0:h())!==null&&y!==void 0?y:{},H)}function yh(h){return"value"in h}function Ry(h){if(!t5(h)||!("binding"in h))return!1;let H=h.binding;return v5(H)}var x="http://www.w3.org/2000/svg";function ah(h){h.offsetHeight}function iD(h,H){let y=h.style.transition;h.style.transition="none",H(),h.style.transition=y}function g5(h){return h.ontouchstart!==void 0}function gD(){return globalThis}function pD(){return B(gD()).document}function cD(h){let H=h.ownerDocument.defaultView;if(!H)return null;return"document"in H?h.getContext("2d",{willReadFrequently:!0}):null}var rD={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function D5(h,H){let y=h.createElementNS(x,"svg");return y.innerHTML=rD[H],y}function Uy(h,H,y){h.insertBefore(H,h.children[y])}function p5(h){if(h.parentElement)h.parentElement.removeChild(h)}function Gy(h){while(h.children.length>0)h.removeChild(h.children[0])}function lD(h){while(h.childNodes.length>0)h.removeChild(h.childNodes[0])}function Fy(h){if(h.relatedTarget)return B(h.relatedTarget);if("explicitOriginalTarget"in h)return h.explicitOriginalTarget;return null}function t(h,H){h.emitter.on("change",(y)=>{H(y.rawValue)}),H(h.rawValue)}function f(h,H,y){t(h.value(H),y)}var oD="tp";function Z(h){return(y,S)=>{return[oD,"-",h,"v",y?`_${y}`:"",S?`-${S}`:""].join("")}}var Ph=Z("lbl");function eD(h,H){let y=h.createDocumentFragment();return H.split(`
`).map((D)=>{return h.createTextNode(D)}).forEach((D,O)=>{if(O>0)y.appendChild(h.createElement("br"));y.appendChild(D)}),y}class c5{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(Ph()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(Ph("l")),f(H.props,"label",(D)=>{if(G(D))this.element.classList.add(Ph(void 0,"nol"));else this.element.classList.remove(Ph(void 0,"nol")),lD(y),y.appendChild(eD(h,D))}),this.element.appendChild(y),this.labelElement=y;let S=h.createElement("div");S.classList.add(Ph("v")),this.element.appendChild(S),this.valueElement=S}}class r5{constructor(h,H){this.props=H.props,this.valueController=H.valueController,this.viewProps=H.valueController.viewProps,this.view=new c5(h,{props:H.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(h){return N(h,null,(H)=>({label:H.optional.string}),(H)=>{return this.props.set("label",H.label),!0})}exportProps(){return C(null,{label:this.props.get("label")})}}function aD(){return["veryfirst","first","last","verylast"]}var kH=Z(""),PH={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class xh{constructor(h){this.parent_=null,this.blade=h.blade,this.view=h.view,this.viewProps=h.viewProps;let H=this.view.element;this.blade.value("positions").emitter.on("change",()=>{aD().forEach((y)=>{H.classList.remove(kH(void 0,PH[y]))}),this.blade.get("positions").forEach((y)=>{H.classList.add(kH(void 0,PH[y]))})}),this.viewProps.handleDispose(()=>{p5(H)})}get parent(){return this.parent_}set parent(h){this.parent_=h,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(h){return N(h,null,(H)=>({disabled:H.required.boolean,hidden:H.required.boolean}),(H)=>{return this.viewProps.importState(H),!0})}exportState(){return C(null,Object.assign({},this.viewProps.exportState()))}}class o extends xh{constructor(h,H){if(H.value!==H.valueController.value)throw I.shouldNeverHappen();let y=H.valueController.viewProps,S=new r5(h,{blade:H.blade,props:H.props,valueController:H.valueController});super(Object.assign(Object.assign({},H),{view:new c5(h,{props:H.props,viewProps:y}),viewProps:y}));this.labelController=S,this.value=H.value,this.valueController=H.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(h){return N(h,(H)=>{var y,S,D;return super.importState(H)&&this.labelController.importProps(H)&&((D=(S=(y=this.valueController).importProps)===null||S===void 0?void 0:S.call(y,h))!==null&&D!==void 0?D:!0)},(H)=>({value:H.optional.raw}),(H)=>{if(H.value)this.value.rawValue=H.value;return!0})}exportState(){var h,H,y;return C(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(y=(H=(h=this.valueController).exportProps)===null||H===void 0?void 0:H.call(h))!==null&&y!==void 0?y:{}))}}function $H(h){let H=Object.assign({},h);return delete H.value,H}class l5 extends o{constructor(h,H){super(h,H);this.tag=H.tag}importState(h){return N(h,(H)=>super.importState($H(h)),(H)=>({tag:H.optional.string}),(H)=>{return this.tag=H.tag,!0})}exportState(){return C(()=>$H(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function h0(h){return yh(h)&&Ry(h.value)}class Ky extends l5{importState(h){return N(h,(H)=>super.importState(H),(H)=>({binding:H.required.object({value:H.required.raw})}),(H)=>{return this.value.binding.inject(H.binding.value),this.value.fetch(),!0})}}function H0(h){return yh(h)&&tD(h.value)}function Ly(h,H){while(h.length<H)h.push(void 0)}function y0(h){let H=[];return Ly(H,h),H}function S0(h){let H=h.indexOf(void 0);return B(H<0?h:h.slice(0,H))}function D0(h,H){let y=[...S0(h),H];if(y.length>h.length)y.splice(0,y.length-h.length);else Ly(y,h.length);return y}class Iy{constructor(h){this.emitter=new M,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=h.binding,this.value_=F(y0(h.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=h.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(h){this.value_.rawValue=h}setRawValue(h,H){this.value_.setRawValue(h,H)}fetch(){this.value_.rawValue=D0(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(h){this.emitter.emit("beforechange",Object.assign(Object.assign({},h),{sender:this}))}onValueChange_(h){this.emitter.emit("change",Object.assign(Object.assign({},h),{sender:this}))}}function O0(h){if(!("binding"in h))return!1;let H=h.binding;return v5(H)&&"read"in H&&!("write"in H)}class My extends l5{exportState(){return C(()=>super.exportState(),{binding:{readonly:!0}})}}function W0(h){return yh(h)&&O0(h.value)}class Ty extends e{get label(){return this.controller.labelController.props.get("label")}set label(h){this.controller.labelController.props.set("label",h)}get title(){var h;return(h=this.controller.buttonController.props.get("title"))!==null&&h!==void 0?h:""}set title(h){this.controller.buttonController.props.set("title",h)}on(h,H){let y=H.bind(this);return this.controller.buttonController.emitter.on(h,(D)=>{y(new Zy(this,D.nativeEvent))}),this}off(h,H){return this.controller.buttonController.emitter.off(h,H),this}}function w0(h,H,y){if(y)h.classList.add(H);else h.classList.remove(H)}function Rh(h,H){return(y)=>{w0(h,H,y)}}function o5(h,H){t(h,(y)=>{H.textContent=y!==null&&y!==void 0?y:""})}var P5=Z("btn");class ky{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(P5()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("button");y.classList.add(P5("b")),H.viewProps.bindDisabled(y),this.element.appendChild(y),this.buttonElement=y;let S=h.createElement("div");S.classList.add(P5("t")),o5(H.props.value("title"),S),this.buttonElement.appendChild(S)}}class Py{constructor(h,H){this.emitter=new M,this.onClick_=this.onClick_.bind(this),this.props=H.props,this.viewProps=H.viewProps,this.view=new ky(h,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(h){return N(h,null,(H)=>({title:H.optional.string}),(H)=>{return this.props.set("title",H.title),!0})}exportProps(){return C(null,{title:this.props.get("title")})}onClick_(h){this.emitter.emit("click",{nativeEvent:h,sender:this})}}class x5 extends xh{constructor(h,H){let y=new Py(h,{props:H.buttonProps,viewProps:H.viewProps}),S=new r5(h,{blade:H.blade,props:H.labelProps,valueController:y});super({blade:H.blade,view:S.view,viewProps:H.viewProps});this.buttonController=y,this.labelController=S}importState(h){return N(h,(H)=>super.importState(H)&&this.buttonController.importProps(H)&&this.labelController.importProps(H),()=>({}),()=>!0)}exportState(){return C(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class e5{constructor(h){let[H,y]=h.split("-"),S=H.split(".");this.major=parseInt(S[0],10),this.minor=parseInt(S[1],10),this.patch=parseInt(S[2],10),this.prerelease=y!==null&&y!==void 0?y:null}toString(){let h=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[h,this.prerelease].join("-"):h}}var Uh=new e5("2.0.5");function $(h){return Object.assign({core:Uh},h)}var q0=$({id:"button",type:"blade",accept(h){let H=L(h,(y)=>({title:y.required.string,view:y.required.constant("button"),label:y.optional.string}));return H?{params:H}:null},controller(h){return new x5(h.document,{blade:h.blade,buttonProps:X.fromObject({title:h.params.title}),labelProps:X.fromObject({label:h.params.label}),viewProps:h.viewProps})},api(h){if(h.controller instanceof x5)return new Ty(h.controller);return null}});function z0(h,H){return h.addBlade(Object.assign(Object.assign({},H),{view:"button"}))}function J0(h,H){return h.addBlade(Object.assign(Object.assign({},H),{view:"folder"}))}function Q0(h,H){return h.addBlade(Object.assign(Object.assign({},H),{view:"tab"}))}function X0(h){if(!t5(h))return!1;return"refresh"in h&&typeof h.refresh==="function"}function Z0(h,H){if(!eh.isBindable(h))throw I.notBindable();return new eh(h,H)}class $y{constructor(h,H){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=h,this.emitter_=new M,this.pool_=H,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map((h)=>this.pool_.createApi(h))}addBinding(h,H,y){let S=y!==null&&y!==void 0?y:{},D=this.controller_.element.ownerDocument,O=this.pool_.createBinding(D,Z0(h,H),S),W=this.pool_.createBindingApi(O);return this.add(W,S.index)}addFolder(h){return J0(this,h)}addButton(h){return z0(this,h)}addTab(h){return Q0(this,h)}add(h,H){let y=h.controller;return this.controller_.rack.add(y,H),h}remove(h){this.controller_.rack.remove(h.controller)}addBlade(h){let H=this.controller_.element.ownerDocument,y=this.pool_.createBlade(H,h),S=this.pool_.createApi(y);return this.add(S,h.index)}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}refresh(){this.children.forEach((h)=>{if(X0(h))h.refresh()})}onRackValueChange_(h){let H=h.bladeController,y=this.pool_.createApi(H),S=Ry(H.value)?H.value.binding:null;this.emitter_.emit("change",new Yh(y,S?S.target.read():H.value.rawValue,h.options.last))}}class O5 extends e{constructor(h,H){super(h);this.rackApi_=new $y(h.rackController,H)}refresh(){this.rackApi_.refresh()}}class W5 extends xh{constructor(h){super({blade:h.blade,view:h.view,viewProps:h.rackController.viewProps});this.rackController=h.rackController}importState(h){return N(h,(H)=>super.importState(H),(H)=>({children:H.required.array(H.required.raw)}),(H)=>{return this.rackController.rack.children.every((y,S)=>{return y.importState(H.children[S])})})}exportState(){return C(()=>super.exportState(),{children:this.rackController.rack.children.map((h)=>h.exportState())})}}function f5(h){return"rackController"in h}class Ay{constructor(h){this.emitter=new M,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=h}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(h){for(let H of this.allItems())if(h(H))return H;return null}includes(h){return this.cache_.has(h)}add(h,H){if(this.includes(h))throw I.shouldNeverHappen();let y=H!==void 0?H:this.items_.length;this.items_.splice(y,0,h),this.cache_.add(h);let S=this.extract_(h);if(S)S.emitter.on("add",this.onSubListAdd_),S.emitter.on("remove",this.onSubListRemove_),S.allItems().forEach((D)=>{this.cache_.add(D)});this.emitter.emit("add",{index:y,item:h,root:this,target:this})}remove(h){let H=this.items_.indexOf(h);if(H<0)return;this.items_.splice(H,1),this.cache_.delete(h);let y=this.extract_(h);if(y)y.allItems().forEach((S)=>{this.cache_.delete(S)}),y.emitter.off("add",this.onSubListAdd_),y.emitter.off("remove",this.onSubListRemove_);this.emitter.emit("remove",{index:H,item:h,root:this,target:this})}onSubListAdd_(h){this.cache_.add(h.item),this.emitter.emit("add",{index:h.index,item:h.item,root:this,target:h.target})}onSubListRemove_(h){this.cache_.delete(h.item),this.emitter.emit("remove",{index:h.index,item:h.item,root:this,target:h.target})}}function Y0(h,H){for(let y=0;y<h.length;y++){let S=h[y];if(yh(S)&&S.value===H)return S}return null}function R0(h){return f5(h)?h.rackController.rack.bcSet_:null}class jy{constructor(h){var H,y;this.emitter=new M,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(H=h.blade)!==null&&H!==void 0?H:null,(y=this.blade_)===null||y===void 0||y.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=h.viewProps,this.bcSet_=new Ay(R0),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(h,H){var y;(y=h.parent)===null||y===void 0||y.remove(h),h.parent=this,this.bcSet_.add(h,H)}remove(h){h.parent=null,this.bcSet_.remove(h)}find(h){return this.bcSet_.allItems().filter(h)}onSetAdd_(h){this.updatePositions_();let H=h.target===h.root;if(this.emitter.emit("add",{bladeController:h.item,index:h.index,root:H,sender:this}),!H)return;let y=h.item;if(y.viewProps.emitter.on("change",this.onChildViewPropsChange_),y.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),y.viewProps.handleDispose(this.onChildDispose_),yh(y))y.value.emitter.on("change",this.onChildValueChange_);else if(f5(y)){let S=y.rackController.rack;if(S){let D=S.emitter;D.on("layout",this.onRackLayout_),D.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(h){this.updatePositions_();let H=h.target===h.root;if(this.emitter.emit("remove",{bladeController:h.item,root:H,sender:this}),!H)return;let y=h.item;if(yh(y))y.value.emitter.off("change",this.onChildValueChange_);else if(f5(y)){let S=y.rackController.rack;if(S){let D=S.emitter;D.off("layout",this.onRackLayout_),D.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){let h=this.bcSet_.items.filter((S)=>!S.viewProps.get("hidden")),H=h[0],y=h[h.length-1];this.bcSet_.items.forEach((S)=>{let D=[];if(S===H){if(D.push("first"),!this.blade_||this.blade_.get("positions").includes("veryfirst"))D.push("veryfirst")}if(S===y){if(D.push("last"),!this.blade_||this.blade_.get("positions").includes("verylast"))D.push("verylast")}S.blade.set("positions",D)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(h){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((H)=>{return H.viewProps.get("disposed")}).forEach((H)=>{this.bcSet_.remove(H)})}onChildValueChange_(h){let H=Y0(this.find(yh),h.sender);if(!H)throw I.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:H,options:h.options,sender:this})}onRackLayout_(h){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(h){this.emitter.emit("valuechange",{bladeController:h.bladeController,options:h.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class w5{constructor(h){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=h.element,this.viewProps=h.viewProps;let H=new jy({blade:h.root?void 0:h.blade,viewProps:h.viewProps});H.emitter.on("add",this.onRackAdd_),H.emitter.on("remove",this.onRackRemove_),this.rack=H,this.viewProps.handleDispose(()=>{for(let y=this.rack.children.length-1;y>=0;y--)this.rack.children[y].viewProps.set("disposed",!0)})}onRackAdd_(h){if(!h.root)return;Uy(this.element,h.bladeController.view.element,h.index)}onRackRemove_(h){if(!h.root)return;p5(h.bladeController.view.element)}}function Gh(){return new X({positions:F([],{equals:ZD})})}class fh extends X{constructor(h){super(h)}static create(h){let H={completed:!0,expanded:h,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},y=X.createCore(H);return new fh(y)}get styleExpanded(){var h;return(h=this.get("temporaryExpanded"))!==null&&h!==void 0?h:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";let h=this.get("expandedHeight");if(this.get("shouldFixHeight")&&!G(h))return`${h}px`;return"auto"}bindExpandedClass(h,H){let y=()=>{if(this.styleExpanded)h.classList.add(H);else h.classList.remove(H)};f(this,"expanded",y),f(this,"temporaryExpanded",y)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function U0(h,H){let y=0;return iD(H,()=>{h.set("expandedHeight",null),h.set("temporaryExpanded",!0),ah(H),y=H.clientHeight,h.set("temporaryExpanded",null),ah(H)}),y}function AH(h,H){H.style.height=h.styleHeight}function a5(h,H){h.value("expanded").emitter.on("beforechange",()=>{if(h.set("completed",!1),G(h.get("expandedHeight"))){let y=U0(h,H);if(y>0)h.set("expandedHeight",y)}h.set("shouldFixHeight",!0),ah(H)}),h.emitter.on("change",()=>{AH(h,H)}),AH(h,H),H.addEventListener("transitionend",(y)=>{if(y.propertyName!=="height")return;h.cleanUpTransition()})}class hH extends O5{constructor(h,H){super(h,H);this.emitter_=new M,this.controller.foldable.value("expanded").emitter.on("change",(y)=>{this.emitter_.emit("fold",new Qy(this,y.sender.rawValue))}),this.rackApi_.on("change",(y)=>{this.emitter_.emit("change",y)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(h){this.controller.foldable.set("expanded",h)}get title(){return this.controller.props.get("title")}set title(h){this.controller.props.set("title",h)}get children(){return this.rackApi_.children}addBinding(h,H,y){return this.rackApi_.addBinding(h,H,y)}addFolder(h){return this.rackApi_.addFolder(h)}addButton(h){return this.rackApi_.addButton(h)}addTab(h){return this.rackApi_.addTab(h)}add(h,H){return this.rackApi_.add(h,H)}remove(h){this.rackApi_.remove(h)}addBlade(h){return this.rackApi_.addBlade(h)}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}}var By=Z("cnt");class Ny{constructor(h,H){var y;this.className_=Z((y=H.viewName)!==null&&y!==void 0?y:"fld"),this.element=h.createElement("div"),this.element.classList.add(this.className_(),By()),H.viewProps.bindClassModifiers(this.element),this.foldable_=H.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),f(this.foldable_,"completed",Rh(this.element,this.className_(void 0,"cpl")));let S=h.createElement("button");S.classList.add(this.className_("b")),f(H.props,"title",(q)=>{if(G(q))this.element.classList.add(this.className_(void 0,"not"));else this.element.classList.remove(this.className_(void 0,"not"))}),H.viewProps.bindDisabled(S),this.element.appendChild(S),this.buttonElement=S;let D=h.createElement("div");D.classList.add(this.className_("i")),this.element.appendChild(D);let O=h.createElement("div");O.classList.add(this.className_("t")),o5(H.props.value("title"),O),this.buttonElement.appendChild(O),this.titleElement=O;let W=h.createElement("div");W.classList.add(this.className_("m")),this.buttonElement.appendChild(W);let w=h.createElement("div");w.classList.add(this.className_("c")),this.element.appendChild(w),this.containerElement=w}}class h5 extends W5{constructor(h,H){var y;let S=fh.create((y=H.expanded)!==null&&y!==void 0?y:!0),D=new Ny(h,{foldable:S,props:H.props,viewName:H.root?"rot":void 0,viewProps:H.viewProps});super(Object.assign(Object.assign({},H),{rackController:new w5({blade:H.blade,element:D.containerElement,root:H.root,viewProps:H.viewProps}),view:D}));this.onTitleClick_=this.onTitleClick_.bind(this),this.props=H.props,this.foldable=S,a5(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(h){return N(h,(H)=>super.importState(H),(H)=>({expanded:H.required.boolean,title:H.optional.string}),(H)=>{return this.foldable.set("expanded",H.expanded),this.props.set("title",H.title),!0})}exportState(){return C(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}var G0=$({id:"folder",type:"blade",accept(h){let H=L(h,(y)=>({title:y.required.string,view:y.required.constant("folder"),expanded:y.optional.boolean}));return H?{params:H}:null},controller(h){return new h5(h.document,{blade:h.blade,expanded:h.params.expanded,props:X.fromObject({title:h.params.title}),viewProps:h.viewProps})},api(h){if(!(h.controller instanceof h5))return null;return new hH(h.controller,h.pool)}}),F0=Z("");function jH(h,H){return Rh(h,F0(void 0,H))}class g extends X{constructor(h){var H;super(h);this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=RD(F(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(H=this.get("parent"))===null||H===void 0||H.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(h){var H,y,S;let D=h!==null&&h!==void 0?h:{};return new g(X.createCore({disabled:(H=D.disabled)!==null&&H!==void 0?H:!1,disposed:!1,hidden:(y=D.hidden)!==null&&y!==void 0?y:!1,parent:(S=D.parent)!==null&&S!==void 0?S:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(h){t(this.globalDisabled_,jH(h,"disabled")),f(this,"hidden",jH(h,"hidden"))}bindDisabled(h){t(this.globalDisabled_,(H)=>{h.disabled=H})}bindTabIndex(h){t(this.globalDisabled_,(H)=>{h.tabIndex=H?-1:0})}handleDispose(h){this.value("disposed").emitter.on("change",(H)=>{if(H)h()})}importState(h){this.set("disabled",h.disabled),this.set("hidden",h.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){let h=this.get("parent");return(h?h.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(h){var H;let y=h.previousRawValue;y===null||y===void 0||y.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(H=this.get("parent"))===null||H===void 0||H.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}var BH=Z("tbp");class Cy{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(BH()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(BH("c")),this.element.appendChild(y),this.containerElement=y}}var $h=Z("tbi");class Vy{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add($h()),H.viewProps.bindClassModifiers(this.element),f(H.props,"selected",(D)=>{if(D)this.element.classList.add($h(void 0,"sel"));else this.element.classList.remove($h(void 0,"sel"))});let y=h.createElement("button");y.classList.add($h("b")),H.viewProps.bindDisabled(y),this.element.appendChild(y),this.buttonElement=y;let S=h.createElement("div");S.classList.add($h("t")),o5(H.props.value("title"),S),this.buttonElement.appendChild(S),this.titleElement=S}}class Ey{constructor(h,H){this.emitter=new M,this.onClick_=this.onClick_.bind(this),this.props=H.props,this.viewProps=H.viewProps,this.view=new Vy(h,{props:H.props,viewProps:H.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class H5 extends W5{constructor(h,H){let y=new Cy(h,{viewProps:H.viewProps});super(Object.assign(Object.assign({},H),{rackController:new w5({blade:H.blade,element:y.containerElement,viewProps:H.viewProps}),view:y}));this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Ey(h,{props:H.itemProps,viewProps:g.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=H.props,f(this.props,"selected",(S)=>{this.itemController.props.set("selected",S),this.viewProps.set("hidden",!S)})}get itemController(){return this.ic_}importState(h){return N(h,(H)=>super.importState(H),(H)=>({selected:H.required.boolean,title:H.required.string}),(H)=>{return this.ic_.props.set("selected",H.selected),this.ic_.props.set("title",H.title),!0})}exportState(){return C(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class _y extends O5{constructor(h,H){super(h,H);this.emitter_=new M,this.onSelect_=this.onSelect_.bind(this),this.pool_=H,this.rackApi_.on("change",(y)=>{this.emitter_.emit("change",y)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(h){let H=this.controller.view.element.ownerDocument,y=new H5(H,{blade:Gh(),itemProps:X.fromObject({selected:!1,title:h.title}),props:X.fromObject({selected:!1}),viewProps:g.create()}),S=this.pool_.createApi(y);return this.rackApi_.add(S,h.index)}removePage(h){this.rackApi_.remove(this.rackApi_.children[h])}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}onSelect_(h){this.emitter_.emit("select",new Xy(this,h.rawValue))}}class xy extends O5{get title(){var h;return(h=this.controller.itemController.props.get("title"))!==null&&h!==void 0?h:""}set title(h){this.controller.itemController.props.set("title",h)}get selected(){return this.controller.props.get("selected")}set selected(h){this.controller.props.set("selected",h)}get children(){return this.rackApi_.children}addButton(h){return this.rackApi_.addButton(h)}addFolder(h){return this.rackApi_.addFolder(h)}addTab(h){return this.rackApi_.addTab(h)}add(h,H){this.rackApi_.add(h,H)}remove(h){this.rackApi_.remove(h)}addBinding(h,H,y){return this.rackApi_.addBinding(h,H,y)}addBlade(h){return this.rackApi_.addBlade(h)}}var NH=-1;class fy{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=F(!0),this.selectedIndex=F(NH),this.items_=[]}add(h,H){let y=H!==null&&H!==void 0?H:this.items_.length;this.items_.splice(y,0,h),h.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(h){let H=this.items_.indexOf(h);if(H<0)return;this.items_.splice(H,1),h.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_()}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=NH,this.empty.rawValue=!0;return}let h=this.items_.findIndex((H)=>H.rawValue);if(h<0)this.items_.forEach((H,y)=>{H.rawValue=y===0}),this.selectedIndex.rawValue=0;else this.items_.forEach((H,y)=>{H.rawValue=y===h}),this.selectedIndex.rawValue=h;this.empty.rawValue=!1}onItemSelectedChange_(h){if(h.rawValue){let H=this.items_.findIndex((y)=>y===h.sender);this.items_.forEach((y,S)=>{y.rawValue=S===H}),this.selectedIndex.rawValue=H}else this.keepSelection_()}}var Ah=Z("tab");class ny{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(Ah(),By()),H.viewProps.bindClassModifiers(this.element),t(H.empty,Rh(this.element,Ah(void 0,"nop")));let y=h.createElement("div");y.classList.add(Ah("t")),this.element.appendChild(y),this.itemsElement=y;let S=h.createElement("div");S.classList.add(Ah("i")),this.element.appendChild(S);let D=h.createElement("div");D.classList.add(Ah("c")),this.element.appendChild(D),this.contentsElement=D}}class n5 extends W5{constructor(h,H){let y=new fy,S=new ny(h,{empty:y.empty,viewProps:H.viewProps});super({blade:H.blade,rackController:new w5({blade:H.blade,element:S.contentsElement,viewProps:H.viewProps}),view:S});this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);let D=this.rackController.rack;D.emitter.on("add",this.onRackAdd_),D.emitter.on("remove",this.onRackRemove_),this.tab=y}add(h,H){this.rackController.rack.add(h,H)}remove(h){this.rackController.rack.remove(this.rackController.rack.children[h])}onRackAdd_(h){if(!h.root)return;let H=h.bladeController;Uy(this.view.itemsElement,H.itemController.view.element,h.index),H.itemController.viewProps.set("parent",this.viewProps),this.tab.add(H.props.value("selected"))}onRackRemove_(h){if(!h.root)return;let H=h.bladeController;p5(H.itemController.view.element),H.itemController.viewProps.set("parent",null),this.tab.remove(H.props.value("selected"))}}var by=$({id:"tab",type:"blade",accept(h){let H=L(h,(y)=>({pages:y.required.array(y.required.object({title:y.required.string})),view:y.required.constant("tab")}));if(!H||H.pages.length===0)return null;return{params:H}},controller(h){let H=new n5(h.document,{blade:h.blade,viewProps:h.viewProps});return h.params.pages.forEach((y)=>{let S=new H5(h.document,{blade:Gh(),itemProps:X.fromObject({selected:!1,title:y.title}),props:X.fromObject({selected:!1}),viewProps:g.create()});H.add(S)}),H},api(h){if(h.controller instanceof n5)return new _y(h.controller,h.pool);if(h.controller instanceof H5)return new xy(h.controller,h.pool);return null}});function K0(h,H){let y=h.accept(H.params);if(!y)return null;let S=L(H.params,(D)=>({disabled:D.optional.boolean,hidden:D.optional.boolean}));return h.controller({blade:Gh(),document:H.document,params:B(Object.assign(Object.assign({},y.params),{disabled:S===null||S===void 0?void 0:S.disabled,hidden:S===null||S===void 0?void 0:S.hidden})),viewProps:g.create({disabled:S===null||S===void 0?void 0:S.disabled,hidden:S===null||S===void 0?void 0:S.hidden})})}class q5 extends Jh{get options(){return this.controller.valueController.props.get("options")}set options(h){this.controller.valueController.props.set("options",h)}}class uy{constructor(){this.disabled=!1,this.emitter=new M}dispose(){}tick(){if(this.disabled)return;this.emitter.emit("tick",{sender:this})}}class dy{constructor(h,H){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=h,this.emitter=new M,this.interval_=H,this.setTimer_()}get disabled(){return this.disabled_}set disabled(h){if(this.disabled_=h,this.disabled_)this.clearTimer_();else this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;let h=this.doc_.defaultView;if(h)h.clearInterval(this.timerId_);this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;let h=this.doc_.defaultView;if(h)this.timerId_=h.setInterval(this.onTick_,this.interval_)}onTick_(){if(this.disabled_)return;this.emitter.emit("tick",{sender:this})}}class Fh{constructor(h){this.constraints=h}constrain(h){return this.constraints.reduce((H,y)=>{return y.constrain(H)},h)}}function y5(h,H){if(h instanceof H)return h;if(h instanceof Fh){let y=h.constraints.reduce((S,D)=>{if(S)return S;return D instanceof H?D:null},null);if(y)return y}return null}class Kh{constructor(h){this.values=X.fromObject({options:h})}constrain(h){let H=this.values.get("options");if(H.length===0)return h;return H.filter((S)=>{return S.value===h}).length>0?h:H[0].value}}function nh(h){var H;let y=_5;if(Array.isArray(h))return(H=L({items:h},(S)=>({items:S.required.array(S.required.object({text:S.required.string,value:S.required.raw}))})))===null||H===void 0?void 0:H.items;if(typeof h==="object")return y.required.raw(h).value;return}function HH(h){if(Array.isArray(h))return h;let H=[];return Object.keys(h).forEach((y)=>{H.push({text:y,value:h[y]})}),H}function yH(h){return!G(h)?new Kh(HH(B(h))):null}var $5=Z("lst");class ty{constructor(h,H){this.onValueChange_=this.onValueChange_.bind(this),this.props_=H.props,this.element=h.createElement("div"),this.element.classList.add($5()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("select");y.classList.add($5("s")),H.viewProps.bindDisabled(y),this.element.appendChild(y),this.selectElement=y;let S=h.createElement("div");S.classList.add($5("m")),S.appendChild(D5(h,"dropdown")),this.element.appendChild(S),H.value.emitter.on("change",this.onValueChange_),this.value_=H.value,f(this.props_,"options",(D)=>{Gy(this.selectElement),D.forEach((O)=>{let W=h.createElement("option");W.textContent=O.text,this.selectElement.appendChild(W)}),this.update_()})}update_(){let h=this.props_.get("options").map((H)=>H.value);this.selectElement.selectedIndex=h.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class s{constructor(h,H){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=H.props,this.value=H.value,this.viewProps=H.viewProps,this.view=new ty(h,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(h){let H=B(h.currentTarget);this.value.rawValue=this.props.get("options")[H.selectedIndex].value}importProps(h){return N(h,null,(H)=>({options:H.required.custom(nh)}),(H)=>{return this.props.set("options",HH(H.options)),!0})}exportProps(){return C(null,{options:this.props.get("options")})}}var CH=Z("pop");class vy{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(CH()),H.viewProps.bindClassModifiers(this.element),t(H.shows,Rh(this.element,CH(void 0,"v")))}}class SH{constructor(h,H){this.shows=F(!1),this.viewProps=H.viewProps,this.view=new vy(h,{shows:this.shows,viewProps:this.viewProps})}}var VH=Z("txt");class my{constructor(h,H){this.onChange_=this.onChange_.bind(this),this.element=h.createElement("div"),this.element.classList.add(VH()),H.viewProps.bindClassModifiers(this.element),this.props_=H.props,this.props_.emitter.on("change",this.onChange_);let y=h.createElement("input");y.classList.add(VH("i")),y.type="text",H.viewProps.bindDisabled(y),this.element.appendChild(y),this.inputElement=y,H.value.emitter.on("change",this.onChange_),this.value_=H.value,this.refresh()}refresh(){let h=this.props_.get("formatter");this.inputElement.value=h(this.value_.rawValue)}onChange_(){this.refresh()}}class Qh{constructor(h,H){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=H.parser,this.props=H.props,this.value=H.value,this.viewProps=H.viewProps,this.view=new my(h,{props:H.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(h){let y=B(h.currentTarget).value,S=this.parser_(y);if(!G(S))this.value.rawValue=S;this.view.refresh()}}function L0(h){return String(h)}function sy(h){if(h==="false")return!1;return!!h}function EH(h){return L0(h)}function I0(h){return(H)=>{return h.reduce((y,S)=>{if(y!==null)return y;return S(H)},null)}}var M0=j(0);function S5(h){return M0(h)+"%"}function iy(h){return String(h)}function b5(h){return h}function Lh({primary:h,secondary:H,forward:y,backward:S}){let D=!1;function O(W){if(D)return;D=!0,W(),D=!1}h.emitter.on("change",(W)=>{O(()=>{H.setRawValue(y(h.rawValue,H.rawValue),W.options)})}),H.emitter.on("change",(W)=>{O(()=>{h.setRawValue(S(h.rawValue,H.rawValue),W.options)}),O(()=>{H.setRawValue(y(h.rawValue,H.rawValue),W.options)})}),O(()=>{H.setRawValue(y(h.rawValue,H.rawValue),{forceEmit:!1,last:!0})})}function A(h,H){let y=h*(H.altKey?0.1:1)*(H.shiftKey?10:1);if(H.upKey)return+y;else if(H.downKey)return-y;return 0}function Ch(h){return{altKey:h.altKey,downKey:h.key==="ArrowDown",shiftKey:h.shiftKey,upKey:h.key==="ArrowUp"}}function i(h){return{altKey:h.altKey,downKey:h.key==="ArrowLeft",shiftKey:h.shiftKey,upKey:h.key==="ArrowRight"}}function T0(h){return h==="ArrowUp"||h==="ArrowDown"}function gy(h){return T0(h)||h==="ArrowLeft"||h==="ArrowRight"}function A5(h,H){var y,S;let D=H.ownerDocument.defaultView,O=H.getBoundingClientRect();return{x:h.pageX-(((y=D&&D.scrollX)!==null&&y!==void 0?y:0)+O.left),y:h.pageY-(((S=D&&D.scrollY)!==null&&S!==void 0?S:0)+O.top)}}class a{constructor(h){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=h,this.emitter=new M,h.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),h.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),h.addEventListener("touchend",this.onTouchEnd_),h.addEventListener("mousedown",this.onMouseDown_)}computePosition_(h){let H=this.elem_.getBoundingClientRect();return{bounds:{width:H.width,height:H.height},point:h?{x:h.x,y:h.y}:null}}onMouseDown_(h){var H;h.preventDefault(),(H=h.currentTarget)===null||H===void 0||H.focus();let y=this.elem_.ownerDocument;y.addEventListener("mousemove",this.onDocumentMouseMove_),y.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:h.altKey,data:this.computePosition_(A5(h,this.elem_)),sender:this,shiftKey:h.shiftKey})}onDocumentMouseMove_(h){this.emitter.emit("move",{altKey:h.altKey,data:this.computePosition_(A5(h,this.elem_)),sender:this,shiftKey:h.shiftKey})}onDocumentMouseUp_(h){let H=this.elem_.ownerDocument;H.removeEventListener("mousemove",this.onDocumentMouseMove_),H.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:h.altKey,data:this.computePosition_(A5(h,this.elem_)),sender:this,shiftKey:h.shiftKey})}onTouchStart_(h){h.preventDefault();let H=h.targetTouches.item(0),y=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:h.altKey,data:this.computePosition_(H?{x:H.clientX-y.left,y:H.clientY-y.top}:void 0),sender:this,shiftKey:h.shiftKey}),this.lastTouch_=H}onTouchMove_(h){let H=h.targetTouches.item(0),y=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:h.altKey,data:this.computePosition_(H?{x:H.clientX-y.left,y:H.clientY-y.top}:void 0),sender:this,shiftKey:h.shiftKey}),this.lastTouch_=H}onTouchEnd_(h){var H;let y=(H=h.targetTouches.item(0))!==null&&H!==void 0?H:this.lastTouch_,S=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:h.altKey,data:this.computePosition_(y?{x:y.clientX-S.left,y:y.clientY-S.top}:void 0),sender:this,shiftKey:h.shiftKey})}}var V=Z("txt");class py{constructor(h,H){if(this.onChange_=this.onChange_.bind(this),this.props_=H.props,this.props_.emitter.on("change",this.onChange_),this.element=h.createElement("div"),this.element.classList.add(V(),V(void 0,"num")),H.arrayPosition)this.element.classList.add(V(void 0,H.arrayPosition));H.viewProps.bindClassModifiers(this.element);let y=h.createElement("input");y.classList.add(V("i")),y.type="text",H.viewProps.bindDisabled(y),this.element.appendChild(y),this.inputElement=y,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=H.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(V()),this.inputElement.classList.add(V("i"));let S=h.createElement("div");S.classList.add(V("k")),this.element.appendChild(S),this.knobElement=S;let D=h.createElementNS(x,"svg");D.classList.add(V("g")),this.knobElement.appendChild(D);let O=h.createElementNS(x,"path");O.classList.add(V("gb")),D.appendChild(O),this.guideBodyElem_=O;let W=h.createElementNS(x,"path");W.classList.add(V("gh")),D.appendChild(W),this.guideHeadElem_=W;let w=h.createElement("div");w.classList.add(Z("tt")()),this.knobElement.appendChild(w),this.tooltipElem_=w,H.value.emitter.on("change",this.onChange_),this.value=H.value,this.refresh()}onDraggingChange_(h){if(h.rawValue===null){this.element.classList.remove(V(void 0,"drg"));return}this.element.classList.add(V(void 0,"drg"));let H=h.rawValue/this.props_.get("pointerScale"),y=H+(H>0?-1:H<0?1:0),S=T(-y,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${y+S},0 L${y},4 L${y+S},8`,`M ${H},-1 L${H},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${H},4`);let D=this.props_.get("formatter");this.tooltipElem_.textContent=D(this.value.rawValue),this.tooltipElem_.style.left=`${H}px`}refresh(){let h=this.props_.get("formatter");this.inputElement.value=h(this.value.rawValue)}onChange_(){this.refresh()}}class Ih{constructor(h,H){var y;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=H.parser,this.props=H.props,this.sliderProps_=(y=H.sliderProps)!==null&&y!==void 0?y:null,this.value=H.value,this.viewProps=H.viewProps,this.dragging_=F(null),this.view=new py(h,{arrayPosition:H.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);let S=new a(this.view.knobElement);S.emitter.on("down",this.onPointerDown_),S.emitter.on("move",this.onPointerMove_),S.emitter.on("up",this.onPointerUp_)}constrainValue_(h){var H,y;let S=(H=this.sliderProps_)===null||H===void 0?void 0:H.get("min"),D=(y=this.sliderProps_)===null||y===void 0?void 0:y.get("max"),O=h;if(S!==void 0)O=Math.max(O,S);if(D!==void 0)O=Math.min(O,D);return O}onInputChange_(h){let y=B(h.currentTarget).value,S=this.parser_(y);if(!G(S))this.value.rawValue=this.constrainValue_(S);this.view.refresh()}onInputKeyDown_(h){let H=A(this.props.get("keyScale"),Ch(h));if(H===0)return;this.value.setRawValue(this.constrainValue_(this.value.rawValue+H),{forceEmit:!1,last:!1})}onInputKeyUp_(h){if(A(this.props.get("keyScale"),Ch(h))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(h){if(!h.point)return null;let H=h.point.x-h.bounds.width/2;return this.constrainValue_(this.originRawValue_+H*this.props.get("pointerScale"))}onPointerMove_(h){let H=this.computeDraggingValue_(h.data);if(H===null)return;this.value.setRawValue(H,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_}onPointerUp_(h){let H=this.computeDraggingValue_(h.data);if(H===null)return;this.value.setRawValue(H,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null}}var j5=Z("sld");class cy{constructor(h,H){this.onChange_=this.onChange_.bind(this),this.props_=H.props,this.props_.emitter.on("change",this.onChange_),this.element=h.createElement("div"),this.element.classList.add(j5()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(j5("t")),H.viewProps.bindTabIndex(y),this.element.appendChild(y),this.trackElement=y;let S=h.createElement("div");S.classList.add(j5("k")),this.trackElement.appendChild(S),this.knobElement=S,H.value.emitter.on("change",this.onChange_),this.value=H.value,this.update_()}update_(){let h=T(R(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${h}%`}onChange_(){this.update_()}}class ry{constructor(h,H){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.props=H.props,this.view=new cy(h,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,H){if(!h.point)return;this.value.setRawValue(R(T(h.point.x,0,h.bounds.width),0,h.bounds.width,this.props.get("min"),this.props.get("max")),H)}onPointerDownOrMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){let H=A(this.props.get("keyScale"),i(h));if(H===0)return;this.value.setRawValue(this.value.rawValue+H,{forceEmit:!1,last:!1})}onKeyUp_(h){if(A(this.props.get("keyScale"),i(h))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var B5=Z("sldtxt");class ly{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(B5());let y=h.createElement("div");y.classList.add(B5("s")),this.sliderView_=H.sliderView,y.appendChild(this.sliderView_.element),this.element.appendChild(y);let S=h.createElement("div");S.classList.add(B5("t")),this.textView_=H.textView,S.appendChild(this.textView_.element),this.element.appendChild(S)}}class Vh{constructor(h,H){this.value=H.value,this.viewProps=H.viewProps,this.sliderC_=new ry(h,{props:H.sliderProps,value:H.value,viewProps:this.viewProps}),this.textC_=new Ih(h,{parser:H.parser,props:H.textProps,sliderProps:H.sliderProps,value:H.value,viewProps:H.viewProps}),this.view=new ly(h,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(h){return N(h,null,(H)=>({max:H.required.number,min:H.required.number}),(H)=>{let y=this.sliderC_.props;return y.set("max",H.max),y.set("min",H.min),!0})}exportProps(){let h=this.sliderC_.props;return C(null,{max:h.get("max"),min:h.get("min")})}}function oy(h){return{sliderProps:new X({keyScale:h.keyScale,max:h.max,min:h.min}),textProps:new X({formatter:F(h.formatter),keyScale:h.keyScale,pointerScale:F(h.pointerScale)})}}var k0={containerUnitSize:"cnt-usz"};function ey(h){return`--${k0[h]}`}function Eh(h){return Jy(h)}function l(h){if(!E5(h))return;return L(h,Eh)}function d(h,H){if(!h)return;let y=[],S=wy(h,H);if(S)y.push(S);let D=qy(h);if(D)y.push(D);return new Fh(y)}function P0(h){if(!h)return!1;return h.major===Uh.major}function ay(h){if(h==="inline"||h==="popup")return h;return}function bh(h,H){h.write(H)}var rh=Z("ckb");class hS{constructor(h,H){this.onValueChange_=this.onValueChange_.bind(this),this.element=h.createElement("div"),this.element.classList.add(rh()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("label");y.classList.add(rh("l")),this.element.appendChild(y),this.labelElement=y;let S=h.createElement("input");S.classList.add(rh("i")),S.type="checkbox",this.labelElement.appendChild(S),this.inputElement=S,H.viewProps.bindDisabled(this.inputElement);let D=h.createElement("div");D.classList.add(rh("w")),this.labelElement.appendChild(D);let O=D5(h,"check");D.appendChild(O),H.value.emitter.on("change",this.onValueChange_),this.value=H.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class HS{constructor(h,H){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.view=new hS(h,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(h){let H=B(h.currentTarget);this.value.rawValue=H.checked,h.preventDefault(),h.stopPropagation()}onLabelMouseDown_(h){h.preventDefault()}}function $0(h){let H=[],y=yH(h.options);if(y)H.push(y);return new Fh(H)}var A0=$({id:"input-bool",type:"input",accept:(h,H)=>{if(typeof h!=="boolean")return null;let y=L(H,(S)=>({options:S.optional.custom(nh),readonly:S.optional.constant(!1)}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>sy,constraint:(h)=>$0(h.params),writer:(h)=>bh},controller:(h)=>{let{document:H,value:y,constraint:S}=h,D=S&&y5(S,Kh);if(D)return new s(H,{props:new X({options:D.values.value("options")}),value:y,viewProps:h.viewProps});return new HS(H,{value:y,viewProps:h.viewProps})},api(h){if(typeof h.controller.value.rawValue!=="boolean")return null;if(h.controller.valueController instanceof s)return new q5(h.controller);return null}}),Hh=Z("col");class yS{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(Hh()),H.foldable.bindExpandedClass(this.element,Hh(void 0,"expanded")),f(H.foldable,"completed",Rh(this.element,Hh(void 0,"cpl")));let y=h.createElement("div");y.classList.add(Hh("h")),this.element.appendChild(y);let S=h.createElement("div");S.classList.add(Hh("s")),y.appendChild(S),this.swatchElement=S;let D=h.createElement("div");if(D.classList.add(Hh("t")),y.appendChild(D),this.textElement=D,H.pickerLayout==="inline"){let O=h.createElement("div");O.classList.add(Hh("p")),this.element.appendChild(O),this.pickerElement=O}else this.pickerElement=null}}function j0(h,H,y){let S=T(h/255,0,1),D=T(H/255,0,1),O=T(y/255,0,1),W=Math.max(S,D,O),w=Math.min(S,D,O),q=W-w,J=0,z=0,Q=(w+W)/2;if(q!==0){if(z=q/(1-Math.abs(W+w-1)),S===W)J=(D-O)/q;else if(D===W)J=2+(O-S)/q;else J=4+(S-D)/q;J=J/6+(J<0?1:0)}return[J*360,z*100,Q*100]}function B0(h,H,y){let S=(h%360+360)%360,D=T(H/100,0,1),O=T(y/100,0,1),W=(1-Math.abs(2*O-1))*D,w=W*(1-Math.abs(S/60%2-1)),q=O-W/2,J,z,Q;if(S>=0&&S<60)[J,z,Q]=[W,w,0];else if(S>=60&&S<120)[J,z,Q]=[w,W,0];else if(S>=120&&S<180)[J,z,Q]=[0,W,w];else if(S>=180&&S<240)[J,z,Q]=[0,w,W];else if(S>=240&&S<300)[J,z,Q]=[w,0,W];else[J,z,Q]=[W,0,w];return[(J+q)*255,(z+q)*255,(Q+q)*255]}function N0(h,H,y){let S=T(h/255,0,1),D=T(H/255,0,1),O=T(y/255,0,1),W=Math.max(S,D,O),w=Math.min(S,D,O),q=W-w,J;if(q===0)J=0;else if(W===S)J=60*(((D-O)/q%6+6)%6);else if(W===D)J=60*((O-S)/q+2);else J=60*((S-D)/q+4);let z=W===0?0:q/W,Q=W;return[J,z*100,Q*100]}function SS(h,H,y){let S=Dy(h,360),D=T(H/100,0,1),O=T(y/100,0,1),W=O*D,w=W*(1-Math.abs(S/60%2-1)),q=O-W,J,z,Q;if(S>=0&&S<60)[J,z,Q]=[W,w,0];else if(S>=60&&S<120)[J,z,Q]=[w,W,0];else if(S>=120&&S<180)[J,z,Q]=[0,W,w];else if(S>=180&&S<240)[J,z,Q]=[0,w,W];else if(S>=240&&S<300)[J,z,Q]=[w,0,W];else[J,z,Q]=[W,0,w];return[(J+q)*255,(z+q)*255,(Q+q)*255]}function C0(h,H,y){let S=y+H*(100-Math.abs(2*y-100))/200;return[h,S!==0?H*(100-Math.abs(2*y-100))/S:0,y+H*(100-Math.abs(2*y-100))/200]}function V0(h,H,y){let S=100-Math.abs(y*(200-H)/100-100);return[h,S!==0?H*y/S:0,y*(200-H)/200]}function n(h){return[h[0],h[1],h[2]]}function z5(h,H){return[h[0],h[1],h[2],H]}var E0={hsl:{hsl:(h,H,y)=>[h,H,y],hsv:C0,rgb:B0},hsv:{hsl:V0,hsv:(h,H,y)=>[h,H,y],rgb:SS},rgb:{hsl:j0,hsv:N0,rgb:(h,H,y)=>[h,H,y]}};function Xh(h,H){return[H==="float"?1:h==="rgb"?255:360,H==="float"?1:h==="rgb"?255:100,H==="float"?1:h==="rgb"?255:100]}function _0(h,H){return h===H?H:Dy(h,H)}function DS(h,H,y){var S;let D=Xh(H,y);return[H==="rgb"?T(h[0],0,D[0]):_0(h[0],D[0]),T(h[1],0,D[1]),T(h[2],0,D[2]),T((S=h[3])!==null&&S!==void 0?S:1,0,1)]}function _H(h,H,y,S){let D=Xh(H,y),O=Xh(H,S);return h.map((W,w)=>W/D[w]*O[w])}function OS(h,H,y){let S=_H(h,H.mode,H.type,"int"),D=E0[H.mode][y.mode](...S);return _H(D,y.mode,"int",y.type)}class Y{static black(){return new Y([0,0,0],"rgb")}constructor(h,H){this.type="int",this.mode=H,this.comps_=DS(h,H,this.type)}getComponents(h){return z5(OS(n(this.comps_),{mode:this.mode,type:this.type},{mode:h!==null&&h!==void 0?h:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let h=this.getComponents("rgb");return{r:h[0],g:h[1],b:h[2],a:h[3]}}}var p=Z("colp");class WS{constructor(h,H){this.alphaViews_=null,this.element=h.createElement("div"),this.element.classList.add(p()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(p("hsv"));let S=h.createElement("div");S.classList.add(p("sv")),this.svPaletteView_=H.svPaletteView,S.appendChild(this.svPaletteView_.element),y.appendChild(S);let D=h.createElement("div");D.classList.add(p("h")),this.hPaletteView_=H.hPaletteView,D.appendChild(this.hPaletteView_.element),y.appendChild(D),this.element.appendChild(y);let O=h.createElement("div");if(O.classList.add(p("rgb")),this.textsView_=H.textsView,O.appendChild(this.textsView_.element),this.element.appendChild(O),H.alphaViews){this.alphaViews_={palette:H.alphaViews.palette,text:H.alphaViews.text};let W=h.createElement("div");W.classList.add(p("a"));let w=h.createElement("div");w.classList.add(p("ap")),w.appendChild(this.alphaViews_.palette.element),W.appendChild(w);let q=h.createElement("div");q.classList.add(p("at")),q.appendChild(this.alphaViews_.text.element),W.appendChild(q),this.element.appendChild(W)}}get allFocusableElements(){let h=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map((H)=>H.inputElement)];if(this.alphaViews_)h.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement);return h}}function x0(h){return h==="int"?"int":h==="float"?"float":void 0}function DH(h){return L(h,(H)=>({color:H.optional.object({alpha:H.optional.boolean,type:H.optional.custom(x0)}),expanded:H.optional.boolean,picker:H.optional.custom(ay),readonly:H.optional.constant(!1)}))}function Wh(h){return h?0.1:1}function wS(h){var H;return(H=h.color)===null||H===void 0?void 0:H.type}class J5{constructor(h,H){this.type="float",this.mode=H,this.comps_=DS(h,H,this.type)}getComponents(h){return z5(OS(n(this.comps_),{mode:this.mode,type:this.type},{mode:h!==null&&h!==void 0?h:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let h=this.getComponents("rgb");return{r:h[0],g:h[1],b:h[2],a:h[3]}}}var f0={int:(h,H)=>new Y(h,H),float:(h,H)=>new J5(h,H)};function OH(h,H,y){return f0[y](h,H)}function n0(h){return h.type==="float"}function b0(h){return h.type==="int"}function u0(h){let H=h.getComponents(),y=Xh(h.mode,"int");return new Y([Math.round(R(H[0],0,1,0,y[0])),Math.round(R(H[1],0,1,0,y[1])),Math.round(R(H[2],0,1,0,y[2])),H[3]],h.mode)}function d0(h){let H=h.getComponents(),y=Xh(h.mode,"int");return new J5([R(H[0],0,y[0],0,1),R(H[1],0,y[1],0,1),R(H[2],0,y[2],0,1),H[3]],h.mode)}function P(h,H){if(h.type===H)return h;if(b0(h)&&H==="float")return d0(h);if(n0(h)&&H==="int")return u0(h);throw I.shouldNeverHappen()}function t0(h,H){return h.alpha===H.alpha&&h.mode===H.mode&&h.notation===H.notation&&h.type===H.type}function E(h,H){let y=h.match(/^(.+)%$/);if(!y)return Math.min(parseFloat(h),H);return Math.min(parseFloat(y[1])*0.01*H,H)}var v0={deg:(h)=>h,grad:(h)=>h*360/400,rad:(h)=>h*360/(2*Math.PI),turn:(h)=>h*360};function qS(h){let H=h.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!H)return parseFloat(h);let y=parseFloat(H[1]),S=H[2];return v0[S](y)}function zS(h){let H=h.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!H)return null;let y=[E(H[1],255),E(H[2],255),E(H[3],255)];if(isNaN(y[0])||isNaN(y[1])||isNaN(y[2]))return null;return y}function m0(h){let H=zS(h);return H?new Y(H,"rgb"):null}function JS(h){let H=h.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!H)return null;let y=[E(H[1],255),E(H[2],255),E(H[3],255),E(H[4],1)];if(isNaN(y[0])||isNaN(y[1])||isNaN(y[2])||isNaN(y[3]))return null;return y}function s0(h){let H=JS(h);return H?new Y(H,"rgb"):null}function QS(h){let H=h.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!H)return null;let y=[qS(H[1]),E(H[2],100),E(H[3],100)];if(isNaN(y[0])||isNaN(y[1])||isNaN(y[2]))return null;return y}function i0(h){let H=QS(h);return H?new Y(H,"hsl"):null}function XS(h){let H=h.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!H)return null;let y=[qS(H[1]),E(H[2],100),E(H[3],100),E(H[4],1)];if(isNaN(y[0])||isNaN(y[1])||isNaN(y[2])||isNaN(y[3]))return null;return y}function g0(h){let H=XS(h);return H?new Y(H,"hsl"):null}function ZS(h){let H=h.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(H)return[parseInt(H[1]+H[1],16),parseInt(H[2]+H[2],16),parseInt(H[3]+H[3],16)];let y=h.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);if(y)return[parseInt(y[1],16),parseInt(y[2],16),parseInt(y[3],16)];return null}function p0(h){let H=ZS(h);return H?new Y(H,"rgb"):null}function YS(h){let H=h.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(H)return[parseInt(H[1]+H[1],16),parseInt(H[2]+H[2],16),parseInt(H[3]+H[3],16),R(parseInt(H[4]+H[4],16),0,255,0,1)];let y=h.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);if(y)return[parseInt(y[1],16),parseInt(y[2],16),parseInt(y[3],16),R(parseInt(y[4],16),0,255,0,1)];return null}function c0(h){let H=YS(h);return H?new Y(H,"rgb"):null}function RS(h){let H=h.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!H)return null;let y=[parseFloat(H[1]),parseFloat(H[2]),parseFloat(H[3])];if(isNaN(y[0])||isNaN(y[1])||isNaN(y[2]))return null;return y}function xH(h){return(H)=>{let y=RS(H);return y?OH(y,"rgb",h):null}}function US(h){let H=h.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!H)return null;let y=[parseFloat(H[1]),parseFloat(H[2]),parseFloat(H[3]),parseFloat(H[4])];if(isNaN(y[0])||isNaN(y[1])||isNaN(y[2])||isNaN(y[3]))return null;return y}function fH(h){return(H)=>{let y=US(H);return y?OH(y,"rgb",h):null}}var r0=[{parser:ZS,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:YS,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:zS,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:JS,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:QS,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:XS,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:RS,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:US,result:{alpha:!0,mode:"rgb",notation:"object"}}];function l0(h){return r0.reduce((H,{parser:y,result:S})=>{if(H)return H;return y(h)?S:null},null)}function o0(h,H="int"){let y=l0(h);if(!y)return null;if(y.notation==="hex"&&H!=="float")return Object.assign(Object.assign({},y),{type:"int"});if(y.notation==="func")return Object.assign(Object.assign({},y),{type:H});return null}function uh(h){let H=[p0,c0,m0,s0,i0,g0];if(h==="int")H.push(xH("int"),fH("int"));if(h==="float")H.push(xH("float"),fH("float"));let y=I0(H);return(S)=>{let D=y(S);return D?P(D,h):null}}function e0(h){let H=uh("int");if(typeof h!=="string")return Y.black();let y=H(h);return y!==null&&y!==void 0?y:Y.black()}function GS(h){let H=T(Math.floor(h),0,255).toString(16);return H.length===1?`0${H}`:H}function WH(h,H="#"){let y=n(h.getComponents("rgb")).map(GS).join("");return`${H}${y}`}function wH(h,H="#"){let y=h.getComponents("rgb"),S=[y[0],y[1],y[2],y[3]*255].map(GS).join("");return`${H}${S}`}function FS(h){let H=j(0),y=P(h,"int");return`rgb(${n(y.getComponents("rgb")).map((D)=>H(D)).join(", ")})`}function lh(h){let H=j(2),y=j(0);return`rgba(${P(h,"int").getComponents("rgb").map((O,W)=>{return(W===3?H:y)(O)}).join(", ")})`}function a0(h){let H=[j(0),S5,S5],y=P(h,"int");return`hsl(${n(y.getComponents("hsl")).map((D,O)=>H[O](D)).join(", ")})`}function hO(h){let H=[j(0),S5,S5,j(2)];return`hsla(${P(h,"int").getComponents("hsl").map((D,O)=>H[O](D)).join(", ")})`}function KS(h,H){let y=j(H==="float"?2:0),S=["r","g","b"],D=P(h,H);return`{${n(D.getComponents("rgb")).map((W,w)=>`${S[w]}: ${y(W)}`).join(", ")}}`}function HO(h){return(H)=>KS(H,h)}function LS(h,H){let y=j(2),S=j(H==="float"?2:0),D=["r","g","b","a"];return`{${P(h,H).getComponents("rgb").map((w,q)=>{let J=q===3?y:S;return`${D[q]}: ${J(w)}`}).join(", ")}}`}function yO(h){return(H)=>LS(H,h)}var SO=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:WH},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:wH},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:FS},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:lh},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:a0},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:hO},...["int","float"].reduce((h,H)=>{return[...h,{format:{alpha:!1,mode:"rgb",notation:"object",type:H},stringifier:HO(H)},{format:{alpha:!0,mode:"rgb",notation:"object",type:H},stringifier:yO(H)}]},[])];function IS(h){return SO.reduce((H,y)=>{if(H)return H;return t0(y.format,h)?y.stringifier:null},null)}var jh=Z("apl");class MS{constructor(h,H){this.onValueChange_=this.onValueChange_.bind(this),this.value=H.value,this.value.emitter.on("change",this.onValueChange_),this.element=h.createElement("div"),this.element.classList.add(jh()),H.viewProps.bindClassModifiers(this.element),H.viewProps.bindTabIndex(this.element);let y=h.createElement("div");y.classList.add(jh("b")),this.element.appendChild(y);let S=h.createElement("div");S.classList.add(jh("c")),y.appendChild(S),this.colorElem_=S;let D=h.createElement("div");D.classList.add(jh("m")),this.element.appendChild(D),this.markerElem_=D;let O=h.createElement("div");O.classList.add(jh("p")),this.markerElem_.appendChild(O),this.previewElem_=O,this.update_()}update_(){let h=this.value.rawValue,H=h.getComponents("rgb"),y=new Y([H[0],H[1],H[2],0],"rgb"),S=new Y([H[0],H[1],H[2],255],"rgb"),D=["to right",lh(y),lh(S)];this.colorElem_.style.background=`linear-gradient(${D.join(",")})`,this.previewElem_.style.backgroundColor=lh(h);let O=R(H[3],0,1,0,100);this.markerElem_.style.left=`${O}%`}onValueChange_(){this.update_()}}class TS{constructor(h,H){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.view=new MS(h,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,H){if(!h.point)return;let y=h.point.x/h.bounds.width,S=this.value.rawValue,[D,O,W]=S.getComponents("hsv");this.value.setRawValue(new Y([D,O,W,y],"hsv"),H)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){let H=A(Wh(!0),i(h));if(H===0)return;let y=this.value.rawValue,[S,D,O,W]=y.getComponents("hsv");this.value.setRawValue(new Y([S,D,O,W+H],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(h){if(A(Wh(!0),i(h))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var qh=Z("coltxt");function DO(h){let H=h.createElement("select"),y=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return H.appendChild(y.reduce((S,D)=>{let O=h.createElement("option");return O.textContent=D.text,O.value=D.value,S.appendChild(O),S},h.createDocumentFragment())),H}class kS{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(qh()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(qh("m")),this.modeElem_=DO(h),this.modeElem_.classList.add(qh("ms")),y.appendChild(this.modeSelectElement),H.viewProps.bindDisabled(this.modeElem_);let S=h.createElement("div");S.classList.add(qh("mm")),S.appendChild(D5(h,"dropdown")),y.appendChild(S),this.element.appendChild(y);let D=h.createElement("div");D.classList.add(qh("w")),this.element.appendChild(D),this.inputsElem_=D,this.inputViews_=H.inputViews,this.applyInputViews_(),t(H.mode,(O)=>{this.modeElem_.value=O})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(h){this.inputViews_=h,this.applyInputViews_()}applyInputViews_(){Gy(this.inputsElem_);let h=this.element.ownerDocument;this.inputViews_.forEach((H)=>{let y=h.createElement("div");y.classList.add(qh("c")),y.appendChild(H.element),this.inputsElem_.appendChild(y)})}}function OO(h){return j(h==="float"?2:0)}function WO(h,H,y){let S=Xh(h,H)[y];return new Zh({min:0,max:S})}function wO(h,H,y){return new Ih(h,{arrayPosition:y===0?"fst":y===2?"lst":"mid",parser:H.parser,props:X.fromObject({formatter:OO(H.colorType),keyScale:Wh(!1),pointerScale:H.colorType==="float"?0.01:1}),value:F(0,{constraint:WO(H.colorMode,H.colorType,y)}),viewProps:H.viewProps})}function qO(h,H){let y={colorMode:H.colorMode,colorType:H.colorType,parser:m,viewProps:H.viewProps};return[0,1,2].map((S)=>{let D=wO(h,y,S);return Lh({primary:H.value,secondary:D.value,forward(O){return P(O,H.colorType).getComponents(H.colorMode)[S]},backward(O,W){let w=H.colorMode,J=P(O,H.colorType).getComponents(w);J[S]=W;let z=OH(z5(n(J),J[3]),w,H.colorType);return P(z,"int")}}),D})}function zO(h,H){let y=new Qh(h,{parser:uh("int"),props:X.fromObject({formatter:WH}),value:F(Y.black()),viewProps:H.viewProps});return Lh({primary:H.value,secondary:y.value,forward:(S)=>new Y(n(S.getComponents()),S.mode),backward:(S,D)=>new Y(z5(n(D.getComponents(S.mode)),S.getComponents()[3]),S.mode)}),[y]}function JO(h){return h!=="hex"}class PS{constructor(h,H){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=H.colorType,this.value=H.value,this.viewProps=H.viewProps,this.colorMode=F(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(h),this.view=new kS(h,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(h){let H=this.colorMode.rawValue;if(JO(H))return qO(h,{colorMode:H,colorType:this.colorType_,value:this.value,viewProps:this.viewProps});return zO(h,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(h){let H=h.currentTarget;this.colorMode.rawValue=H.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map((y)=>y.view)}}var N5=Z("hpl");class $S{constructor(h,H){this.onValueChange_=this.onValueChange_.bind(this),this.value=H.value,this.value.emitter.on("change",this.onValueChange_),this.element=h.createElement("div"),this.element.classList.add(N5()),H.viewProps.bindClassModifiers(this.element),H.viewProps.bindTabIndex(this.element);let y=h.createElement("div");y.classList.add(N5("c")),this.element.appendChild(y);let S=h.createElement("div");S.classList.add(N5("m")),this.element.appendChild(S),this.markerElem_=S,this.update_()}update_(){let h=this.value.rawValue,[H]=h.getComponents("hsv");this.markerElem_.style.backgroundColor=FS(new Y([H,100,100],"hsv"));let y=R(H,0,360,0,100);this.markerElem_.style.left=`${y}%`}onValueChange_(){this.update_()}}class AS{constructor(h,H){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.view=new $S(h,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,H){if(!h.point)return;let y=R(T(h.point.x,0,h.bounds.width),0,h.bounds.width,0,360),S=this.value.rawValue,[,D,O,W]=S.getComponents("hsv");this.value.setRawValue(new Y([y,D,O,W],"hsv"),H)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){let H=A(Wh(!1),i(h));if(H===0)return;let y=this.value.rawValue,[S,D,O,W]=y.getComponents("hsv");this.value.setRawValue(new Y([S+H,D,O,W],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(h){if(A(Wh(!1),i(h))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var C5=Z("svp"),nH=64;class jS{constructor(h,H){this.onValueChange_=this.onValueChange_.bind(this),this.value=H.value,this.value.emitter.on("change",this.onValueChange_),this.element=h.createElement("div"),this.element.classList.add(C5()),H.viewProps.bindClassModifiers(this.element),H.viewProps.bindTabIndex(this.element);let y=h.createElement("canvas");y.height=nH,y.width=nH,y.classList.add(C5("c")),this.element.appendChild(y),this.canvasElement=y;let S=h.createElement("div");S.classList.add(C5("m")),this.element.appendChild(S),this.markerElem_=S,this.update_()}update_(){let h=cD(this.canvasElement);if(!h)return;let y=this.value.rawValue.getComponents("hsv"),S=this.canvasElement.width,D=this.canvasElement.height,O=h.getImageData(0,0,S,D),W=O.data;for(let J=0;J<D;J++)for(let z=0;z<S;z++){let Q=R(z,0,S,0,100),U=R(J,0,D,100,0),K=SS(y[0],Q,U),k=(J*S+z)*4;W[k]=K[0],W[k+1]=K[1],W[k+2]=K[2],W[k+3]=255}h.putImageData(O,0,0);let w=R(y[1],0,100,0,100);this.markerElem_.style.left=`${w}%`;let q=R(y[2],0,100,100,0);this.markerElem_.style.top=`${q}%`}onValueChange_(){this.update_()}}class BS{constructor(h,H){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.view=new jS(h,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(h,H){if(!h.point)return;let y=R(h.point.x,0,h.bounds.width,0,100),S=R(h.point.y,0,h.bounds.height,100,0),[D,,,O]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Y([D,y,S,O],"hsv"),H)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onKeyDown_(h){if(gy(h.key))h.preventDefault();let[H,y,S,D]=this.value.rawValue.getComponents("hsv"),O=Wh(!1),W=A(O,i(h)),w=A(O,Ch(h));if(W===0&&w===0)return;this.value.setRawValue(new Y([H,y+W,S+w,D],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(h){let H=Wh(!1),y=A(H,i(h)),S=A(H,Ch(h));if(y===0&&S===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class NS{constructor(h,H){if(this.value=H.value,this.viewProps=H.viewProps,this.hPaletteC_=new AS(h,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new BS(h,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=H.supportsAlpha?{palette:new TS(h,{value:this.value,viewProps:this.viewProps}),text:new Ih(h,{parser:m,props:X.fromObject({pointerScale:0.01,keyScale:0.1,formatter:j(2)}),value:F(0,{constraint:new Zh({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_)Lh({primary:this.value,secondary:this.alphaIcs_.text.value,forward:(y)=>y.getComponents()[3],backward:(y,S)=>{let D=y.getComponents();return D[3]=S,new Y(D,y.mode)}});this.textsC_=new PS(h,{colorType:H.colorType,value:this.value,viewProps:this.viewProps}),this.view=new WS(h,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:H.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}var V5=Z("colsw");class CS{constructor(h,H){this.onValueChange_=this.onValueChange_.bind(this),H.value.emitter.on("change",this.onValueChange_),this.value=H.value,this.element=h.createElement("div"),this.element.classList.add(V5()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(V5("sw")),this.element.appendChild(y),this.swatchElem_=y;let S=h.createElement("button");S.classList.add(V5("b")),H.viewProps.bindDisabled(S),this.element.appendChild(S),this.buttonElement=S,this.update_()}update_(){let h=this.value.rawValue;this.swatchElem_.style.backgroundColor=wH(h)}onValueChange_(){this.update_()}}class VS{constructor(h,H){this.value=H.value,this.viewProps=H.viewProps,this.view=new CS(h,{value:this.value,viewProps:this.viewProps})}}class Q5{constructor(h,H){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.foldable_=fh.create(H.expanded),this.swatchC_=new VS(h,{value:this.value,viewProps:this.viewProps});let y=this.swatchC_.view.buttonElement;y.addEventListener("blur",this.onButtonBlur_),y.addEventListener("click",this.onButtonClick_),this.textC_=new Qh(h,{parser:H.parser,props:X.fromObject({formatter:H.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new yS(h,{foldable:this.foldable_,pickerLayout:H.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=H.pickerLayout==="popup"?new SH(h,{viewProps:this.viewProps}):null;let S=new NS(h,{colorType:H.colorType,supportsAlpha:H.supportsAlpha,value:this.value,viewProps:this.viewProps});if(S.view.allFocusableElements.forEach((D)=>{D.addEventListener("blur",this.onPopupChildBlur_),D.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=S,this.popC_)this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(S.view.element),Lh({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:(D)=>D,backward:(D,O)=>O});else if(this.view.pickerElement)this.view.pickerElement.appendChild(this.pickerC_.view.element),a5(this.foldable_,this.view.pickerElement)}get textController(){return this.textC_}onButtonBlur_(h){if(!this.popC_)return;let H=this.view.element,y=B(h.relatedTarget);if(!y||!H.contains(y))this.popC_.shows.rawValue=!1}onButtonClick_(){if(this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded"))this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(h){if(!this.popC_)return;let H=this.popC_.view.element,y=Fy(h);if(y&&H.contains(y))return;if(y&&y===this.swatchC_.view.buttonElement&&!g5(H.ownerDocument))return;this.popC_.shows.rawValue=!1}onPopupChildKeydown_(h){if(this.popC_){if(h.key==="Escape")this.popC_.shows.rawValue=!1}else if(this.view.pickerElement){if(h.key==="Escape")this.swatchC_.view.buttonElement.focus()}}}function QO(h){return n(h.getComponents("rgb")).reduce((H,y)=>{return H<<8|Math.floor(y)&255},0)}function XO(h){return h.getComponents("rgb").reduce((H,y,S)=>{let D=Math.floor(S===3?y*255:y)&255;return H<<8|D},0)>>>0}function ZO(h){return new Y([h>>16&255,h>>8&255,h&255],"rgb")}function YO(h){return new Y([h>>24&255,h>>16&255,h>>8&255,R(h&255,0,255,0,1)],"rgb")}function RO(h){if(typeof h!=="number")return Y.black();return ZO(h)}function UO(h){if(typeof h!=="number")return Y.black();return YO(h)}function oh(h,H){if(typeof h!=="object"||G(h))return!1;return H in h&&typeof h[H]==="number"}function ES(h){return oh(h,"r")&&oh(h,"g")&&oh(h,"b")}function _S(h){return ES(h)&&oh(h,"a")}function xS(h){return ES(h)}function qH(h,H){if(h.mode!==H.mode)return!1;if(h.type!==H.type)return!1;let y=h.getComponents(),S=H.getComponents();for(let D=0;D<y.length;D++)if(y[D]!==S[D])return!1;return!0}function bH(h){return"a"in h?[h.r,h.g,h.b,h.a]:[h.r,h.g,h.b]}function GO(h){let H=IS(h);return H?(y,S)=>{bh(y,H(S))}:null}function FO(h){let H=h?XO:QO;return(y,S)=>{bh(y,H(S))}}function KO(h,H,y){let D=P(H,y).toRgbaObject();h.writeProperty("r",D.r),h.writeProperty("g",D.g),h.writeProperty("b",D.b),h.writeProperty("a",D.a)}function LO(h,H,y){let D=P(H,y).toRgbaObject();h.writeProperty("r",D.r),h.writeProperty("g",D.g),h.writeProperty("b",D.b)}function IO(h,H){return(y,S)=>{if(h)KO(y,S,H);else LO(y,S,H)}}function MO(h){var H;if((H=h===null||h===void 0?void 0:h.color)===null||H===void 0?void 0:H.alpha)return!0;return!1}function TO(h){return h?(H)=>wH(H,"0x"):(H)=>WH(H,"0x")}function kO(h){if("color"in h)return!0;if(h.view==="color")return!0;return!1}var PO=$({id:"input-color-number",type:"input",accept:(h,H)=>{if(typeof h!=="number")return null;if(!kO(H))return null;let y=DH(H);return y?{initialValue:h,params:Object.assign(Object.assign({},y),{supportsAlpha:MO(H)})}:null},binding:{reader:(h)=>{return h.params.supportsAlpha?UO:RO},equals:qH,writer:(h)=>{return FO(h.params.supportsAlpha)}},controller:(h)=>{var H,y;return new Q5(h.document,{colorType:"int",expanded:(H=h.params.expanded)!==null&&H!==void 0?H:!1,formatter:TO(h.params.supportsAlpha),parser:uh("int"),pickerLayout:(y=h.params.picker)!==null&&y!==void 0?y:"popup",supportsAlpha:h.params.supportsAlpha,value:h.value,viewProps:h.viewProps})}});function $O(h,H){if(!xS(h))return P(Y.black(),H);if(H==="int"){let y=bH(h);return new Y(y,"rgb")}if(H==="float"){let y=bH(h);return new J5(y,"rgb")}return P(Y.black(),"int")}function AO(h){return _S(h)}function jO(h){return(H)=>{let y=$O(H,h);return P(y,"int")}}function BO(h,H){return(y)=>{if(h)return LS(y,H);return KS(y,H)}}var NO=$({id:"input-color-object",type:"input",accept:(h,H)=>{var y;if(!xS(h))return null;let S=DH(H);return S?{initialValue:h,params:Object.assign(Object.assign({},S),{colorType:(y=wS(H))!==null&&y!==void 0?y:"int"})}:null},binding:{reader:(h)=>jO(h.params.colorType),equals:qH,writer:(h)=>IO(AO(h.initialValue),h.params.colorType)},controller:(h)=>{var H,y;let S=_S(h.initialValue);return new Q5(h.document,{colorType:h.params.colorType,expanded:(H=h.params.expanded)!==null&&H!==void 0?H:!1,formatter:BO(S,h.params.colorType),parser:uh("int"),pickerLayout:(y=h.params.picker)!==null&&y!==void 0?y:"popup",supportsAlpha:S,value:h.value,viewProps:h.viewProps})}}),CO=$({id:"input-color-string",type:"input",accept:(h,H)=>{if(typeof h!=="string")return null;if(H.view==="text")return null;let y=o0(h,wS(H));if(!y)return null;let S=IS(y);if(!S)return null;let D=DH(H);return D?{initialValue:h,params:Object.assign(Object.assign({},D),{format:y,stringifier:S})}:null},binding:{reader:()=>e0,equals:qH,writer:(h)=>{let H=GO(h.params.format);if(!H)throw I.notBindable();return H}},controller:(h)=>{var H,y;return new Q5(h.document,{colorType:h.params.format.type,expanded:(H=h.params.expanded)!==null&&H!==void 0?H:!1,formatter:h.params.stringifier,parser:uh("int"),pickerLayout:(y=h.params.picker)!==null&&y!==void 0?y:"popup",supportsAlpha:h.params.format.alpha,value:h.value,viewProps:h.viewProps})}});class X5{constructor(h){this.components=h.components,this.asm_=h.assembly}constrain(h){let H=this.asm_.toComponents(h).map((y,S)=>{var D,O;return(O=(D=this.components[S])===null||D===void 0?void 0:D.constrain(y))!==null&&O!==void 0?O:y});return this.asm_.fromComponents(H)}}var uH=Z("pndtxt");class fS{constructor(h,H){this.textViews=H.textViews,this.element=h.createElement("div"),this.element.classList.add(uH()),this.textViews.forEach((y)=>{let S=h.createElement("div");S.classList.add(uH("a")),S.appendChild(y.element),this.element.appendChild(S)})}}function VO(h,H,y){return new Ih(h,{arrayPosition:y===0?"fst":y===H.axes.length-1?"lst":"mid",parser:H.parser,props:H.axes[y].textProps,value:F(0,{constraint:H.axes[y].constraint}),viewProps:H.viewProps})}class Z5{constructor(h,H){this.value=H.value,this.viewProps=H.viewProps,this.acs_=H.axes.map((y,S)=>VO(h,H,S)),this.acs_.forEach((y,S)=>{Lh({primary:this.value,secondary:y.value,forward:(D)=>H.assembly.toComponents(D)[S],backward:(D,O)=>{let W=H.assembly.toComponents(D);return W[S]=O,H.assembly.fromComponents(W)}})}),this.view=new fS(h,{textViews:this.acs_.map((y)=>y.view)})}get textControllers(){return this.acs_}}class nS extends Jh{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(h){this.controller.valueController.sliderController.props.set("max",h)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(h){this.controller.valueController.sliderController.props.set("min",h)}}function EO(h,H){let y=[],S=wy(h,H);if(S)y.push(S);let D=qy(h);if(D)y.push(D);let O=yH(h.options);if(O)y.push(O);return new Fh(y)}var _O=$({id:"input-number",type:"input",accept:(h,H)=>{if(typeof h!=="number")return null;let y=L(H,(S)=>Object.assign(Object.assign({},Jy(S)),{options:S.optional.custom(nh),readonly:S.optional.constant(!1)}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>Sy,constraint:(h)=>EO(h.params,h.initialValue),writer:(h)=>bh},controller:(h)=>{let{value:H,constraint:y}=h,S=y&&y5(y,Kh);if(S)return new s(h.document,{props:new X({options:S.values.value("options")}),value:H,viewProps:h.viewProps});let D=zy(h.params,H.rawValue),O=y&&y5(y,Zh);if(O)return new Vh(h.document,Object.assign(Object.assign({},oy(Object.assign(Object.assign({},D),{keyScale:F(D.keyScale),max:O.values.value("max"),min:O.values.value("min")}))),{parser:m,value:H,viewProps:h.viewProps}));return new Ih(h.document,{parser:m,props:X.fromObject(D),value:H,viewProps:h.viewProps})},api(h){if(typeof h.controller.value.rawValue!=="number")return null;if(h.controller.valueController instanceof Vh)return new nS(h.controller);if(h.controller.valueController instanceof s)return new q5(h.controller);return null}});class v{constructor(h=0,H=0){this.x=h,this.y=H}getComponents(){return[this.x,this.y]}static isObject(h){if(G(h))return!1;let{x:H,y}=h;if(typeof H!=="number"||typeof y!=="number")return!1;return!0}static equals(h,H){return h.x===H.x&&h.y===H.y}toObject(){return{x:this.x,y:this.y}}}var bS={toComponents:(h)=>h.getComponents(),fromComponents:(h)=>new v(...h)},zh=Z("p2d");class uS{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(zh()),H.viewProps.bindClassModifiers(this.element),t(H.expanded,Rh(this.element,zh(void 0,"expanded")));let y=h.createElement("div");y.classList.add(zh("h")),this.element.appendChild(y);let S=h.createElement("button");S.classList.add(zh("b")),S.appendChild(D5(h,"p2dpad")),H.viewProps.bindDisabled(S),y.appendChild(S),this.buttonElement=S;let D=h.createElement("div");if(D.classList.add(zh("t")),y.appendChild(D),this.textElement=D,H.pickerLayout==="inline"){let O=h.createElement("div");O.classList.add(zh("p")),this.element.appendChild(O),this.pickerElement=O}else this.pickerElement=null}}var c=Z("p2dp");class dS{constructor(h,H){if(this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=H.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=h.createElement("div"),this.element.classList.add(c()),H.layout==="popup")this.element.classList.add(c(void 0,"p"));H.viewProps.bindClassModifiers(this.element);let y=h.createElement("div");y.classList.add(c("p")),H.viewProps.bindTabIndex(y),this.element.appendChild(y),this.padElement=y;let S=h.createElementNS(x,"svg");S.classList.add(c("g")),this.padElement.appendChild(S),this.svgElem_=S;let D=h.createElementNS(x,"line");D.classList.add(c("ax")),D.setAttributeNS(null,"x1","0"),D.setAttributeNS(null,"y1","50%"),D.setAttributeNS(null,"x2","100%"),D.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(D);let O=h.createElementNS(x,"line");O.classList.add(c("ax")),O.setAttributeNS(null,"x1","50%"),O.setAttributeNS(null,"y1","0"),O.setAttributeNS(null,"x2","50%"),O.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(O);let W=h.createElementNS(x,"line");W.classList.add(c("l")),W.setAttributeNS(null,"x1","50%"),W.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(W),this.lineElem_=W;let w=h.createElement("div");w.classList.add(c("m")),this.padElement.appendChild(w),this.markerElem_=w,H.value.emitter.on("change",this.onValueChange_),this.value=H.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){let[h,H]=this.value.rawValue.getComponents(),y=this.props_.get("max"),S=R(h,-y,+y,0,100),D=R(H,-y,+y,0,100),O=this.props_.get("invertsY")?100-D:D;this.lineElem_.setAttributeNS(null,"x2",`${S}%`),this.lineElem_.setAttributeNS(null,"y2",`${O}%`),this.markerElem_.style.left=`${S}%`,this.markerElem_.style.top=`${O}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function dH(h,H,y){return[A(H[0],i(h)),A(H[1],Ch(h))*(y?1:-1)]}class tS{constructor(h,H){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=H.props,this.value=H.value,this.viewProps=H.viewProps,this.view=new dS(h,{layout:H.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(h,H){if(!h.point)return;let y=this.props.get("max"),S=R(h.point.x,0,h.bounds.width,-y,+y),D=R(this.props.get("invertsY")?h.bounds.height-h.point.y:h.point.y,0,h.bounds.height,-y,+y);this.value.setRawValue(new v(S,D),H)}onPointerDown_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerMove_(h){this.handlePointerEvent_(h.data,{forceEmit:!1,last:!1})}onPointerUp_(h){this.handlePointerEvent_(h.data,{forceEmit:!0,last:!0})}onPadKeyDown_(h){if(gy(h.key))h.preventDefault();let[H,y]=dH(h,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));if(H===0&&y===0)return;this.value.setRawValue(new v(this.value.rawValue.x+H,this.value.rawValue.y+y),{forceEmit:!1,last:!1})}onPadKeyUp_(h){let[H,y]=dH(h,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));if(H===0&&y===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class vS{constructor(h,H){var y,S;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=H.value,this.viewProps=H.viewProps,this.foldable_=fh.create(H.expanded),this.popC_=H.pickerLayout==="popup"?new SH(h,{viewProps:this.viewProps}):null;let D=new tS(h,{layout:H.pickerLayout,props:new X({invertsY:F(H.invertsY),max:F(H.max),xKeyScale:H.axes[0].textProps.value("keyScale"),yKeyScale:H.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});if(D.view.allFocusableElements.forEach((O)=>{O.addEventListener("blur",this.onPopupChildBlur_),O.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=D,this.textC_=new Z5(h,{assembly:bS,axes:H.axes,parser:H.parser,value:this.value,viewProps:this.viewProps}),this.view=new uS(h,{expanded:this.foldable_.value("expanded"),pickerLayout:H.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(y=this.view.buttonElement)===null||y===void 0||y.addEventListener("blur",this.onPadButtonBlur_),(S=this.view.buttonElement)===null||S===void 0||S.addEventListener("click",this.onPadButtonClick_),this.popC_)this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Lh({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:(O)=>O,backward:(O,W)=>W});else if(this.view.pickerElement)this.view.pickerElement.appendChild(this.pickerC_.view.element),a5(this.foldable_,this.view.pickerElement)}get textController(){return this.textC_}onPadButtonBlur_(h){if(!this.popC_)return;let H=this.view.element,y=B(h.relatedTarget);if(!y||!H.contains(y))this.popC_.shows.rawValue=!1}onPadButtonClick_(){if(this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded"))this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(h){if(!this.popC_)return;let H=this.popC_.view.element,y=Fy(h);if(y&&H.contains(y))return;if(y&&y===this.view.buttonElement&&!g5(H.ownerDocument))return;this.popC_.shows.rawValue=!1}onPopupChildKeydown_(h){if(this.popC_){if(h.key==="Escape")this.popC_.shows.rawValue=!1}else if(this.view.pickerElement){if(h.key==="Escape")this.view.buttonElement.focus()}}}function xO(h){return v.isObject(h)?new v(h.x,h.y):new v}function fO(h,H){h.writeProperty("x",H.x),h.writeProperty("y",H.y)}function nO(h,H){return new X5({assembly:bS,components:[d(Object.assign(Object.assign({},h),h.x),H.x),d(Object.assign(Object.assign({},h),h.y),H.y)]})}function tH(h,H){var y,S;if(!G(h.min)||!G(h.max))return Math.max(Math.abs((y=h.min)!==null&&y!==void 0?y:0),Math.abs((S=h.max)!==null&&S!==void 0?S:0));let D=Oy(h);return Math.max(Math.abs(D)*10,Math.abs(H)*10)}function bO(h,H){var y,S;let D=tH(Oh(h,(y=h.x)!==null&&y!==void 0?y:{}),H.x),O=tH(Oh(h,(S=h.y)!==null&&S!==void 0?S:{}),H.y);return Math.max(D,O)}function uO(h){if(!("y"in h))return!1;let H=h.y;if(!H)return!1;return"inverted"in H?!!H.inverted:!1}var dO=$({id:"input-point2d",type:"input",accept:(h,H)=>{if(!v.isObject(h))return null;let y=L(H,(S)=>Object.assign(Object.assign({},Eh(S)),{expanded:S.optional.boolean,picker:S.optional.custom(ay),readonly:S.optional.constant(!1),x:S.optional.custom(l),y:S.optional.object(Object.assign(Object.assign({},Eh(S)),{inverted:S.optional.boolean}))}));return y?{initialValue:h,params:y}:null},binding:{reader:()=>xO,constraint:(h)=>nO(h.params,h.initialValue),equals:v.equals,writer:()=>fO},controller:(h)=>{var H,y;let{document:S,value:D,constraint:O}=h,W=[h.params.x,h.params.y];return new vS(S,{axes:D.rawValue.getComponents().map((w,q)=>{var J;return i5({constraint:O.components[q],initialValue:w,params:Oh(h.params,(J=W[q])!==null&&J!==void 0?J:{})})}),expanded:(H=h.params.expanded)!==null&&H!==void 0?H:!1,invertsY:uO(h.params),max:bO(h.params,D.rawValue),parser:m,pickerLayout:(y=h.params.picker)!==null&&y!==void 0?y:"popup",value:D,viewProps:h.viewProps})}});class Sh{constructor(h=0,H=0,y=0){this.x=h,this.y=H,this.z=y}getComponents(){return[this.x,this.y,this.z]}static isObject(h){if(G(h))return!1;let{x:H,y,z:S}=h;if(typeof H!=="number"||typeof y!=="number"||typeof S!=="number")return!1;return!0}static equals(h,H){return h.x===H.x&&h.y===H.y&&h.z===H.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}var mS={toComponents:(h)=>h.getComponents(),fromComponents:(h)=>new Sh(...h)};function tO(h){return Sh.isObject(h)?new Sh(h.x,h.y,h.z):new Sh}function vO(h,H){h.writeProperty("x",H.x),h.writeProperty("y",H.y),h.writeProperty("z",H.z)}function mO(h,H){return new X5({assembly:mS,components:[d(Object.assign(Object.assign({},h),h.x),H.x),d(Object.assign(Object.assign({},h),h.y),H.y),d(Object.assign(Object.assign({},h),h.z),H.z)]})}var sO=$({id:"input-point3d",type:"input",accept:(h,H)=>{if(!Sh.isObject(h))return null;let y=L(H,(S)=>Object.assign(Object.assign({},Eh(S)),{readonly:S.optional.constant(!1),x:S.optional.custom(l),y:S.optional.custom(l),z:S.optional.custom(l)}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>tO,constraint:(h)=>mO(h.params,h.initialValue),equals:Sh.equals,writer:(h)=>vO},controller:(h)=>{let{value:H,constraint:y}=h,S=[h.params.x,h.params.y,h.params.z];return new Z5(h.document,{assembly:mS,axes:H.rawValue.getComponents().map((D,O)=>{var W;return i5({constraint:y.components[O],initialValue:D,params:Oh(h.params,(W=S[O])!==null&&W!==void 0?W:{})})}),parser:m,value:H,viewProps:h.viewProps})}});class Dh{constructor(h=0,H=0,y=0,S=0){this.x=h,this.y=H,this.z=y,this.w=S}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(h){if(G(h))return!1;let{x:H,y,z:S,w:D}=h;if(typeof H!=="number"||typeof y!=="number"||typeof S!=="number"||typeof D!=="number")return!1;return!0}static equals(h,H){return h.x===H.x&&h.y===H.y&&h.z===H.z&&h.w===H.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}var sS={toComponents:(h)=>h.getComponents(),fromComponents:(h)=>new Dh(...h)};function iO(h){return Dh.isObject(h)?new Dh(h.x,h.y,h.z,h.w):new Dh}function gO(h,H){h.writeProperty("x",H.x),h.writeProperty("y",H.y),h.writeProperty("z",H.z),h.writeProperty("w",H.w)}function pO(h,H){return new X5({assembly:sS,components:[d(Object.assign(Object.assign({},h),h.x),H.x),d(Object.assign(Object.assign({},h),h.y),H.y),d(Object.assign(Object.assign({},h),h.z),H.z),d(Object.assign(Object.assign({},h),h.w),H.w)]})}var cO=$({id:"input-point4d",type:"input",accept:(h,H)=>{if(!Dh.isObject(h))return null;let y=L(H,(S)=>Object.assign(Object.assign({},Eh(S)),{readonly:S.optional.constant(!1),w:S.optional.custom(l),x:S.optional.custom(l),y:S.optional.custom(l),z:S.optional.custom(l)}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>iO,constraint:(h)=>pO(h.params,h.initialValue),equals:Dh.equals,writer:(h)=>gO},controller:(h)=>{let{value:H,constraint:y}=h,S=[h.params.x,h.params.y,h.params.z,h.params.w];return new Z5(h.document,{assembly:sS,axes:H.rawValue.getComponents().map((D,O)=>{var W;return i5({constraint:y.components[O],initialValue:D,params:Oh(h.params,(W=S[O])!==null&&W!==void 0?W:{})})}),parser:m,value:H,viewProps:h.viewProps})}});function rO(h){let H=[],y=yH(h.options);if(y)H.push(y);return new Fh(H)}var lO=$({id:"input-string",type:"input",accept:(h,H)=>{if(typeof h!=="string")return null;let y=L(H,(S)=>({readonly:S.optional.constant(!1),options:S.optional.custom(nh)}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>iy,constraint:(h)=>rO(h.params),writer:(h)=>bh},controller:(h)=>{let{document:H,value:y,constraint:S}=h,D=S&&y5(S,Kh);if(D)return new s(H,{props:new X({options:D.values.value("options")}),value:y,viewProps:h.viewProps});return new Qh(H,{parser:(O)=>O,props:X.fromObject({formatter:b5}),value:y,viewProps:h.viewProps})},api(h){if(typeof h.controller.value.rawValue!=="string")return null;if(h.controller.valueController instanceof s)return new q5(h.controller);return null}}),dh={monitor:{defaultInterval:200,defaultRows:3}},vH=Z("mll");class iS{constructor(h,H){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=H.formatter,this.element=h.createElement("div"),this.element.classList.add(vH()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("textarea");y.classList.add(vH("i")),y.style.height=`calc(var(${ey("containerUnitSize")}) * ${H.rows})`,y.readOnly=!0,H.viewProps.bindDisabled(y),this.element.appendChild(y),this.textareaElem_=y,H.value.emitter.on("change",this.onValueUpdate_),this.value=H.value,this.update_()}update_(){let h=this.textareaElem_,H=h.scrollTop===h.scrollHeight-h.clientHeight,y=[];if(this.value.rawValue.forEach((S)=>{if(S!==void 0)y.push(this.formatter_(S))}),h.textContent=y.join(`
`),H)h.scrollTop=h.scrollHeight}onValueUpdate_(){this.update_()}}class Y5{constructor(h,H){this.value=H.value,this.viewProps=H.viewProps,this.view=new iS(h,{formatter:H.formatter,rows:H.rows,value:this.value,viewProps:this.viewProps})}}var mH=Z("sgl");class gS{constructor(h,H){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=H.formatter,this.element=h.createElement("div"),this.element.classList.add(mH()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("input");y.classList.add(mH("i")),y.readOnly=!0,y.type="text",H.viewProps.bindDisabled(y),this.element.appendChild(y),this.inputElement=y,H.value.emitter.on("change",this.onValueUpdate_),this.value=H.value,this.update_()}update_(){let h=this.value.rawValue,H=h[h.length-1];this.inputElement.value=H!==void 0?this.formatter_(H):""}onValueUpdate_(){this.update_()}}class R5{constructor(h,H){this.value=H.value,this.viewProps=H.viewProps,this.view=new gS(h,{formatter:H.formatter,value:this.value,viewProps:this.viewProps})}}var oO=$({id:"monitor-bool",type:"monitor",accept:(h,H)=>{if(typeof h!=="boolean")return null;let y=L(H,(S)=>({readonly:S.required.constant(!0),rows:S.optional.number}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>sy},controller:(h)=>{var H;if(h.value.rawValue.length===1)return new R5(h.document,{formatter:EH,value:h.value,viewProps:h.viewProps});return new Y5(h.document,{formatter:EH,rows:(H=h.params.rows)!==null&&H!==void 0?H:dh.monitor.defaultRows,value:h.value,viewProps:h.viewProps})}});class pS extends Jh{get max(){return this.controller.valueController.props.get("max")}set max(h){this.controller.valueController.props.set("max",h)}get min(){return this.controller.valueController.props.get("min")}set min(h){this.controller.valueController.props.set("min",h)}}var r=Z("grl");class cS{constructor(h,H){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=h.createElement("div"),this.element.classList.add(r()),H.viewProps.bindClassModifiers(this.element),this.formatter_=H.formatter,this.props_=H.props,this.cursor_=H.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);let y=h.createElementNS(x,"svg");y.classList.add(r("g")),y.style.height=`calc(var(${ey("containerUnitSize")}) * ${H.rows})`,this.element.appendChild(y),this.svgElem_=y;let S=h.createElementNS(x,"polyline");this.svgElem_.appendChild(S),this.lineElem_=S;let D=h.createElement("div");D.classList.add(r("t"),Z("tt")()),this.element.appendChild(D),this.tooltipElem_=D,H.value.emitter.on("change",this.onValueUpdate_),this.value=H.value,this.update_()}get graphElement(){return this.svgElem_}update_(){let{clientWidth:h,clientHeight:H}=this.element,y=this.value.rawValue.length-1,S=this.props_.get("min"),D=this.props_.get("max"),O=[];this.value.rawValue.forEach((z,Q)=>{if(z===void 0)return;let U=R(Q,0,y,0,h),K=R(z,S,D,H,0);O.push([U,K].join(","))}),this.lineElem_.setAttributeNS(null,"points",O.join(" "));let W=this.tooltipElem_,w=this.value.rawValue[this.cursor_.rawValue];if(w===void 0){W.classList.remove(r("t","a"));return}let q=R(this.cursor_.rawValue,0,y,0,h),J=R(w,S,D,H,0);if(W.style.left=`${q}px`,W.style.top=`${J}px`,W.textContent=`${this.formatter_(w)}`,!W.classList.contains(r("t","a")))W.classList.add(r("t","a"),r("t","in")),ah(W),W.classList.remove(r("t","in"))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class zH{constructor(h,H){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=H.props,this.value=H.value,this.viewProps=H.viewProps,this.cursor_=F(-1),this.view=new cS(h,{cursor:this.cursor_,formatter:H.formatter,rows:H.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!g5(h))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{let y=new a(this.view.element);y.emitter.on("down",this.onGraphPointerDown_),y.emitter.on("move",this.onGraphPointerMove_),y.emitter.on("up",this.onGraphPointerUp_)}}importProps(h){return N(h,null,(H)=>({max:H.required.number,min:H.required.number}),(H)=>{return this.props.set("max",H.max),this.props.set("min",H.min),!0})}exportProps(){return C(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(h){let{clientWidth:H}=this.view.element;this.cursor_.rawValue=Math.floor(R(h.offsetX,0,H,0,this.value.rawValue.length))}onGraphPointerDown_(h){this.onGraphPointerMove_(h)}onGraphPointerMove_(h){if(!h.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(R(h.data.point.x,0,h.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function u5(h){return!G(h.format)?h.format:j(2)}function eO(h){var H;if(h.value.rawValue.length===1)return new R5(h.document,{formatter:u5(h.params),value:h.value,viewProps:h.viewProps});return new Y5(h.document,{formatter:u5(h.params),rows:(H=h.params.rows)!==null&&H!==void 0?H:dh.monitor.defaultRows,value:h.value,viewProps:h.viewProps})}function aO(h){var H,y,S;return new zH(h.document,{formatter:u5(h.params),rows:(H=h.params.rows)!==null&&H!==void 0?H:dh.monitor.defaultRows,props:X.fromObject({max:(y=h.params.max)!==null&&y!==void 0?y:100,min:(S=h.params.min)!==null&&S!==void 0?S:0}),value:h.value,viewProps:h.viewProps})}function sH(h){return h.view==="graph"}var hW=$({id:"monitor-number",type:"monitor",accept:(h,H)=>{if(typeof h!=="number")return null;let y=L(H,(S)=>({format:S.optional.function,max:S.optional.number,min:S.optional.number,readonly:S.required.constant(!0),rows:S.optional.number,view:S.optional.string}));return y?{initialValue:h,params:y}:null},binding:{defaultBufferSize:(h)=>sH(h)?64:1,reader:(h)=>Sy},controller:(h)=>{if(sH(h.params))return aO(h);return eO(h)},api:(h)=>{if(h.controller.valueController instanceof zH)return new pS(h.controller);return null}}),HW=$({id:"monitor-string",type:"monitor",accept:(h,H)=>{if(typeof h!=="string")return null;let y=L(H,(S)=>({multiline:S.optional.boolean,readonly:S.required.constant(!0),rows:S.optional.number}));return y?{initialValue:h,params:y}:null},binding:{reader:(h)=>iy},controller:(h)=>{var H;let y=h.value;if(y.rawValue.length>1||h.params.multiline)return new Y5(h.document,{formatter:b5,rows:(H=h.params.rows)!==null&&H!==void 0?H:dh.monitor.defaultRows,value:y,viewProps:h.viewProps});return new R5(h.document,{formatter:b5,value:y,viewProps:h.viewProps})}});class rS{constructor(){this.map_=new Map}get(h){var H;return(H=this.map_.get(h))!==null&&H!==void 0?H:null}has(h){return this.map_.has(h)}add(h,H){return this.map_.set(h,H),h.viewProps.handleDispose(()=>{this.map_.delete(h)}),H}}class lS{constructor(h){this.target=h.target,this.reader_=h.reader,this.writer_=h.writer}read(){return this.reader_(this.target.read())}write(h){this.writer_(this.target,h)}inject(h){this.write(this.reader_(h))}}function yW(h,H){var y;let S=h.accept(H.target.read(),H.params);if(G(S))return null;let D={target:H.target,initialValue:S.initialValue,params:S.params},O=L(H.params,(Q)=>({disabled:Q.optional.boolean,hidden:Q.optional.boolean,label:Q.optional.string,tag:Q.optional.string})),W=h.binding.reader(D),w=h.binding.constraint?h.binding.constraint(D):void 0,q=new lS({reader:W,target:H.target,writer:h.binding.writer(D)}),J=new Yy(F(W(S.initialValue),{constraint:w,equals:h.binding.equals}),q),z=h.controller({constraint:w,document:H.document,initialValue:S.initialValue,params:S.params,value:J,viewProps:g.create({disabled:O===null||O===void 0?void 0:O.disabled,hidden:O===null||O===void 0?void 0:O.hidden})});return new Ky(H.document,{blade:Gh(),props:X.fromObject({label:"label"in H.params?(y=O===null||O===void 0?void 0:O.label)!==null&&y!==void 0?y:null:H.target.key}),tag:O===null||O===void 0?void 0:O.tag,value:J,valueController:z})}class oS{constructor(h){this.target=h.target,this.reader_=h.reader}read(){return this.reader_(this.target.read())}}function SW(h,H){return H===0?new uy:new dy(h,H!==null&&H!==void 0?H:dh.monitor.defaultInterval)}function DW(h,H){var y,S,D;let O=h.accept(H.target.read(),H.params);if(G(O))return null;let W={target:H.target,initialValue:O.initialValue,params:O.params},w=L(H.params,(U)=>({bufferSize:U.optional.number,disabled:U.optional.boolean,hidden:U.optional.boolean,interval:U.optional.number,label:U.optional.string})),q=h.binding.reader(W),J=(S=(y=w===null||w===void 0?void 0:w.bufferSize)!==null&&y!==void 0?y:h.binding.defaultBufferSize&&h.binding.defaultBufferSize(O.params))!==null&&S!==void 0?S:1,z=new Iy({binding:new oS({reader:q,target:H.target}),bufferSize:J,ticker:SW(H.document,w===null||w===void 0?void 0:w.interval)}),Q=h.controller({document:H.document,params:O.params,value:z,viewProps:g.create({disabled:w===null||w===void 0?void 0:w.disabled,hidden:w===null||w===void 0?void 0:w.hidden})});return Q.viewProps.bindDisabled(z.ticker),Q.viewProps.handleDispose(()=>{z.ticker.dispose()}),new My(H.document,{blade:Gh(),props:X.fromObject({label:"label"in H.params?(D=w===null||w===void 0?void 0:w.label)!==null&&D!==void 0?D:null:H.target.key}),value:z,valueController:Q})}class eS{constructor(h){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=h}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(h,H){if(!P0(H.core))throw I.notCompatible(h,H.id);if(H.type==="blade")this.pluginsMap_.blades.unshift(H);else if(H.type==="input")this.pluginsMap_.inputs.unshift(H);else if(H.type==="monitor")this.pluginsMap_.monitors.unshift(H)}createInput_(h,H,y){return this.pluginsMap_.inputs.reduce((S,D)=>S!==null&&S!==void 0?S:yW(D,{document:h,target:H,params:y}),null)}createMonitor_(h,H,y){return this.pluginsMap_.monitors.reduce((S,D)=>S!==null&&S!==void 0?S:DW(D,{document:h,params:y,target:H}),null)}createBinding(h,H,y){let S=H.read();if(G(S))throw new I({context:{key:H.key},type:"nomatchingcontroller"});let D=this.createInput_(h,H,y);if(D)return D;let O=this.createMonitor_(h,H,y);if(O)return O;throw new I({context:{key:H.key},type:"nomatchingcontroller"})}createBlade(h,H){let y=this.pluginsMap_.blades.reduce((S,D)=>S!==null&&S!==void 0?S:K0(D,{document:h,params:H}),null);if(!y)throw new I({type:"nomatchingview",context:{params:H}});return y}createInputBindingApi_(h){let H=this.pluginsMap_.inputs.reduce((y,S)=>{var D,O;if(y)return y;return(O=(D=S.api)===null||D===void 0?void 0:D.call(S,{controller:h}))!==null&&O!==void 0?O:null},null);return this.apiCache_.add(h,H!==null&&H!==void 0?H:new Jh(h))}createMonitorBindingApi_(h){let H=this.pluginsMap_.monitors.reduce((y,S)=>{var D,O;if(y)return y;return(O=(D=S.api)===null||D===void 0?void 0:D.call(S,{controller:h}))!==null&&O!==void 0?O:null},null);return this.apiCache_.add(h,H!==null&&H!==void 0?H:new Jh(h))}createBindingApi(h){if(this.apiCache_.has(h))return this.apiCache_.get(h);if(H0(h))return this.createInputBindingApi_(h);if(W0(h))return this.createMonitorBindingApi_(h);throw I.shouldNeverHappen()}createApi(h){if(this.apiCache_.has(h))return this.apiCache_.get(h);if(h0(h))return this.createBindingApi(h);let H=this.pluginsMap_.blades.reduce((y,S)=>y!==null&&y!==void 0?y:S.api({controller:h,pool:this}),null);if(!H)throw I.shouldNeverHappen();return this.apiCache_.add(h,H)}}var OW=new rS;function WW(){let h=new eS(OW);return[dO,sO,cO,lO,_O,CO,NO,PO,A0,oO,HW,hW,q0,G0,by].forEach((H)=>{h.register("core",H)}),h}class aS extends e{constructor(h){super(h);this.emitter_=new M,this.controller.value.emitter.on("change",(H)=>{this.emitter_.emit("change",new Yh(this,H.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(h){this.controller.labelController.props.set("label",h)}get options(){return this.controller.valueController.props.get("options")}set options(h){this.controller.valueController.props.set("options",h)}get value(){return this.controller.value.rawValue}set value(h){this.controller.value.rawValue=h}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}}class hD extends e{}class HD extends e{constructor(h){super(h);this.emitter_=new M,this.controller.value.emitter.on("change",(H)=>{this.emitter_.emit("change",new Yh(this,H.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(h){this.controller.labelController.props.set("label",h)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(h){this.controller.valueController.sliderController.props.set("max",h)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(h){this.controller.valueController.sliderController.props.set("min",h)}get value(){return this.controller.value.rawValue}set value(h){this.controller.value.rawValue=h}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}}class yD extends e{constructor(h){super(h);this.emitter_=new M,this.controller.value.emitter.on("change",(H)=>{this.emitter_.emit("change",new Yh(this,H.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(h){this.controller.labelController.props.set("label",h)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(h){this.controller.valueController.props.set("formatter",h)}get value(){return this.controller.value.rawValue}set value(h){this.controller.value.rawValue=h}on(h,H){let y=H.bind(this);return this.emitter_.on(h,(S)=>{y(S)},{key:H}),this}off(h,H){return this.emitter_.off(h,H),this}}var wW=function(){return{id:"list",type:"blade",core:Uh,accept(h){let H=L(h,(y)=>({options:y.required.custom(nh),value:y.required.raw,view:y.required.constant("list"),label:y.optional.string}));return H?{params:H}:null},controller(h){let H=new Kh(HH(h.params.options)),y=F(h.params.value,{constraint:H}),S=new s(h.document,{props:new X({options:H.values.value("options")}),value:y,viewProps:h.viewProps});return new o(h.document,{blade:h.blade,props:X.fromObject({label:h.params.label}),value:y,valueController:S})},api(h){if(!(h.controller instanceof o))return null;if(!(h.controller.valueController instanceof s))return null;return new aS(h.controller)}}}();class SD extends hH{constructor(h,H){super(h,H)}get element(){return this.controller.view.element}}class DD extends h5{constructor(h,H){super(h,{expanded:H.expanded,blade:H.blade,props:H.props,root:!0,viewProps:H.viewProps})}}var iH=Z("spr");class OD{constructor(h,H){this.element=h.createElement("div"),this.element.classList.add(iH()),H.viewProps.bindClassModifiers(this.element);let y=h.createElement("hr");y.classList.add(iH("r")),this.element.appendChild(y)}}class d5 extends xh{constructor(h,H){super(Object.assign(Object.assign({},H),{view:new OD(h,{viewProps:H.viewProps})}))}}var qW={id:"separator",type:"blade",core:Uh,accept(h){let H=L(h,(y)=>({view:y.required.constant("separator")}));return H?{params:H}:null},controller(h){return new d5(h.document,{blade:h.blade,viewProps:h.viewProps})},api(h){if(!(h.controller instanceof d5))return null;return new hD(h.controller)}},zW={id:"slider",type:"blade",core:Uh,accept(h){let H=L(h,(y)=>({max:y.required.number,min:y.required.number,view:y.required.constant("slider"),format:y.optional.function,label:y.optional.string,value:y.optional.number}));return H?{params:H}:null},controller(h){var H,y;let S=(H=h.params.value)!==null&&H!==void 0?H:0,D=new Zh({max:h.params.max,min:h.params.min}),O=F(S,{constraint:D}),W=new Vh(h.document,Object.assign(Object.assign({},oy({formatter:(y=h.params.format)!==null&&y!==void 0?y:uD,keyScale:F(1),max:D.values.value("max"),min:D.values.value("min"),pointerScale:Wy(h.params,S)})),{parser:m,value:O,viewProps:h.viewProps}));return new o(h.document,{blade:h.blade,props:X.fromObject({label:h.params.label}),value:O,valueController:W})},api(h){if(!(h.controller instanceof o))return null;if(!(h.controller.valueController instanceof Vh))return null;return new HD(h.controller)}},JW=function(){return{id:"text",type:"blade",core:Uh,accept(h){let H=L(h,(y)=>({parse:y.required.function,value:y.required.raw,view:y.required.constant("text"),format:y.optional.function,label:y.optional.string}));return H?{params:H}:null},controller(h){var H;let y=F(h.params.value),S=new Qh(h.document,{parser:h.params.parse,props:X.fromObject({formatter:(H=h.params.format)!==null&&H!==void 0?H:(D)=>String(D)}),value:y,viewProps:h.viewProps});return new o(h.document,{blade:h.blade,props:X.fromObject({label:h.params.label}),value:y,valueController:S})},api(h){if(!(h.controller instanceof o))return null;if(!(h.controller.valueController instanceof Qh))return null;return new yD(h.controller)}}}();function QW(h){let H=h.createElement("div");if(H.classList.add(Z("dfw")()),h.body)h.body.appendChild(H);return H}function XW(h,H,y){if(h.querySelector(`style[data-tp-style=${H}]`))return;let S=h.createElement("style");S.dataset.tpStyle=H,S.textContent=y,h.head.appendChild(S)}class JH extends SD{constructor(h){var H,y;let S=h!==null&&h!==void 0?h:{},D=(H=S.document)!==null&&H!==void 0?H:pD(),O=WW(),W=new DD(D,{expanded:S.expanded,blade:Gh(),props:X.fromObject({title:S.title}),viewProps:g.create()});super(W,O);this.pool_=O,this.containerElem_=(y=S.container)!==null&&y!==void 0?y:QW(D),this.containerElem_.appendChild(this.element),this.doc_=D,this.usesDefaultWrapper_=!S.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw I.alreadyDisposed();return this.doc_}dispose(){let h=this.containerElem_;if(!h)throw I.alreadyDisposed();if(this.usesDefaultWrapper_){let H=h.parentElement;if(H)H.removeChild(h)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(h){if(h.css)XW(this.document,`plugin-${h.id}`,h.css);("plugin"in h?[h.plugin]:("plugins"in h)?h.plugins:[]).forEach((y)=>{this.pool_.register(h.id,y)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:".tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:\"\";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:\"\";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}",plugins:[wW,qW,zW,by,JW]})}}var BW=new e5("4.0.5");var th={cssVariables:{"--bg":"#0a0e14","--bg-elevated":"#0f1419","--muted":"#1a2332","--text":"#e6edf3","--text-secondary":"#8b949e","--accent":"#58d5ff","--accent-2":"#42a5cc","--border":"#21262d","--border-hover":"#30363d","--success":"#3fb950","--error":"#f85149"},tweakpane:{"--tp-base-background-color":"var(--bg-elevated)","--tp-base-shadow-color":"rgba(0, 0, 0, 0.4)","--tp-button-background-color":"var(--muted)","--tp-button-background-color-active":"var(--accent-2)","--tp-button-background-color-focus":"var(--accent)","--tp-button-background-color-hover":"var(--border-hover)","--tp-button-foreground-color":"var(--text)","--tp-container-background-color":"rgba(15, 20, 25, 0.6)","--tp-container-background-color-active":"rgba(15, 20, 25, 0.8)","--tp-container-background-color-focus":"rgba(15, 20, 25, 0.9)","--tp-container-background-color-hover":"rgba(15, 20, 25, 0.7)","--tp-container-foreground-color":"var(--text)","--tp-groove-foreground-color":"var(--border)","--tp-input-background-color":"rgba(26, 35, 50, 0.5)","--tp-input-background-color-active":"rgba(26, 35, 50, 0.7)","--tp-input-background-color-focus":"rgba(26, 35, 50, 0.8)","--tp-input-background-color-hover":"rgba(26, 35, 50, 0.6)","--tp-input-foreground-color":"var(--text)","--tp-label-foreground-color":"var(--text-secondary)","--tp-monitor-background-color":"rgba(26, 35, 50, 0.5)","--tp-monitor-foreground-color":"var(--text)"}};function vh(){let h=document.createElement("style");h.id="hypertool-theme";let H=Object.entries({...th.cssVariables,...th.tweakpane}).map(([y,S])=>`  ${y}: ${S};`).join(`
`);h.textContent=`
  body {
   margin: 0;
   padding: 0;
  }
  
:root {
${H}
}

/* Tweakpane container styling */
.tp-dfwv {
  width: 300px !important;
  max-height: calc(100vh - 40px);
  display: flex;
  
  
  backdrop-filter: blur(12px);
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 12px;
  // overflow: auto;
}

/* Title styling */
.tp-dfwv .tp-rotv_t {
  color: var(--accent);
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.3px;
}

/* Folder styling */
.tp-dfwv .tp-fldv_t {
  color: var(--text);
  font-weight: 500;
}

/* Scrollbar styling */
.tp-dfwv ::-webkit-scrollbar {
  width: 8px;
}

.tp-dfwv ::-webkit-scrollbar-track {
  background: transparent;
}

.tp-dfwv ::-webkit-scrollbar-thumb {
  background: var(--border-hover);
  border-radius: 4px;
}

.tp-dfwv ::-webkit-scrollbar-thumb:hover {
  background: #3a4149;
}

/* Animation */
.tp-dfwv {
  animation: slideIn 0.2s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
`,document.head.appendChild(h)}class wh{constructor(h,H={}){this.pane=null,this.definitions=h,this.options={title:H.title||"Controls",position:H.position||"top-right",expanded:H.expanded!==void 0?H.expanded:!0,container:H.container!==void 0?H.container:null,onChange:H.onChange||(()=>{}),onReady:H.onReady||(()=>{})},this.params=this.extractInitialValues(h),this.init()}extractInitialValues(h){let H={};for(let[y,S]of Object.entries(h))H[y]=S.value;return H}async init(){try{vh(),await new Promise((h)=>setTimeout(h,50)),this.createPane(),this.positionPane(),this.addControls(),this.options.onReady(),console.log("[HypertoolControls] Initialized successfully")}catch(h){console.error("[HypertoolControls] Initialization error:",h)}}createPane(){let h=this.resolveContainer(),H={title:this.options.title,expanded:this.options.expanded};if(h)H.container=h;this.pane=new JH(H)}resolveContainer(){if(typeof document==="undefined")return null;let h=this.options.container;if(!h)return null;if(h instanceof HTMLElement)return h;let H=document.querySelector(h);if(!H)return console.warn(`[HypertoolControls] Container selector "${h}" did not match any elements`),null;return H}positionPane(){if(!this.pane||this.options.container)return;let h=this.pane.element;h.style.position="fixed",h.style.zIndex="10000",{"top-right":()=>{h.style.top="20px",h.style.right="20px"},"top-left":()=>{h.style.top="20px",h.style.left="20px"},"bottom-right":()=>{h.style.bottom="20px",h.style.right="20px"},"bottom-left":()=>{h.style.bottom="20px",h.style.left="20px"}}[this.options.position]()}addControls(){if(!this.pane)return;for(let[h,H]of Object.entries(this.definitions))try{this.addControl(h,H)}catch(y){console.error(`[HypertoolControls] Error adding control "${h}":`,y)}}addControl(h,H){if(!this.pane)return;let y={label:H.label||h};switch(H.type){case"number":if(H.min!==void 0)y.min=H.min;if(H.max!==void 0)y.max=H.max;if(H.step!==void 0)y.step=H.step;break;case"select":y.options=H.options;break;case"color":case"boolean":case"string":break;default:console.warn(`[HypertoolControls] Unknown control type: ${H.type}`);return}this.pane.addBinding(this.params,h,y).on("change",(D)=>{let O=h;this.params[O]=D.value;let W={key:O,value:D.value,event:D};this.options.onChange(this.values,W)})}addFolder(h){if(!this.pane)return null;return this.pane.addFolder({title:h})}set(h,H){if(h in this.params){if(this.params[h]=H,this.pane)this.pane.refresh()}}get values(){return{...this.params}}destroy(){if(this.pane)this.pane.dispose(),this.pane=null;let h=document.getElementById("hypertool-theme");if(h)h.remove()}setVisible(h){if(!this.pane)return;this.pane.element.style.display=h?"block":"none"}refresh(){if(this.pane)this.pane.refresh()}}function QH(h,H){return new wh(h,H).params}function XH(h,H){return new wh(h,H)}var QD={};IH(QD,{syncParentStyles:()=>sh,startThreeSketchWithRuntime:()=>I5,startThreeSketch:()=>RH,startP5SketchWithRuntime:()=>F5,startP5Sketch:()=>YH,startHyperFrame:()=>ZH,runThreeSketch:()=>L5,runP5Sketch:()=>G5,mountThreeSketch:()=>kh,mountP5Sketch:()=>Th,hyperFrameRuntime:()=>JD,createThreeRenderer:()=>M5,createP5Renderer:()=>K5,createHyperFrameRuntime:()=>U5,ParentStyleMirror:()=>mh,HyperFrameRuntime:()=>ih});function Mh(h={}){if(typeof document==="undefined")throw new Error("[hyper-frame] document is not available");let H=h.className&&h.className.trim().length>0?h.className:"hyperframe-root",y=h.target;if(y instanceof HTMLElement)return y.classList.add(H),{element:y,createdInternally:!1};if(typeof y==="string"&&y.trim().length>0){let D=document.querySelector(y);if(D)return D.classList.add(H),{element:D,createdInternally:!1};console.warn(`[hyper-frame] Could not find container for selector "${y}", creating one instead.`)}let S=document.createElement("div");return S.classList.add(H),document.body.appendChild(S),{element:S,createdInternally:!0}}class mh{targetDocument;observer=null;mappings=new Map;reverseMappings=new Map;anchor;running=!1;sourceDocument=null;sourceIdCounter=0;constructor(h){this.targetDocument=h;this.anchor=h.createComment("hyperframe-style-anchor"),h.head.appendChild(this.anchor)}start(h={}){if(this.running)return;let H=h.sourceDocument??this.tryResolveParentDocument();if(!H){console.warn("[hyper-frame] Unable to access parent document styles.");return}this.sourceDocument=H,this.running=!0,this.copyInitialNodes(H),this.observeSource(H)}stop(){if(this.running=!1,this.observer)this.observer.disconnect(),this.observer=null;this.mappings.clear(),this.reverseMappings.clear(),this.sourceDocument=null}tryResolveParentDocument(){if(typeof window==="undefined")return null;try{if(!window.parent||window.parent===window)return null;return window.parent.document}catch(h){return console.warn("[hyper-frame] Accessing parent document styles is not permitted:",h),null}}copyInitialNodes(h){h.querySelectorAll('link[rel="stylesheet"], style').forEach((y)=>{if(y instanceof HTMLLinkElement||y instanceof HTMLStyleElement)this.ensureMirror(y)})}observeSource(h){if(typeof MutationObserver==="undefined")return;this.observer=new MutationObserver((H)=>{H.forEach((y)=>{if(y.type==="childList")y.addedNodes.forEach((S)=>{if(S instanceof HTMLLinkElement||S instanceof HTMLStyleElement)this.ensureMirror(S)}),y.removedNodes.forEach((S)=>{if(S instanceof HTMLLinkElement||S instanceof HTMLStyleElement)this.removeMirror(S)});if(y.type==="attributes"){let S=y.target;if(S instanceof HTMLLinkElement||S instanceof HTMLStyleElement)this.updateMirror(S)}if(y.type==="characterData"){let S=y.target.parentElement;if(S instanceof HTMLStyleElement)this.updateMirror(S)}})}),this.observer.observe(h.documentElement,{attributes:!0,attributeFilter:["href","media","disabled","integrity","crossorigin","referrerpolicy"],characterData:!0,childList:!0,subtree:!0})}ensureMirror(h){if(this.mappings.get(h)){this.updateMirror(h);return}let y=this.targetDocument.createElement(h.tagName.toLowerCase());y.setAttribute("data-hyperframe-clone","true");let S=this.createSourceId();if(y.setAttribute("data-hyperframe-source",S),this.applyAttributes(h,y),y instanceof HTMLStyleElement&&h instanceof HTMLStyleElement)y.textContent=h.textContent;this.targetDocument.head.insertBefore(y,this.anchor),this.mappings.set(h,{clone:y,sourceId:S}),this.reverseMappings.set(S,y)}removeMirror(h){let H=this.mappings.get(h);if(!H)return;H.clone.remove(),this.mappings.delete(h),this.reverseMappings.delete(H.sourceId)}updateMirror(h){let H=this.mappings.get(h);if(!H){this.ensureMirror(h);return}let{clone:y}=H;if(this.applyAttributes(h,y),y instanceof HTMLStyleElement&&h instanceof HTMLStyleElement){if(y.textContent!==h.textContent)y.textContent=h.textContent}}applyAttributes(h,H){let y=new Set;for(let S=0;S<H.attributes.length;S+=1)y.add(H.attributes[S].name);Array.from(h.attributes).forEach((S)=>{H.setAttribute(S.name,S.value),y.delete(S.name)}),y.forEach((S)=>{if(S.startsWith("data-hyperframe"))return;H.removeAttribute(S)})}createSourceId(){return this.sourceIdCounter+=1,`hf-style-${this.sourceIdCounter}`}}function sh(h,H={}){let y=new mh(h);return y.start(H),y}function wD(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let h=window;if(!h.hypertoolControls)throw new Error("[hyper-frame] hypertool controls are not available on window");return h.hypertoolControls}function ZW(h){if(typeof requestAnimationFrame==="function")requestAnimationFrame(h);else setTimeout(h,16)}function YW(h,H,y){return new Promise((S,D)=>{let O=0;function W(){O+=1;try{if(h()){S();return}}catch(w){}if(O>=H){D(new Error(`[hyper-frame] Timed out waiting for ${y}`));return}ZW(W)}W()})}async function RW(h){await YW(()=>{try{return wD(),!0}catch(H){return!1}},h,"hypertool controls")}async function UW(h,H,y){await RW(y);let S=wD(),D=h.options||{},O=S.createControlPanel(h.definitions,{title:D.title,position:D.position,expanded:D.expanded,container:D.container,onChange:(W,w)=>{if(H.current){if(H.current.params=W,typeof D.onChange==="function"){let q={key:w.key,value:w.value,event:w.event};try{D.onChange(q,H.current)}catch(J){console.error("[hyper-frame] Error in control change handler:",J)}}}}});return{params:O.params,controls:O,destroy:()=>{if(typeof O.destroy==="function")O.destroy()}}}class ih{renderers=new Map;listeners=new Map;options;styleMirror=null;activeSession=null;readyAttempts=600;constructor(h={}){if(this.options=h,typeof window!=="undefined")window.addEventListener("message",(H)=>{this.handleIncomingMessage(H.data)})}registerRenderer(h){this.renderers.set(h.id,h)}unregisterRenderer(h){this.renderers.delete(h)}listRenderers(){return Array.from(this.renderers.keys())}syncParentStyles(h=!1){if(typeof document==="undefined")return;if(this.styleMirror&&!h)return;this.styleMirror=sh(document)}onMessage(h,H){if(!this.listeners.has(h))this.listeners.set(h,new Set);return this.listeners.get(h).add(H),()=>{this.listeners.get(h)?.delete(H)}}sendMessage(h,H){if(this.emitLocal(h,H),typeof window!=="undefined"&&window.parent&&window.parent!==window)try{window.parent.postMessage({source:"hyperframe-runtime",type:h,payload:H},"*")}catch(y){console.warn("[hyper-frame] Failed to post message to parent window:",y)}}async start(h){if(typeof window==="undefined"||typeof document==="undefined")throw new Error("[hyper-frame] HyperFrameRuntime can only run in a browser environment");if(this.options.autoSyncParentStyles!==!1||h.syncParentStyles)this.syncParentStyles();let H=h.renderer,y=H?this.renderers.get(H):null;if(H&&!y)throw new Error(`[hyper-frame] Renderer "${H}" is not registered`);let S={target:h.target,className:h.containerClassName||this.options.defaultContainerClassName},D=Mh(S),O={current:null},W=h.controls?await UW(h.controls,O,this.readyAttempts):null,w=W?W.params:{},q=W?W.controls:null,J={window,document},z={params:w,controls:q,container:D.element,environment:J,metadata:h.metadata,rendererOptions:h.rendererOptions||{},sendMessage:(K,k)=>this.sendMessage(K,k),onMessage:(K,k)=>this.onMessage(K,k)};if(O.current=z,y&&typeof y.prepare==="function")await y.prepare(h.rendererOptions);let Q=null;if(y)Q=await y.mount({...z,options:h.rendererOptions||{}})||null;if(this.activeSession){if(this.activeSession.rendererSession?.destroy?.(),this.activeSession.controlRuntime?.destroy(),this.activeSession.createdInternally)this.activeSession.container.remove()}let U={container:D.element,createdInternally:D.createdInternally,controlRuntime:W,rendererSession:Q,context:z};return this.activeSession=U,this.sendMessage("ready",{params:w,metadata:h.metadata||null,renderer:H||null}),{params:w,controls:q,container:D.element,metadata:h.metadata,destroy:()=>this.destroyActiveSession(U),update:Q?.update?.bind(Q),getInstance:Q?.getInstance?.bind(Q)}}destroyActiveSession(h){if(h.rendererSession?.destroy?.(),h.controlRuntime?.destroy(),h.createdInternally)h.container.remove();if(this.activeSession===h)this.activeSession=null}emitLocal(h,H){let y=this.listeners.get(h);if(!y)return;y.forEach((S)=>{try{S(H)}catch(D){console.error("[hyper-frame] Error in message handler:",D)}})}handleIncomingMessage(h){if(!h||typeof h!=="object")return;let H=h;if(H.source&&H.source!=="hypertool-studio"&&H.source!=="hyperframe-host")return;if(!H.type)return;this.emitLocal(H.type,H.payload)}}function U5(h={}){return new ih(h)}function GW(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let h=window.p5;if(typeof h!=="function")throw new Error("[hyper-frame] p5 constructor not found on window. Ensure p5 is loaded before hyper-frame.");return h}function Th(h,H){if(typeof document==="undefined")throw new Error("mountP5Sketch cannot run outside a browser environment");let y=H||{},S={...h},D=Mh({target:y.target,className:y.className||y.containerClassName}),O=D.element,W=D.createdInternally,w=null;function q(K){if(w=K,qD(K,S),y.onReady)y.onReady({p5:K,container:O})}let z=new(GW())(q,O);if(!w)w=z;function Q(K){if(!w)return;qD(w,K)}function U(){if(w)w.remove(),w=null;if(W)O.remove()}return{container:O,getInstance:()=>w,setHandlers:Q,destroy:U}}function qD(h,H){Object.keys(H).forEach((y)=>{let S=H[y];if(typeof S==="function")h[y]=function D(...O){return S(h,...O)}})}function FW(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let h=window;if(!h.hypertoolControls)throw new Error("[hyper-frame] hypertool controls are not available on window");return h.hypertoolControls}function gh(h,H,y){let S={};return Object.entries(h).forEach(([D,O])=>{if(typeof O==="function")S[D]=function W(w,...q){return y(w),O(w,H,...q)}}),S}function G5(h){let H=h.controls||{},y,S,D=!1;if(h.preconfiguredControls)y=h.preconfiguredControls.params,S=h.preconfiguredControls.controls;else S=FW().createControlPanel(h.controlDefinitions,{title:H.title,position:H.position,expanded:H.expanded,container:H.container,onChange:(Q,U)=>{if(typeof H.onChange==="function"){let K={key:U.key,value:U.value,event:U.event};H.onChange(K,O)}}}),y=S.params,D=!0;let O={params:y,controls:S,getP5Instance:()=>W},W=null;function w(z){W=z}let q=Th(gh(h.handlers,O,w),h.mount);function J(z){q.setHandlers(gh(z,O,w))}return{params:y,controls:S,context:O,destroy(){if(q.destroy(),D&&typeof S.destroy==="function")S.destroy()},setHandlers:J,getInstance(){return q.getInstance()}}}function KW(h){if(typeof requestAnimationFrame==="function")requestAnimationFrame(h);else setTimeout(h,16)}function LW(h,H,y){return new Promise((S,D)=>{let O=0;function W(){O+=1;try{if(h()){S();return}}catch(w){}if(O>=H){D(new Error(`[hyper-frame] Timed out waiting for ${y}`));return}KW(W)}W()})}var IW="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js",MW='script[data-hypertool="p5"]';function TW(h,H){if(typeof window==="undefined")return Promise.reject(new Error("[hyper-frame] window is not available"));if(typeof window.p5==="function")return Promise.resolve();return new Promise((y,S)=>{let D=!1;function O(){if(D)return;D=!0,y()}function W(z){if(D)return;D=!0,S(z)}LW(()=>typeof window.p5==="function",H,"p5 constructor").then(O).catch(W);function w(){W(new Error(`[hyper-frame] Failed to load p5 script from ${h}`))}let q=document.querySelector(MW);if(q){q.addEventListener("error",w,{once:!0});return}let J=document.createElement("script");J.src=h,J.async=!0,J.dataset.hypertool="p5",J.addEventListener("error",w,{once:!0}),document.head.appendChild(J)})}async function F5(h,H){let y=typeof H.readiness?.maxAttempts==="number"?H.readiness.maxAttempts:600,S=typeof H.p5?.maxAttempts==="number"?H.p5.maxAttempts:y,D=typeof H.p5?.url==="string"&&H.p5.url.trim().length>0?H.p5.url:IW;await TW(D,S);let O={current:null},W=H.controlDefinitions,w=H.controls,q=await h.start({renderer:"p5",rendererOptions:{...H,instanceRef:O},controls:W?{definitions:W,options:w?{...w,onChange:w.onChange?(J,z)=>{if(!w.onChange)return;let Q={params:z.params,controls:z.controls,getP5Instance:()=>O.current};w.onChange(J,Q)}:void 0}:void 0}:null,target:H.mount?.target??null,containerClassName:H.mount?.className||H.mount?.containerClassName,metadata:H.metadata});return{params:q.params,controls:q.controls,context:{params:q.params,controls:q.controls,getP5Instance:()=>q.getInstance?q.getInstance():O.current},destroy:()=>q.destroy(),setHandlers:(J)=>{if(q.update)q.update({type:"handlers",handlers:J})},getInstance:()=>q.getInstance?q.getInstance():O.current}}function K5(){return{id:"p5",async mount(h){let H=h.options,y=H.instanceRef||{current:null},S=null,D={params:h.params,controls:h.controls,getP5Instance:()=>S},O=gh(H.handlers||{},D,(w)=>{S=w,y.current=w}),W=Th(O,{...H.mount||{},target:h.container,className:H.mount?.className||H.mount?.containerClassName||h.container.className,containerClassName:H.mount?.containerClassName,onReady:(w)=>{if(S=w.p5,y.current=w.p5,H.mount?.onReady)H.mount.onReady(w)}});return{destroy:()=>{W.destroy()},update:(w)=>{if(w&&typeof w==="object"&&w.type==="handlers"){let q=w;if(q.handlers)W.setHandlers(gh(q.handlers,D,(J)=>{S=J,y.current=J}))}},getInstance:()=>W.getInstance(),setHandlers:(w)=>{W.setHandlers(gh(w,D,(q)=>{S=q,y.current=q}))}}}}}function zD(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let h=window.THREE;if(typeof h!=="object")throw new Error("[hyper-frame] THREE not found on window. Make sure to import and expose Three.js on window in your sketch.");return h}function kh(h,H){if(typeof document==="undefined")throw new Error("mountThreeSketch cannot run outside a browser environment");let y=H||{},S=zD(),D=Mh({target:y.target,className:y.className||y.containerClassName||"hyperframe-three-sketch"}),O=D.element,W=D.createdInternally,w=new S.Scene,q=y.camera||{},J=q.type||"perspective",z;if(J==="perspective")z=new S.PerspectiveCamera(q.fov||75,window.innerWidth/window.innerHeight,q.near||0.1,q.far||1000);else{let _=window.innerWidth/window.innerHeight;z=new S.OrthographicCamera(-_,_,1,-1,q.near||0.1,q.far||1000)}if(q.position)z.position.set(...q.position);else z.position.z=5;let Q=y.renderer||{},U=new S.WebGLRenderer({antialias:Q.antialias!==!1,alpha:Q.alpha||!1,preserveDrawingBuffer:Q.preserveDrawingBuffer||!1});U.setSize(O.clientWidth||window.innerWidth,O.clientHeight||window.innerHeight),U.setPixelRatio(window.devicePixelRatio),O.appendChild(U.domElement);let K=null;if(y.orbitControls){let _=window.OrbitControls||S.OrbitControls;if(_)K=new _(z,U.domElement);else console.warn("[hyper-frame] OrbitControls not found. Make sure to import and expose it on window.")}let k={scene:w,camera:z,renderer:U,controls:K},ph=null,ch=!1,b={...h},T5={params:{},controls:null,getThreeContext:()=>k};function UH(){let _=O.clientWidth||window.innerWidth,k5=O.clientHeight||window.innerHeight;if(z instanceof S.PerspectiveCamera)z.aspect=_/k5,z.updateProjectionMatrix();else if(z instanceof S.OrthographicCamera){let LH=_/k5;z.left=-LH,z.right=LH,z.updateProjectionMatrix()}if(U.setSize(_,k5),b.resize)b.resize(k,T5)}function GH(){if(!ch)return;if(ph=requestAnimationFrame(GH),b.animate)b.animate(k,T5);U.render(w,z)}function FH(){if(ch)return;ch=!0,GH()}function KH(){if(ch=!1,ph!==null)cancelAnimationFrame(ph),ph=null}if(window.addEventListener("resize",UH),b.setup)b.setup(k,T5);if(FH(),y.onReady)y.onReady(k);return{container:O,getContext:()=>k,destroy(){if(KH(),window.removeEventListener("resize",UH),b.dispose)b.dispose();if(K)K.dispose();if(U.dispose(),O.removeChild(U.domElement),W)O.remove()},startAnimation:FH,stopAnimation:KH,setHandlers(_){b={..._}}}}function kW(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let h=window;if(!h.hypertoolControls)throw new Error("[hyper-frame] hypertool controls are not available on window");return h.hypertoolControls}function L5(h){let H=h.controls||{},y={},S,D=!1;if(h.preconfiguredControls)y=h.preconfiguredControls.params,S=h.preconfiguredControls.controls;else S=kW().createControlPanel(h.controlDefinitions,{title:H.title,position:H.position,expanded:H.expanded,container:H.container,onChange:(J,z)=>{if(W.params=J,typeof H.onChange==="function"){let Q={key:z.key,value:z.value,event:z.event};H.onChange(Q,W)}}}),y=S.params,D=!0;let O=null,W={params:y,controls:S,getThreeContext:()=>O?O.getContext():null},w={setup:h.handlers.setup?(q,J)=>h.handlers.setup(q,W):void 0,animate:h.handlers.animate?(q,J)=>h.handlers.animate(q,W):void 0,resize:h.handlers.resize?(q,J)=>h.handlers.resize(q,W):void 0,dispose:h.handlers.dispose};return O=kh(w,h.mount),{params:y,controls:S,context:W,threeContext:O.getContext(),destroy(){if(O?.destroy(),D&&typeof S.destroy==="function")S.destroy()},getInstance(){return O?O.getContext():null}}}function PW(h){if(typeof requestAnimationFrame==="function")requestAnimationFrame(h);else setTimeout(h,16)}function $W(h,H,y){return new Promise((S,D)=>{let O=0;function W(){O+=1;try{if(h()){S();return}}catch(w){}if(O>=H){D(new Error(`[hyper-frame] Timed out waiting for ${y}`));return}PW(W)}W()})}function AW(h){return $W(()=>{try{return zD(),!0}catch(H){return!1}},h,"THREE constructor")}async function I5(h,H){let y=typeof H.readiness?.maxAttempts==="number"?H.readiness.maxAttempts:600;await AW(y);let S={current:null},D=await h.start({renderer:"three",rendererOptions:{...H,threeContextRef:S},controls:H.controlDefinitions?{definitions:H.controlDefinitions,options:H.controls?{...H.controls,onChange:H.controls.onChange?(O,W)=>{if(!H.controls?.onChange)return;let w={params:W.params,controls:W.controls,getThreeContext:()=>S.current};H.controls.onChange(O,w)}:void 0}:void 0}:null,target:H.mount?.target??null,containerClassName:H.mount?.className||H.mount?.containerClassName,metadata:H.metadata});return{params:D.params,controls:D.controls,context:{params:D.params,controls:D.controls,getThreeContext:()=>D.getInstance?D.getInstance():S.current},threeContext:D.getInstance?D.getInstance():S.current,destroy:()=>D.destroy(),getInstance:()=>D.getInstance?D.getInstance():S.current}}function M5(){return{id:"three",async mount(h){let H=h.options,y=H.threeContextRef||{current:null},S=null,D={params:h.params,controls:h.controls,getThreeContext:()=>S?S.getContext():null},O={setup:H.handlers.setup?(W,w)=>H.handlers.setup(W,D):void 0,animate:H.handlers.animate?(W,w)=>H.handlers.animate(W,D):void 0,resize:H.handlers.resize?(W,w)=>H.handlers.resize(W,D):void 0,dispose:H.handlers.dispose};return S=kh(O,{...H.mount||{},target:h.container,className:H.mount?.className||H.mount?.containerClassName||h.container.className,containerClassName:H.mount?.containerClassName,onReady:(W)=>{if(y.current=W,H.mount?.onReady)H.mount.onReady(W)}}),y.current=S.getContext(),{destroy:()=>{S?.destroy()},update:(W)=>{if(W&&typeof W==="object"&&W.type==="handlers"){let q=W.handlers;if(q){let J={setup:q.setup?(z,Q)=>q.setup(z,D):H.handlers.setup?(z,Q)=>H.handlers.setup(z,D):void 0,animate:q.animate?(z,Q)=>q.animate(z,D):H.handlers.animate?(z,Q)=>H.handlers.animate(z,D):void 0,resize:q.resize?(z,Q)=>q.resize(z,D):H.handlers.resize?(z,Q)=>H.handlers.resize(z,D):void 0,dispose:q.dispose||H.handlers.dispose};S?.setHandlers(J)}}},getInstance:()=>S?S.getContext():null}}}}var hh=U5();hh.registerRenderer(K5());hh.registerRenderer(M5());var JD=hh;function ZH(h){return hh.start(h)}async function YH(h){return F5(hh,h)}async function RH(h){return I5(hh,h)}if(typeof window!=="undefined"){let h=window,H=h.hyperFrame||{};h.hyperFrame={...H,start:ZH,registerRenderer:(y)=>{hh.registerRenderer(y)},syncParentStyles:()=>hh.syncParentStyles(!0),p5:{...H.p5||{},mount:Th,run:G5,start:(y)=>YH(y)},three:{...H.three||{},mount:kh,run:L5,start:(y)=>RH(y)}}}export{sh as syncParentStyles,th as studioTheme,I5 as startThreeSketchWithRuntime,RH as startThreeSketch,F5 as startP5SketchWithRuntime,YH as startP5Sketch,ZH as startHyperFrame,L5 as runThreeSketch,G5 as runP5Sketch,kh as mountThreeSketch,Th as mountP5Sketch,vh as injectThemeVariables,JD as hyperFrameRuntime,QD as frame,M5 as createThreeRenderer,K5 as createP5Renderer,U5 as createHyperFrameRuntime,QH as createControls,XH as createControlPanel,WD as controls,mh as ParentStyleMirror,wh as HypertoolControls,ih as HyperFrameRuntime};

//# debugId=07104C68461CFD2B64756E2164756E21
