var wW=Object.defineProperty;var ID=(H,D)=>{for(var W in D)wW(H,W,{get:D[W],enumerable:!0,configurable:!0,set:(q)=>D[W]=()=>q})};var XW={};ID(XW,{studioTheme:()=>u5,injectThemeVariables:()=>v5,createControls:()=>oH,createControlPanel:()=>aH,HypertoolControls:()=>X5});/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function P(H){return H}function F(H){return H===null||H===void 0}function TH(H){return H!==null&&typeof H==="object"}function SH(H){return H!==null&&typeof H==="object"}function hW(H,D){if(H.length!==D.length)return!1;for(let W=0;W<H.length;W++)if(H[W]!==D[W])return!1;return!0}function J5(H,D){return Array.from(new Set([...Object.keys(H),...Object.keys(D)])).reduce((q,J)=>{let Q=H[J],X=D[J];return SH(Q)&&SH(X)?Object.assign(Object.assign({},q),{[J]:J5(Q,X)}):Object.assign(Object.assign({},q),{[J]:J in D?X:Q})},{})}function PH(H){if(!TH(H))return!1;return"target"in H}var FW={alreadydisposed:()=>"View has been already disposed",invalidparams:(H)=>`Invalid parameters for '${H.name}'`,nomatchingcontroller:(H)=>`No matching controller for '${H.key}'`,nomatchingview:(H)=>`No matching view for '${JSON.stringify(H.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:(H)=>`Not compatible with  plugin '${H.id}'`,propertynotfound:(H)=>`Property '${H.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class S{static alreadyDisposed(){return new S({type:"alreadydisposed"})}static notBindable(){return new S({type:"notbindable"})}static notCompatible(H,D){return new S({type:"notcompatible",context:{id:`${H}.${D}`}})}static propertyNotFound(H){return new S({type:"propertynotfound",context:{name:H}})}static shouldNeverHappen(){return new S({type:"shouldneverhappen"})}constructor(H){var D;this.message=(D=FW[H.type](P(H.context)))!==null&&D!==void 0?D:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=H.type}toString(){return this.message}}class s5{constructor(H,D){this.obj_=H,this.key=D}static isBindable(H){if(H===null)return!1;if(typeof H!=="object"&&typeof H!=="function")return!1;return!0}read(){return this.obj_[this.key]}write(H){this.obj_[this.key]=H}writeProperty(H,D){let W=this.read();if(!s5.isBindable(W))throw S.notBindable();if(!(H in W))throw S.propertyNotFound(H);W[H]=D}}class A{constructor(){this.observers_={}}on(H,D,W){var q;let J=this.observers_[H];if(!J)J=this.observers_[H]=[];return J.push({handler:D,key:(q=W===null||W===void 0?void 0:W.key)!==null&&q!==void 0?q:D}),this}off(H,D){let W=this.observers_[H];if(W)this.observers_[H]=W.filter((q)=>{return q.key!==D});return this}emit(H,D){let W=this.observers_[H];if(!W)return;W.forEach((q)=>{q.handler(D)})}}class iD{constructor(H,D){var W;this.constraint_=D===null||D===void 0?void 0:D.constraint,this.equals_=(W=D===null||D===void 0?void 0:D.equals)!==null&&W!==void 0?W:(q,J)=>q===J,this.emitter=new A,this.rawValue_=H}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(H){this.setRawValue(H,{forceEmit:!1,last:!0})}setRawValue(H,D){let W=D!==null&&D!==void 0?D:{forceEmit:!1,last:!0},q=this.constraint_?this.constraint_.constrain(H):H,J=this.rawValue_;if(!!this.equals_(J,q)&&!W.forceEmit)return;this.emitter.emit("beforechange",{sender:this}),this.rawValue_=q,this.emitter.emit("change",{options:W,previousRawValue:J,rawValue:q,sender:this})}}class cD{constructor(H){this.emitter=new A,this.value_=H}get rawValue(){return this.value_}set rawValue(H){this.setRawValue(H,{forceEmit:!1,last:!0})}setRawValue(H,D){let W=D!==null&&D!==void 0?D:{forceEmit:!1,last:!0},q=this.value_;if(q===H&&!W.forceEmit)return;this.emitter.emit("beforechange",{sender:this}),this.value_=H,this.emitter.emit("change",{options:W,previousRawValue:q,rawValue:this.value_,sender:this})}}class tD{constructor(H){this.emitter=new A,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=H,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(H){this.emitter.emit("beforechange",Object.assign(Object.assign({},H),{sender:this}))}onValueChange_(H){this.emitter.emit("change",Object.assign(Object.assign({},H),{sender:this}))}}function L(H,D){let W=D===null||D===void 0?void 0:D.constraint,q=D===null||D===void 0?void 0:D.equals;if(!W&&!q)return new cD(H);return new iD(H,D)}function LW(H){return[new tD(H),(D,W)=>{H.setRawValue(D,W)}]}class G{constructor(H){this.emitter=new A,this.valMap_=H;for(let D in this.valMap_)this.valMap_[D].emitter.on("change",()=>{this.emitter.emit("change",{key:D,sender:this})})}static createCore(H){return Object.keys(H).reduce((W,q)=>{return Object.assign(W,{[q]:L(H[q])})},{})}static fromObject(H){let D=this.createCore(H);return new G(D)}get(H){return this.valMap_[H].rawValue}set(H,D){this.valMap_[H].rawValue=D}value(H){return this.valMap_[H]}}class K5{constructor(H){this.values=G.fromObject({max:H.max,min:H.min})}constrain(H){let D=this.values.get("max"),W=this.values.get("min");return Math.min(Math.max(H,W),D)}}class lD{constructor(H){this.values=G.fromObject({max:H.max,min:H.min})}constrain(H){let D=this.values.get("max"),W=this.values.get("min"),q=H;if(!F(W))q=Math.max(q,W);if(!F(D))q=Math.min(q,D);return q}}class rD{constructor(H,D=0){this.step=H,this.origin=D}constrain(H){let D=this.origin%this.step,W=Math.round((H-D)/this.step);return D+W*this.step}}class oD{constructor(H){this.text=H}evaluate(){return Number(this.text)}toString(){return this.text}}var $W={"**":(H,D)=>Math.pow(H,D),"*":(H,D)=>H*D,"/":(H,D)=>H/D,"%":(H,D)=>H%D,"+":(H,D)=>H+D,"-":(H,D)=>H-D,"<<":(H,D)=>H<<D,">>":(H,D)=>H>>D,">>>":(H,D)=>H>>>D,"&":(H,D)=>H&D,"^":(H,D)=>H^D,"|":(H,D)=>H|D};class aD{constructor(H,D,W){this.left=D,this.operator=H,this.right=W}evaluate(){let H=$W[this.operator];if(!H)throw new Error(`unexpected binary operator: '${this.operator}`);return H(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}var SW={"+":(H)=>H,"-":(H)=>-H,"~":(H)=>~H};class eD{constructor(H,D){this.operator=H,this.expression=D}evaluate(){let H=SW[this.operator];if(!H)throw new Error(`unexpected unary operator: '${this.operator}`);return H(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function BH(H){return(D,W)=>{for(let q=0;q<H.length;q++){let J=H[q](D,W);if(J!=="")return J}return""}}function y5(H,D){var W;let q=H.substr(D).match(/^\s+/);return(W=q&&q[0])!==null&&W!==void 0?W:""}function AW(H,D){let W=H.substr(D,1);return W.match(/^[1-9]$/)?W:""}function T5(H,D){var W;let q=H.substr(D).match(/^[0-9]+/);return(W=q&&q[0])!==null&&W!==void 0?W:""}function IW(H,D){let W=T5(H,D);if(W!=="")return W;let q=H.substr(D,1);if(D+=1,q!=="-"&&q!=="+")return"";let J=T5(H,D);if(J==="")return"";return q+J}function NH(H,D){let W=H.substr(D,1);if(D+=1,W.toLowerCase()!=="e")return"";let q=IW(H,D);if(q==="")return"";return W+q}function H0(H,D){let W=H.substr(D,1);if(W==="0")return W;let q=AW(H,D);if(D+=q.length,q==="")return"";return q+T5(H,D)}function MW(H,D){let W=H0(H,D);if(D+=W.length,W==="")return"";let q=H.substr(D,1);if(D+=q.length,q!==".")return"";let J=T5(H,D);return D+=J.length,W+q+J+NH(H,D)}function jW(H,D){let W=H.substr(D,1);if(D+=W.length,W!==".")return"";let q=T5(H,D);if(D+=q.length,q==="")return"";return W+q+NH(H,D)}function kW(H,D){let W=H0(H,D);if(D+=W.length,W==="")return"";return W+NH(H,D)}var RW=BH([MW,jW,kW]);function yW(H,D){var W;let q=H.substr(D).match(/^[01]+/);return(W=q&&q[0])!==null&&W!==void 0?W:""}function TW(H,D){let W=H.substr(D,2);if(D+=W.length,W.toLowerCase()!=="0b")return"";let q=yW(H,D);if(q==="")return"";return W+q}function PW(H,D){var W;let q=H.substr(D).match(/^[0-7]+/);return(W=q&&q[0])!==null&&W!==void 0?W:""}function BW(H,D){let W=H.substr(D,2);if(D+=W.length,W.toLowerCase()!=="0o")return"";let q=PW(H,D);if(q==="")return"";return W+q}function NW(H,D){var W;let q=H.substr(D).match(/^[0-9a-f]+/i);return(W=q&&q[0])!==null&&W!==void 0?W:""}function VW(H,D){let W=H.substr(D,2);if(D+=W.length,W.toLowerCase()!=="0x")return"";let q=NW(H,D);if(q==="")return"";return W+q}var _W=BH([TW,BW,VW]),EW=BH([_W,RW]);function CW(H,D){let W=EW(H,D);if(D+=W.length,W==="")return null;return{evaluable:new oD(W),cursor:D}}function xW(H,D){let W=H.substr(D,1);if(D+=W.length,W!=="(")return null;let q=W0(H,D);if(!q)return null;D=q.cursor,D+=y5(H,D).length;let J=H.substr(D,1);if(D+=J.length,J!==")")return null;return{evaluable:q.evaluable,cursor:D}}function fW(H,D){var W;return(W=CW(H,D))!==null&&W!==void 0?W:xW(H,D)}function D0(H,D){let W=fW(H,D);if(W)return W;let q=H.substr(D,1);if(D+=q.length,q!=="+"&&q!=="-"&&q!=="~")return null;let J=D0(H,D);if(!J)return null;return D=J.cursor,{cursor:D,evaluable:new eD(q,J.evaluable)}}function bW(H,D,W){W+=y5(D,W).length;let q=H.filter((J)=>D.startsWith(J,W))[0];if(!q)return null;return W+=q.length,W+=y5(D,W).length,{cursor:W,operator:q}}function uW(H,D){return(W,q)=>{let J=H(W,q);if(!J)return null;q=J.cursor;let Q=J.evaluable;for(;;){let X=bW(D,W,q);if(!X)break;q=X.cursor;let Z=H(W,q);if(!Z)return null;q=Z.cursor,Q=new aD(X.operator,Q,Z.evaluable)}return Q?{cursor:q,evaluable:Q}:null}}var vW=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((H,D)=>{return uW(H,D)},D0);function W0(H,D){return D+=y5(H,D).length,vW(H,D)}function dW(H){let D=W0(H,0);if(!D)return null;if(D.cursor+y5(H,D.cursor).length!==H.length)return null;return D.evaluable}function p(H){var D;let W=dW(H);return(D=W===null||W===void 0?void 0:W.evaluate())!==null&&D!==void 0?D:null}function q0(H){if(typeof H==="number")return H;if(typeof H==="string"){let D=p(H);if(!F(D))return D}return 0}function mW(H){return String(H)}function T(H){return(D)=>{return D.toFixed(Math.max(Math.min(H,20),0))}}function h(H,D,W,q,J){let Q=(H-D)/(W-D);return q+Q*(J-q)}function MD(H){return String(H.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function I(H,D,W){return Math.min(Math.max(H,D),W)}function J0(H,D){return(H%D+D)%D}function gW(H,D){return!F(H.step)?MD(H.step):Math.max(MD(D),2)}function Q0(H){var D;return(D=H.step)!==null&&D!==void 0?D:1}function X0(H,D){var W;let q=Math.abs((W=H.step)!==null&&W!==void 0?W:D);return q===0?0.1:Math.pow(10,Math.floor(Math.log10(q))-1)}function Z0(H,D){if(!F(H.step))return new rD(H.step,D);return null}function Y0(H){if(!F(H.max)&&!F(H.min))return new K5({max:H.max,min:H.min});if(!F(H.max)||!F(H.min))return new lD({max:H.max,min:H.min});return null}function U0(H,D){var W,q,J;return{formatter:(W=H.format)!==null&&W!==void 0?W:T(gW(H,D)),keyScale:(q=H.keyScale)!==null&&q!==void 0?q:Q0(H),pointerScale:(J=H.pointerScale)!==null&&J!==void 0?J:X0(H,D)}}function z0(H){return{format:H.optional.function,keyScale:H.optional.number,max:H.optional.number,min:H.optional.number,pointerScale:H.optional.number,step:H.optional.number}}function VH(H){return{constraint:H.constraint,textProps:G.fromObject(U0(H.params,H.initialValue))}}class a{constructor(H){this.controller=H}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(H){this.controller.viewProps.set("disabled",H)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(H){this.controller.viewProps.set("hidden",H)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(H){return this.controller.importState(H)}exportState(){return this.controller.exportState()}}class V5{constructor(H){this.target=H}}class O5 extends V5{constructor(H,D,W){super(H);this.value=D,this.last=W!==null&&W!==void 0?W:!0}}class G0 extends V5{constructor(H,D){super(H);this.expanded=D}}class K0 extends V5{constructor(H,D){super(H);this.index=D}}class O0 extends V5{constructor(H,D){super(H);this.native=D}}class U5 extends a{constructor(H){super(H);this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new A,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(H){this.controller.labelController.props.set("label",H)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(H){this.controller.tag=H}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}refresh(){this.controller.value.fetch()}onValueChange_(H){let D=this.controller.value;this.emitter_.emit("change",new O5(this,P(D.binding.target.read()),H.options.last))}}class w0{constructor(H,D){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=D,this.value_=H,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new A}get rawValue(){return this.value_.rawValue}set rawValue(H){this.value_.rawValue=H}setRawValue(H,D){this.value_.setRawValue(H,D)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(H){this.emitter.emit("beforechange",Object.assign(Object.assign({},H),{sender:this}))}onValueChange_(H){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},H),{sender:this}))}}function pW(H){if(!("binding"in H))return!1;let D=H.binding;return PH(D)&&"read"in D&&"write"in D}function nW(H,D){let q=Object.keys(D).reduce((J,Q)=>{if(J===void 0)return;let X=D[Q],Z=X(H[Q]);return Z.succeeded?Object.assign(Object.assign({},J),{[Q]:Z.value}):void 0},{});return P(q)}function sW(H,D){return H.reduce((W,q)=>{if(W===void 0)return;let J=D(q);if(!J.succeeded||J.value===void 0)return;return[...W,J.value]},[])}function iW(H){if(H===null)return!1;return typeof H==="object"}function v(H){return(D)=>(W)=>{if(!D&&W===void 0)return{succeeded:!1,value:void 0};if(D&&W===void 0)return{succeeded:!0,value:void 0};let q=H(W);return q!==void 0?{succeeded:!0,value:q}:{succeeded:!1,value:void 0}}}function jD(H){return{custom:(D)=>v(D)(H),boolean:v((D)=>typeof D==="boolean"?D:void 0)(H),number:v((D)=>typeof D==="number"?D:void 0)(H),string:v((D)=>typeof D==="string"?D:void 0)(H),function:v((D)=>typeof D==="function"?D:void 0)(H),constant:(D)=>v((W)=>W===D?D:void 0)(H),raw:v((D)=>D)(H),object:(D)=>v((W)=>{if(!iW(W))return;return nW(W,D)})(H),array:(D)=>v((W)=>{if(!Array.isArray(W))return;return sW(W,D)})(H)}}var AH={optional:jD(!0),required:jD(!1)};function $(H,D){let W=D(AH),q=AH.required.object(W)(H);return q.succeeded?q.value:void 0}function B(H,D,W,q){if(D&&!D(H))return!1;let J=$(H,W);return J?q(J):!1}function N(H,D){var W;return J5((W=H===null||H===void 0?void 0:H())!==null&&W!==void 0?W:{},D)}function D5(H){return"value"in H}function h0(H){if(!TH(H)||!("binding"in H))return!1;let D=H.binding;return PH(D)}var f="http://www.w3.org/2000/svg";function i5(H){H.offsetHeight}function cW(H,D){let W=H.style.transition;H.style.transition="none",D(),H.style.transition=W}function _H(H){return H.ontouchstart!==void 0}function tW(){return globalThis}function lW(){return P(tW()).document}function rW(H){let D=H.ownerDocument.defaultView;if(!D)return null;return"document"in D?H.getContext("2d",{willReadFrequently:!0}):null}var oW={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function o5(H,D){let W=H.createElementNS(f,"svg");return W.innerHTML=oW[D],W}function F0(H,D,W){H.insertBefore(D,H.children[W])}function EH(H){if(H.parentElement)H.parentElement.removeChild(H)}function L0(H){while(H.children.length>0)H.removeChild(H.children[0])}function aW(H){while(H.childNodes.length>0)H.removeChild(H.childNodes[0])}function $0(H){if(H.relatedTarget)return P(H.relatedTarget);if("explicitOriginalTarget"in H)return H.explicitOriginalTarget;return null}function m(H,D){H.emitter.on("change",(W)=>{D(W.rawValue)}),D(H.rawValue)}function b(H,D,W){m(H.value(D),W)}var eW="tp";function O(H){return(W,q)=>{return[eW,"-",H,"v",W?`_${W}`:"",q?`-${q}`:""].join("")}}var M5=O("lbl");function Hq(H,D){let W=H.createDocumentFragment();return D.split(`
`).map((J)=>{return H.createTextNode(J)}).forEach((J,Q)=>{if(Q>0)W.appendChild(H.createElement("br"));W.appendChild(J)}),W}class CH{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(M5()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add(M5("l")),b(D.props,"label",(J)=>{if(F(J))this.element.classList.add(M5(void 0,"nol"));else this.element.classList.remove(M5(void 0,"nol")),aW(W),W.appendChild(Hq(H,J))}),this.element.appendChild(W),this.labelElement=W;let q=H.createElement("div");q.classList.add(M5("v")),this.element.appendChild(q),this.valueElement=q}}class xH{constructor(H,D){this.props=D.props,this.valueController=D.valueController,this.viewProps=D.valueController.viewProps,this.view=new CH(H,{props:D.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(H){return B(H,null,(D)=>({label:D.optional.string}),(D)=>{return this.props.set("label",D.label),!0})}exportProps(){return N(null,{label:this.props.get("label")})}}function Dq(){return["veryfirst","first","last","verylast"]}var kD=O(""),RD={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class _5{constructor(H){this.parent_=null,this.blade=H.blade,this.view=H.view,this.viewProps=H.viewProps;let D=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Dq().forEach((W)=>{D.classList.remove(kD(void 0,RD[W]))}),this.blade.get("positions").forEach((W)=>{D.classList.add(kD(void 0,RD[W]))})}),this.viewProps.handleDispose(()=>{EH(D)})}get parent(){return this.parent_}set parent(H){this.parent_=H,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(H){return B(H,null,(D)=>({disabled:D.required.boolean,hidden:D.required.boolean}),(D)=>{return this.viewProps.importState(D),!0})}exportState(){return N(null,Object.assign({},this.viewProps.exportState()))}}class o extends _5{constructor(H,D){if(D.value!==D.valueController.value)throw S.shouldNeverHappen();let W=D.valueController.viewProps,q=new xH(H,{blade:D.blade,props:D.props,valueController:D.valueController});super(Object.assign(Object.assign({},D),{view:new CH(H,{props:D.props,viewProps:W}),viewProps:W}));this.labelController=q,this.value=D.value,this.valueController=D.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(H){return B(H,(D)=>{var W,q,J;return super.importState(D)&&this.labelController.importProps(D)&&((J=(q=(W=this.valueController).importProps)===null||q===void 0?void 0:q.call(W,H))!==null&&J!==void 0?J:!0)},(D)=>({value:D.optional.raw}),(D)=>{if(D.value)this.value.rawValue=D.value;return!0})}exportState(){var H,D,W;return N(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(W=(D=(H=this.valueController).exportProps)===null||D===void 0?void 0:D.call(H))!==null&&W!==void 0?W:{}))}}function yD(H){let D=Object.assign({},H);return delete D.value,D}class fH extends o{constructor(H,D){super(H,D);this.tag=D.tag}importState(H){return B(H,(D)=>super.importState(yD(H)),(D)=>({tag:D.optional.string}),(D)=>{return this.tag=D.tag,!0})}exportState(){return N(()=>yD(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Wq(H){return D5(H)&&h0(H.value)}class S0 extends fH{importState(H){return B(H,(D)=>super.importState(D),(D)=>({binding:D.required.object({value:D.required.raw})}),(D)=>{return this.value.binding.inject(D.binding.value),this.value.fetch(),!0})}}function qq(H){return D5(H)&&pW(H.value)}function A0(H,D){while(H.length<D)H.push(void 0)}function Jq(H){let D=[];return A0(D,H),D}function Qq(H){let D=H.indexOf(void 0);return P(D<0?H:H.slice(0,D))}function Xq(H,D){let W=[...Qq(H),D];if(W.length>H.length)W.splice(0,W.length-H.length);else A0(W,H.length);return W}class I0{constructor(H){this.emitter=new A,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=H.binding,this.value_=L(Jq(H.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=H.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(H){this.value_.rawValue=H}setRawValue(H,D){this.value_.setRawValue(H,D)}fetch(){this.value_.rawValue=Xq(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(H){this.emitter.emit("beforechange",Object.assign(Object.assign({},H),{sender:this}))}onValueChange_(H){this.emitter.emit("change",Object.assign(Object.assign({},H),{sender:this}))}}function Zq(H){if(!("binding"in H))return!1;let D=H.binding;return PH(D)&&"read"in D&&!("write"in D)}class M0 extends fH{exportState(){return N(()=>super.exportState(),{binding:{readonly:!0}})}}function Yq(H){return D5(H)&&Zq(H.value)}class j0 extends a{get label(){return this.controller.labelController.props.get("label")}set label(H){this.controller.labelController.props.set("label",H)}get title(){var H;return(H=this.controller.buttonController.props.get("title"))!==null&&H!==void 0?H:""}set title(H){this.controller.buttonController.props.set("title",H)}on(H,D){let W=D.bind(this);return this.controller.buttonController.emitter.on(H,(J)=>{W(new O0(this,J.nativeEvent))}),this}off(H,D){return this.controller.buttonController.emitter.off(H,D),this}}function Uq(H,D,W){if(W)H.classList.add(D);else H.classList.remove(D)}function w5(H,D){return(W)=>{Uq(H,D,W)}}function bH(H,D){m(H,(W)=>{D.textContent=W!==null&&W!==void 0?W:""})}var GH=O("btn");class k0{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(GH()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("button");W.classList.add(GH("b")),D.viewProps.bindDisabled(W),this.element.appendChild(W),this.buttonElement=W;let q=H.createElement("div");q.classList.add(GH("t")),bH(D.props.value("title"),q),this.buttonElement.appendChild(q)}}class R0{constructor(H,D){this.emitter=new A,this.onClick_=this.onClick_.bind(this),this.props=D.props,this.viewProps=D.viewProps,this.view=new k0(H,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(H){return B(H,null,(D)=>({title:D.optional.string}),(D)=>{return this.props.set("title",D.title),!0})}exportProps(){return N(null,{title:this.props.get("title")})}onClick_(H){this.emitter.emit("click",{nativeEvent:H,sender:this})}}class IH extends _5{constructor(H,D){let W=new R0(H,{props:D.buttonProps,viewProps:D.viewProps}),q=new xH(H,{blade:D.blade,props:D.labelProps,valueController:W});super({blade:D.blade,view:q.view,viewProps:D.viewProps});this.buttonController=W,this.labelController=q}importState(H){return B(H,(D)=>super.importState(D)&&this.buttonController.importProps(D)&&this.labelController.importProps(D),()=>({}),()=>!0)}exportState(){return N(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class uH{constructor(H){let[D,W]=H.split("-"),q=D.split(".");this.major=parseInt(q[0],10),this.minor=parseInt(q[1],10),this.patch=parseInt(q[2],10),this.prerelease=W!==null&&W!==void 0?W:null}toString(){let H=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[H,this.prerelease].join("-"):H}}var h5=new uH("2.0.5");function j(H){return Object.assign({core:h5},H)}var zq=j({id:"button",type:"blade",accept(H){let D=$(H,(W)=>({title:W.required.string,view:W.required.constant("button"),label:W.optional.string}));return D?{params:D}:null},controller(H){return new IH(H.document,{blade:H.blade,buttonProps:G.fromObject({title:H.params.title}),labelProps:G.fromObject({label:H.params.label}),viewProps:H.viewProps})},api(H){if(H.controller instanceof IH)return new j0(H.controller);return null}});function Gq(H,D){return H.addBlade(Object.assign(Object.assign({},D),{view:"button"}))}function Kq(H,D){return H.addBlade(Object.assign(Object.assign({},D),{view:"folder"}))}function Oq(H,D){return H.addBlade(Object.assign(Object.assign({},D),{view:"tab"}))}function wq(H){if(!TH(H))return!1;return"refresh"in H&&typeof H.refresh==="function"}function hq(H,D){if(!s5.isBindable(H))throw S.notBindable();return new s5(H,D)}class y0{constructor(H,D){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=H,this.emitter_=new A,this.pool_=D,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map((H)=>this.pool_.createApi(H))}addBinding(H,D,W){let q=W!==null&&W!==void 0?W:{},J=this.controller_.element.ownerDocument,Q=this.pool_.createBinding(J,hq(H,D),q),X=this.pool_.createBindingApi(Q);return this.add(X,q.index)}addFolder(H){return Kq(this,H)}addButton(H){return Gq(this,H)}addTab(H){return Oq(this,H)}add(H,D){let W=H.controller;return this.controller_.rack.add(W,D),H}remove(H){this.controller_.rack.remove(H.controller)}addBlade(H){let D=this.controller_.element.ownerDocument,W=this.pool_.createBlade(D,H),q=this.pool_.createApi(W);return this.add(q,H.index)}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}refresh(){this.children.forEach((H)=>{if(wq(H))H.refresh()})}onRackValueChange_(H){let D=H.bladeController,W=this.pool_.createApi(D),q=h0(D.value)?D.value.binding:null;this.emitter_.emit("change",new O5(W,q?q.target.read():D.value.rawValue,H.options.last))}}class a5 extends a{constructor(H,D){super(H);this.rackApi_=new y0(H.rackController,D)}refresh(){this.rackApi_.refresh()}}class e5 extends _5{constructor(H){super({blade:H.blade,view:H.view,viewProps:H.rackController.viewProps});this.rackController=H.rackController}importState(H){return B(H,(D)=>super.importState(D),(D)=>({children:D.required.array(D.required.raw)}),(D)=>{return this.rackController.rack.children.every((W,q)=>{return W.importState(D.children[q])})})}exportState(){return N(()=>super.exportState(),{children:this.rackController.rack.children.map((H)=>H.exportState())})}}function MH(H){return"rackController"in H}class T0{constructor(H){this.emitter=new A,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=H}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(H){for(let D of this.allItems())if(H(D))return D;return null}includes(H){return this.cache_.has(H)}add(H,D){if(this.includes(H))throw S.shouldNeverHappen();let W=D!==void 0?D:this.items_.length;this.items_.splice(W,0,H),this.cache_.add(H);let q=this.extract_(H);if(q)q.emitter.on("add",this.onSubListAdd_),q.emitter.on("remove",this.onSubListRemove_),q.allItems().forEach((J)=>{this.cache_.add(J)});this.emitter.emit("add",{index:W,item:H,root:this,target:this})}remove(H){let D=this.items_.indexOf(H);if(D<0)return;this.items_.splice(D,1),this.cache_.delete(H);let W=this.extract_(H);if(W)W.allItems().forEach((q)=>{this.cache_.delete(q)}),W.emitter.off("add",this.onSubListAdd_),W.emitter.off("remove",this.onSubListRemove_);this.emitter.emit("remove",{index:D,item:H,root:this,target:this})}onSubListAdd_(H){this.cache_.add(H.item),this.emitter.emit("add",{index:H.index,item:H.item,root:this,target:H.target})}onSubListRemove_(H){this.cache_.delete(H.item),this.emitter.emit("remove",{index:H.index,item:H.item,root:this,target:H.target})}}function Fq(H,D){for(let W=0;W<H.length;W++){let q=H[W];if(D5(q)&&q.value===D)return q}return null}function Lq(H){return MH(H)?H.rackController.rack.bcSet_:null}class P0{constructor(H){var D,W;this.emitter=new A,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(D=H.blade)!==null&&D!==void 0?D:null,(W=this.blade_)===null||W===void 0||W.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=H.viewProps,this.bcSet_=new T0(Lq),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(H,D){var W;(W=H.parent)===null||W===void 0||W.remove(H),H.parent=this,this.bcSet_.add(H,D)}remove(H){H.parent=null,this.bcSet_.remove(H)}find(H){return this.bcSet_.allItems().filter(H)}onSetAdd_(H){this.updatePositions_();let D=H.target===H.root;if(this.emitter.emit("add",{bladeController:H.item,index:H.index,root:D,sender:this}),!D)return;let W=H.item;if(W.viewProps.emitter.on("change",this.onChildViewPropsChange_),W.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),W.viewProps.handleDispose(this.onChildDispose_),D5(W))W.value.emitter.on("change",this.onChildValueChange_);else if(MH(W)){let q=W.rackController.rack;if(q){let J=q.emitter;J.on("layout",this.onRackLayout_),J.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(H){this.updatePositions_();let D=H.target===H.root;if(this.emitter.emit("remove",{bladeController:H.item,root:D,sender:this}),!D)return;let W=H.item;if(D5(W))W.value.emitter.off("change",this.onChildValueChange_);else if(MH(W)){let q=W.rackController.rack;if(q){let J=q.emitter;J.off("layout",this.onRackLayout_),J.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){let H=this.bcSet_.items.filter((q)=>!q.viewProps.get("hidden")),D=H[0],W=H[H.length-1];this.bcSet_.items.forEach((q)=>{let J=[];if(q===D){if(J.push("first"),!this.blade_||this.blade_.get("positions").includes("veryfirst"))J.push("veryfirst")}if(q===W){if(J.push("last"),!this.blade_||this.blade_.get("positions").includes("verylast"))J.push("verylast")}q.blade.set("positions",J)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(H){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((D)=>{return D.viewProps.get("disposed")}).forEach((D)=>{this.bcSet_.remove(D)})}onChildValueChange_(H){let D=Fq(this.find(D5),H.sender);if(!D)throw S.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:D,options:H.options,sender:this})}onRackLayout_(H){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(H){this.emitter.emit("valuechange",{bladeController:H.bladeController,options:H.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class HH{constructor(H){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=H.element,this.viewProps=H.viewProps;let D=new P0({blade:H.root?void 0:H.blade,viewProps:H.viewProps});D.emitter.on("add",this.onRackAdd_),D.emitter.on("remove",this.onRackRemove_),this.rack=D,this.viewProps.handleDispose(()=>{for(let W=this.rack.children.length-1;W>=0;W--)this.rack.children[W].viewProps.set("disposed",!0)})}onRackAdd_(H){if(!H.root)return;F0(this.element,H.bladeController.view.element,H.index)}onRackRemove_(H){if(!H.root)return;EH(H.bladeController.view.element)}}function F5(){return new G({positions:L([],{equals:hW})})}class E5 extends G{constructor(H){super(H)}static create(H){let D={completed:!0,expanded:H,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},W=G.createCore(D);return new E5(W)}get styleExpanded(){var H;return(H=this.get("temporaryExpanded"))!==null&&H!==void 0?H:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";let H=this.get("expandedHeight");if(this.get("shouldFixHeight")&&!F(H))return`${H}px`;return"auto"}bindExpandedClass(H,D){let W=()=>{if(this.styleExpanded)H.classList.add(D);else H.classList.remove(D)};b(this,"expanded",W),b(this,"temporaryExpanded",W)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function $q(H,D){let W=0;return cW(D,()=>{H.set("expandedHeight",null),H.set("temporaryExpanded",!0),i5(D),W=D.clientHeight,H.set("temporaryExpanded",null),i5(D)}),W}function TD(H,D){D.style.height=H.styleHeight}function vH(H,D){H.value("expanded").emitter.on("beforechange",()=>{if(H.set("completed",!1),F(H.get("expandedHeight"))){let W=$q(H,D);if(W>0)H.set("expandedHeight",W)}H.set("shouldFixHeight",!0),i5(D)}),H.emitter.on("change",()=>{TD(H,D)}),TD(H,D),D.addEventListener("transitionend",(W)=>{if(W.propertyName!=="height")return;H.cleanUpTransition()})}class dH extends a5{constructor(H,D){super(H,D);this.emitter_=new A,this.controller.foldable.value("expanded").emitter.on("change",(W)=>{this.emitter_.emit("fold",new G0(this,W.sender.rawValue))}),this.rackApi_.on("change",(W)=>{this.emitter_.emit("change",W)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(H){this.controller.foldable.set("expanded",H)}get title(){return this.controller.props.get("title")}set title(H){this.controller.props.set("title",H)}get children(){return this.rackApi_.children}addBinding(H,D,W){return this.rackApi_.addBinding(H,D,W)}addFolder(H){return this.rackApi_.addFolder(H)}addButton(H){return this.rackApi_.addButton(H)}addTab(H){return this.rackApi_.addTab(H)}add(H,D){return this.rackApi_.add(H,D)}remove(H){this.rackApi_.remove(H)}addBlade(H){return this.rackApi_.addBlade(H)}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}}var B0=O("cnt");class N0{constructor(H,D){var W;this.className_=O((W=D.viewName)!==null&&W!==void 0?W:"fld"),this.element=H.createElement("div"),this.element.classList.add(this.className_(),B0()),D.viewProps.bindClassModifiers(this.element),this.foldable_=D.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),b(this.foldable_,"completed",w5(this.element,this.className_(void 0,"cpl")));let q=H.createElement("button");q.classList.add(this.className_("b")),b(D.props,"title",(z)=>{if(F(z))this.element.classList.add(this.className_(void 0,"not"));else this.element.classList.remove(this.className_(void 0,"not"))}),D.viewProps.bindDisabled(q),this.element.appendChild(q),this.buttonElement=q;let J=H.createElement("div");J.classList.add(this.className_("i")),this.element.appendChild(J);let Q=H.createElement("div");Q.classList.add(this.className_("t")),bH(D.props.value("title"),Q),this.buttonElement.appendChild(Q),this.titleElement=Q;let X=H.createElement("div");X.classList.add(this.className_("m")),this.buttonElement.appendChild(X);let Z=H.createElement("div");Z.classList.add(this.className_("c")),this.element.appendChild(Z),this.containerElement=Z}}class c5 extends e5{constructor(H,D){var W;let q=E5.create((W=D.expanded)!==null&&W!==void 0?W:!0),J=new N0(H,{foldable:q,props:D.props,viewName:D.root?"rot":void 0,viewProps:D.viewProps});super(Object.assign(Object.assign({},D),{rackController:new HH({blade:D.blade,element:J.containerElement,root:D.root,viewProps:D.viewProps}),view:J}));this.onTitleClick_=this.onTitleClick_.bind(this),this.props=D.props,this.foldable=q,vH(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(H){return B(H,(D)=>super.importState(D),(D)=>({expanded:D.required.boolean,title:D.optional.string}),(D)=>{return this.foldable.set("expanded",D.expanded),this.props.set("title",D.title),!0})}exportState(){return N(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}var Sq=j({id:"folder",type:"blade",accept(H){let D=$(H,(W)=>({title:W.required.string,view:W.required.constant("folder"),expanded:W.optional.boolean}));return D?{params:D}:null},controller(H){return new c5(H.document,{blade:H.blade,expanded:H.params.expanded,props:G.fromObject({title:H.params.title}),viewProps:H.viewProps})},api(H){if(!(H.controller instanceof c5))return null;return new dH(H.controller,H.pool)}}),Aq=O("");function PD(H,D){return w5(H,Aq(void 0,D))}class i extends G{constructor(H){var D;super(H);this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=LW(L(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(D=this.get("parent"))===null||D===void 0||D.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(H){var D,W,q;let J=H!==null&&H!==void 0?H:{};return new i(G.createCore({disabled:(D=J.disabled)!==null&&D!==void 0?D:!1,disposed:!1,hidden:(W=J.hidden)!==null&&W!==void 0?W:!1,parent:(q=J.parent)!==null&&q!==void 0?q:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(H){m(this.globalDisabled_,PD(H,"disabled")),b(this,"hidden",PD(H,"hidden"))}bindDisabled(H){m(this.globalDisabled_,(D)=>{H.disabled=D})}bindTabIndex(H){m(this.globalDisabled_,(D)=>{H.tabIndex=D?-1:0})}handleDispose(H){this.value("disposed").emitter.on("change",(D)=>{if(D)H()})}importState(H){this.set("disabled",H.disabled),this.set("hidden",H.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){let H=this.get("parent");return(H?H.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(H){var D;let W=H.previousRawValue;W===null||W===void 0||W.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(D=this.get("parent"))===null||D===void 0||D.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}var BD=O("tbp");class V0{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(BD()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add(BD("c")),this.element.appendChild(W),this.containerElement=W}}var j5=O("tbi");class _0{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(j5()),D.viewProps.bindClassModifiers(this.element),b(D.props,"selected",(J)=>{if(J)this.element.classList.add(j5(void 0,"sel"));else this.element.classList.remove(j5(void 0,"sel"))});let W=H.createElement("button");W.classList.add(j5("b")),D.viewProps.bindDisabled(W),this.element.appendChild(W),this.buttonElement=W;let q=H.createElement("div");q.classList.add(j5("t")),bH(D.props.value("title"),q),this.buttonElement.appendChild(q),this.titleElement=q}}class E0{constructor(H,D){this.emitter=new A,this.onClick_=this.onClick_.bind(this),this.props=D.props,this.viewProps=D.viewProps,this.view=new _0(H,{props:D.props,viewProps:D.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class t5 extends e5{constructor(H,D){let W=new V0(H,{viewProps:D.viewProps});super(Object.assign(Object.assign({},D),{rackController:new HH({blade:D.blade,element:W.containerElement,viewProps:D.viewProps}),view:W}));this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new E0(H,{props:D.itemProps,viewProps:i.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=D.props,b(this.props,"selected",(q)=>{this.itemController.props.set("selected",q),this.viewProps.set("hidden",!q)})}get itemController(){return this.ic_}importState(H){return B(H,(D)=>super.importState(D),(D)=>({selected:D.required.boolean,title:D.required.string}),(D)=>{return this.ic_.props.set("selected",D.selected),this.ic_.props.set("title",D.title),!0})}exportState(){return N(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class C0 extends a5{constructor(H,D){super(H,D);this.emitter_=new A,this.onSelect_=this.onSelect_.bind(this),this.pool_=D,this.rackApi_.on("change",(W)=>{this.emitter_.emit("change",W)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(H){let D=this.controller.view.element.ownerDocument,W=new t5(D,{blade:F5(),itemProps:G.fromObject({selected:!1,title:H.title}),props:G.fromObject({selected:!1}),viewProps:i.create()}),q=this.pool_.createApi(W);return this.rackApi_.add(q,H.index)}removePage(H){this.rackApi_.remove(this.rackApi_.children[H])}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}onSelect_(H){this.emitter_.emit("select",new K0(this,H.rawValue))}}class x0 extends a5{get title(){var H;return(H=this.controller.itemController.props.get("title"))!==null&&H!==void 0?H:""}set title(H){this.controller.itemController.props.set("title",H)}get selected(){return this.controller.props.get("selected")}set selected(H){this.controller.props.set("selected",H)}get children(){return this.rackApi_.children}addButton(H){return this.rackApi_.addButton(H)}addFolder(H){return this.rackApi_.addFolder(H)}addTab(H){return this.rackApi_.addTab(H)}add(H,D){this.rackApi_.add(H,D)}remove(H){this.rackApi_.remove(H)}addBinding(H,D,W){return this.rackApi_.addBinding(H,D,W)}addBlade(H){return this.rackApi_.addBlade(H)}}var ND=-1;class f0{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=L(!0),this.selectedIndex=L(ND),this.items_=[]}add(H,D){let W=D!==null&&D!==void 0?D:this.items_.length;this.items_.splice(W,0,H),H.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(H){let D=this.items_.indexOf(H);if(D<0)return;this.items_.splice(D,1),H.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_()}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=ND,this.empty.rawValue=!0;return}let H=this.items_.findIndex((D)=>D.rawValue);if(H<0)this.items_.forEach((D,W)=>{D.rawValue=W===0}),this.selectedIndex.rawValue=0;else this.items_.forEach((D,W)=>{D.rawValue=W===H}),this.selectedIndex.rawValue=H;this.empty.rawValue=!1}onItemSelectedChange_(H){if(H.rawValue){let D=this.items_.findIndex((W)=>W===H.sender);this.items_.forEach((W,q)=>{W.rawValue=q===D}),this.selectedIndex.rawValue=D}else this.keepSelection_()}}var k5=O("tab");class b0{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(k5(),B0()),D.viewProps.bindClassModifiers(this.element),m(D.empty,w5(this.element,k5(void 0,"nop")));let W=H.createElement("div");W.classList.add(k5("t")),this.element.appendChild(W),this.itemsElement=W;let q=H.createElement("div");q.classList.add(k5("i")),this.element.appendChild(q);let J=H.createElement("div");J.classList.add(k5("c")),this.element.appendChild(J),this.contentsElement=J}}class jH extends e5{constructor(H,D){let W=new f0,q=new b0(H,{empty:W.empty,viewProps:D.viewProps});super({blade:D.blade,rackController:new HH({blade:D.blade,element:q.contentsElement,viewProps:D.viewProps}),view:q});this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);let J=this.rackController.rack;J.emitter.on("add",this.onRackAdd_),J.emitter.on("remove",this.onRackRemove_),this.tab=W}add(H,D){this.rackController.rack.add(H,D)}remove(H){this.rackController.rack.remove(this.rackController.rack.children[H])}onRackAdd_(H){if(!H.root)return;let D=H.bladeController;F0(this.view.itemsElement,D.itemController.view.element,H.index),D.itemController.viewProps.set("parent",this.viewProps),this.tab.add(D.props.value("selected"))}onRackRemove_(H){if(!H.root)return;let D=H.bladeController;EH(D.itemController.view.element),D.itemController.viewProps.set("parent",null),this.tab.remove(D.props.value("selected"))}}var u0=j({id:"tab",type:"blade",accept(H){let D=$(H,(W)=>({pages:W.required.array(W.required.object({title:W.required.string})),view:W.required.constant("tab")}));if(!D||D.pages.length===0)return null;return{params:D}},controller(H){let D=new jH(H.document,{blade:H.blade,viewProps:H.viewProps});return H.params.pages.forEach((W)=>{let q=new t5(H.document,{blade:F5(),itemProps:G.fromObject({selected:!1,title:W.title}),props:G.fromObject({selected:!1}),viewProps:i.create()});D.add(q)}),D},api(H){if(H.controller instanceof jH)return new C0(H.controller,H.pool);if(H.controller instanceof t5)return new x0(H.controller,H.pool);return null}});function Iq(H,D){let W=H.accept(D.params);if(!W)return null;let q=$(D.params,(J)=>({disabled:J.optional.boolean,hidden:J.optional.boolean}));return H.controller({blade:F5(),document:D.document,params:P(Object.assign(Object.assign({},W.params),{disabled:q===null||q===void 0?void 0:q.disabled,hidden:q===null||q===void 0?void 0:q.hidden})),viewProps:i.create({disabled:q===null||q===void 0?void 0:q.disabled,hidden:q===null||q===void 0?void 0:q.hidden})})}class DH extends U5{get options(){return this.controller.valueController.props.get("options")}set options(H){this.controller.valueController.props.set("options",H)}}class v0{constructor(){this.disabled=!1,this.emitter=new A}dispose(){}tick(){if(this.disabled)return;this.emitter.emit("tick",{sender:this})}}class d0{constructor(H,D){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=H,this.emitter=new A,this.interval_=D,this.setTimer_()}get disabled(){return this.disabled_}set disabled(H){if(this.disabled_=H,this.disabled_)this.clearTimer_();else this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;let H=this.doc_.defaultView;if(H)H.clearInterval(this.timerId_);this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;let H=this.doc_.defaultView;if(H)this.timerId_=H.setInterval(this.onTick_,this.interval_)}onTick_(){if(this.disabled_)return;this.emitter.emit("tick",{sender:this})}}class L5{constructor(H){this.constraints=H}constrain(H){return this.constraints.reduce((D,W)=>{return W.constrain(D)},H)}}function l5(H,D){if(H instanceof D)return H;if(H instanceof L5){let W=H.constraints.reduce((q,J)=>{if(q)return q;return J instanceof D?J:null},null);if(W)return W}return null}class $5{constructor(H){this.values=G.fromObject({options:H})}constrain(H){let D=this.values.get("options");if(D.length===0)return H;return D.filter((q)=>{return q.value===H}).length>0?H:D[0].value}}function C5(H){var D;let W=AH;if(Array.isArray(H))return(D=$({items:H},(q)=>({items:q.required.array(q.required.object({text:q.required.string,value:q.required.raw}))})))===null||D===void 0?void 0:D.items;if(typeof H==="object")return W.required.raw(H).value;return}function mH(H){if(Array.isArray(H))return H;let D=[];return Object.keys(H).forEach((W)=>{D.push({text:W,value:H[W]})}),D}function gH(H){return!F(H)?new $5(mH(P(H))):null}var KH=O("lst");class m0{constructor(H,D){this.onValueChange_=this.onValueChange_.bind(this),this.props_=D.props,this.element=H.createElement("div"),this.element.classList.add(KH()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("select");W.classList.add(KH("s")),D.viewProps.bindDisabled(W),this.element.appendChild(W),this.selectElement=W;let q=H.createElement("div");q.classList.add(KH("m")),q.appendChild(o5(H,"dropdown")),this.element.appendChild(q),D.value.emitter.on("change",this.onValueChange_),this.value_=D.value,b(this.props_,"options",(J)=>{L0(this.selectElement),J.forEach((Q)=>{let X=H.createElement("option");X.textContent=Q.text,this.selectElement.appendChild(X)}),this.update_()})}update_(){let H=this.props_.get("options").map((D)=>D.value);this.selectElement.selectedIndex=H.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class n{constructor(H,D){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=D.props,this.value=D.value,this.viewProps=D.viewProps,this.view=new m0(H,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(H){let D=P(H.currentTarget);this.value.rawValue=this.props.get("options")[D.selectedIndex].value}importProps(H){return B(H,null,(D)=>({options:D.required.custom(C5)}),(D)=>{return this.props.set("options",mH(D.options)),!0})}exportProps(){return N(null,{options:this.props.get("options")})}}var VD=O("pop");class g0{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(VD()),D.viewProps.bindClassModifiers(this.element),m(D.shows,w5(this.element,VD(void 0,"v")))}}class pH{constructor(H,D){this.shows=L(!1),this.viewProps=D.viewProps,this.view=new g0(H,{shows:this.shows,viewProps:this.viewProps})}}var _D=O("txt");class p0{constructor(H,D){this.onChange_=this.onChange_.bind(this),this.element=H.createElement("div"),this.element.classList.add(_D()),D.viewProps.bindClassModifiers(this.element),this.props_=D.props,this.props_.emitter.on("change",this.onChange_);let W=H.createElement("input");W.classList.add(_D("i")),W.type="text",D.viewProps.bindDisabled(W),this.element.appendChild(W),this.inputElement=W,D.value.emitter.on("change",this.onChange_),this.value_=D.value,this.refresh()}refresh(){let H=this.props_.get("formatter");this.inputElement.value=H(this.value_.rawValue)}onChange_(){this.refresh()}}class z5{constructor(H,D){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=D.parser,this.props=D.props,this.value=D.value,this.viewProps=D.viewProps,this.view=new p0(H,{props:D.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(H){let W=P(H.currentTarget).value,q=this.parser_(W);if(!F(q))this.value.rawValue=q;this.view.refresh()}}function Mq(H){return String(H)}function n0(H){if(H==="false")return!1;return!!H}function ED(H){return Mq(H)}function jq(H){return(D)=>{return H.reduce((W,q)=>{if(W!==null)return W;return q(D)},null)}}var kq=T(0);function r5(H){return kq(H)+"%"}function s0(H){return String(H)}function kH(H){return H}function S5({primary:H,secondary:D,forward:W,backward:q}){let J=!1;function Q(X){if(J)return;J=!0,X(),J=!1}H.emitter.on("change",(X)=>{Q(()=>{D.setRawValue(W(H.rawValue,D.rawValue),X.options)})}),D.emitter.on("change",(X)=>{Q(()=>{H.setRawValue(q(H.rawValue,D.rawValue),X.options)}),Q(()=>{D.setRawValue(W(H.rawValue,D.rawValue),X.options)})}),Q(()=>{D.setRawValue(W(H.rawValue,D.rawValue),{forceEmit:!1,last:!0})})}function y(H,D){let W=H*(D.altKey?0.1:1)*(D.shiftKey?10:1);if(D.upKey)return+W;else if(D.downKey)return-W;return 0}function P5(H){return{altKey:H.altKey,downKey:H.key==="ArrowDown",shiftKey:H.shiftKey,upKey:H.key==="ArrowUp"}}function s(H){return{altKey:H.altKey,downKey:H.key==="ArrowLeft",shiftKey:H.shiftKey,upKey:H.key==="ArrowRight"}}function Rq(H){return H==="ArrowUp"||H==="ArrowDown"}function i0(H){return Rq(H)||H==="ArrowLeft"||H==="ArrowRight"}function OH(H,D){var W,q;let J=D.ownerDocument.defaultView,Q=D.getBoundingClientRect();return{x:H.pageX-(((W=J&&J.scrollX)!==null&&W!==void 0?W:0)+Q.left),y:H.pageY-(((q=J&&J.scrollY)!==null&&q!==void 0?q:0)+Q.top)}}class e{constructor(H){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=H,this.emitter=new A,H.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),H.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),H.addEventListener("touchend",this.onTouchEnd_),H.addEventListener("mousedown",this.onMouseDown_)}computePosition_(H){let D=this.elem_.getBoundingClientRect();return{bounds:{width:D.width,height:D.height},point:H?{x:H.x,y:H.y}:null}}onMouseDown_(H){var D;H.preventDefault(),(D=H.currentTarget)===null||D===void 0||D.focus();let W=this.elem_.ownerDocument;W.addEventListener("mousemove",this.onDocumentMouseMove_),W.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:H.altKey,data:this.computePosition_(OH(H,this.elem_)),sender:this,shiftKey:H.shiftKey})}onDocumentMouseMove_(H){this.emitter.emit("move",{altKey:H.altKey,data:this.computePosition_(OH(H,this.elem_)),sender:this,shiftKey:H.shiftKey})}onDocumentMouseUp_(H){let D=this.elem_.ownerDocument;D.removeEventListener("mousemove",this.onDocumentMouseMove_),D.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:H.altKey,data:this.computePosition_(OH(H,this.elem_)),sender:this,shiftKey:H.shiftKey})}onTouchStart_(H){H.preventDefault();let D=H.targetTouches.item(0),W=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:H.altKey,data:this.computePosition_(D?{x:D.clientX-W.left,y:D.clientY-W.top}:void 0),sender:this,shiftKey:H.shiftKey}),this.lastTouch_=D}onTouchMove_(H){let D=H.targetTouches.item(0),W=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:H.altKey,data:this.computePosition_(D?{x:D.clientX-W.left,y:D.clientY-W.top}:void 0),sender:this,shiftKey:H.shiftKey}),this.lastTouch_=D}onTouchEnd_(H){var D;let W=(D=H.targetTouches.item(0))!==null&&D!==void 0?D:this.lastTouch_,q=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:H.altKey,data:this.computePosition_(W?{x:W.clientX-q.left,y:W.clientY-q.top}:void 0),sender:this,shiftKey:H.shiftKey})}}var V=O("txt");class c0{constructor(H,D){if(this.onChange_=this.onChange_.bind(this),this.props_=D.props,this.props_.emitter.on("change",this.onChange_),this.element=H.createElement("div"),this.element.classList.add(V(),V(void 0,"num")),D.arrayPosition)this.element.classList.add(V(void 0,D.arrayPosition));D.viewProps.bindClassModifiers(this.element);let W=H.createElement("input");W.classList.add(V("i")),W.type="text",D.viewProps.bindDisabled(W),this.element.appendChild(W),this.inputElement=W,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=D.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(V()),this.inputElement.classList.add(V("i"));let q=H.createElement("div");q.classList.add(V("k")),this.element.appendChild(q),this.knobElement=q;let J=H.createElementNS(f,"svg");J.classList.add(V("g")),this.knobElement.appendChild(J);let Q=H.createElementNS(f,"path");Q.classList.add(V("gb")),J.appendChild(Q),this.guideBodyElem_=Q;let X=H.createElementNS(f,"path");X.classList.add(V("gh")),J.appendChild(X),this.guideHeadElem_=X;let Z=H.createElement("div");Z.classList.add(O("tt")()),this.knobElement.appendChild(Z),this.tooltipElem_=Z,D.value.emitter.on("change",this.onChange_),this.value=D.value,this.refresh()}onDraggingChange_(H){if(H.rawValue===null){this.element.classList.remove(V(void 0,"drg"));return}this.element.classList.add(V(void 0,"drg"));let D=H.rawValue/this.props_.get("pointerScale"),W=D+(D>0?-1:D<0?1:0),q=I(-W,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${W+q},0 L${W},4 L${W+q},8`,`M ${D},-1 L${D},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${D},4`);let J=this.props_.get("formatter");this.tooltipElem_.textContent=J(this.value.rawValue),this.tooltipElem_.style.left=`${D}px`}refresh(){let H=this.props_.get("formatter");this.inputElement.value=H(this.value.rawValue)}onChange_(){this.refresh()}}class A5{constructor(H,D){var W;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=D.parser,this.props=D.props,this.sliderProps_=(W=D.sliderProps)!==null&&W!==void 0?W:null,this.value=D.value,this.viewProps=D.viewProps,this.dragging_=L(null),this.view=new c0(H,{arrayPosition:D.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);let q=new e(this.view.knobElement);q.emitter.on("down",this.onPointerDown_),q.emitter.on("move",this.onPointerMove_),q.emitter.on("up",this.onPointerUp_)}constrainValue_(H){var D,W;let q=(D=this.sliderProps_)===null||D===void 0?void 0:D.get("min"),J=(W=this.sliderProps_)===null||W===void 0?void 0:W.get("max"),Q=H;if(q!==void 0)Q=Math.max(Q,q);if(J!==void 0)Q=Math.min(Q,J);return Q}onInputChange_(H){let W=P(H.currentTarget).value,q=this.parser_(W);if(!F(q))this.value.rawValue=this.constrainValue_(q);this.view.refresh()}onInputKeyDown_(H){let D=y(this.props.get("keyScale"),P5(H));if(D===0)return;this.value.setRawValue(this.constrainValue_(this.value.rawValue+D),{forceEmit:!1,last:!1})}onInputKeyUp_(H){if(y(this.props.get("keyScale"),P5(H))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(H){if(!H.point)return null;let D=H.point.x-H.bounds.width/2;return this.constrainValue_(this.originRawValue_+D*this.props.get("pointerScale"))}onPointerMove_(H){let D=this.computeDraggingValue_(H.data);if(D===null)return;this.value.setRawValue(D,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_}onPointerUp_(H){let D=this.computeDraggingValue_(H.data);if(D===null)return;this.value.setRawValue(D,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null}}var wH=O("sld");class t0{constructor(H,D){this.onChange_=this.onChange_.bind(this),this.props_=D.props,this.props_.emitter.on("change",this.onChange_),this.element=H.createElement("div"),this.element.classList.add(wH()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add(wH("t")),D.viewProps.bindTabIndex(W),this.element.appendChild(W),this.trackElement=W;let q=H.createElement("div");q.classList.add(wH("k")),this.trackElement.appendChild(q),this.knobElement=q,D.value.emitter.on("change",this.onChange_),this.value=D.value,this.update_()}update_(){let H=I(h(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${H}%`}onChange_(){this.update_()}}class l0{constructor(H,D){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.props=D.props,this.view=new t0(H,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(H,D){if(!H.point)return;this.value.setRawValue(h(I(H.point.x,0,H.bounds.width),0,H.bounds.width,this.props.get("min"),this.props.get("max")),D)}onPointerDownOrMove_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerUp_(H){this.handlePointerEvent_(H.data,{forceEmit:!0,last:!0})}onKeyDown_(H){let D=y(this.props.get("keyScale"),s(H));if(D===0)return;this.value.setRawValue(this.value.rawValue+D,{forceEmit:!1,last:!1})}onKeyUp_(H){if(y(this.props.get("keyScale"),s(H))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var hH=O("sldtxt");class r0{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(hH());let W=H.createElement("div");W.classList.add(hH("s")),this.sliderView_=D.sliderView,W.appendChild(this.sliderView_.element),this.element.appendChild(W);let q=H.createElement("div");q.classList.add(hH("t")),this.textView_=D.textView,q.appendChild(this.textView_.element),this.element.appendChild(q)}}class B5{constructor(H,D){this.value=D.value,this.viewProps=D.viewProps,this.sliderC_=new l0(H,{props:D.sliderProps,value:D.value,viewProps:this.viewProps}),this.textC_=new A5(H,{parser:D.parser,props:D.textProps,sliderProps:D.sliderProps,value:D.value,viewProps:D.viewProps}),this.view=new r0(H,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(H){return B(H,null,(D)=>({max:D.required.number,min:D.required.number}),(D)=>{let W=this.sliderC_.props;return W.set("max",D.max),W.set("min",D.min),!0})}exportProps(){let H=this.sliderC_.props;return N(null,{max:H.get("max"),min:H.get("min")})}}function o0(H){return{sliderProps:new G({keyScale:H.keyScale,max:H.max,min:H.min}),textProps:new G({formatter:L(H.formatter),keyScale:H.keyScale,pointerScale:L(H.pointerScale)})}}var yq={containerUnitSize:"cnt-usz"};function a0(H){return`--${yq[H]}`}function N5(H){return z0(H)}function r(H){if(!SH(H))return;return $(H,N5)}function d(H,D){if(!H)return;let W=[],q=Z0(H,D);if(q)W.push(q);let J=Y0(H);if(J)W.push(J);return new L5(W)}function Tq(H){if(!H)return!1;return H.major===h5.major}function e0(H){if(H==="inline"||H==="popup")return H;return}function x5(H,D){H.write(D)}var g5=O("ckb");class H1{constructor(H,D){this.onValueChange_=this.onValueChange_.bind(this),this.element=H.createElement("div"),this.element.classList.add(g5()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("label");W.classList.add(g5("l")),this.element.appendChild(W),this.labelElement=W;let q=H.createElement("input");q.classList.add(g5("i")),q.type="checkbox",this.labelElement.appendChild(q),this.inputElement=q,D.viewProps.bindDisabled(this.inputElement);let J=H.createElement("div");J.classList.add(g5("w")),this.labelElement.appendChild(J);let Q=o5(H,"check");J.appendChild(Q),D.value.emitter.on("change",this.onValueChange_),this.value=D.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class D1{constructor(H,D){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.view=new H1(H,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(H){let D=P(H.currentTarget);this.value.rawValue=D.checked,H.preventDefault(),H.stopPropagation()}onLabelMouseDown_(H){H.preventDefault()}}function Pq(H){let D=[],W=gH(H.options);if(W)D.push(W);return new L5(D)}var Bq=j({id:"input-bool",type:"input",accept:(H,D)=>{if(typeof H!=="boolean")return null;let W=$(D,(q)=>({options:q.optional.custom(C5),readonly:q.optional.constant(!1)}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>n0,constraint:(H)=>Pq(H.params),writer:(H)=>x5},controller:(H)=>{let{document:D,value:W,constraint:q}=H,J=q&&l5(q,$5);if(J)return new n(D,{props:new G({options:J.values.value("options")}),value:W,viewProps:H.viewProps});return new D1(D,{value:W,viewProps:H.viewProps})},api(H){if(typeof H.controller.value.rawValue!=="boolean")return null;if(H.controller.valueController instanceof n)return new DH(H.controller);return null}}),H5=O("col");class W1{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(H5()),D.foldable.bindExpandedClass(this.element,H5(void 0,"expanded")),b(D.foldable,"completed",w5(this.element,H5(void 0,"cpl")));let W=H.createElement("div");W.classList.add(H5("h")),this.element.appendChild(W);let q=H.createElement("div");q.classList.add(H5("s")),W.appendChild(q),this.swatchElement=q;let J=H.createElement("div");if(J.classList.add(H5("t")),W.appendChild(J),this.textElement=J,D.pickerLayout==="inline"){let Q=H.createElement("div");Q.classList.add(H5("p")),this.element.appendChild(Q),this.pickerElement=Q}else this.pickerElement=null}}function Nq(H,D,W){let q=I(H/255,0,1),J=I(D/255,0,1),Q=I(W/255,0,1),X=Math.max(q,J,Q),Z=Math.min(q,J,Q),z=X-Z,Y=0,U=0,K=(Z+X)/2;if(z!==0){if(U=z/(1-Math.abs(X+Z-1)),q===X)Y=(J-Q)/z;else if(J===X)Y=2+(Q-q)/z;else Y=4+(q-J)/z;Y=Y/6+(Y<0?1:0)}return[Y*360,U*100,K*100]}function Vq(H,D,W){let q=(H%360+360)%360,J=I(D/100,0,1),Q=I(W/100,0,1),X=(1-Math.abs(2*Q-1))*J,Z=X*(1-Math.abs(q/60%2-1)),z=Q-X/2,Y,U,K;if(q>=0&&q<60)[Y,U,K]=[X,Z,0];else if(q>=60&&q<120)[Y,U,K]=[Z,X,0];else if(q>=120&&q<180)[Y,U,K]=[0,X,Z];else if(q>=180&&q<240)[Y,U,K]=[0,Z,X];else if(q>=240&&q<300)[Y,U,K]=[Z,0,X];else[Y,U,K]=[X,0,Z];return[(Y+z)*255,(U+z)*255,(K+z)*255]}function _q(H,D,W){let q=I(H/255,0,1),J=I(D/255,0,1),Q=I(W/255,0,1),X=Math.max(q,J,Q),Z=Math.min(q,J,Q),z=X-Z,Y;if(z===0)Y=0;else if(X===q)Y=60*(((J-Q)/z%6+6)%6);else if(X===J)Y=60*((Q-q)/z+2);else Y=60*((q-J)/z+4);let U=X===0?0:z/X,K=X;return[Y,U*100,K*100]}function q1(H,D,W){let q=J0(H,360),J=I(D/100,0,1),Q=I(W/100,0,1),X=Q*J,Z=X*(1-Math.abs(q/60%2-1)),z=Q-X,Y,U,K;if(q>=0&&q<60)[Y,U,K]=[X,Z,0];else if(q>=60&&q<120)[Y,U,K]=[Z,X,0];else if(q>=120&&q<180)[Y,U,K]=[0,X,Z];else if(q>=180&&q<240)[Y,U,K]=[0,Z,X];else if(q>=240&&q<300)[Y,U,K]=[Z,0,X];else[Y,U,K]=[X,0,Z];return[(Y+z)*255,(U+z)*255,(K+z)*255]}function Eq(H,D,W){let q=W+D*(100-Math.abs(2*W-100))/200;return[H,q!==0?D*(100-Math.abs(2*W-100))/q:0,W+D*(100-Math.abs(2*W-100))/200]}function Cq(H,D,W){let q=100-Math.abs(W*(200-D)/100-100);return[H,q!==0?D*W/q:0,W*(200-D)/200]}function u(H){return[H[0],H[1],H[2]]}function WH(H,D){return[H[0],H[1],H[2],D]}var xq={hsl:{hsl:(H,D,W)=>[H,D,W],hsv:Eq,rgb:Vq},hsv:{hsl:Cq,hsv:(H,D,W)=>[H,D,W],rgb:q1},rgb:{hsl:Nq,hsv:_q,rgb:(H,D,W)=>[H,D,W]}};function G5(H,D){return[D==="float"?1:H==="rgb"?255:360,D==="float"?1:H==="rgb"?255:100,D==="float"?1:H==="rgb"?255:100]}function fq(H,D){return H===D?D:J0(H,D)}function J1(H,D,W){var q;let J=G5(D,W);return[D==="rgb"?I(H[0],0,J[0]):fq(H[0],J[0]),I(H[1],0,J[1]),I(H[2],0,J[2]),I((q=H[3])!==null&&q!==void 0?q:1,0,1)]}function CD(H,D,W,q){let J=G5(D,W),Q=G5(D,q);return H.map((X,Z)=>X/J[Z]*Q[Z])}function Q1(H,D,W){let q=CD(H,D.mode,D.type,"int"),J=xq[D.mode][W.mode](...q);return CD(J,W.mode,"int",W.type)}class w{static black(){return new w([0,0,0],"rgb")}constructor(H,D){this.type="int",this.mode=D,this.comps_=J1(H,D,this.type)}getComponents(H){return WH(Q1(u(this.comps_),{mode:this.mode,type:this.type},{mode:H!==null&&H!==void 0?H:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let H=this.getComponents("rgb");return{r:H[0],g:H[1],b:H[2],a:H[3]}}}var c=O("colp");class X1{constructor(H,D){this.alphaViews_=null,this.element=H.createElement("div"),this.element.classList.add(c()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add(c("hsv"));let q=H.createElement("div");q.classList.add(c("sv")),this.svPaletteView_=D.svPaletteView,q.appendChild(this.svPaletteView_.element),W.appendChild(q);let J=H.createElement("div");J.classList.add(c("h")),this.hPaletteView_=D.hPaletteView,J.appendChild(this.hPaletteView_.element),W.appendChild(J),this.element.appendChild(W);let Q=H.createElement("div");if(Q.classList.add(c("rgb")),this.textsView_=D.textsView,Q.appendChild(this.textsView_.element),this.element.appendChild(Q),D.alphaViews){this.alphaViews_={palette:D.alphaViews.palette,text:D.alphaViews.text};let X=H.createElement("div");X.classList.add(c("a"));let Z=H.createElement("div");Z.classList.add(c("ap")),Z.appendChild(this.alphaViews_.palette.element),X.appendChild(Z);let z=H.createElement("div");z.classList.add(c("at")),z.appendChild(this.alphaViews_.text.element),X.appendChild(z),this.element.appendChild(X)}}get allFocusableElements(){let H=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map((D)=>D.inputElement)];if(this.alphaViews_)H.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement);return H}}function bq(H){return H==="int"?"int":H==="float"?"float":void 0}function nH(H){return $(H,(D)=>({color:D.optional.object({alpha:D.optional.boolean,type:D.optional.custom(bq)}),expanded:D.optional.boolean,picker:D.optional.custom(e0),readonly:D.optional.constant(!1)}))}function Q5(H){return H?0.1:1}function Z1(H){var D;return(D=H.color)===null||D===void 0?void 0:D.type}class qH{constructor(H,D){this.type="float",this.mode=D,this.comps_=J1(H,D,this.type)}getComponents(H){return WH(Q1(u(this.comps_),{mode:this.mode,type:this.type},{mode:H!==null&&H!==void 0?H:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let H=this.getComponents("rgb");return{r:H[0],g:H[1],b:H[2],a:H[3]}}}var uq={int:(H,D)=>new w(H,D),float:(H,D)=>new qH(H,D)};function sH(H,D,W){return uq[W](H,D)}function vq(H){return H.type==="float"}function dq(H){return H.type==="int"}function mq(H){let D=H.getComponents(),W=G5(H.mode,"int");return new w([Math.round(h(D[0],0,1,0,W[0])),Math.round(h(D[1],0,1,0,W[1])),Math.round(h(D[2],0,1,0,W[2])),D[3]],H.mode)}function gq(H){let D=H.getComponents(),W=G5(H.mode,"int");return new qH([h(D[0],0,W[0],0,1),h(D[1],0,W[1],0,1),h(D[2],0,W[2],0,1),D[3]],H.mode)}function M(H,D){if(H.type===D)return H;if(dq(H)&&D==="float")return gq(H);if(vq(H)&&D==="int")return mq(H);throw S.shouldNeverHappen()}function pq(H,D){return H.alpha===D.alpha&&H.mode===D.mode&&H.notation===D.notation&&H.type===D.type}function _(H,D){let W=H.match(/^(.+)%$/);if(!W)return Math.min(parseFloat(H),D);return Math.min(parseFloat(W[1])*0.01*D,D)}var nq={deg:(H)=>H,grad:(H)=>H*360/400,rad:(H)=>H*360/(2*Math.PI),turn:(H)=>H*360};function Y1(H){let D=H.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!D)return parseFloat(H);let W=parseFloat(D[1]),q=D[2];return nq[q](W)}function U1(H){let D=H.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!D)return null;let W=[_(D[1],255),_(D[2],255),_(D[3],255)];if(isNaN(W[0])||isNaN(W[1])||isNaN(W[2]))return null;return W}function sq(H){let D=U1(H);return D?new w(D,"rgb"):null}function z1(H){let D=H.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!D)return null;let W=[_(D[1],255),_(D[2],255),_(D[3],255),_(D[4],1)];if(isNaN(W[0])||isNaN(W[1])||isNaN(W[2])||isNaN(W[3]))return null;return W}function iq(H){let D=z1(H);return D?new w(D,"rgb"):null}function G1(H){let D=H.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!D)return null;let W=[Y1(D[1]),_(D[2],100),_(D[3],100)];if(isNaN(W[0])||isNaN(W[1])||isNaN(W[2]))return null;return W}function cq(H){let D=G1(H);return D?new w(D,"hsl"):null}function K1(H){let D=H.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!D)return null;let W=[Y1(D[1]),_(D[2],100),_(D[3],100),_(D[4],1)];if(isNaN(W[0])||isNaN(W[1])||isNaN(W[2])||isNaN(W[3]))return null;return W}function tq(H){let D=K1(H);return D?new w(D,"hsl"):null}function O1(H){let D=H.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(D)return[parseInt(D[1]+D[1],16),parseInt(D[2]+D[2],16),parseInt(D[3]+D[3],16)];let W=H.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);if(W)return[parseInt(W[1],16),parseInt(W[2],16),parseInt(W[3],16)];return null}function lq(H){let D=O1(H);return D?new w(D,"rgb"):null}function w1(H){let D=H.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(D)return[parseInt(D[1]+D[1],16),parseInt(D[2]+D[2],16),parseInt(D[3]+D[3],16),h(parseInt(D[4]+D[4],16),0,255,0,1)];let W=H.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);if(W)return[parseInt(W[1],16),parseInt(W[2],16),parseInt(W[3],16),h(parseInt(W[4],16),0,255,0,1)];return null}function rq(H){let D=w1(H);return D?new w(D,"rgb"):null}function h1(H){let D=H.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!D)return null;let W=[parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])];if(isNaN(W[0])||isNaN(W[1])||isNaN(W[2]))return null;return W}function xD(H){return(D)=>{let W=h1(D);return W?sH(W,"rgb",H):null}}function F1(H){let D=H.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!D)return null;let W=[parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3]),parseFloat(D[4])];if(isNaN(W[0])||isNaN(W[1])||isNaN(W[2])||isNaN(W[3]))return null;return W}function fD(H){return(D)=>{let W=F1(D);return W?sH(W,"rgb",H):null}}var oq=[{parser:O1,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:w1,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:U1,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:z1,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:G1,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:K1,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:h1,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:F1,result:{alpha:!0,mode:"rgb",notation:"object"}}];function aq(H){return oq.reduce((D,{parser:W,result:q})=>{if(D)return D;return W(H)?q:null},null)}function eq(H,D="int"){let W=aq(H);if(!W)return null;if(W.notation==="hex"&&D!=="float")return Object.assign(Object.assign({},W),{type:"int"});if(W.notation==="func")return Object.assign(Object.assign({},W),{type:D});return null}function f5(H){let D=[lq,rq,sq,iq,cq,tq];if(H==="int")D.push(xD("int"),fD("int"));if(H==="float")D.push(xD("float"),fD("float"));let W=jq(D);return(q)=>{let J=W(q);return J?M(J,H):null}}function HJ(H){let D=f5("int");if(typeof H!=="string")return w.black();let W=D(H);return W!==null&&W!==void 0?W:w.black()}function L1(H){let D=I(Math.floor(H),0,255).toString(16);return D.length===1?`0${D}`:D}function iH(H,D="#"){let W=u(H.getComponents("rgb")).map(L1).join("");return`${D}${W}`}function cH(H,D="#"){let W=H.getComponents("rgb"),q=[W[0],W[1],W[2],W[3]*255].map(L1).join("");return`${D}${q}`}function $1(H){let D=T(0),W=M(H,"int");return`rgb(${u(W.getComponents("rgb")).map((J)=>D(J)).join(", ")})`}function p5(H){let D=T(2),W=T(0);return`rgba(${M(H,"int").getComponents("rgb").map((Q,X)=>{return(X===3?D:W)(Q)}).join(", ")})`}function DJ(H){let D=[T(0),r5,r5],W=M(H,"int");return`hsl(${u(W.getComponents("hsl")).map((J,Q)=>D[Q](J)).join(", ")})`}function WJ(H){let D=[T(0),r5,r5,T(2)];return`hsla(${M(H,"int").getComponents("hsl").map((J,Q)=>D[Q](J)).join(", ")})`}function S1(H,D){let W=T(D==="float"?2:0),q=["r","g","b"],J=M(H,D);return`{${u(J.getComponents("rgb")).map((X,Z)=>`${q[Z]}: ${W(X)}`).join(", ")}}`}function qJ(H){return(D)=>S1(D,H)}function A1(H,D){let W=T(2),q=T(D==="float"?2:0),J=["r","g","b","a"];return`{${M(H,D).getComponents("rgb").map((Z,z)=>{let Y=z===3?W:q;return`${J[z]}: ${Y(Z)}`}).join(", ")}}`}function JJ(H){return(D)=>A1(D,H)}var QJ=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:iH},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:cH},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:$1},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:p5},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:DJ},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:WJ},...["int","float"].reduce((H,D)=>{return[...H,{format:{alpha:!1,mode:"rgb",notation:"object",type:D},stringifier:qJ(D)},{format:{alpha:!0,mode:"rgb",notation:"object",type:D},stringifier:JJ(D)}]},[])];function I1(H){return QJ.reduce((D,W)=>{if(D)return D;return pq(W.format,H)?W.stringifier:null},null)}var R5=O("apl");class M1{constructor(H,D){this.onValueChange_=this.onValueChange_.bind(this),this.value=D.value,this.value.emitter.on("change",this.onValueChange_),this.element=H.createElement("div"),this.element.classList.add(R5()),D.viewProps.bindClassModifiers(this.element),D.viewProps.bindTabIndex(this.element);let W=H.createElement("div");W.classList.add(R5("b")),this.element.appendChild(W);let q=H.createElement("div");q.classList.add(R5("c")),W.appendChild(q),this.colorElem_=q;let J=H.createElement("div");J.classList.add(R5("m")),this.element.appendChild(J),this.markerElem_=J;let Q=H.createElement("div");Q.classList.add(R5("p")),this.markerElem_.appendChild(Q),this.previewElem_=Q,this.update_()}update_(){let H=this.value.rawValue,D=H.getComponents("rgb"),W=new w([D[0],D[1],D[2],0],"rgb"),q=new w([D[0],D[1],D[2],255],"rgb"),J=["to right",p5(W),p5(q)];this.colorElem_.style.background=`linear-gradient(${J.join(",")})`,this.previewElem_.style.backgroundColor=p5(H);let Q=h(D[3],0,1,0,100);this.markerElem_.style.left=`${Q}%`}onValueChange_(){this.update_()}}class j1{constructor(H,D){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.view=new M1(H,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(H,D){if(!H.point)return;let W=H.point.x/H.bounds.width,q=this.value.rawValue,[J,Q,X]=q.getComponents("hsv");this.value.setRawValue(new w([J,Q,X,W],"hsv"),D)}onPointerDown_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerMove_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerUp_(H){this.handlePointerEvent_(H.data,{forceEmit:!0,last:!0})}onKeyDown_(H){let D=y(Q5(!0),s(H));if(D===0)return;let W=this.value.rawValue,[q,J,Q,X]=W.getComponents("hsv");this.value.setRawValue(new w([q,J,Q,X+D],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(H){if(y(Q5(!0),s(H))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var Z5=O("coltxt");function XJ(H){let D=H.createElement("select"),W=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return D.appendChild(W.reduce((q,J)=>{let Q=H.createElement("option");return Q.textContent=J.text,Q.value=J.value,q.appendChild(Q),q},H.createDocumentFragment())),D}class k1{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(Z5()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add(Z5("m")),this.modeElem_=XJ(H),this.modeElem_.classList.add(Z5("ms")),W.appendChild(this.modeSelectElement),D.viewProps.bindDisabled(this.modeElem_);let q=H.createElement("div");q.classList.add(Z5("mm")),q.appendChild(o5(H,"dropdown")),W.appendChild(q),this.element.appendChild(W);let J=H.createElement("div");J.classList.add(Z5("w")),this.element.appendChild(J),this.inputsElem_=J,this.inputViews_=D.inputViews,this.applyInputViews_(),m(D.mode,(Q)=>{this.modeElem_.value=Q})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(H){this.inputViews_=H,this.applyInputViews_()}applyInputViews_(){L0(this.inputsElem_);let H=this.element.ownerDocument;this.inputViews_.forEach((D)=>{let W=H.createElement("div");W.classList.add(Z5("c")),W.appendChild(D.element),this.inputsElem_.appendChild(W)})}}function ZJ(H){return T(H==="float"?2:0)}function YJ(H,D,W){let q=G5(H,D)[W];return new K5({min:0,max:q})}function UJ(H,D,W){return new A5(H,{arrayPosition:W===0?"fst":W===2?"lst":"mid",parser:D.parser,props:G.fromObject({formatter:ZJ(D.colorType),keyScale:Q5(!1),pointerScale:D.colorType==="float"?0.01:1}),value:L(0,{constraint:YJ(D.colorMode,D.colorType,W)}),viewProps:D.viewProps})}function zJ(H,D){let W={colorMode:D.colorMode,colorType:D.colorType,parser:p,viewProps:D.viewProps};return[0,1,2].map((q)=>{let J=UJ(H,W,q);return S5({primary:D.value,secondary:J.value,forward(Q){return M(Q,D.colorType).getComponents(D.colorMode)[q]},backward(Q,X){let Z=D.colorMode,Y=M(Q,D.colorType).getComponents(Z);Y[q]=X;let U=sH(WH(u(Y),Y[3]),Z,D.colorType);return M(U,"int")}}),J})}function GJ(H,D){let W=new z5(H,{parser:f5("int"),props:G.fromObject({formatter:iH}),value:L(w.black()),viewProps:D.viewProps});return S5({primary:D.value,secondary:W.value,forward:(q)=>new w(u(q.getComponents()),q.mode),backward:(q,J)=>new w(WH(u(J.getComponents(q.mode)),q.getComponents()[3]),q.mode)}),[W]}function KJ(H){return H!=="hex"}class R1{constructor(H,D){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=D.colorType,this.value=D.value,this.viewProps=D.viewProps,this.colorMode=L(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(H),this.view=new k1(H,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(H){let D=this.colorMode.rawValue;if(KJ(D))return zJ(H,{colorMode:D,colorType:this.colorType_,value:this.value,viewProps:this.viewProps});return GJ(H,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(H){let D=H.currentTarget;this.colorMode.rawValue=D.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map((W)=>W.view)}}var FH=O("hpl");class y1{constructor(H,D){this.onValueChange_=this.onValueChange_.bind(this),this.value=D.value,this.value.emitter.on("change",this.onValueChange_),this.element=H.createElement("div"),this.element.classList.add(FH()),D.viewProps.bindClassModifiers(this.element),D.viewProps.bindTabIndex(this.element);let W=H.createElement("div");W.classList.add(FH("c")),this.element.appendChild(W);let q=H.createElement("div");q.classList.add(FH("m")),this.element.appendChild(q),this.markerElem_=q,this.update_()}update_(){let H=this.value.rawValue,[D]=H.getComponents("hsv");this.markerElem_.style.backgroundColor=$1(new w([D,100,100],"hsv"));let W=h(D,0,360,0,100);this.markerElem_.style.left=`${W}%`}onValueChange_(){this.update_()}}class T1{constructor(H,D){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.view=new y1(H,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(H,D){if(!H.point)return;let W=h(I(H.point.x,0,H.bounds.width),0,H.bounds.width,0,360),q=this.value.rawValue,[,J,Q,X]=q.getComponents("hsv");this.value.setRawValue(new w([W,J,Q,X],"hsv"),D)}onPointerDown_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerMove_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerUp_(H){this.handlePointerEvent_(H.data,{forceEmit:!0,last:!0})}onKeyDown_(H){let D=y(Q5(!1),s(H));if(D===0)return;let W=this.value.rawValue,[q,J,Q,X]=W.getComponents("hsv");this.value.setRawValue(new w([q+D,J,Q,X],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(H){if(y(Q5(!1),s(H))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var LH=O("svp"),bD=64;class P1{constructor(H,D){this.onValueChange_=this.onValueChange_.bind(this),this.value=D.value,this.value.emitter.on("change",this.onValueChange_),this.element=H.createElement("div"),this.element.classList.add(LH()),D.viewProps.bindClassModifiers(this.element),D.viewProps.bindTabIndex(this.element);let W=H.createElement("canvas");W.height=bD,W.width=bD,W.classList.add(LH("c")),this.element.appendChild(W),this.canvasElement=W;let q=H.createElement("div");q.classList.add(LH("m")),this.element.appendChild(q),this.markerElem_=q,this.update_()}update_(){let H=rW(this.canvasElement);if(!H)return;let W=this.value.rawValue.getComponents("hsv"),q=this.canvasElement.width,J=this.canvasElement.height,Q=H.getImageData(0,0,q,J),X=Q.data;for(let Y=0;Y<J;Y++)for(let U=0;U<q;U++){let K=h(U,0,q,0,100),E=h(Y,0,J,100,0),R=q1(W[0],K,E),C=(Y*q+U)*4;X[C]=R[0],X[C+1]=R[1],X[C+2]=R[2],X[C+3]=255}H.putImageData(Q,0,0);let Z=h(W[1],0,100,0,100);this.markerElem_.style.left=`${Z}%`;let z=h(W[2],0,100,100,0);this.markerElem_.style.top=`${z}%`}onValueChange_(){this.update_()}}class B1{constructor(H,D){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.view=new P1(H,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(H,D){if(!H.point)return;let W=h(H.point.x,0,H.bounds.width,0,100),q=h(H.point.y,0,H.bounds.height,100,0),[J,,,Q]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new w([J,W,q,Q],"hsv"),D)}onPointerDown_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerMove_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerUp_(H){this.handlePointerEvent_(H.data,{forceEmit:!0,last:!0})}onKeyDown_(H){if(i0(H.key))H.preventDefault();let[D,W,q,J]=this.value.rawValue.getComponents("hsv"),Q=Q5(!1),X=y(Q,s(H)),Z=y(Q,P5(H));if(X===0&&Z===0)return;this.value.setRawValue(new w([D,W+X,q+Z,J],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(H){let D=Q5(!1),W=y(D,s(H)),q=y(D,P5(H));if(W===0&&q===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class N1{constructor(H,D){if(this.value=D.value,this.viewProps=D.viewProps,this.hPaletteC_=new T1(H,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new B1(H,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=D.supportsAlpha?{palette:new j1(H,{value:this.value,viewProps:this.viewProps}),text:new A5(H,{parser:p,props:G.fromObject({pointerScale:0.01,keyScale:0.1,formatter:T(2)}),value:L(0,{constraint:new K5({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_)S5({primary:this.value,secondary:this.alphaIcs_.text.value,forward:(W)=>W.getComponents()[3],backward:(W,q)=>{let J=W.getComponents();return J[3]=q,new w(J,W.mode)}});this.textsC_=new R1(H,{colorType:D.colorType,value:this.value,viewProps:this.viewProps}),this.view=new X1(H,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:D.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}var $H=O("colsw");class V1{constructor(H,D){this.onValueChange_=this.onValueChange_.bind(this),D.value.emitter.on("change",this.onValueChange_),this.value=D.value,this.element=H.createElement("div"),this.element.classList.add($H()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add($H("sw")),this.element.appendChild(W),this.swatchElem_=W;let q=H.createElement("button");q.classList.add($H("b")),D.viewProps.bindDisabled(q),this.element.appendChild(q),this.buttonElement=q,this.update_()}update_(){let H=this.value.rawValue;this.swatchElem_.style.backgroundColor=cH(H)}onValueChange_(){this.update_()}}class _1{constructor(H,D){this.value=D.value,this.viewProps=D.viewProps,this.view=new V1(H,{value:this.value,viewProps:this.viewProps})}}class JH{constructor(H,D){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.foldable_=E5.create(D.expanded),this.swatchC_=new _1(H,{value:this.value,viewProps:this.viewProps});let W=this.swatchC_.view.buttonElement;W.addEventListener("blur",this.onButtonBlur_),W.addEventListener("click",this.onButtonClick_),this.textC_=new z5(H,{parser:D.parser,props:G.fromObject({formatter:D.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new W1(H,{foldable:this.foldable_,pickerLayout:D.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=D.pickerLayout==="popup"?new pH(H,{viewProps:this.viewProps}):null;let q=new N1(H,{colorType:D.colorType,supportsAlpha:D.supportsAlpha,value:this.value,viewProps:this.viewProps});if(q.view.allFocusableElements.forEach((J)=>{J.addEventListener("blur",this.onPopupChildBlur_),J.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=q,this.popC_)this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(q.view.element),S5({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:(J)=>J,backward:(J,Q)=>Q});else if(this.view.pickerElement)this.view.pickerElement.appendChild(this.pickerC_.view.element),vH(this.foldable_,this.view.pickerElement)}get textController(){return this.textC_}onButtonBlur_(H){if(!this.popC_)return;let D=this.view.element,W=P(H.relatedTarget);if(!W||!D.contains(W))this.popC_.shows.rawValue=!1}onButtonClick_(){if(this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded"))this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(H){if(!this.popC_)return;let D=this.popC_.view.element,W=$0(H);if(W&&D.contains(W))return;if(W&&W===this.swatchC_.view.buttonElement&&!_H(D.ownerDocument))return;this.popC_.shows.rawValue=!1}onPopupChildKeydown_(H){if(this.popC_){if(H.key==="Escape")this.popC_.shows.rawValue=!1}else if(this.view.pickerElement){if(H.key==="Escape")this.swatchC_.view.buttonElement.focus()}}}function OJ(H){return u(H.getComponents("rgb")).reduce((D,W)=>{return D<<8|Math.floor(W)&255},0)}function wJ(H){return H.getComponents("rgb").reduce((D,W,q)=>{let J=Math.floor(q===3?W*255:W)&255;return D<<8|J},0)>>>0}function hJ(H){return new w([H>>16&255,H>>8&255,H&255],"rgb")}function FJ(H){return new w([H>>24&255,H>>16&255,H>>8&255,h(H&255,0,255,0,1)],"rgb")}function LJ(H){if(typeof H!=="number")return w.black();return hJ(H)}function $J(H){if(typeof H!=="number")return w.black();return FJ(H)}function n5(H,D){if(typeof H!=="object"||F(H))return!1;return D in H&&typeof H[D]==="number"}function E1(H){return n5(H,"r")&&n5(H,"g")&&n5(H,"b")}function C1(H){return E1(H)&&n5(H,"a")}function x1(H){return E1(H)}function tH(H,D){if(H.mode!==D.mode)return!1;if(H.type!==D.type)return!1;let W=H.getComponents(),q=D.getComponents();for(let J=0;J<W.length;J++)if(W[J]!==q[J])return!1;return!0}function uD(H){return"a"in H?[H.r,H.g,H.b,H.a]:[H.r,H.g,H.b]}function SJ(H){let D=I1(H);return D?(W,q)=>{x5(W,D(q))}:null}function AJ(H){let D=H?wJ:OJ;return(W,q)=>{x5(W,D(q))}}function IJ(H,D,W){let J=M(D,W).toRgbaObject();H.writeProperty("r",J.r),H.writeProperty("g",J.g),H.writeProperty("b",J.b),H.writeProperty("a",J.a)}function MJ(H,D,W){let J=M(D,W).toRgbaObject();H.writeProperty("r",J.r),H.writeProperty("g",J.g),H.writeProperty("b",J.b)}function jJ(H,D){return(W,q)=>{if(H)IJ(W,q,D);else MJ(W,q,D)}}function kJ(H){var D;if((D=H===null||H===void 0?void 0:H.color)===null||D===void 0?void 0:D.alpha)return!0;return!1}function RJ(H){return H?(D)=>cH(D,"0x"):(D)=>iH(D,"0x")}function yJ(H){if("color"in H)return!0;if(H.view==="color")return!0;return!1}var TJ=j({id:"input-color-number",type:"input",accept:(H,D)=>{if(typeof H!=="number")return null;if(!yJ(D))return null;let W=nH(D);return W?{initialValue:H,params:Object.assign(Object.assign({},W),{supportsAlpha:kJ(D)})}:null},binding:{reader:(H)=>{return H.params.supportsAlpha?$J:LJ},equals:tH,writer:(H)=>{return AJ(H.params.supportsAlpha)}},controller:(H)=>{var D,W;return new JH(H.document,{colorType:"int",expanded:(D=H.params.expanded)!==null&&D!==void 0?D:!1,formatter:RJ(H.params.supportsAlpha),parser:f5("int"),pickerLayout:(W=H.params.picker)!==null&&W!==void 0?W:"popup",supportsAlpha:H.params.supportsAlpha,value:H.value,viewProps:H.viewProps})}});function PJ(H,D){if(!x1(H))return M(w.black(),D);if(D==="int"){let W=uD(H);return new w(W,"rgb")}if(D==="float"){let W=uD(H);return new qH(W,"rgb")}return M(w.black(),"int")}function BJ(H){return C1(H)}function NJ(H){return(D)=>{let W=PJ(D,H);return M(W,"int")}}function VJ(H,D){return(W)=>{if(H)return A1(W,D);return S1(W,D)}}var _J=j({id:"input-color-object",type:"input",accept:(H,D)=>{var W;if(!x1(H))return null;let q=nH(D);return q?{initialValue:H,params:Object.assign(Object.assign({},q),{colorType:(W=Z1(D))!==null&&W!==void 0?W:"int"})}:null},binding:{reader:(H)=>NJ(H.params.colorType),equals:tH,writer:(H)=>jJ(BJ(H.initialValue),H.params.colorType)},controller:(H)=>{var D,W;let q=C1(H.initialValue);return new JH(H.document,{colorType:H.params.colorType,expanded:(D=H.params.expanded)!==null&&D!==void 0?D:!1,formatter:VJ(q,H.params.colorType),parser:f5("int"),pickerLayout:(W=H.params.picker)!==null&&W!==void 0?W:"popup",supportsAlpha:q,value:H.value,viewProps:H.viewProps})}}),EJ=j({id:"input-color-string",type:"input",accept:(H,D)=>{if(typeof H!=="string")return null;if(D.view==="text")return null;let W=eq(H,Z1(D));if(!W)return null;let q=I1(W);if(!q)return null;let J=nH(D);return J?{initialValue:H,params:Object.assign(Object.assign({},J),{format:W,stringifier:q})}:null},binding:{reader:()=>HJ,equals:tH,writer:(H)=>{let D=SJ(H.params.format);if(!D)throw S.notBindable();return D}},controller:(H)=>{var D,W;return new JH(H.document,{colorType:H.params.format.type,expanded:(D=H.params.expanded)!==null&&D!==void 0?D:!1,formatter:H.params.stringifier,parser:f5("int"),pickerLayout:(W=H.params.picker)!==null&&W!==void 0?W:"popup",supportsAlpha:H.params.format.alpha,value:H.value,viewProps:H.viewProps})}});class QH{constructor(H){this.components=H.components,this.asm_=H.assembly}constrain(H){let D=this.asm_.toComponents(H).map((W,q)=>{var J,Q;return(Q=(J=this.components[q])===null||J===void 0?void 0:J.constrain(W))!==null&&Q!==void 0?Q:W});return this.asm_.fromComponents(D)}}var vD=O("pndtxt");class f1{constructor(H,D){this.textViews=D.textViews,this.element=H.createElement("div"),this.element.classList.add(vD()),this.textViews.forEach((W)=>{let q=H.createElement("div");q.classList.add(vD("a")),q.appendChild(W.element),this.element.appendChild(q)})}}function CJ(H,D,W){return new A5(H,{arrayPosition:W===0?"fst":W===D.axes.length-1?"lst":"mid",parser:D.parser,props:D.axes[W].textProps,value:L(0,{constraint:D.axes[W].constraint}),viewProps:D.viewProps})}class XH{constructor(H,D){this.value=D.value,this.viewProps=D.viewProps,this.acs_=D.axes.map((W,q)=>CJ(H,D,q)),this.acs_.forEach((W,q)=>{S5({primary:this.value,secondary:W.value,forward:(J)=>D.assembly.toComponents(J)[q],backward:(J,Q)=>{let X=D.assembly.toComponents(J);return X[q]=Q,D.assembly.fromComponents(X)}})}),this.view=new f1(H,{textViews:this.acs_.map((W)=>W.view)})}get textControllers(){return this.acs_}}class b1 extends U5{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(H){this.controller.valueController.sliderController.props.set("max",H)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(H){this.controller.valueController.sliderController.props.set("min",H)}}function xJ(H,D){let W=[],q=Z0(H,D);if(q)W.push(q);let J=Y0(H);if(J)W.push(J);let Q=gH(H.options);if(Q)W.push(Q);return new L5(W)}var fJ=j({id:"input-number",type:"input",accept:(H,D)=>{if(typeof H!=="number")return null;let W=$(D,(q)=>Object.assign(Object.assign({},z0(q)),{options:q.optional.custom(C5),readonly:q.optional.constant(!1)}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>q0,constraint:(H)=>xJ(H.params,H.initialValue),writer:(H)=>x5},controller:(H)=>{let{value:D,constraint:W}=H,q=W&&l5(W,$5);if(q)return new n(H.document,{props:new G({options:q.values.value("options")}),value:D,viewProps:H.viewProps});let J=U0(H.params,D.rawValue),Q=W&&l5(W,K5);if(Q)return new B5(H.document,Object.assign(Object.assign({},o0(Object.assign(Object.assign({},J),{keyScale:L(J.keyScale),max:Q.values.value("max"),min:Q.values.value("min")}))),{parser:p,value:D,viewProps:H.viewProps}));return new A5(H.document,{parser:p,props:G.fromObject(J),value:D,viewProps:H.viewProps})},api(H){if(typeof H.controller.value.rawValue!=="number")return null;if(H.controller.valueController instanceof B5)return new b1(H.controller);if(H.controller.valueController instanceof n)return new DH(H.controller);return null}});class g{constructor(H=0,D=0){this.x=H,this.y=D}getComponents(){return[this.x,this.y]}static isObject(H){if(F(H))return!1;let{x:D,y:W}=H;if(typeof D!=="number"||typeof W!=="number")return!1;return!0}static equals(H,D){return H.x===D.x&&H.y===D.y}toObject(){return{x:this.x,y:this.y}}}var u1={toComponents:(H)=>H.getComponents(),fromComponents:(H)=>new g(...H)},Y5=O("p2d");class v1{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(Y5()),D.viewProps.bindClassModifiers(this.element),m(D.expanded,w5(this.element,Y5(void 0,"expanded")));let W=H.createElement("div");W.classList.add(Y5("h")),this.element.appendChild(W);let q=H.createElement("button");q.classList.add(Y5("b")),q.appendChild(o5(H,"p2dpad")),D.viewProps.bindDisabled(q),W.appendChild(q),this.buttonElement=q;let J=H.createElement("div");if(J.classList.add(Y5("t")),W.appendChild(J),this.textElement=J,D.pickerLayout==="inline"){let Q=H.createElement("div");Q.classList.add(Y5("p")),this.element.appendChild(Q),this.pickerElement=Q}else this.pickerElement=null}}var t=O("p2dp");class d1{constructor(H,D){if(this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=D.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=H.createElement("div"),this.element.classList.add(t()),D.layout==="popup")this.element.classList.add(t(void 0,"p"));D.viewProps.bindClassModifiers(this.element);let W=H.createElement("div");W.classList.add(t("p")),D.viewProps.bindTabIndex(W),this.element.appendChild(W),this.padElement=W;let q=H.createElementNS(f,"svg");q.classList.add(t("g")),this.padElement.appendChild(q),this.svgElem_=q;let J=H.createElementNS(f,"line");J.classList.add(t("ax")),J.setAttributeNS(null,"x1","0"),J.setAttributeNS(null,"y1","50%"),J.setAttributeNS(null,"x2","100%"),J.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(J);let Q=H.createElementNS(f,"line");Q.classList.add(t("ax")),Q.setAttributeNS(null,"x1","50%"),Q.setAttributeNS(null,"y1","0"),Q.setAttributeNS(null,"x2","50%"),Q.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(Q);let X=H.createElementNS(f,"line");X.classList.add(t("l")),X.setAttributeNS(null,"x1","50%"),X.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(X),this.lineElem_=X;let Z=H.createElement("div");Z.classList.add(t("m")),this.padElement.appendChild(Z),this.markerElem_=Z,D.value.emitter.on("change",this.onValueChange_),this.value=D.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){let[H,D]=this.value.rawValue.getComponents(),W=this.props_.get("max"),q=h(H,-W,+W,0,100),J=h(D,-W,+W,0,100),Q=this.props_.get("invertsY")?100-J:J;this.lineElem_.setAttributeNS(null,"x2",`${q}%`),this.lineElem_.setAttributeNS(null,"y2",`${Q}%`),this.markerElem_.style.left=`${q}%`,this.markerElem_.style.top=`${Q}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function dD(H,D,W){return[y(D[0],s(H)),y(D[1],P5(H))*(W?1:-1)]}class m1{constructor(H,D){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=D.props,this.value=D.value,this.viewProps=D.viewProps,this.view=new d1(H,{layout:D.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new e(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(H,D){if(!H.point)return;let W=this.props.get("max"),q=h(H.point.x,0,H.bounds.width,-W,+W),J=h(this.props.get("invertsY")?H.bounds.height-H.point.y:H.point.y,0,H.bounds.height,-W,+W);this.value.setRawValue(new g(q,J),D)}onPointerDown_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerMove_(H){this.handlePointerEvent_(H.data,{forceEmit:!1,last:!1})}onPointerUp_(H){this.handlePointerEvent_(H.data,{forceEmit:!0,last:!0})}onPadKeyDown_(H){if(i0(H.key))H.preventDefault();let[D,W]=dD(H,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));if(D===0&&W===0)return;this.value.setRawValue(new g(this.value.rawValue.x+D,this.value.rawValue.y+W),{forceEmit:!1,last:!1})}onPadKeyUp_(H){let[D,W]=dD(H,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));if(D===0&&W===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class g1{constructor(H,D){var W,q;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=D.value,this.viewProps=D.viewProps,this.foldable_=E5.create(D.expanded),this.popC_=D.pickerLayout==="popup"?new pH(H,{viewProps:this.viewProps}):null;let J=new m1(H,{layout:D.pickerLayout,props:new G({invertsY:L(D.invertsY),max:L(D.max),xKeyScale:D.axes[0].textProps.value("keyScale"),yKeyScale:D.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});if(J.view.allFocusableElements.forEach((Q)=>{Q.addEventListener("blur",this.onPopupChildBlur_),Q.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=J,this.textC_=new XH(H,{assembly:u1,axes:D.axes,parser:D.parser,value:this.value,viewProps:this.viewProps}),this.view=new v1(H,{expanded:this.foldable_.value("expanded"),pickerLayout:D.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(W=this.view.buttonElement)===null||W===void 0||W.addEventListener("blur",this.onPadButtonBlur_),(q=this.view.buttonElement)===null||q===void 0||q.addEventListener("click",this.onPadButtonClick_),this.popC_)this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),S5({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:(Q)=>Q,backward:(Q,X)=>X});else if(this.view.pickerElement)this.view.pickerElement.appendChild(this.pickerC_.view.element),vH(this.foldable_,this.view.pickerElement)}get textController(){return this.textC_}onPadButtonBlur_(H){if(!this.popC_)return;let D=this.view.element,W=P(H.relatedTarget);if(!W||!D.contains(W))this.popC_.shows.rawValue=!1}onPadButtonClick_(){if(this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded"))this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(H){if(!this.popC_)return;let D=this.popC_.view.element,W=$0(H);if(W&&D.contains(W))return;if(W&&W===this.view.buttonElement&&!_H(D.ownerDocument))return;this.popC_.shows.rawValue=!1}onPopupChildKeydown_(H){if(this.popC_){if(H.key==="Escape")this.popC_.shows.rawValue=!1}else if(this.view.pickerElement){if(H.key==="Escape")this.view.buttonElement.focus()}}}function bJ(H){return g.isObject(H)?new g(H.x,H.y):new g}function uJ(H,D){H.writeProperty("x",D.x),H.writeProperty("y",D.y)}function vJ(H,D){return new QH({assembly:u1,components:[d(Object.assign(Object.assign({},H),H.x),D.x),d(Object.assign(Object.assign({},H),H.y),D.y)]})}function mD(H,D){var W,q;if(!F(H.min)||!F(H.max))return Math.max(Math.abs((W=H.min)!==null&&W!==void 0?W:0),Math.abs((q=H.max)!==null&&q!==void 0?q:0));let J=Q0(H);return Math.max(Math.abs(J)*10,Math.abs(D)*10)}function dJ(H,D){var W,q;let J=mD(J5(H,(W=H.x)!==null&&W!==void 0?W:{}),D.x),Q=mD(J5(H,(q=H.y)!==null&&q!==void 0?q:{}),D.y);return Math.max(J,Q)}function mJ(H){if(!("y"in H))return!1;let D=H.y;if(!D)return!1;return"inverted"in D?!!D.inverted:!1}var gJ=j({id:"input-point2d",type:"input",accept:(H,D)=>{if(!g.isObject(H))return null;let W=$(D,(q)=>Object.assign(Object.assign({},N5(q)),{expanded:q.optional.boolean,picker:q.optional.custom(e0),readonly:q.optional.constant(!1),x:q.optional.custom(r),y:q.optional.object(Object.assign(Object.assign({},N5(q)),{inverted:q.optional.boolean}))}));return W?{initialValue:H,params:W}:null},binding:{reader:()=>bJ,constraint:(H)=>vJ(H.params,H.initialValue),equals:g.equals,writer:()=>uJ},controller:(H)=>{var D,W;let{document:q,value:J,constraint:Q}=H,X=[H.params.x,H.params.y];return new g1(q,{axes:J.rawValue.getComponents().map((Z,z)=>{var Y;return VH({constraint:Q.components[z],initialValue:Z,params:J5(H.params,(Y=X[z])!==null&&Y!==void 0?Y:{})})}),expanded:(D=H.params.expanded)!==null&&D!==void 0?D:!1,invertsY:mJ(H.params),max:dJ(H.params,J.rawValue),parser:p,pickerLayout:(W=H.params.picker)!==null&&W!==void 0?W:"popup",value:J,viewProps:H.viewProps})}});class W5{constructor(H=0,D=0,W=0){this.x=H,this.y=D,this.z=W}getComponents(){return[this.x,this.y,this.z]}static isObject(H){if(F(H))return!1;let{x:D,y:W,z:q}=H;if(typeof D!=="number"||typeof W!=="number"||typeof q!=="number")return!1;return!0}static equals(H,D){return H.x===D.x&&H.y===D.y&&H.z===D.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}var p1={toComponents:(H)=>H.getComponents(),fromComponents:(H)=>new W5(...H)};function pJ(H){return W5.isObject(H)?new W5(H.x,H.y,H.z):new W5}function nJ(H,D){H.writeProperty("x",D.x),H.writeProperty("y",D.y),H.writeProperty("z",D.z)}function sJ(H,D){return new QH({assembly:p1,components:[d(Object.assign(Object.assign({},H),H.x),D.x),d(Object.assign(Object.assign({},H),H.y),D.y),d(Object.assign(Object.assign({},H),H.z),D.z)]})}var iJ=j({id:"input-point3d",type:"input",accept:(H,D)=>{if(!W5.isObject(H))return null;let W=$(D,(q)=>Object.assign(Object.assign({},N5(q)),{readonly:q.optional.constant(!1),x:q.optional.custom(r),y:q.optional.custom(r),z:q.optional.custom(r)}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>pJ,constraint:(H)=>sJ(H.params,H.initialValue),equals:W5.equals,writer:(H)=>nJ},controller:(H)=>{let{value:D,constraint:W}=H,q=[H.params.x,H.params.y,H.params.z];return new XH(H.document,{assembly:p1,axes:D.rawValue.getComponents().map((J,Q)=>{var X;return VH({constraint:W.components[Q],initialValue:J,params:J5(H.params,(X=q[Q])!==null&&X!==void 0?X:{})})}),parser:p,value:D,viewProps:H.viewProps})}});class q5{constructor(H=0,D=0,W=0,q=0){this.x=H,this.y=D,this.z=W,this.w=q}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(H){if(F(H))return!1;let{x:D,y:W,z:q,w:J}=H;if(typeof D!=="number"||typeof W!=="number"||typeof q!=="number"||typeof J!=="number")return!1;return!0}static equals(H,D){return H.x===D.x&&H.y===D.y&&H.z===D.z&&H.w===D.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}var n1={toComponents:(H)=>H.getComponents(),fromComponents:(H)=>new q5(...H)};function cJ(H){return q5.isObject(H)?new q5(H.x,H.y,H.z,H.w):new q5}function tJ(H,D){H.writeProperty("x",D.x),H.writeProperty("y",D.y),H.writeProperty("z",D.z),H.writeProperty("w",D.w)}function lJ(H,D){return new QH({assembly:n1,components:[d(Object.assign(Object.assign({},H),H.x),D.x),d(Object.assign(Object.assign({},H),H.y),D.y),d(Object.assign(Object.assign({},H),H.z),D.z),d(Object.assign(Object.assign({},H),H.w),D.w)]})}var rJ=j({id:"input-point4d",type:"input",accept:(H,D)=>{if(!q5.isObject(H))return null;let W=$(D,(q)=>Object.assign(Object.assign({},N5(q)),{readonly:q.optional.constant(!1),w:q.optional.custom(r),x:q.optional.custom(r),y:q.optional.custom(r),z:q.optional.custom(r)}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>cJ,constraint:(H)=>lJ(H.params,H.initialValue),equals:q5.equals,writer:(H)=>tJ},controller:(H)=>{let{value:D,constraint:W}=H,q=[H.params.x,H.params.y,H.params.z,H.params.w];return new XH(H.document,{assembly:n1,axes:D.rawValue.getComponents().map((J,Q)=>{var X;return VH({constraint:W.components[Q],initialValue:J,params:J5(H.params,(X=q[Q])!==null&&X!==void 0?X:{})})}),parser:p,value:D,viewProps:H.viewProps})}});function oJ(H){let D=[],W=gH(H.options);if(W)D.push(W);return new L5(D)}var aJ=j({id:"input-string",type:"input",accept:(H,D)=>{if(typeof H!=="string")return null;let W=$(D,(q)=>({readonly:q.optional.constant(!1),options:q.optional.custom(C5)}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>s0,constraint:(H)=>oJ(H.params),writer:(H)=>x5},controller:(H)=>{let{document:D,value:W,constraint:q}=H,J=q&&l5(q,$5);if(J)return new n(D,{props:new G({options:J.values.value("options")}),value:W,viewProps:H.viewProps});return new z5(D,{parser:(Q)=>Q,props:G.fromObject({formatter:kH}),value:W,viewProps:H.viewProps})},api(H){if(typeof H.controller.value.rawValue!=="string")return null;if(H.controller.valueController instanceof n)return new DH(H.controller);return null}}),b5={monitor:{defaultInterval:200,defaultRows:3}},gD=O("mll");class s1{constructor(H,D){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=D.formatter,this.element=H.createElement("div"),this.element.classList.add(gD()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("textarea");W.classList.add(gD("i")),W.style.height=`calc(var(${a0("containerUnitSize")}) * ${D.rows})`,W.readOnly=!0,D.viewProps.bindDisabled(W),this.element.appendChild(W),this.textareaElem_=W,D.value.emitter.on("change",this.onValueUpdate_),this.value=D.value,this.update_()}update_(){let H=this.textareaElem_,D=H.scrollTop===H.scrollHeight-H.clientHeight,W=[];if(this.value.rawValue.forEach((q)=>{if(q!==void 0)W.push(this.formatter_(q))}),H.textContent=W.join(`
`),D)H.scrollTop=H.scrollHeight}onValueUpdate_(){this.update_()}}class ZH{constructor(H,D){this.value=D.value,this.viewProps=D.viewProps,this.view=new s1(H,{formatter:D.formatter,rows:D.rows,value:this.value,viewProps:this.viewProps})}}var pD=O("sgl");class i1{constructor(H,D){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=D.formatter,this.element=H.createElement("div"),this.element.classList.add(pD()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("input");W.classList.add(pD("i")),W.readOnly=!0,W.type="text",D.viewProps.bindDisabled(W),this.element.appendChild(W),this.inputElement=W,D.value.emitter.on("change",this.onValueUpdate_),this.value=D.value,this.update_()}update_(){let H=this.value.rawValue,D=H[H.length-1];this.inputElement.value=D!==void 0?this.formatter_(D):""}onValueUpdate_(){this.update_()}}class YH{constructor(H,D){this.value=D.value,this.viewProps=D.viewProps,this.view=new i1(H,{formatter:D.formatter,value:this.value,viewProps:this.viewProps})}}var eJ=j({id:"monitor-bool",type:"monitor",accept:(H,D)=>{if(typeof H!=="boolean")return null;let W=$(D,(q)=>({readonly:q.required.constant(!0),rows:q.optional.number}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>n0},controller:(H)=>{var D;if(H.value.rawValue.length===1)return new YH(H.document,{formatter:ED,value:H.value,viewProps:H.viewProps});return new ZH(H.document,{formatter:ED,rows:(D=H.params.rows)!==null&&D!==void 0?D:b5.monitor.defaultRows,value:H.value,viewProps:H.viewProps})}});class c1 extends U5{get max(){return this.controller.valueController.props.get("max")}set max(H){this.controller.valueController.props.set("max",H)}get min(){return this.controller.valueController.props.get("min")}set min(H){this.controller.valueController.props.set("min",H)}}var l=O("grl");class t1{constructor(H,D){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=H.createElement("div"),this.element.classList.add(l()),D.viewProps.bindClassModifiers(this.element),this.formatter_=D.formatter,this.props_=D.props,this.cursor_=D.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);let W=H.createElementNS(f,"svg");W.classList.add(l("g")),W.style.height=`calc(var(${a0("containerUnitSize")}) * ${D.rows})`,this.element.appendChild(W),this.svgElem_=W;let q=H.createElementNS(f,"polyline");this.svgElem_.appendChild(q),this.lineElem_=q;let J=H.createElement("div");J.classList.add(l("t"),O("tt")()),this.element.appendChild(J),this.tooltipElem_=J,D.value.emitter.on("change",this.onValueUpdate_),this.value=D.value,this.update_()}get graphElement(){return this.svgElem_}update_(){let{clientWidth:H,clientHeight:D}=this.element,W=this.value.rawValue.length-1,q=this.props_.get("min"),J=this.props_.get("max"),Q=[];this.value.rawValue.forEach((U,K)=>{if(U===void 0)return;let E=h(K,0,W,0,H),R=h(U,q,J,D,0);Q.push([E,R].join(","))}),this.lineElem_.setAttributeNS(null,"points",Q.join(" "));let X=this.tooltipElem_,Z=this.value.rawValue[this.cursor_.rawValue];if(Z===void 0){X.classList.remove(l("t","a"));return}let z=h(this.cursor_.rawValue,0,W,0,H),Y=h(Z,q,J,D,0);if(X.style.left=`${z}px`,X.style.top=`${Y}px`,X.textContent=`${this.formatter_(Z)}`,!X.classList.contains(l("t","a")))X.classList.add(l("t","a"),l("t","in")),i5(X),X.classList.remove(l("t","in"))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class lH{constructor(H,D){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=D.props,this.value=D.value,this.viewProps=D.viewProps,this.cursor_=L(-1),this.view=new t1(H,{cursor:this.cursor_,formatter:D.formatter,rows:D.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!_H(H))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{let W=new e(this.view.element);W.emitter.on("down",this.onGraphPointerDown_),W.emitter.on("move",this.onGraphPointerMove_),W.emitter.on("up",this.onGraphPointerUp_)}}importProps(H){return B(H,null,(D)=>({max:D.required.number,min:D.required.number}),(D)=>{return this.props.set("max",D.max),this.props.set("min",D.min),!0})}exportProps(){return N(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(H){let{clientWidth:D}=this.view.element;this.cursor_.rawValue=Math.floor(h(H.offsetX,0,D,0,this.value.rawValue.length))}onGraphPointerDown_(H){this.onGraphPointerMove_(H)}onGraphPointerMove_(H){if(!H.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(h(H.data.point.x,0,H.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function RH(H){return!F(H.format)?H.format:T(2)}function HQ(H){var D;if(H.value.rawValue.length===1)return new YH(H.document,{formatter:RH(H.params),value:H.value,viewProps:H.viewProps});return new ZH(H.document,{formatter:RH(H.params),rows:(D=H.params.rows)!==null&&D!==void 0?D:b5.monitor.defaultRows,value:H.value,viewProps:H.viewProps})}function DQ(H){var D,W,q;return new lH(H.document,{formatter:RH(H.params),rows:(D=H.params.rows)!==null&&D!==void 0?D:b5.monitor.defaultRows,props:G.fromObject({max:(W=H.params.max)!==null&&W!==void 0?W:100,min:(q=H.params.min)!==null&&q!==void 0?q:0}),value:H.value,viewProps:H.viewProps})}function nD(H){return H.view==="graph"}var WQ=j({id:"monitor-number",type:"monitor",accept:(H,D)=>{if(typeof H!=="number")return null;let W=$(D,(q)=>({format:q.optional.function,max:q.optional.number,min:q.optional.number,readonly:q.required.constant(!0),rows:q.optional.number,view:q.optional.string}));return W?{initialValue:H,params:W}:null},binding:{defaultBufferSize:(H)=>nD(H)?64:1,reader:(H)=>q0},controller:(H)=>{if(nD(H.params))return DQ(H);return HQ(H)},api:(H)=>{if(H.controller.valueController instanceof lH)return new c1(H.controller);return null}}),qQ=j({id:"monitor-string",type:"monitor",accept:(H,D)=>{if(typeof H!=="string")return null;let W=$(D,(q)=>({multiline:q.optional.boolean,readonly:q.required.constant(!0),rows:q.optional.number}));return W?{initialValue:H,params:W}:null},binding:{reader:(H)=>s0},controller:(H)=>{var D;let W=H.value;if(W.rawValue.length>1||H.params.multiline)return new ZH(H.document,{formatter:kH,rows:(D=H.params.rows)!==null&&D!==void 0?D:b5.monitor.defaultRows,value:W,viewProps:H.viewProps});return new YH(H.document,{formatter:kH,value:W,viewProps:H.viewProps})}});class l1{constructor(){this.map_=new Map}get(H){var D;return(D=this.map_.get(H))!==null&&D!==void 0?D:null}has(H){return this.map_.has(H)}add(H,D){return this.map_.set(H,D),H.viewProps.handleDispose(()=>{this.map_.delete(H)}),D}}class r1{constructor(H){this.target=H.target,this.reader_=H.reader,this.writer_=H.writer}read(){return this.reader_(this.target.read())}write(H){this.writer_(this.target,H)}inject(H){this.write(this.reader_(H))}}function JQ(H,D){var W;let q=H.accept(D.target.read(),D.params);if(F(q))return null;let J={target:D.target,initialValue:q.initialValue,params:q.params},Q=$(D.params,(K)=>({disabled:K.optional.boolean,hidden:K.optional.boolean,label:K.optional.string,tag:K.optional.string})),X=H.binding.reader(J),Z=H.binding.constraint?H.binding.constraint(J):void 0,z=new r1({reader:X,target:D.target,writer:H.binding.writer(J)}),Y=new w0(L(X(q.initialValue),{constraint:Z,equals:H.binding.equals}),z),U=H.controller({constraint:Z,document:D.document,initialValue:q.initialValue,params:q.params,value:Y,viewProps:i.create({disabled:Q===null||Q===void 0?void 0:Q.disabled,hidden:Q===null||Q===void 0?void 0:Q.hidden})});return new S0(D.document,{blade:F5(),props:G.fromObject({label:"label"in D.params?(W=Q===null||Q===void 0?void 0:Q.label)!==null&&W!==void 0?W:null:D.target.key}),tag:Q===null||Q===void 0?void 0:Q.tag,value:Y,valueController:U})}class o1{constructor(H){this.target=H.target,this.reader_=H.reader}read(){return this.reader_(this.target.read())}}function QQ(H,D){return D===0?new v0:new d0(H,D!==null&&D!==void 0?D:b5.monitor.defaultInterval)}function XQ(H,D){var W,q,J;let Q=H.accept(D.target.read(),D.params);if(F(Q))return null;let X={target:D.target,initialValue:Q.initialValue,params:Q.params},Z=$(D.params,(E)=>({bufferSize:E.optional.number,disabled:E.optional.boolean,hidden:E.optional.boolean,interval:E.optional.number,label:E.optional.string})),z=H.binding.reader(X),Y=(q=(W=Z===null||Z===void 0?void 0:Z.bufferSize)!==null&&W!==void 0?W:H.binding.defaultBufferSize&&H.binding.defaultBufferSize(Q.params))!==null&&q!==void 0?q:1,U=new I0({binding:new o1({reader:z,target:D.target}),bufferSize:Y,ticker:QQ(D.document,Z===null||Z===void 0?void 0:Z.interval)}),K=H.controller({document:D.document,params:Q.params,value:U,viewProps:i.create({disabled:Z===null||Z===void 0?void 0:Z.disabled,hidden:Z===null||Z===void 0?void 0:Z.hidden})});return K.viewProps.bindDisabled(U.ticker),K.viewProps.handleDispose(()=>{U.ticker.dispose()}),new M0(D.document,{blade:F5(),props:G.fromObject({label:"label"in D.params?(J=Z===null||Z===void 0?void 0:Z.label)!==null&&J!==void 0?J:null:D.target.key}),value:U,valueController:K})}class a1{constructor(H){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=H}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(H,D){if(!Tq(D.core))throw S.notCompatible(H,D.id);if(D.type==="blade")this.pluginsMap_.blades.unshift(D);else if(D.type==="input")this.pluginsMap_.inputs.unshift(D);else if(D.type==="monitor")this.pluginsMap_.monitors.unshift(D)}createInput_(H,D,W){return this.pluginsMap_.inputs.reduce((q,J)=>q!==null&&q!==void 0?q:JQ(J,{document:H,target:D,params:W}),null)}createMonitor_(H,D,W){return this.pluginsMap_.monitors.reduce((q,J)=>q!==null&&q!==void 0?q:XQ(J,{document:H,params:W,target:D}),null)}createBinding(H,D,W){let q=D.read();if(F(q))throw new S({context:{key:D.key},type:"nomatchingcontroller"});let J=this.createInput_(H,D,W);if(J)return J;let Q=this.createMonitor_(H,D,W);if(Q)return Q;throw new S({context:{key:D.key},type:"nomatchingcontroller"})}createBlade(H,D){let W=this.pluginsMap_.blades.reduce((q,J)=>q!==null&&q!==void 0?q:Iq(J,{document:H,params:D}),null);if(!W)throw new S({type:"nomatchingview",context:{params:D}});return W}createInputBindingApi_(H){let D=this.pluginsMap_.inputs.reduce((W,q)=>{var J,Q;if(W)return W;return(Q=(J=q.api)===null||J===void 0?void 0:J.call(q,{controller:H}))!==null&&Q!==void 0?Q:null},null);return this.apiCache_.add(H,D!==null&&D!==void 0?D:new U5(H))}createMonitorBindingApi_(H){let D=this.pluginsMap_.monitors.reduce((W,q)=>{var J,Q;if(W)return W;return(Q=(J=q.api)===null||J===void 0?void 0:J.call(q,{controller:H}))!==null&&Q!==void 0?Q:null},null);return this.apiCache_.add(H,D!==null&&D!==void 0?D:new U5(H))}createBindingApi(H){if(this.apiCache_.has(H))return this.apiCache_.get(H);if(qq(H))return this.createInputBindingApi_(H);if(Yq(H))return this.createMonitorBindingApi_(H);throw S.shouldNeverHappen()}createApi(H){if(this.apiCache_.has(H))return this.apiCache_.get(H);if(Wq(H))return this.createBindingApi(H);let D=this.pluginsMap_.blades.reduce((W,q)=>W!==null&&W!==void 0?W:q.api({controller:H,pool:this}),null);if(!D)throw S.shouldNeverHappen();return this.apiCache_.add(H,D)}}var ZQ=new l1;function YQ(){let H=new a1(ZQ);return[gJ,iJ,rJ,aJ,fJ,EJ,_J,TJ,Bq,eJ,qQ,WQ,zq,Sq,u0].forEach((D)=>{H.register("core",D)}),H}class e1 extends a{constructor(H){super(H);this.emitter_=new A,this.controller.value.emitter.on("change",(D)=>{this.emitter_.emit("change",new O5(this,D.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(H){this.controller.labelController.props.set("label",H)}get options(){return this.controller.valueController.props.get("options")}set options(H){this.controller.valueController.props.set("options",H)}get value(){return this.controller.value.rawValue}set value(H){this.controller.value.rawValue=H}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}}class HW extends a{}class DW extends a{constructor(H){super(H);this.emitter_=new A,this.controller.value.emitter.on("change",(D)=>{this.emitter_.emit("change",new O5(this,D.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(H){this.controller.labelController.props.set("label",H)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(H){this.controller.valueController.sliderController.props.set("max",H)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(H){this.controller.valueController.sliderController.props.set("min",H)}get value(){return this.controller.value.rawValue}set value(H){this.controller.value.rawValue=H}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}}class WW extends a{constructor(H){super(H);this.emitter_=new A,this.controller.value.emitter.on("change",(D)=>{this.emitter_.emit("change",new O5(this,D.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(H){this.controller.labelController.props.set("label",H)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(H){this.controller.valueController.props.set("formatter",H)}get value(){return this.controller.value.rawValue}set value(H){this.controller.value.rawValue=H}on(H,D){let W=D.bind(this);return this.emitter_.on(H,(q)=>{W(q)},{key:D}),this}off(H,D){return this.emitter_.off(H,D),this}}var UQ=function(){return{id:"list",type:"blade",core:h5,accept(H){let D=$(H,(W)=>({options:W.required.custom(C5),value:W.required.raw,view:W.required.constant("list"),label:W.optional.string}));return D?{params:D}:null},controller(H){let D=new $5(mH(H.params.options)),W=L(H.params.value,{constraint:D}),q=new n(H.document,{props:new G({options:D.values.value("options")}),value:W,viewProps:H.viewProps});return new o(H.document,{blade:H.blade,props:G.fromObject({label:H.params.label}),value:W,valueController:q})},api(H){if(!(H.controller instanceof o))return null;if(!(H.controller.valueController instanceof n))return null;return new e1(H.controller)}}}();class qW extends dH{constructor(H,D){super(H,D)}get element(){return this.controller.view.element}}class JW extends c5{constructor(H,D){super(H,{expanded:D.expanded,blade:D.blade,props:D.props,root:!0,viewProps:D.viewProps})}}var sD=O("spr");class QW{constructor(H,D){this.element=H.createElement("div"),this.element.classList.add(sD()),D.viewProps.bindClassModifiers(this.element);let W=H.createElement("hr");W.classList.add(sD("r")),this.element.appendChild(W)}}class yH extends _5{constructor(H,D){super(Object.assign(Object.assign({},D),{view:new QW(H,{viewProps:D.viewProps})}))}}var zQ={id:"separator",type:"blade",core:h5,accept(H){let D=$(H,(W)=>({view:W.required.constant("separator")}));return D?{params:D}:null},controller(H){return new yH(H.document,{blade:H.blade,viewProps:H.viewProps})},api(H){if(!(H.controller instanceof yH))return null;return new HW(H.controller)}},GQ={id:"slider",type:"blade",core:h5,accept(H){let D=$(H,(W)=>({max:W.required.number,min:W.required.number,view:W.required.constant("slider"),format:W.optional.function,label:W.optional.string,value:W.optional.number}));return D?{params:D}:null},controller(H){var D,W;let q=(D=H.params.value)!==null&&D!==void 0?D:0,J=new K5({max:H.params.max,min:H.params.min}),Q=L(q,{constraint:J}),X=new B5(H.document,Object.assign(Object.assign({},o0({formatter:(W=H.params.format)!==null&&W!==void 0?W:mW,keyScale:L(1),max:J.values.value("max"),min:J.values.value("min"),pointerScale:X0(H.params,q)})),{parser:p,value:Q,viewProps:H.viewProps}));return new o(H.document,{blade:H.blade,props:G.fromObject({label:H.params.label}),value:Q,valueController:X})},api(H){if(!(H.controller instanceof o))return null;if(!(H.controller.valueController instanceof B5))return null;return new DW(H.controller)}},KQ=function(){return{id:"text",type:"blade",core:h5,accept(H){let D=$(H,(W)=>({parse:W.required.function,value:W.required.raw,view:W.required.constant("text"),format:W.optional.function,label:W.optional.string}));return D?{params:D}:null},controller(H){var D;let W=L(H.params.value),q=new z5(H.document,{parser:H.params.parse,props:G.fromObject({formatter:(D=H.params.format)!==null&&D!==void 0?D:(J)=>String(J)}),value:W,viewProps:H.viewProps});return new o(H.document,{blade:H.blade,props:G.fromObject({label:H.params.label}),value:W,valueController:q})},api(H){if(!(H.controller instanceof o))return null;if(!(H.controller.valueController instanceof z5))return null;return new WW(H.controller)}}}();function OQ(H){let D=H.createElement("div");if(D.classList.add(O("dfw")()),H.body)H.body.appendChild(D);return D}function wQ(H,D,W){if(H.querySelector(`style[data-tp-style=${D}]`))return;let q=H.createElement("style");q.dataset.tpStyle=D,q.textContent=W,H.head.appendChild(q)}class rH extends qW{constructor(H){var D,W;let q=H!==null&&H!==void 0?H:{},J=(D=q.document)!==null&&D!==void 0?D:lW(),Q=YQ(),X=new JW(J,{expanded:q.expanded,blade:F5(),props:G.fromObject({title:q.title}),viewProps:i.create()});super(X,Q);this.pool_=Q,this.containerElem_=(W=q.container)!==null&&W!==void 0?W:OQ(J),this.containerElem_.appendChild(this.element),this.doc_=J,this.usesDefaultWrapper_=!q.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw S.alreadyDisposed();return this.doc_}dispose(){let H=this.containerElem_;if(!H)throw S.alreadyDisposed();if(this.usesDefaultWrapper_){let D=H.parentElement;if(D)D.removeChild(H)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(H){if(H.css)wQ(this.document,`plugin-${H.id}`,H.css);("plugin"in H?[H.plugin]:("plugins"in H)?H.plugins:[]).forEach((W)=>{this.pool_.register(H.id,W)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:".tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:\"\";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:\"\";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}",plugins:[UQ,zQ,GQ,u0,KQ]})}}var MQ=new uH("4.0.5");var u5={cssVariables:{"--bg":"#0a0e14","--bg-elevated":"#0f1419","--muted":"#1a2332","--text":"#e6edf3","--text-secondary":"#8b949e","--accent":"#58d5ff","--accent-2":"#42a5cc","--border":"#21262d","--border-hover":"#30363d","--success":"#3fb950","--error":"#f85149"},tweakpane:{"--tp-base-background-color":"var(--bg-elevated)","--tp-base-shadow-color":"rgba(0, 0, 0, 0.4)","--tp-button-background-color":"var(--muted)","--tp-button-background-color-active":"var(--accent-2)","--tp-button-background-color-focus":"var(--accent)","--tp-button-background-color-hover":"var(--border-hover)","--tp-button-foreground-color":"var(--text)","--tp-container-background-color":"rgba(15, 20, 25, 0.6)","--tp-container-background-color-active":"rgba(15, 20, 25, 0.8)","--tp-container-background-color-focus":"rgba(15, 20, 25, 0.9)","--tp-container-background-color-hover":"rgba(15, 20, 25, 0.7)","--tp-container-foreground-color":"var(--text)","--tp-groove-foreground-color":"var(--border)","--tp-input-background-color":"rgba(26, 35, 50, 0.5)","--tp-input-background-color-active":"rgba(26, 35, 50, 0.7)","--tp-input-background-color-focus":"rgba(26, 35, 50, 0.8)","--tp-input-background-color-hover":"rgba(26, 35, 50, 0.6)","--tp-input-foreground-color":"var(--text)","--tp-label-foreground-color":"var(--text-secondary)","--tp-monitor-background-color":"rgba(26, 35, 50, 0.5)","--tp-monitor-foreground-color":"var(--text)"}};function v5(){let H=document.createElement("style");H.id="hypertool-theme";let D=Object.entries({...u5.cssVariables,...u5.tweakpane}).map(([W,q])=>`  ${W}: ${q};`).join(`
`);H.textContent=`
  body {
   margin: 0;
   padding: 0;
  }
  
:root {
${D}
}

/* Tweakpane container styling */
.tp-dfwv {
  width: 300px !important;
  max-height: calc(100vh - 40px);
  display: flex;
  
  
  backdrop-filter: blur(12px);
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 12px;
  // overflow: auto;
}

/* Title styling */
.tp-dfwv .tp-rotv_t {
  color: var(--accent);
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.3px;
}

/* Folder styling */
.tp-dfwv .tp-fldv_t {
  color: var(--text);
  font-weight: 500;
}

/* Scrollbar styling */
.tp-dfwv ::-webkit-scrollbar {
  width: 8px;
}

.tp-dfwv ::-webkit-scrollbar-track {
  background: transparent;
}

.tp-dfwv ::-webkit-scrollbar-thumb {
  background: var(--border-hover);
  border-radius: 4px;
}

.tp-dfwv ::-webkit-scrollbar-thumb:hover {
  background: #3a4149;
}

/* Animation */
.tp-dfwv {
  animation: slideIn 0.2s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
`,document.head.appendChild(H)}class X5{constructor(H,D={}){this.pane=null,this.definitions=H,this.options={title:D.title||"Controls",position:D.position||"top-right",expanded:D.expanded!==void 0?D.expanded:!0,container:D.container!==void 0?D.container:null,onChange:D.onChange||(()=>{}),onReady:D.onReady||(()=>{})},this.params=this.extractInitialValues(H),this.init()}extractInitialValues(H){let D={};for(let[W,q]of Object.entries(H))D[W]=q.value;return D}async init(){try{v5(),await new Promise((H)=>setTimeout(H,50)),this.createPane(),this.positionPane(),this.addControls(),this.options.onReady(),console.log("[HypertoolControls] Initialized successfully")}catch(H){console.error("[HypertoolControls] Initialization error:",H)}}createPane(){let H=this.resolveContainer(),D={title:this.options.title,expanded:this.options.expanded};if(H)D.container=H;this.pane=new rH(D)}resolveContainer(){if(typeof document==="undefined")return null;let H=this.options.container;if(!H)return null;if(H instanceof HTMLElement)return H;let D=document.querySelector(H);if(!D)return console.warn(`[HypertoolControls] Container selector "${H}" did not match any elements`),null;return D}positionPane(){if(!this.pane||this.options.container)return;let H=this.pane.element;H.style.position="fixed",H.style.zIndex="10000",{"top-right":()=>{H.style.top="20px",H.style.right="20px"},"top-left":()=>{H.style.top="20px",H.style.left="20px"},"bottom-right":()=>{H.style.bottom="20px",H.style.right="20px"},"bottom-left":()=>{H.style.bottom="20px",H.style.left="20px"}}[this.options.position]()}addControls(){if(!this.pane)return;for(let[H,D]of Object.entries(this.definitions))try{this.addControl(H,D)}catch(W){console.error(`[HypertoolControls] Error adding control "${H}":`,W)}}addControl(H,D){if(!this.pane)return;let W={label:D.label||H};switch(D.type){case"number":if(D.min!==void 0)W.min=D.min;if(D.max!==void 0)W.max=D.max;if(D.step!==void 0)W.step=D.step;break;case"select":W.options=D.options;break;case"color":case"boolean":case"string":break;default:console.warn(`[HypertoolControls] Unknown control type: ${D.type}`);return}this.pane.addBinding(this.params,H,W).on("change",(J)=>{let Q=H;this.params[Q]=J.value;let X={key:Q,value:J.value,event:J};this.options.onChange(this.values,X)})}addFolder(H){if(!this.pane)return null;return this.pane.addFolder({title:H})}set(H,D){if(H in this.params){if(this.params[H]=D,this.pane)this.pane.refresh()}}get values(){return{...this.params}}destroy(){if(this.pane)this.pane.dispose(),this.pane=null;let H=document.getElementById("hypertool-theme");if(H)H.remove()}setVisible(H){if(!this.pane)return;this.pane.element.style.display=H?"block":"none"}refresh(){if(this.pane)this.pane.refresh()}}function oH(H,D){return new X5(H,D).params}function aH(H,D){return new X5(H,D)}var GW={};ID(GW,{threeAdapter:()=>XD,startThreeSketch:()=>hD,startP5Sketch:()=>OD,start:()=>YD,runtime:()=>k,runThreeSketch:()=>wD,runP5Sketch:()=>KD,registerAdapter:()=>ZD,p5Adapter:()=>QD,mountThreeSketch:()=>FD,mountP5Sketch:()=>GD,mirrorCss:()=>zD,ensureDependencies:()=>UD,attachToWindow:()=>LD});var eH=new Set(["STYLE","LINK"]);class HD{source;target;observer=null;nodeMap=new WeakMap;active=!1;constructor(H={}){this.source=H.sourceDocument??(typeof window!=="undefined"?window.parent?.document??null:null),this.target=H.targetDocument??(typeof document!=="undefined"?document:null),this.active=Boolean(H.mirror??!0)}start(){if(!this.active)return;if(!this.source||!this.target){console.warn("[hyper-frame] Unable to mirror CSS – missing source or target document.");return}this.cleanupPreviousClones(),this.syncAll(),this.attachObserver()}stop(){this.observer?.disconnect(),this.observer=null,this.nodeMap=new WeakMap,this.cleanupPreviousClones()}cleanupPreviousClones(){if(!this.target)return;this.target.querySelectorAll('[data-hyper-frame-clone="true"]').forEach((H)=>H.parentNode?.removeChild(H))}syncAll(){if(!this.source||!this.target)return;let H=this.source.head;Array.from(H.children).filter((W)=>eH.has(W.nodeName)).forEach((W)=>{let q=this.cloneNode(W);if(!q)return;this.target?.head.appendChild(q),this.nodeMap.set(W,q)})}attachObserver(){if(!this.source||!this.target)return;if(this.observer)return;this.observer=new MutationObserver((H)=>{H.forEach((D)=>{switch(D.type){case"childList":this.handleChildListMutation(D);break;case"characterData":this.handleCharacterDataMutation(D);break;case"attributes":this.handleAttributeMutation(D);break}})}),this.observer.observe(this.source.head,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}handleChildListMutation(H){if(!this.target)return;H.removedNodes.forEach((D)=>{let W=this.nodeMap.get(D);if(W&&W.parentNode)W.parentNode.removeChild(W),this.nodeMap.delete(D)}),H.addedNodes.forEach((D)=>{if(!(D instanceof HTMLElement))return;if(!eH.has(D.nodeName))return;let W=this.cloneNode(D);if(!W)return;let q=H.nextSibling?this.nodeMap.get(H.nextSibling):null;if(q&&q.parentNode)q.parentNode.insertBefore(W,q);else this.target?.head.appendChild(W);this.nodeMap.set(D,W)})}handleCharacterDataMutation(H){let W=H.target.parentNode;if(!W)return;let q=this.nodeMap.get(W);if(!q)return;q.textContent=W.textContent}handleAttributeMutation(H){let D=H.target,W=this.nodeMap.get(D);if(!W||!(W instanceof Element))return;if(H.attributeName){let q=D.getAttribute(H.attributeName);if(q===null)W.removeAttribute(H.attributeName);else W.setAttribute(H.attributeName,q)}}cloneNode(H){if(!(H instanceof HTMLElement))return null;if(!eH.has(H.nodeName))return null;let D=H.cloneNode(!0);return D.setAttribute("data-hyper-frame-clone","true"),D}}class DD{pending=new Map;ensure(H){let D=this.createKey(H);if(this.pending.has(D))return this.pending.get(D);let W=this.load(H);return this.pending.set(D,W),W}async ensureAll(H=[]){for(let D of H)await this.ensure(D)}createKey(H){return`${H.type}:${H.url}`}load(H){switch(H.type){case"script":return this.injectScript(H);case"style":return this.injectStyle(H);default:return Promise.reject(new Error(`[hyper-frame] Unsupported dependency type: ${H.type}`))}}injectScript(H){if(typeof document==="undefined")return Promise.reject(new Error("[hyper-frame] document is not available"));if(Array.from(document.querySelectorAll("script")).find((W)=>W.src===H.url))return Promise.resolve();return new Promise((W,q)=>{let J=document.createElement("script");if(J.src=H.url,J.async=!0,J.dataset.hyperFrame="external",H.integrity)J.integrity=H.integrity;if(H.crossOrigin)J.crossOrigin=H.crossOrigin;if(H.attributes)Object.entries(H.attributes).forEach(([Q,X])=>{J.setAttribute(Q,X)});J.addEventListener("load",()=>W(),{once:!0}),J.addEventListener("error",()=>q(new Error(`[hyper-frame] Failed to load script ${H.url}`)),{once:!0}),document.head.appendChild(J)})}injectStyle(H){if(typeof document==="undefined")return Promise.reject(new Error("[hyper-frame] document is not available"));if(Array.from(document.querySelectorAll('link[rel="stylesheet"]')).find((W)=>W.href===H.url))return Promise.resolve();return new Promise((W,q)=>{let J=document.createElement("link");if(J.rel="stylesheet",J.href=H.url,J.dataset.hyperFrame="external",H.attributes)Object.entries(H.attributes).forEach(([Q,X])=>{J.setAttribute(Q,X)});J.addEventListener("load",()=>W(),{once:!0}),J.addEventListener("error",()=>q(new Error(`[hyper-frame] Failed to load stylesheet ${H.url}`)),{once:!0}),document.head.appendChild(J)})}}function ZW(H={}){let D=H.documentRef??document;if(!D)throw new Error("[hyper-frame] document is not available");let W=H.containerClassName||"hypertool-sketch",q=H.target;if(q instanceof HTMLElement)return q.classList.add(W),{element:q,createdInternally:!1};if(typeof q==="string"&&q.trim().length>0){let Q=D.querySelector(q);if(Q)return Q.classList.add(W),{element:Q,createdInternally:!1};console.warn(`[hyper-frame] Could not find container for selector "${q}", creating one instead.`)}let J=D.createElement("div");return J.classList.add(W),D.body.appendChild(J),{element:J,createdInternally:!0}}class WD{controlsApi;constructor(){this.controlsApi=this.resolveControlsApi()}resolveControlsApi(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let H=window;if(!H.hypertoolControls)throw new Error("[hyper-frame] hypertool controls are not available on window");return H.hypertoolControls}init(H){let D=H.options||{};return this.controlsApi.createControlPanel(H.definitions,{title:D.title,position:D.position,expanded:D.expanded,container:D.container,onChange:(q,J)=>{if(typeof D.onChange==="function"){let Q={key:J.key,value:J.value,event:J.event};H.onControlChange?.(Q),D.onChange(Q,H.context)}else H.onControlChange?.({key:J.key,value:J.value,event:J.event})}})}}function YW(H){let D={};return Object.entries(H).forEach(([W,q])=>{if(typeof q==="function")D[W]=(J,Q,...X)=>{q(J,...X)}}),D}class qD{adapters=new Map;dependencyManager=new DD;cssBridge=null;config;constructor(H={}){this.config=H}registerAdapter(H){this.adapters.set(H.id,H)}async ensureDependencies(H){if(!H||H.length===0)return;await this.dependencyManager.ensureAll(H)}mirrorCss(){if(this.cssBridge)return;this.cssBridge=new HD({mirror:this.config.mirrorCss!==!1}),this.cssBridge.start()}async start(H){let D=this.resolveAdapter(H.adapter);if(H.dependencies?.length)await this.ensureDependencies(H.dependencies);if(this.config.mirrorCss!==!1&&H.mirrorCss!==!1)this.mirrorCss();if(typeof D.ensure==="function")await D.ensure(H.options,this);let W=this.createMount(H.mount),q=new WD,J={params:{},controls:null,getInstance:()=>null,getP5Instance:()=>null},Q=H.controlDefinitions?q.init({definitions:H.controlDefinitions,options:H.controls,context:J,onControlChange:(Y)=>{}}):null,X={mount:{container:W.container,destroy:()=>W.destroy()},controls:Q,params:Q?.params??{},runtime:this,mountOptions:H.mount},Z=await D.start(H.options,X);if(J){J.params=X.params,J.controls=Q;let Y=()=>Z.getInstance?Z.getInstance():null;J.getInstance=Y,J.getP5Instance=Y}return{destroy:()=>{if(Z.destroy(),W.destroy(),Q){if(typeof Q.destroy==="function")Q.destroy();else if(typeof Q.dispose==="function")Q.dispose()}},setHandlers:Z.setHandlers?(Y)=>Z.setHandlers(Y):void 0,getInstance:Z.getInstance?()=>Z.getInstance():void 0,params:X.params,controls:Q,container:W.container}}resolveAdapter(H){if(typeof H!=="string")return H;let D=this.adapters.get(H);if(!D)throw new Error(`[hyper-frame] Adapter "${H}" is not registered`);return D}createMount(H){let D=H?{target:H.target,containerClassName:H.containerClassName,onReady:H.onReady}:void 0,W=ZW(D);if(D?.onReady)D.onReady({container:W.element});return{container:W.element,destroy:()=>{if(W.createdInternally)W.element.remove()}}}async runP5Sketch(H){let D=await this.start({adapter:"p5",options:H.handlers,controlDefinitions:H.controlDefinitions,controls:H.controls,mount:H.mount,dependencies:H.dependencies,mirrorCss:H.mirrorCss}),W=D.params??{},q=D.controls;return{params:W,controls:q,context:{params:W,controls:q,getP5Instance:()=>D.getInstance?D.getInstance():null,getInstance:()=>D.getInstance?D.getInstance():null},destroy:()=>D.destroy(),setHandlers:(J)=>D.setHandlers?.(J),getInstance:()=>D.getInstance?D.getInstance():null}}async startP5Sketch(H){let D=[...H.dependencies??[]];if(H.p5?.url)D.unshift({type:"script",url:H.p5.url});return this.runP5Sketch({...H,dependencies:D})}async mountP5Sketch(H,D){let W=await this.start({adapter:"p5",options:YW(H),mount:D});return{container:W.container,getInstance:()=>W.getInstance?W.getInstance():null,setHandlers:(q)=>{W.setHandlers?.(YW(q))},destroy:()=>W.destroy()}}async runThreeSketch(H){let D=await this.start({adapter:"three",options:H.handlers,controlDefinitions:H.controlDefinitions,controls:H.controls,mount:H.mount,dependencies:H.dependencies,mirrorCss:H.mirrorCss}),W={params:D.params??{},controls:D.controls,getThreeContext:()=>D.getInstance?D.getInstance():null};return{params:D.params??{},controls:D.controls,context:W,destroy:()=>D.destroy(),setHandlers:(q)=>D.setHandlers?.(q),getContext:()=>D.getInstance?D.getInstance():null}}async startThreeSketch(H){let D=[...H.dependencies??[]];if(H.three?.url)D.unshift({type:"script",url:H.three.url});return this.runThreeSketch({...H,dependencies:D})}async mountThreeSketch(H,D){let W=await this.start({adapter:"three",options:H,mount:D});return{container:W.container,getInstance:()=>W.getInstance?W.getInstance():null,setHandlers:(q)=>{W.setHandlers?.(q)},destroy:()=>W.destroy()}}}function hQ(H){if(typeof requestAnimationFrame==="function")requestAnimationFrame(H);else setTimeout(H,16)}function JD(H,D,W){return new Promise((q,J)=>{let Q=0;function X(){Q+=1;try{if(H()){q();return}}catch(Z){}if(Q>=D){J(new Error(`[hyper-frame] Timed out waiting for ${W}`));return}hQ(X)}X()})}var zW="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js";function FQ(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let H=window.p5;if(typeof H!=="function")throw new Error("[hyper-frame] p5 constructor not found on window. Ensure p5 is loaded before hyper-frame.");return H}function UW(H,D){for(let W in D)if(Object.prototype.hasOwnProperty.call(D,W)){let q=D[W];if(typeof q==="function")H[W]=q}}function LQ(H,D){let W={};return Object.entries(H).forEach(([q,J])=>{if(typeof J==="function")W[q]=(Q,...X)=>{return J(Q,D,...X)}}),W}async function $Q(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");if(typeof window.p5==="function")return;if(typeof document==="undefined")throw new Error("[hyper-frame] document is not available");let H=zW;if(Array.from(document.querySelectorAll(`script[src="${H}"]`)).length===0){let W=document.createElement("script");W.src=H,W.async=!0,W.dataset.hyperFrame="p5",document.head.appendChild(W)}await JD(()=>typeof window.p5==="function",300,"p5 constructor")}var QD={id:"p5",async ensure(H,D){try{await $Q()}catch(W){await D.ensureDependencies([{type:"script",url:zW}]),await JD(()=>typeof window.p5==="function",300,"p5 constructor")}},async start(H,D){if(typeof document==="undefined")throw new Error("mountP5Sketch cannot run outside a browser environment");let W=null,q={...H},J={params:D.params,controls:D.controls,getInstance:()=>W,getP5Instance:()=>W},Q=()=>LQ(q,J);function X(Y){W=Y,UW(Y,Q())}let z=new(FQ())(X,D.mount.container);if(!W)W=z;return{destroy(){if(W)W.remove(),W=null},setHandlers(Y){if(q={...Y},W)UW(W,Q())},getInstance(){return W}}}};function SQ(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let H=window.THREE;if(typeof H!=="object")throw new Error("[hyper-frame] THREE not found on window. Make sure to import and expose Three.js on window in your sketch.");return H}function AQ(H,D){return{params:H.params,controls:H.controls,getThreeContext:()=>D}}var XD={id:"three",async start(H,D){if(typeof document==="undefined")throw new Error("mountThreeSketch cannot run outside a browser environment");let W=SQ(),q=D.mountOptions||{},J=q.camera||{},Q=q.renderer||{},X=D.mount.container,Z=new W.Scene,z=J.type||"perspective",Y;if(z==="perspective")Y=new W.PerspectiveCamera(J.fov||75,X.clientWidth/(X.clientHeight||1),J.near||0.1,J.far||1000);else{let x=(X.clientWidth||window.innerWidth)/(X.clientHeight||window.innerHeight||1);Y=new W.OrthographicCamera(-x,x,1,-1,J.near||0.1,J.far||1000)}if(J.position)Y.position.set(...J.position);else Y.position.z=5;let U=new W.WebGLRenderer({antialias:Q.antialias!==!1,alpha:Boolean(Q.alpha),preserveDrawingBuffer:Boolean(Q.preserveDrawingBuffer)}),K=X.clientWidth||window.innerWidth,E=X.clientHeight||window.innerHeight;U.setSize(K,E),U.setPixelRatio(window.devicePixelRatio),X.appendChild(U.domElement);let R=null;if(q.orbitControls){let x=window.OrbitControls||W.OrbitControls;if(x)R=new x(Y,U.domElement);else console.warn("[hyper-frame] OrbitControls not found. Make sure to import and expose it on window.")}let C={scene:Z,camera:Y,renderer:U,controls:R||void 0},I5={...H},d5=null,m5=!1,UH=AQ(D,C);function $D(){let x=X.clientWidth||window.innerWidth,zH=X.clientHeight||window.innerHeight;if(Y instanceof W.PerspectiveCamera)Y.aspect=x/zH,Y.updateProjectionMatrix();else if(Y instanceof W.OrthographicCamera){let AD=x/zH;Y.left=-AD,Y.right=AD,Y.updateProjectionMatrix()}U.setSize(x,zH),I5.resize?.(C,UH)}window.addEventListener("resize",$D);function SD(){if(!m5)return;if(d5=requestAnimationFrame(SD),R&&typeof R.update==="function")R.update();I5.animate?.(C,UH),U.render(Z,Y)}if(I5.setup?.(C,UH),typeof q.onReady==="function")q.onReady(C);function KW(){if(!m5)m5=!0,SD()}function OW(){if(m5=!1,d5!==null)cancelAnimationFrame(d5),d5=null}return KW(),{destroy(){if(OW(),window.removeEventListener("resize",$D),I5.dispose?.(),R&&typeof R.dispose==="function")R.dispose();if(U.dispose(),U.domElement.parentNode===X)X.removeChild(U.domElement)},setHandlers(x){I5={...x}},getInstance(){return C}}}};var k=new qD({mirrorCss:!0});k.registerAdapter(QD);k.registerAdapter(XD);function ZD(H){k.registerAdapter(H)}function YD(H){return k.start(H)}function UD(H){return k.ensureDependencies(H)}function zD(){k.mirrorCss()}function GD(H,D){return k.mountP5Sketch(H,D)}function KD(H){return k.runP5Sketch(H)}function OD(H){return k.startP5Sketch(H)}function wD(H){return k.runThreeSketch(H)}function hD(H){return k.startThreeSketch(H)}function FD(H,D){return k.mountThreeSketch(H,D)}function LD(){if(typeof window==="undefined")return;let H=window,D={version:"next",runtime:k,registerAdapter:ZD,ensureDependencies:UD,mirrorCss:zD,start:YD,p5:{mount:GD,run:KD,start:OD},three:{mount:FD,run:wD,start:hD}};H.hyperFrame={...H.hyperFrame||{},...D}}LD();export{u5 as studioTheme,hD as startThreeSketch,OD as startP5Sketch,YD as start,k as runtime,wD as runThreeSketch,KD as runP5Sketch,ZD as registerAdapter,FD as mountThreeSketch,GD as mountP5Sketch,zD as mirrorCss,v5 as injectThemeVariables,GW as frame,UD as ensureDependencies,oH as createControls,aH as createControlPanel,XW as controls,LD as attachToWindow,X5 as HypertoolControls};

//# debugId=BEABCA8489469F6C64756E2164756E21
