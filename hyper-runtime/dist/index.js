var Q0=Object.defineProperty;var WX=(J,Q)=>{for(var X in Q)Q0(J,X,{get:Q[X],enumerable:!0,configurable:!0,set:(Z)=>Q[X]=()=>Z})};var s7={};WX(s7,{studioTheme:()=>bJ,injectThemeVariables:()=>fJ,createControls:()=>lQ,createControlPanel:()=>nQ,HypertoolControls:()=>YJ});/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function P(J){return J}function O(J){return J===null||J===void 0}function wQ(J){return J!==null&&typeof J==="object"}function LQ(J){return J!==null&&typeof J==="object"}function X0(J,Q){if(J.length!==Q.length)return!1;for(let X=0;X<J.length;X++)if(J[X]!==Q[X])return!1;return!0}function ZJ(J,Q){return Array.from(new Set([...Object.keys(J),...Object.keys(Q)])).reduce((Z,q)=>{let Y=J[q],W=Q[q];return LQ(Y)&&LQ(W)?Object.assign(Object.assign({},Z),{[q]:ZJ(Y,W)}):Object.assign(Object.assign({},Z),{[q]:q in Q?W:Y})},{})}function NQ(J){if(!wQ(J))return!1;return"target"in J}var Z0={alreadydisposed:()=>"View has been already disposed",invalidparams:(J)=>`Invalid parameters for '${J.name}'`,nomatchingcontroller:(J)=>`No matching controller for '${J.key}'`,nomatchingview:(J)=>`No matching view for '${JSON.stringify(J.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:(J)=>`Not compatible with  plugin '${J.id}'`,propertynotfound:(J)=>`Property '${J.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class M{static alreadyDisposed(){return new M({type:"alreadydisposed"})}static notBindable(){return new M({type:"notbindable"})}static notCompatible(J,Q){return new M({type:"notcompatible",context:{id:`${J}.${Q}`}})}static propertyNotFound(J){return new M({type:"propertynotfound",context:{name:J}})}static shouldNeverHappen(){return new M({type:"shouldneverhappen"})}constructor(J){var Q;this.message=(Q=Z0[J.type](P(J.context)))!==null&&Q!==void 0?Q:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=J.type}toString(){return this.message}}class pJ{constructor(J,Q){this.obj_=J,this.key=Q}static isBindable(J){if(J===null)return!1;if(typeof J!=="object"&&typeof J!=="function")return!1;return!0}read(){return this.obj_[this.key]}write(J){this.obj_[this.key]=J}writeProperty(J,Q){let X=this.read();if(!pJ.isBindable(X))throw M.notBindable();if(!(J in X))throw M.propertyNotFound(J);X[J]=Q}}class S{constructor(){this.observers_={}}on(J,Q,X){var Z;let q=this.observers_[J];if(!q)q=this.observers_[J]=[];return q.push({handler:Q,key:(Z=X===null||X===void 0?void 0:X.key)!==null&&Z!==void 0?Z:Q}),this}off(J,Q){let X=this.observers_[J];if(X)this.observers_[J]=X.filter((Z)=>{return Z.key!==Q});return this}emit(J,Q){let X=this.observers_[J];if(!X)return;X.forEach((Z)=>{Z.handler(Q)})}}class _X{constructor(J,Q){var X;this.constraint_=Q===null||Q===void 0?void 0:Q.constraint,this.equals_=(X=Q===null||Q===void 0?void 0:Q.equals)!==null&&X!==void 0?X:(Z,q)=>Z===q,this.emitter=new S,this.rawValue_=J}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(J){this.setRawValue(J,{forceEmit:!1,last:!0})}setRawValue(J,Q){let X=Q!==null&&Q!==void 0?Q:{forceEmit:!1,last:!0},Z=this.constraint_?this.constraint_.constrain(J):J,q=this.rawValue_;if(!!this.equals_(q,Z)&&!X.forceEmit)return;this.emitter.emit("beforechange",{sender:this}),this.rawValue_=Z,this.emitter.emit("change",{options:X,previousRawValue:q,rawValue:Z,sender:this})}}class hX{constructor(J){this.emitter=new S,this.value_=J}get rawValue(){return this.value_}set rawValue(J){this.setRawValue(J,{forceEmit:!1,last:!0})}setRawValue(J,Q){let X=Q!==null&&Q!==void 0?Q:{forceEmit:!1,last:!0},Z=this.value_;if(Z===J&&!X.forceEmit)return;this.emitter.emit("beforechange",{sender:this}),this.value_=J,this.emitter.emit("change",{options:X,previousRawValue:Z,rawValue:this.value_,sender:this})}}class EX{constructor(J){this.emitter=new S,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=J,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(J){this.emitter.emit("beforechange",Object.assign(Object.assign({},J),{sender:this}))}onValueChange_(J){this.emitter.emit("change",Object.assign(Object.assign({},J),{sender:this}))}}function I(J,Q){let X=Q===null||Q===void 0?void 0:Q.constraint,Z=Q===null||Q===void 0?void 0:Q.equals;if(!X&&!Z)return new hX(J);return new _X(J,Q)}function q0(J){return[new EX(J),(Q,X)=>{J.setRawValue(Q,X)}]}class H{constructor(J){this.emitter=new S,this.valMap_=J;for(let Q in this.valMap_)this.valMap_[Q].emitter.on("change",()=>{this.emitter.emit("change",{key:Q,sender:this})})}static createCore(J){return Object.keys(J).reduce((X,Z)=>{return Object.assign(X,{[Z]:I(J[Z])})},{})}static fromObject(J){let Q=this.createCore(J);return new H(Q)}get(J){return this.valMap_[J].rawValue}set(J,Q){this.valMap_[J].rawValue=Q}value(J){return this.valMap_[J]}}class KJ{constructor(J){this.values=H.fromObject({max:J.max,min:J.min})}constrain(J){let Q=this.values.get("max"),X=this.values.get("min");return Math.min(Math.max(J,X),Q)}}class CX{constructor(J){this.values=H.fromObject({max:J.max,min:J.min})}constrain(J){let Q=this.values.get("max"),X=this.values.get("min"),Z=J;if(!O(X))Z=Math.max(Z,X);if(!O(Q))Z=Math.min(Z,Q);return Z}}class xX{constructor(J,Q=0){this.step=J,this.origin=Q}constrain(J){let Q=this.origin%this.step,X=Math.round((J-Q)/this.step);return Q+X*this.step}}class bX{constructor(J){this.text=J}evaluate(){return Number(this.text)}toString(){return this.text}}var Y0={"**":(J,Q)=>Math.pow(J,Q),"*":(J,Q)=>J*Q,"/":(J,Q)=>J/Q,"%":(J,Q)=>J%Q,"+":(J,Q)=>J+Q,"-":(J,Q)=>J-Q,"<<":(J,Q)=>J<<Q,">>":(J,Q)=>J>>Q,">>>":(J,Q)=>J>>>Q,"&":(J,Q)=>J&Q,"^":(J,Q)=>J^Q,"|":(J,Q)=>J|Q};class fX{constructor(J,Q,X){this.left=Q,this.operator=J,this.right=X}evaluate(){let J=Y0[this.operator];if(!J)throw new Error(`unexpected binary operator: '${this.operator}`);return J(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}var W0={"+":(J)=>J,"-":(J)=>-J,"~":(J)=>~J};class vX{constructor(J,Q){this.operator=J,this.expression=Q}evaluate(){let J=W0[this.operator];if(!J)throw new Error(`unexpected unary operator: '${this.operator}`);return J(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function RQ(J){return(Q,X)=>{for(let Z=0;Z<J.length;Z++){let q=J[Z](Q,X);if(q!=="")return q}return""}}function NJ(J,Q){var X;let Z=J.substr(Q).match(/^\s+/);return(X=Z&&Z[0])!==null&&X!==void 0?X:""}function U0(J,Q){let X=J.substr(Q,1);return X.match(/^[1-9]$/)?X:""}function RJ(J,Q){var X;let Z=J.substr(Q).match(/^[0-9]+/);return(X=Z&&Z[0])!==null&&X!==void 0?X:""}function D0(J,Q){let X=RJ(J,Q);if(X!=="")return X;let Z=J.substr(Q,1);if(Q+=1,Z!=="-"&&Z!=="+")return"";let q=RJ(J,Q);if(q==="")return"";return Z+q}function kQ(J,Q){let X=J.substr(Q,1);if(Q+=1,X.toLowerCase()!=="e")return"";let Z=D0(J,Q);if(Z==="")return"";return X+Z}function uX(J,Q){let X=J.substr(Q,1);if(X==="0")return X;let Z=U0(J,Q);if(Q+=Z.length,Z==="")return"";return Z+RJ(J,Q)}function G0(J,Q){let X=uX(J,Q);if(Q+=X.length,X==="")return"";let Z=J.substr(Q,1);if(Q+=Z.length,Z!==".")return"";let q=RJ(J,Q);return Q+=q.length,X+Z+q+kQ(J,Q)}function z0(J,Q){let X=J.substr(Q,1);if(Q+=X.length,X!==".")return"";let Z=RJ(J,Q);if(Q+=Z.length,Z==="")return"";return X+Z+kQ(J,Q)}function K0(J,Q){let X=uX(J,Q);if(Q+=X.length,X==="")return"";return X+kQ(J,Q)}var H0=RQ([G0,z0,K0]);function $0(J,Q){var X;let Z=J.substr(Q).match(/^[01]+/);return(X=Z&&Z[0])!==null&&X!==void 0?X:""}function F0(J,Q){let X=J.substr(Q,2);if(Q+=X.length,X.toLowerCase()!=="0b")return"";let Z=$0(J,Q);if(Z==="")return"";return X+Z}function L0(J,Q){var X;let Z=J.substr(Q).match(/^[0-7]+/);return(X=Z&&Z[0])!==null&&X!==void 0?X:""}function O0(J,Q){let X=J.substr(Q,2);if(Q+=X.length,X.toLowerCase()!=="0o")return"";let Z=L0(J,Q);if(Z==="")return"";return X+Z}function I0(J,Q){var X;let Z=J.substr(Q).match(/^[0-9a-f]+/i);return(X=Z&&Z[0])!==null&&X!==void 0?X:""}function j0(J,Q){let X=J.substr(Q,2);if(Q+=X.length,X.toLowerCase()!=="0x")return"";let Z=I0(J,Q);if(Z==="")return"";return X+Z}var M0=RQ([F0,O0,j0]),B0=RQ([M0,H0]);function S0(J,Q){let X=B0(J,Q);if(Q+=X.length,X==="")return null;return{evaluable:new bX(X),cursor:Q}}function A0(J,Q){let X=J.substr(Q,1);if(Q+=X.length,X!=="(")return null;let Z=mX(J,Q);if(!Z)return null;Q=Z.cursor,Q+=NJ(J,Q).length;let q=J.substr(Q,1);if(Q+=q.length,q!==")")return null;return{evaluable:Z.evaluable,cursor:Q}}function w0(J,Q){var X;return(X=S0(J,Q))!==null&&X!==void 0?X:A0(J,Q)}function dX(J,Q){let X=w0(J,Q);if(X)return X;let Z=J.substr(Q,1);if(Q+=Z.length,Z!=="+"&&Z!=="-"&&Z!=="~")return null;let q=dX(J,Q);if(!q)return null;return Q=q.cursor,{cursor:Q,evaluable:new vX(Z,q.evaluable)}}function N0(J,Q,X){X+=NJ(Q,X).length;let Z=J.filter((q)=>Q.startsWith(q,X))[0];if(!Z)return null;return X+=Z.length,X+=NJ(Q,X).length,{cursor:X,operator:Z}}function R0(J,Q){return(X,Z)=>{let q=J(X,Z);if(!q)return null;Z=q.cursor;let Y=q.evaluable;for(;;){let W=N0(Q,X,Z);if(!W)break;Z=W.cursor;let U=J(X,Z);if(!U)return null;Z=U.cursor,Y=new fX(W.operator,Y,U.evaluable)}return Y?{cursor:Z,evaluable:Y}:null}}var k0=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((J,Q)=>{return R0(J,Q)},dX);function mX(J,Q){return Q+=NJ(J,Q).length,k0(J,Q)}function T0(J){let Q=mX(J,0);if(!Q)return null;if(Q.cursor+NJ(J,Q.cursor).length!==J.length)return null;return Q.evaluable}function m(J){var Q;let X=T0(J);return(Q=X===null||X===void 0?void 0:X.evaluate())!==null&&Q!==void 0?Q:null}function gX(J){if(typeof J==="number")return J;if(typeof J==="string"){let Q=m(J);if(!O(Q))return Q}return 0}function P0(J){return String(J)}function T(J){return(Q)=>{return Q.toFixed(Math.max(Math.min(J,20),0))}}function L(J,Q,X,Z,q){let Y=(J-Q)/(X-Q);return Z+Y*(q-Z)}function UX(J){return String(J.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function w(J,Q,X){return Math.min(Math.max(J,Q),X)}function pX(J,Q){return(J%Q+Q)%Q}function V0(J,Q){return!O(J.step)?UX(J.step):Math.max(UX(Q),2)}function cX(J){var Q;return(Q=J.step)!==null&&Q!==void 0?Q:1}function sX(J,Q){var X;let Z=Math.abs((X=J.step)!==null&&X!==void 0?X:Q);return Z===0?0.1:Math.pow(10,Math.floor(Math.log10(Z))-1)}function iX(J,Q){if(!O(J.step))return new xX(J.step,Q);return null}function lX(J){if(!O(J.max)&&!O(J.min))return new KJ({max:J.max,min:J.min});if(!O(J.max)||!O(J.min))return new CX({max:J.max,min:J.min});return null}function nX(J,Q){var X,Z,q;return{formatter:(X=J.format)!==null&&X!==void 0?X:T(V0(J,Q)),keyScale:(Z=J.keyScale)!==null&&Z!==void 0?Z:cX(J),pointerScale:(q=J.pointerScale)!==null&&q!==void 0?q:sX(J,Q)}}function tX(J){return{format:J.optional.function,keyScale:J.optional.number,max:J.optional.number,min:J.optional.number,pointerScale:J.optional.number,step:J.optional.number}}function TQ(J){return{constraint:J.constraint,textProps:H.fromObject(nX(J.params,J.initialValue))}}class o{constructor(J){this.controller=J}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(J){this.controller.viewProps.set("disabled",J)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(J){this.controller.viewProps.set("hidden",J)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(J){return this.controller.importState(J)}exportState(){return this.controller.exportState()}}class VJ{constructor(J){this.target=J}}class HJ extends VJ{constructor(J,Q,X){super(J);this.value=Q,this.last=X!==null&&X!==void 0?X:!0}}class rX extends VJ{constructor(J,Q){super(J);this.expanded=Q}}class oX extends VJ{constructor(J,Q){super(J);this.index=Q}}class aX extends VJ{constructor(J,Q){super(J);this.native=Q}}class DJ extends o{constructor(J){super(J);this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new S,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(J){this.controller.labelController.props.set("label",J)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(J){this.controller.tag=J}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}refresh(){this.controller.value.fetch()}onValueChange_(J){let Q=this.controller.value;this.emitter_.emit("change",new HJ(this,P(Q.binding.target.read()),J.options.last))}}class eX{constructor(J,Q){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=Q,this.value_=J,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new S}get rawValue(){return this.value_.rawValue}set rawValue(J){this.value_.rawValue=J}setRawValue(J,Q){this.value_.setRawValue(J,Q)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(J){this.emitter.emit("beforechange",Object.assign(Object.assign({},J),{sender:this}))}onValueChange_(J){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},J),{sender:this}))}}function y0(J){if(!("binding"in J))return!1;let Q=J.binding;return NQ(Q)&&"read"in Q&&"write"in Q}function _0(J,Q){let Z=Object.keys(Q).reduce((q,Y)=>{if(q===void 0)return;let W=Q[Y],U=W(J[Y]);return U.succeeded?Object.assign(Object.assign({},q),{[Y]:U.value}):void 0},{});return P(Z)}function h0(J,Q){return J.reduce((X,Z)=>{if(X===void 0)return;let q=Q(Z);if(!q.succeeded||q.value===void 0)return;return[...X,q.value]},[])}function E0(J){if(J===null)return!1;return typeof J==="object"}function f(J){return(Q)=>(X)=>{if(!Q&&X===void 0)return{succeeded:!1,value:void 0};if(Q&&X===void 0)return{succeeded:!0,value:void 0};let Z=J(X);return Z!==void 0?{succeeded:!0,value:Z}:{succeeded:!1,value:void 0}}}function DX(J){return{custom:(Q)=>f(Q)(J),boolean:f((Q)=>typeof Q==="boolean"?Q:void 0)(J),number:f((Q)=>typeof Q==="number"?Q:void 0)(J),string:f((Q)=>typeof Q==="string"?Q:void 0)(J),function:f((Q)=>typeof Q==="function"?Q:void 0)(J),constant:(Q)=>f((X)=>X===Q?Q:void 0)(J),raw:f((Q)=>Q)(J),object:(Q)=>f((X)=>{if(!E0(X))return;return _0(X,Q)})(J),array:(Q)=>f((X)=>{if(!Array.isArray(X))return;return h0(X,Q)})(J)}}var OQ={optional:DX(!0),required:DX(!1)};function j(J,Q){let X=Q(OQ),Z=OQ.required.object(X)(J);return Z.succeeded?Z.value:void 0}function V(J,Q,X,Z){if(Q&&!Q(J))return!1;let q=j(J,X);return q?Z(q):!1}function y(J,Q){var X;return ZJ((X=J===null||J===void 0?void 0:J())!==null&&X!==void 0?X:{},Q)}function JJ(J){return"value"in J}function JZ(J){if(!wQ(J)||!("binding"in J))return!1;let Q=J.binding;return NQ(Q)}var C="http://www.w3.org/2000/svg";function cJ(J){J.offsetHeight}function C0(J,Q){let X=J.style.transition;J.style.transition="none",Q(),J.style.transition=X}function PQ(J){return J.ontouchstart!==void 0}function x0(){return globalThis}function b0(){return P(x0()).document}function f0(J){let Q=J.ownerDocument.defaultView;if(!Q)return null;return"document"in Q?J.getContext("2d",{willReadFrequently:!0}):null}var v0={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function tJ(J,Q){let X=J.createElementNS(C,"svg");return X.innerHTML=v0[Q],X}function QZ(J,Q,X){J.insertBefore(Q,J.children[X])}function VQ(J){if(J.parentElement)J.parentElement.removeChild(J)}function XZ(J){while(J.children.length>0)J.removeChild(J.children[0])}function u0(J){while(J.childNodes.length>0)J.removeChild(J.childNodes[0])}function ZZ(J){if(J.relatedTarget)return P(J.relatedTarget);if("explicitOriginalTarget"in J)return J.explicitOriginalTarget;return null}function u(J,Q){J.emitter.on("change",(X)=>{Q(X.rawValue)}),Q(J.rawValue)}function x(J,Q,X){u(J.value(Q),X)}var d0="tp";function $(J){return(X,Z)=>{return[d0,"-",J,"v",X?`_${X}`:"",Z?`-${Z}`:""].join("")}}var BJ=$("lbl");function m0(J,Q){let X=J.createDocumentFragment();return Q.split(`
`).map((q)=>{return J.createTextNode(q)}).forEach((q,Y)=>{if(Y>0)X.appendChild(J.createElement("br"));X.appendChild(q)}),X}class yQ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(BJ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(BJ("l")),x(Q.props,"label",(q)=>{if(O(q))this.element.classList.add(BJ(void 0,"nol"));else this.element.classList.remove(BJ(void 0,"nol")),u0(X),X.appendChild(m0(J,q))}),this.element.appendChild(X),this.labelElement=X;let Z=J.createElement("div");Z.classList.add(BJ("v")),this.element.appendChild(Z),this.valueElement=Z}}class _Q{constructor(J,Q){this.props=Q.props,this.valueController=Q.valueController,this.viewProps=Q.valueController.viewProps,this.view=new yQ(J,{props:Q.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(J){return V(J,null,(Q)=>({label:Q.optional.string}),(Q)=>{return this.props.set("label",Q.label),!0})}exportProps(){return y(null,{label:this.props.get("label")})}}function g0(){return["veryfirst","first","last","verylast"]}var GX=$(""),zX={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class yJ{constructor(J){this.parent_=null,this.blade=J.blade,this.view=J.view,this.viewProps=J.viewProps;let Q=this.view.element;this.blade.value("positions").emitter.on("change",()=>{g0().forEach((X)=>{Q.classList.remove(GX(void 0,zX[X]))}),this.blade.get("positions").forEach((X)=>{Q.classList.add(GX(void 0,zX[X]))})}),this.viewProps.handleDispose(()=>{VQ(Q)})}get parent(){return this.parent_}set parent(J){this.parent_=J,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(J){return V(J,null,(Q)=>({disabled:Q.required.boolean,hidden:Q.required.boolean}),(Q)=>{return this.viewProps.importState(Q),!0})}exportState(){return y(null,Object.assign({},this.viewProps.exportState()))}}class r extends yJ{constructor(J,Q){if(Q.value!==Q.valueController.value)throw M.shouldNeverHappen();let X=Q.valueController.viewProps,Z=new _Q(J,{blade:Q.blade,props:Q.props,valueController:Q.valueController});super(Object.assign(Object.assign({},Q),{view:new yQ(J,{props:Q.props,viewProps:X}),viewProps:X}));this.labelController=Z,this.value=Q.value,this.valueController=Q.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(J){return V(J,(Q)=>{var X,Z,q;return super.importState(Q)&&this.labelController.importProps(Q)&&((q=(Z=(X=this.valueController).importProps)===null||Z===void 0?void 0:Z.call(X,J))!==null&&q!==void 0?q:!0)},(Q)=>({value:Q.optional.raw}),(Q)=>{if(Q.value)this.value.rawValue=Q.value;return!0})}exportState(){var J,Q,X;return y(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(X=(Q=(J=this.valueController).exportProps)===null||Q===void 0?void 0:Q.call(J))!==null&&X!==void 0?X:{}))}}function KX(J){let Q=Object.assign({},J);return delete Q.value,Q}class hQ extends r{constructor(J,Q){super(J,Q);this.tag=Q.tag}importState(J){return V(J,(Q)=>super.importState(KX(J)),(Q)=>({tag:Q.optional.string}),(Q)=>{return this.tag=Q.tag,!0})}exportState(){return y(()=>KX(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function p0(J){return JJ(J)&&JZ(J.value)}class qZ extends hQ{importState(J){return V(J,(Q)=>super.importState(Q),(Q)=>({binding:Q.required.object({value:Q.required.raw})}),(Q)=>{return this.value.binding.inject(Q.binding.value),this.value.fetch(),!0})}}function c0(J){return JJ(J)&&y0(J.value)}function YZ(J,Q){while(J.length<Q)J.push(void 0)}function s0(J){let Q=[];return YZ(Q,J),Q}function i0(J){let Q=J.indexOf(void 0);return P(Q<0?J:J.slice(0,Q))}function l0(J,Q){let X=[...i0(J),Q];if(X.length>J.length)X.splice(0,X.length-J.length);else YZ(X,J.length);return X}class WZ{constructor(J){this.emitter=new S,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=J.binding,this.value_=I(s0(J.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=J.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(J){this.value_.rawValue=J}setRawValue(J,Q){this.value_.setRawValue(J,Q)}fetch(){this.value_.rawValue=l0(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(J){this.emitter.emit("beforechange",Object.assign(Object.assign({},J),{sender:this}))}onValueChange_(J){this.emitter.emit("change",Object.assign(Object.assign({},J),{sender:this}))}}function n0(J){if(!("binding"in J))return!1;let Q=J.binding;return NQ(Q)&&"read"in Q&&!("write"in Q)}class UZ extends hQ{exportState(){return y(()=>super.exportState(),{binding:{readonly:!0}})}}function t0(J){return JJ(J)&&n0(J.value)}class DZ extends o{get label(){return this.controller.labelController.props.get("label")}set label(J){this.controller.labelController.props.set("label",J)}get title(){var J;return(J=this.controller.buttonController.props.get("title"))!==null&&J!==void 0?J:""}set title(J){this.controller.buttonController.props.set("title",J)}on(J,Q){let X=Q.bind(this);return this.controller.buttonController.emitter.on(J,(q)=>{X(new aX(this,q.nativeEvent))}),this}off(J,Q){return this.controller.buttonController.emitter.off(J,Q),this}}function r0(J,Q,X){if(X)J.classList.add(Q);else J.classList.remove(Q)}function $J(J,Q){return(X)=>{r0(J,Q,X)}}function EQ(J,Q){u(J,(X)=>{Q.textContent=X!==null&&X!==void 0?X:""})}var UQ=$("btn");class GZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(UQ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("button");X.classList.add(UQ("b")),Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.buttonElement=X;let Z=J.createElement("div");Z.classList.add(UQ("t")),EQ(Q.props.value("title"),Z),this.buttonElement.appendChild(Z)}}class zZ{constructor(J,Q){this.emitter=new S,this.onClick_=this.onClick_.bind(this),this.props=Q.props,this.viewProps=Q.viewProps,this.view=new GZ(J,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(J){return V(J,null,(Q)=>({title:Q.optional.string}),(Q)=>{return this.props.set("title",Q.title),!0})}exportProps(){return y(null,{title:this.props.get("title")})}onClick_(J){this.emitter.emit("click",{nativeEvent:J,sender:this})}}class IQ extends yJ{constructor(J,Q){let X=new zZ(J,{props:Q.buttonProps,viewProps:Q.viewProps}),Z=new _Q(J,{blade:Q.blade,props:Q.labelProps,valueController:X});super({blade:Q.blade,view:Z.view,viewProps:Q.viewProps});this.buttonController=X,this.labelController=Z}importState(J){return V(J,(Q)=>super.importState(Q)&&this.buttonController.importProps(Q)&&this.labelController.importProps(Q),()=>({}),()=>!0)}exportState(){return y(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class CQ{constructor(J){let[Q,X]=J.split("-"),Z=Q.split(".");this.major=parseInt(Z[0],10),this.minor=parseInt(Z[1],10),this.patch=parseInt(Z[2],10),this.prerelease=X!==null&&X!==void 0?X:null}toString(){let J=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[J,this.prerelease].join("-"):J}}var FJ=new CQ("2.0.5");function R(J){return Object.assign({core:FJ},J)}var o0=R({id:"button",type:"blade",accept(J){let Q=j(J,(X)=>({title:X.required.string,view:X.required.constant("button"),label:X.optional.string}));return Q?{params:Q}:null},controller(J){return new IQ(J.document,{blade:J.blade,buttonProps:H.fromObject({title:J.params.title}),labelProps:H.fromObject({label:J.params.label}),viewProps:J.viewProps})},api(J){if(J.controller instanceof IQ)return new DZ(J.controller);return null}});function a0(J,Q){return J.addBlade(Object.assign(Object.assign({},Q),{view:"button"}))}function e0(J,Q){return J.addBlade(Object.assign(Object.assign({},Q),{view:"folder"}))}function J1(J,Q){return J.addBlade(Object.assign(Object.assign({},Q),{view:"tab"}))}function Q1(J){if(!wQ(J))return!1;return"refresh"in J&&typeof J.refresh==="function"}function X1(J,Q){if(!pJ.isBindable(J))throw M.notBindable();return new pJ(J,Q)}class KZ{constructor(J,Q){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=J,this.emitter_=new S,this.pool_=Q,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map((J)=>this.pool_.createApi(J))}addBinding(J,Q,X){let Z=X!==null&&X!==void 0?X:{},q=this.controller_.element.ownerDocument,Y=this.pool_.createBinding(q,X1(J,Q),Z),W=this.pool_.createBindingApi(Y);return this.add(W,Z.index)}addFolder(J){return e0(this,J)}addButton(J){return a0(this,J)}addTab(J){return J1(this,J)}add(J,Q){let X=J.controller;return this.controller_.rack.add(X,Q),J}remove(J){this.controller_.rack.remove(J.controller)}addBlade(J){let Q=this.controller_.element.ownerDocument,X=this.pool_.createBlade(Q,J),Z=this.pool_.createApi(X);return this.add(Z,J.index)}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}refresh(){this.children.forEach((J)=>{if(Q1(J))J.refresh()})}onRackValueChange_(J){let Q=J.bladeController,X=this.pool_.createApi(Q),Z=JZ(Q.value)?Q.value.binding:null;this.emitter_.emit("change",new HJ(X,Z?Z.target.read():Q.value.rawValue,J.options.last))}}class rJ extends o{constructor(J,Q){super(J);this.rackApi_=new KZ(J.rackController,Q)}refresh(){this.rackApi_.refresh()}}class oJ extends yJ{constructor(J){super({blade:J.blade,view:J.view,viewProps:J.rackController.viewProps});this.rackController=J.rackController}importState(J){return V(J,(Q)=>super.importState(Q),(Q)=>({children:Q.required.array(Q.required.raw)}),(Q)=>{return this.rackController.rack.children.every((X,Z)=>{return X.importState(Q.children[Z])})})}exportState(){return y(()=>super.exportState(),{children:this.rackController.rack.children.map((J)=>J.exportState())})}}function jQ(J){return"rackController"in J}class HZ{constructor(J){this.emitter=new S,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=J}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(J){for(let Q of this.allItems())if(J(Q))return Q;return null}includes(J){return this.cache_.has(J)}add(J,Q){if(this.includes(J))throw M.shouldNeverHappen();let X=Q!==void 0?Q:this.items_.length;this.items_.splice(X,0,J),this.cache_.add(J);let Z=this.extract_(J);if(Z)Z.emitter.on("add",this.onSubListAdd_),Z.emitter.on("remove",this.onSubListRemove_),Z.allItems().forEach((q)=>{this.cache_.add(q)});this.emitter.emit("add",{index:X,item:J,root:this,target:this})}remove(J){let Q=this.items_.indexOf(J);if(Q<0)return;this.items_.splice(Q,1),this.cache_.delete(J);let X=this.extract_(J);if(X)X.allItems().forEach((Z)=>{this.cache_.delete(Z)}),X.emitter.off("add",this.onSubListAdd_),X.emitter.off("remove",this.onSubListRemove_);this.emitter.emit("remove",{index:Q,item:J,root:this,target:this})}onSubListAdd_(J){this.cache_.add(J.item),this.emitter.emit("add",{index:J.index,item:J.item,root:this,target:J.target})}onSubListRemove_(J){this.cache_.delete(J.item),this.emitter.emit("remove",{index:J.index,item:J.item,root:this,target:J.target})}}function Z1(J,Q){for(let X=0;X<J.length;X++){let Z=J[X];if(JJ(Z)&&Z.value===Q)return Z}return null}function q1(J){return jQ(J)?J.rackController.rack.bcSet_:null}class $Z{constructor(J){var Q,X;this.emitter=new S,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(Q=J.blade)!==null&&Q!==void 0?Q:null,(X=this.blade_)===null||X===void 0||X.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=J.viewProps,this.bcSet_=new HZ(q1),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(J,Q){var X;(X=J.parent)===null||X===void 0||X.remove(J),J.parent=this,this.bcSet_.add(J,Q)}remove(J){J.parent=null,this.bcSet_.remove(J)}find(J){return this.bcSet_.allItems().filter(J)}onSetAdd_(J){this.updatePositions_();let Q=J.target===J.root;if(this.emitter.emit("add",{bladeController:J.item,index:J.index,root:Q,sender:this}),!Q)return;let X=J.item;if(X.viewProps.emitter.on("change",this.onChildViewPropsChange_),X.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),X.viewProps.handleDispose(this.onChildDispose_),JJ(X))X.value.emitter.on("change",this.onChildValueChange_);else if(jQ(X)){let Z=X.rackController.rack;if(Z){let q=Z.emitter;q.on("layout",this.onRackLayout_),q.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(J){this.updatePositions_();let Q=J.target===J.root;if(this.emitter.emit("remove",{bladeController:J.item,root:Q,sender:this}),!Q)return;let X=J.item;if(JJ(X))X.value.emitter.off("change",this.onChildValueChange_);else if(jQ(X)){let Z=X.rackController.rack;if(Z){let q=Z.emitter;q.off("layout",this.onRackLayout_),q.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){let J=this.bcSet_.items.filter((Z)=>!Z.viewProps.get("hidden")),Q=J[0],X=J[J.length-1];this.bcSet_.items.forEach((Z)=>{let q=[];if(Z===Q){if(q.push("first"),!this.blade_||this.blade_.get("positions").includes("veryfirst"))q.push("veryfirst")}if(Z===X){if(q.push("last"),!this.blade_||this.blade_.get("positions").includes("verylast"))q.push("verylast")}Z.blade.set("positions",q)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(J){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((Q)=>{return Q.viewProps.get("disposed")}).forEach((Q)=>{this.bcSet_.remove(Q)})}onChildValueChange_(J){let Q=Z1(this.find(JJ),J.sender);if(!Q)throw M.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:Q,options:J.options,sender:this})}onRackLayout_(J){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(J){this.emitter.emit("valuechange",{bladeController:J.bladeController,options:J.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class aJ{constructor(J){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=J.element,this.viewProps=J.viewProps;let Q=new $Z({blade:J.root?void 0:J.blade,viewProps:J.viewProps});Q.emitter.on("add",this.onRackAdd_),Q.emitter.on("remove",this.onRackRemove_),this.rack=Q,this.viewProps.handleDispose(()=>{for(let X=this.rack.children.length-1;X>=0;X--)this.rack.children[X].viewProps.set("disposed",!0)})}onRackAdd_(J){if(!J.root)return;QZ(this.element,J.bladeController.view.element,J.index)}onRackRemove_(J){if(!J.root)return;VQ(J.bladeController.view.element)}}function LJ(){return new H({positions:I([],{equals:X0})})}class _J extends H{constructor(J){super(J)}static create(J){let Q={completed:!0,expanded:J,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},X=H.createCore(Q);return new _J(X)}get styleExpanded(){var J;return(J=this.get("temporaryExpanded"))!==null&&J!==void 0?J:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";let J=this.get("expandedHeight");if(this.get("shouldFixHeight")&&!O(J))return`${J}px`;return"auto"}bindExpandedClass(J,Q){let X=()=>{if(this.styleExpanded)J.classList.add(Q);else J.classList.remove(Q)};x(this,"expanded",X),x(this,"temporaryExpanded",X)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Y1(J,Q){let X=0;return C0(Q,()=>{J.set("expandedHeight",null),J.set("temporaryExpanded",!0),cJ(Q),X=Q.clientHeight,J.set("temporaryExpanded",null),cJ(Q)}),X}function HX(J,Q){Q.style.height=J.styleHeight}function xQ(J,Q){J.value("expanded").emitter.on("beforechange",()=>{if(J.set("completed",!1),O(J.get("expandedHeight"))){let X=Y1(J,Q);if(X>0)J.set("expandedHeight",X)}J.set("shouldFixHeight",!0),cJ(Q)}),J.emitter.on("change",()=>{HX(J,Q)}),HX(J,Q),Q.addEventListener("transitionend",(X)=>{if(X.propertyName!=="height")return;J.cleanUpTransition()})}class bQ extends rJ{constructor(J,Q){super(J,Q);this.emitter_=new S,this.controller.foldable.value("expanded").emitter.on("change",(X)=>{this.emitter_.emit("fold",new rX(this,X.sender.rawValue))}),this.rackApi_.on("change",(X)=>{this.emitter_.emit("change",X)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(J){this.controller.foldable.set("expanded",J)}get title(){return this.controller.props.get("title")}set title(J){this.controller.props.set("title",J)}get children(){return this.rackApi_.children}addBinding(J,Q,X){return this.rackApi_.addBinding(J,Q,X)}addFolder(J){return this.rackApi_.addFolder(J)}addButton(J){return this.rackApi_.addButton(J)}addTab(J){return this.rackApi_.addTab(J)}add(J,Q){return this.rackApi_.add(J,Q)}remove(J){this.rackApi_.remove(J)}addBlade(J){return this.rackApi_.addBlade(J)}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}}var FZ=$("cnt");class LZ{constructor(J,Q){var X;this.className_=$((X=Q.viewName)!==null&&X!==void 0?X:"fld"),this.element=J.createElement("div"),this.element.classList.add(this.className_(),FZ()),Q.viewProps.bindClassModifiers(this.element),this.foldable_=Q.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),x(this.foldable_,"completed",$J(this.element,this.className_(void 0,"cpl")));let Z=J.createElement("button");Z.classList.add(this.className_("b")),x(Q.props,"title",(G)=>{if(O(G))this.element.classList.add(this.className_(void 0,"not"));else this.element.classList.remove(this.className_(void 0,"not"))}),Q.viewProps.bindDisabled(Z),this.element.appendChild(Z),this.buttonElement=Z;let q=J.createElement("div");q.classList.add(this.className_("i")),this.element.appendChild(q);let Y=J.createElement("div");Y.classList.add(this.className_("t")),EQ(Q.props.value("title"),Y),this.buttonElement.appendChild(Y),this.titleElement=Y;let W=J.createElement("div");W.classList.add(this.className_("m")),this.buttonElement.appendChild(W);let U=J.createElement("div");U.classList.add(this.className_("c")),this.element.appendChild(U),this.containerElement=U}}class sJ extends oJ{constructor(J,Q){var X;let Z=_J.create((X=Q.expanded)!==null&&X!==void 0?X:!0),q=new LZ(J,{foldable:Z,props:Q.props,viewName:Q.root?"rot":void 0,viewProps:Q.viewProps});super(Object.assign(Object.assign({},Q),{rackController:new aJ({blade:Q.blade,element:q.containerElement,root:Q.root,viewProps:Q.viewProps}),view:q}));this.onTitleClick_=this.onTitleClick_.bind(this),this.props=Q.props,this.foldable=Z,xQ(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(J){return V(J,(Q)=>super.importState(Q),(Q)=>({expanded:Q.required.boolean,title:Q.optional.string}),(Q)=>{return this.foldable.set("expanded",Q.expanded),this.props.set("title",Q.title),!0})}exportState(){return y(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}var W1=R({id:"folder",type:"blade",accept(J){let Q=j(J,(X)=>({title:X.required.string,view:X.required.constant("folder"),expanded:X.optional.boolean}));return Q?{params:Q}:null},controller(J){return new sJ(J.document,{blade:J.blade,expanded:J.params.expanded,props:H.fromObject({title:J.params.title}),viewProps:J.viewProps})},api(J){if(!(J.controller instanceof sJ))return null;return new bQ(J.controller,J.pool)}}),U1=$("");function $X(J,Q){return $J(J,U1(void 0,Q))}class c extends H{constructor(J){var Q;super(J);this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=q0(I(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(Q=this.get("parent"))===null||Q===void 0||Q.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(J){var Q,X,Z;let q=J!==null&&J!==void 0?J:{};return new c(H.createCore({disabled:(Q=q.disabled)!==null&&Q!==void 0?Q:!1,disposed:!1,hidden:(X=q.hidden)!==null&&X!==void 0?X:!1,parent:(Z=q.parent)!==null&&Z!==void 0?Z:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(J){u(this.globalDisabled_,$X(J,"disabled")),x(this,"hidden",$X(J,"hidden"))}bindDisabled(J){u(this.globalDisabled_,(Q)=>{J.disabled=Q})}bindTabIndex(J){u(this.globalDisabled_,(Q)=>{J.tabIndex=Q?-1:0})}handleDispose(J){this.value("disposed").emitter.on("change",(Q)=>{if(Q)J()})}importState(J){this.set("disabled",J.disabled),this.set("hidden",J.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){let J=this.get("parent");return(J?J.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(J){var Q;let X=J.previousRawValue;X===null||X===void 0||X.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(Q=this.get("parent"))===null||Q===void 0||Q.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}var FX=$("tbp");class OZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(FX()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(FX("c")),this.element.appendChild(X),this.containerElement=X}}var SJ=$("tbi");class IZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(SJ()),Q.viewProps.bindClassModifiers(this.element),x(Q.props,"selected",(q)=>{if(q)this.element.classList.add(SJ(void 0,"sel"));else this.element.classList.remove(SJ(void 0,"sel"))});let X=J.createElement("button");X.classList.add(SJ("b")),Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.buttonElement=X;let Z=J.createElement("div");Z.classList.add(SJ("t")),EQ(Q.props.value("title"),Z),this.buttonElement.appendChild(Z),this.titleElement=Z}}class jZ{constructor(J,Q){this.emitter=new S,this.onClick_=this.onClick_.bind(this),this.props=Q.props,this.viewProps=Q.viewProps,this.view=new IZ(J,{props:Q.props,viewProps:Q.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class iJ extends oJ{constructor(J,Q){let X=new OZ(J,{viewProps:Q.viewProps});super(Object.assign(Object.assign({},Q),{rackController:new aJ({blade:Q.blade,element:X.containerElement,viewProps:Q.viewProps}),view:X}));this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new jZ(J,{props:Q.itemProps,viewProps:c.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=Q.props,x(this.props,"selected",(Z)=>{this.itemController.props.set("selected",Z),this.viewProps.set("hidden",!Z)})}get itemController(){return this.ic_}importState(J){return V(J,(Q)=>super.importState(Q),(Q)=>({selected:Q.required.boolean,title:Q.required.string}),(Q)=>{return this.ic_.props.set("selected",Q.selected),this.ic_.props.set("title",Q.title),!0})}exportState(){return y(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class MZ extends rJ{constructor(J,Q){super(J,Q);this.emitter_=new S,this.onSelect_=this.onSelect_.bind(this),this.pool_=Q,this.rackApi_.on("change",(X)=>{this.emitter_.emit("change",X)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(J){let Q=this.controller.view.element.ownerDocument,X=new iJ(Q,{blade:LJ(),itemProps:H.fromObject({selected:!1,title:J.title}),props:H.fromObject({selected:!1}),viewProps:c.create()}),Z=this.pool_.createApi(X);return this.rackApi_.add(Z,J.index)}removePage(J){this.rackApi_.remove(this.rackApi_.children[J])}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}onSelect_(J){this.emitter_.emit("select",new oX(this,J.rawValue))}}class BZ extends rJ{get title(){var J;return(J=this.controller.itemController.props.get("title"))!==null&&J!==void 0?J:""}set title(J){this.controller.itemController.props.set("title",J)}get selected(){return this.controller.props.get("selected")}set selected(J){this.controller.props.set("selected",J)}get children(){return this.rackApi_.children}addButton(J){return this.rackApi_.addButton(J)}addFolder(J){return this.rackApi_.addFolder(J)}addTab(J){return this.rackApi_.addTab(J)}add(J,Q){this.rackApi_.add(J,Q)}remove(J){this.rackApi_.remove(J)}addBinding(J,Q,X){return this.rackApi_.addBinding(J,Q,X)}addBlade(J){return this.rackApi_.addBlade(J)}}var LX=-1;class SZ{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=I(!0),this.selectedIndex=I(LX),this.items_=[]}add(J,Q){let X=Q!==null&&Q!==void 0?Q:this.items_.length;this.items_.splice(X,0,J),J.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(J){let Q=this.items_.indexOf(J);if(Q<0)return;this.items_.splice(Q,1),J.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_()}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=LX,this.empty.rawValue=!0;return}let J=this.items_.findIndex((Q)=>Q.rawValue);if(J<0)this.items_.forEach((Q,X)=>{Q.rawValue=X===0}),this.selectedIndex.rawValue=0;else this.items_.forEach((Q,X)=>{Q.rawValue=X===J}),this.selectedIndex.rawValue=J;this.empty.rawValue=!1}onItemSelectedChange_(J){if(J.rawValue){let Q=this.items_.findIndex((X)=>X===J.sender);this.items_.forEach((X,Z)=>{X.rawValue=Z===Q}),this.selectedIndex.rawValue=Q}else this.keepSelection_()}}var AJ=$("tab");class AZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(AJ(),FZ()),Q.viewProps.bindClassModifiers(this.element),u(Q.empty,$J(this.element,AJ(void 0,"nop")));let X=J.createElement("div");X.classList.add(AJ("t")),this.element.appendChild(X),this.itemsElement=X;let Z=J.createElement("div");Z.classList.add(AJ("i")),this.element.appendChild(Z);let q=J.createElement("div");q.classList.add(AJ("c")),this.element.appendChild(q),this.contentsElement=q}}class MQ extends oJ{constructor(J,Q){let X=new SZ,Z=new AZ(J,{empty:X.empty,viewProps:Q.viewProps});super({blade:Q.blade,rackController:new aJ({blade:Q.blade,element:Z.contentsElement,viewProps:Q.viewProps}),view:Z});this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);let q=this.rackController.rack;q.emitter.on("add",this.onRackAdd_),q.emitter.on("remove",this.onRackRemove_),this.tab=X}add(J,Q){this.rackController.rack.add(J,Q)}remove(J){this.rackController.rack.remove(this.rackController.rack.children[J])}onRackAdd_(J){if(!J.root)return;let Q=J.bladeController;QZ(this.view.itemsElement,Q.itemController.view.element,J.index),Q.itemController.viewProps.set("parent",this.viewProps),this.tab.add(Q.props.value("selected"))}onRackRemove_(J){if(!J.root)return;let Q=J.bladeController;VQ(Q.itemController.view.element),Q.itemController.viewProps.set("parent",null),this.tab.remove(Q.props.value("selected"))}}var wZ=R({id:"tab",type:"blade",accept(J){let Q=j(J,(X)=>({pages:X.required.array(X.required.object({title:X.required.string})),view:X.required.constant("tab")}));if(!Q||Q.pages.length===0)return null;return{params:Q}},controller(J){let Q=new MQ(J.document,{blade:J.blade,viewProps:J.viewProps});return J.params.pages.forEach((X)=>{let Z=new iJ(J.document,{blade:LJ(),itemProps:H.fromObject({selected:!1,title:X.title}),props:H.fromObject({selected:!1}),viewProps:c.create()});Q.add(Z)}),Q},api(J){if(J.controller instanceof MQ)return new MZ(J.controller,J.pool);if(J.controller instanceof iJ)return new BZ(J.controller,J.pool);return null}});function D1(J,Q){let X=J.accept(Q.params);if(!X)return null;let Z=j(Q.params,(q)=>({disabled:q.optional.boolean,hidden:q.optional.boolean}));return J.controller({blade:LJ(),document:Q.document,params:P(Object.assign(Object.assign({},X.params),{disabled:Z===null||Z===void 0?void 0:Z.disabled,hidden:Z===null||Z===void 0?void 0:Z.hidden})),viewProps:c.create({disabled:Z===null||Z===void 0?void 0:Z.disabled,hidden:Z===null||Z===void 0?void 0:Z.hidden})})}class eJ extends DJ{get options(){return this.controller.valueController.props.get("options")}set options(J){this.controller.valueController.props.set("options",J)}}class NZ{constructor(){this.disabled=!1,this.emitter=new S}dispose(){}tick(){if(this.disabled)return;this.emitter.emit("tick",{sender:this})}}class RZ{constructor(J,Q){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=J,this.emitter=new S,this.interval_=Q,this.setTimer_()}get disabled(){return this.disabled_}set disabled(J){if(this.disabled_=J,this.disabled_)this.clearTimer_();else this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;let J=this.doc_.defaultView;if(J)J.clearInterval(this.timerId_);this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;let J=this.doc_.defaultView;if(J)this.timerId_=J.setInterval(this.onTick_,this.interval_)}onTick_(){if(this.disabled_)return;this.emitter.emit("tick",{sender:this})}}class OJ{constructor(J){this.constraints=J}constrain(J){return this.constraints.reduce((Q,X)=>{return X.constrain(Q)},J)}}function lJ(J,Q){if(J instanceof Q)return J;if(J instanceof OJ){let X=J.constraints.reduce((Z,q)=>{if(Z)return Z;return q instanceof Q?q:null},null);if(X)return X}return null}class IJ{constructor(J){this.values=H.fromObject({options:J})}constrain(J){let Q=this.values.get("options");if(Q.length===0)return J;return Q.filter((Z)=>{return Z.value===J}).length>0?J:Q[0].value}}function hJ(J){var Q;let X=OQ;if(Array.isArray(J))return(Q=j({items:J},(Z)=>({items:Z.required.array(Z.required.object({text:Z.required.string,value:Z.required.raw}))})))===null||Q===void 0?void 0:Q.items;if(typeof J==="object")return X.required.raw(J).value;return}function fQ(J){if(Array.isArray(J))return J;let Q=[];return Object.keys(J).forEach((X)=>{Q.push({text:X,value:J[X]})}),Q}function vQ(J){return!O(J)?new IJ(fQ(P(J))):null}var DQ=$("lst");class kZ{constructor(J,Q){this.onValueChange_=this.onValueChange_.bind(this),this.props_=Q.props,this.element=J.createElement("div"),this.element.classList.add(DQ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("select");X.classList.add(DQ("s")),Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.selectElement=X;let Z=J.createElement("div");Z.classList.add(DQ("m")),Z.appendChild(tJ(J,"dropdown")),this.element.appendChild(Z),Q.value.emitter.on("change",this.onValueChange_),this.value_=Q.value,x(this.props_,"options",(q)=>{XZ(this.selectElement),q.forEach((Y)=>{let W=J.createElement("option");W.textContent=Y.text,this.selectElement.appendChild(W)}),this.update_()})}update_(){let J=this.props_.get("options").map((Q)=>Q.value);this.selectElement.selectedIndex=J.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class g{constructor(J,Q){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=Q.props,this.value=Q.value,this.viewProps=Q.viewProps,this.view=new kZ(J,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(J){let Q=P(J.currentTarget);this.value.rawValue=this.props.get("options")[Q.selectedIndex].value}importProps(J){return V(J,null,(Q)=>({options:Q.required.custom(hJ)}),(Q)=>{return this.props.set("options",fQ(Q.options)),!0})}exportProps(){return y(null,{options:this.props.get("options")})}}var OX=$("pop");class TZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(OX()),Q.viewProps.bindClassModifiers(this.element),u(Q.shows,$J(this.element,OX(void 0,"v")))}}class uQ{constructor(J,Q){this.shows=I(!1),this.viewProps=Q.viewProps,this.view=new TZ(J,{shows:this.shows,viewProps:this.viewProps})}}var IX=$("txt");class PZ{constructor(J,Q){this.onChange_=this.onChange_.bind(this),this.element=J.createElement("div"),this.element.classList.add(IX()),Q.viewProps.bindClassModifiers(this.element),this.props_=Q.props,this.props_.emitter.on("change",this.onChange_);let X=J.createElement("input");X.classList.add(IX("i")),X.type="text",Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.inputElement=X,Q.value.emitter.on("change",this.onChange_),this.value_=Q.value,this.refresh()}refresh(){let J=this.props_.get("formatter");this.inputElement.value=J(this.value_.rawValue)}onChange_(){this.refresh()}}class GJ{constructor(J,Q){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=Q.parser,this.props=Q.props,this.value=Q.value,this.viewProps=Q.viewProps,this.view=new PZ(J,{props:Q.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(J){let X=P(J.currentTarget).value,Z=this.parser_(X);if(!O(Z))this.value.rawValue=Z;this.view.refresh()}}function G1(J){return String(J)}function VZ(J){if(J==="false")return!1;return!!J}function jX(J){return G1(J)}function z1(J){return(Q)=>{return J.reduce((X,Z)=>{if(X!==null)return X;return Z(Q)},null)}}var K1=T(0);function nJ(J){return K1(J)+"%"}function yZ(J){return String(J)}function BQ(J){return J}function jJ({primary:J,secondary:Q,forward:X,backward:Z}){let q=!1;function Y(W){if(q)return;q=!0,W(),q=!1}J.emitter.on("change",(W)=>{Y(()=>{Q.setRawValue(X(J.rawValue,Q.rawValue),W.options)})}),Q.emitter.on("change",(W)=>{Y(()=>{J.setRawValue(Z(J.rawValue,Q.rawValue),W.options)}),Y(()=>{Q.setRawValue(X(J.rawValue,Q.rawValue),W.options)})}),Y(()=>{Q.setRawValue(X(J.rawValue,Q.rawValue),{forceEmit:!1,last:!0})})}function k(J,Q){let X=J*(Q.altKey?0.1:1)*(Q.shiftKey?10:1);if(Q.upKey)return+X;else if(Q.downKey)return-X;return 0}function kJ(J){return{altKey:J.altKey,downKey:J.key==="ArrowDown",shiftKey:J.shiftKey,upKey:J.key==="ArrowUp"}}function p(J){return{altKey:J.altKey,downKey:J.key==="ArrowLeft",shiftKey:J.shiftKey,upKey:J.key==="ArrowRight"}}function H1(J){return J==="ArrowUp"||J==="ArrowDown"}function _Z(J){return H1(J)||J==="ArrowLeft"||J==="ArrowRight"}function GQ(J,Q){var X,Z;let q=Q.ownerDocument.defaultView,Y=Q.getBoundingClientRect();return{x:J.pageX-(((X=q&&q.scrollX)!==null&&X!==void 0?X:0)+Y.left),y:J.pageY-(((Z=q&&q.scrollY)!==null&&Z!==void 0?Z:0)+Y.top)}}class a{constructor(J){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=J,this.emitter=new S,J.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),J.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),J.addEventListener("touchend",this.onTouchEnd_),J.addEventListener("mousedown",this.onMouseDown_)}computePosition_(J){let Q=this.elem_.getBoundingClientRect();return{bounds:{width:Q.width,height:Q.height},point:J?{x:J.x,y:J.y}:null}}onMouseDown_(J){var Q;J.preventDefault(),(Q=J.currentTarget)===null||Q===void 0||Q.focus();let X=this.elem_.ownerDocument;X.addEventListener("mousemove",this.onDocumentMouseMove_),X.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:J.altKey,data:this.computePosition_(GQ(J,this.elem_)),sender:this,shiftKey:J.shiftKey})}onDocumentMouseMove_(J){this.emitter.emit("move",{altKey:J.altKey,data:this.computePosition_(GQ(J,this.elem_)),sender:this,shiftKey:J.shiftKey})}onDocumentMouseUp_(J){let Q=this.elem_.ownerDocument;Q.removeEventListener("mousemove",this.onDocumentMouseMove_),Q.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:J.altKey,data:this.computePosition_(GQ(J,this.elem_)),sender:this,shiftKey:J.shiftKey})}onTouchStart_(J){J.preventDefault();let Q=J.targetTouches.item(0),X=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:J.altKey,data:this.computePosition_(Q?{x:Q.clientX-X.left,y:Q.clientY-X.top}:void 0),sender:this,shiftKey:J.shiftKey}),this.lastTouch_=Q}onTouchMove_(J){let Q=J.targetTouches.item(0),X=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:J.altKey,data:this.computePosition_(Q?{x:Q.clientX-X.left,y:Q.clientY-X.top}:void 0),sender:this,shiftKey:J.shiftKey}),this.lastTouch_=Q}onTouchEnd_(J){var Q;let X=(Q=J.targetTouches.item(0))!==null&&Q!==void 0?Q:this.lastTouch_,Z=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:J.altKey,data:this.computePosition_(X?{x:X.clientX-Z.left,y:X.clientY-Z.top}:void 0),sender:this,shiftKey:J.shiftKey})}}var _=$("txt");class hZ{constructor(J,Q){if(this.onChange_=this.onChange_.bind(this),this.props_=Q.props,this.props_.emitter.on("change",this.onChange_),this.element=J.createElement("div"),this.element.classList.add(_(),_(void 0,"num")),Q.arrayPosition)this.element.classList.add(_(void 0,Q.arrayPosition));Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("input");X.classList.add(_("i")),X.type="text",Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.inputElement=X,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=Q.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(_()),this.inputElement.classList.add(_("i"));let Z=J.createElement("div");Z.classList.add(_("k")),this.element.appendChild(Z),this.knobElement=Z;let q=J.createElementNS(C,"svg");q.classList.add(_("g")),this.knobElement.appendChild(q);let Y=J.createElementNS(C,"path");Y.classList.add(_("gb")),q.appendChild(Y),this.guideBodyElem_=Y;let W=J.createElementNS(C,"path");W.classList.add(_("gh")),q.appendChild(W),this.guideHeadElem_=W;let U=J.createElement("div");U.classList.add($("tt")()),this.knobElement.appendChild(U),this.tooltipElem_=U,Q.value.emitter.on("change",this.onChange_),this.value=Q.value,this.refresh()}onDraggingChange_(J){if(J.rawValue===null){this.element.classList.remove(_(void 0,"drg"));return}this.element.classList.add(_(void 0,"drg"));let Q=J.rawValue/this.props_.get("pointerScale"),X=Q+(Q>0?-1:Q<0?1:0),Z=w(-X,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${X+Z},0 L${X},4 L${X+Z},8`,`M ${Q},-1 L${Q},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${Q},4`);let q=this.props_.get("formatter");this.tooltipElem_.textContent=q(this.value.rawValue),this.tooltipElem_.style.left=`${Q}px`}refresh(){let J=this.props_.get("formatter");this.inputElement.value=J(this.value.rawValue)}onChange_(){this.refresh()}}class MJ{constructor(J,Q){var X;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=Q.parser,this.props=Q.props,this.sliderProps_=(X=Q.sliderProps)!==null&&X!==void 0?X:null,this.value=Q.value,this.viewProps=Q.viewProps,this.dragging_=I(null),this.view=new hZ(J,{arrayPosition:Q.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);let Z=new a(this.view.knobElement);Z.emitter.on("down",this.onPointerDown_),Z.emitter.on("move",this.onPointerMove_),Z.emitter.on("up",this.onPointerUp_)}constrainValue_(J){var Q,X;let Z=(Q=this.sliderProps_)===null||Q===void 0?void 0:Q.get("min"),q=(X=this.sliderProps_)===null||X===void 0?void 0:X.get("max"),Y=J;if(Z!==void 0)Y=Math.max(Y,Z);if(q!==void 0)Y=Math.min(Y,q);return Y}onInputChange_(J){let X=P(J.currentTarget).value,Z=this.parser_(X);if(!O(Z))this.value.rawValue=this.constrainValue_(Z);this.view.refresh()}onInputKeyDown_(J){let Q=k(this.props.get("keyScale"),kJ(J));if(Q===0)return;this.value.setRawValue(this.constrainValue_(this.value.rawValue+Q),{forceEmit:!1,last:!1})}onInputKeyUp_(J){if(k(this.props.get("keyScale"),kJ(J))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(J){if(!J.point)return null;let Q=J.point.x-J.bounds.width/2;return this.constrainValue_(this.originRawValue_+Q*this.props.get("pointerScale"))}onPointerMove_(J){let Q=this.computeDraggingValue_(J.data);if(Q===null)return;this.value.setRawValue(Q,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_}onPointerUp_(J){let Q=this.computeDraggingValue_(J.data);if(Q===null)return;this.value.setRawValue(Q,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null}}var zQ=$("sld");class EZ{constructor(J,Q){this.onChange_=this.onChange_.bind(this),this.props_=Q.props,this.props_.emitter.on("change",this.onChange_),this.element=J.createElement("div"),this.element.classList.add(zQ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(zQ("t")),Q.viewProps.bindTabIndex(X),this.element.appendChild(X),this.trackElement=X;let Z=J.createElement("div");Z.classList.add(zQ("k")),this.trackElement.appendChild(Z),this.knobElement=Z,Q.value.emitter.on("change",this.onChange_),this.value=Q.value,this.update_()}update_(){let J=w(L(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${J}%`}onChange_(){this.update_()}}class CZ{constructor(J,Q){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.props=Q.props,this.view=new EZ(J,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(J,Q){if(!J.point)return;this.value.setRawValue(L(w(J.point.x,0,J.bounds.width),0,J.bounds.width,this.props.get("min"),this.props.get("max")),Q)}onPointerDownOrMove_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerUp_(J){this.handlePointerEvent_(J.data,{forceEmit:!0,last:!0})}onKeyDown_(J){let Q=k(this.props.get("keyScale"),p(J));if(Q===0)return;this.value.setRawValue(this.value.rawValue+Q,{forceEmit:!1,last:!1})}onKeyUp_(J){if(k(this.props.get("keyScale"),p(J))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var KQ=$("sldtxt");class xZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(KQ());let X=J.createElement("div");X.classList.add(KQ("s")),this.sliderView_=Q.sliderView,X.appendChild(this.sliderView_.element),this.element.appendChild(X);let Z=J.createElement("div");Z.classList.add(KQ("t")),this.textView_=Q.textView,Z.appendChild(this.textView_.element),this.element.appendChild(Z)}}class TJ{constructor(J,Q){this.value=Q.value,this.viewProps=Q.viewProps,this.sliderC_=new CZ(J,{props:Q.sliderProps,value:Q.value,viewProps:this.viewProps}),this.textC_=new MJ(J,{parser:Q.parser,props:Q.textProps,sliderProps:Q.sliderProps,value:Q.value,viewProps:Q.viewProps}),this.view=new xZ(J,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(J){return V(J,null,(Q)=>({max:Q.required.number,min:Q.required.number}),(Q)=>{let X=this.sliderC_.props;return X.set("max",Q.max),X.set("min",Q.min),!0})}exportProps(){let J=this.sliderC_.props;return y(null,{max:J.get("max"),min:J.get("min")})}}function bZ(J){return{sliderProps:new H({keyScale:J.keyScale,max:J.max,min:J.min}),textProps:new H({formatter:I(J.formatter),keyScale:J.keyScale,pointerScale:I(J.pointerScale)})}}var $1={containerUnitSize:"cnt-usz"};function fZ(J){return`--${$1[J]}`}function PJ(J){return tX(J)}function t(J){if(!LQ(J))return;return j(J,PJ)}function v(J,Q){if(!J)return;let X=[],Z=iX(J,Q);if(Z)X.push(Z);let q=lX(J);if(q)X.push(q);return new OJ(X)}function F1(J){if(!J)return!1;return J.major===FJ.major}function vZ(J){if(J==="inline"||J==="popup")return J;return}function EJ(J,Q){J.write(Q)}var dJ=$("ckb");class uZ{constructor(J,Q){this.onValueChange_=this.onValueChange_.bind(this),this.element=J.createElement("div"),this.element.classList.add(dJ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("label");X.classList.add(dJ("l")),this.element.appendChild(X),this.labelElement=X;let Z=J.createElement("input");Z.classList.add(dJ("i")),Z.type="checkbox",this.labelElement.appendChild(Z),this.inputElement=Z,Q.viewProps.bindDisabled(this.inputElement);let q=J.createElement("div");q.classList.add(dJ("w")),this.labelElement.appendChild(q);let Y=tJ(J,"check");q.appendChild(Y),Q.value.emitter.on("change",this.onValueChange_),this.value=Q.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class dZ{constructor(J,Q){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.view=new uZ(J,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(J){let Q=P(J.currentTarget);this.value.rawValue=Q.checked,J.preventDefault(),J.stopPropagation()}onLabelMouseDown_(J){J.preventDefault()}}function L1(J){let Q=[],X=vQ(J.options);if(X)Q.push(X);return new OJ(Q)}var O1=R({id:"input-bool",type:"input",accept:(J,Q)=>{if(typeof J!=="boolean")return null;let X=j(Q,(Z)=>({options:Z.optional.custom(hJ),readonly:Z.optional.constant(!1)}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>VZ,constraint:(J)=>L1(J.params),writer:(J)=>EJ},controller:(J)=>{let{document:Q,value:X,constraint:Z}=J,q=Z&&lJ(Z,IJ);if(q)return new g(Q,{props:new H({options:q.values.value("options")}),value:X,viewProps:J.viewProps});return new dZ(Q,{value:X,viewProps:J.viewProps})},api(J){if(typeof J.controller.value.rawValue!=="boolean")return null;if(J.controller.valueController instanceof g)return new eJ(J.controller);return null}}),e=$("col");class mZ{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(e()),Q.foldable.bindExpandedClass(this.element,e(void 0,"expanded")),x(Q.foldable,"completed",$J(this.element,e(void 0,"cpl")));let X=J.createElement("div");X.classList.add(e("h")),this.element.appendChild(X);let Z=J.createElement("div");Z.classList.add(e("s")),X.appendChild(Z),this.swatchElement=Z;let q=J.createElement("div");if(q.classList.add(e("t")),X.appendChild(q),this.textElement=q,Q.pickerLayout==="inline"){let Y=J.createElement("div");Y.classList.add(e("p")),this.element.appendChild(Y),this.pickerElement=Y}else this.pickerElement=null}}function I1(J,Q,X){let Z=w(J/255,0,1),q=w(Q/255,0,1),Y=w(X/255,0,1),W=Math.max(Z,q,Y),U=Math.min(Z,q,Y),G=W-U,D=0,z=0,K=(U+W)/2;if(G!==0){if(z=G/(1-Math.abs(W+U-1)),Z===W)D=(q-Y)/G;else if(q===W)D=2+(Y-Z)/G;else D=4+(Z-q)/G;D=D/6+(D<0?1:0)}return[D*360,z*100,K*100]}function j1(J,Q,X){let Z=(J%360+360)%360,q=w(Q/100,0,1),Y=w(X/100,0,1),W=(1-Math.abs(2*Y-1))*q,U=W*(1-Math.abs(Z/60%2-1)),G=Y-W/2,D,z,K;if(Z>=0&&Z<60)[D,z,K]=[W,U,0];else if(Z>=60&&Z<120)[D,z,K]=[U,W,0];else if(Z>=120&&Z<180)[D,z,K]=[0,W,U];else if(Z>=180&&Z<240)[D,z,K]=[0,U,W];else if(Z>=240&&Z<300)[D,z,K]=[U,0,W];else[D,z,K]=[W,0,U];return[(D+G)*255,(z+G)*255,(K+G)*255]}function M1(J,Q,X){let Z=w(J/255,0,1),q=w(Q/255,0,1),Y=w(X/255,0,1),W=Math.max(Z,q,Y),U=Math.min(Z,q,Y),G=W-U,D;if(G===0)D=0;else if(W===Z)D=60*(((q-Y)/G%6+6)%6);else if(W===q)D=60*((Y-Z)/G+2);else D=60*((Z-q)/G+4);let z=W===0?0:G/W,K=W;return[D,z*100,K*100]}function gZ(J,Q,X){let Z=pX(J,360),q=w(Q/100,0,1),Y=w(X/100,0,1),W=Y*q,U=W*(1-Math.abs(Z/60%2-1)),G=Y-W,D,z,K;if(Z>=0&&Z<60)[D,z,K]=[W,U,0];else if(Z>=60&&Z<120)[D,z,K]=[U,W,0];else if(Z>=120&&Z<180)[D,z,K]=[0,W,U];else if(Z>=180&&Z<240)[D,z,K]=[0,U,W];else if(Z>=240&&Z<300)[D,z,K]=[U,0,W];else[D,z,K]=[W,0,U];return[(D+G)*255,(z+G)*255,(K+G)*255]}function B1(J,Q,X){let Z=X+Q*(100-Math.abs(2*X-100))/200;return[J,Z!==0?Q*(100-Math.abs(2*X-100))/Z:0,X+Q*(100-Math.abs(2*X-100))/200]}function S1(J,Q,X){let Z=100-Math.abs(X*(200-Q)/100-100);return[J,Z!==0?Q*X/Z:0,X*(200-Q)/200]}function b(J){return[J[0],J[1],J[2]]}function JQ(J,Q){return[J[0],J[1],J[2],Q]}var A1={hsl:{hsl:(J,Q,X)=>[J,Q,X],hsv:B1,rgb:j1},hsv:{hsl:S1,hsv:(J,Q,X)=>[J,Q,X],rgb:gZ},rgb:{hsl:I1,hsv:M1,rgb:(J,Q,X)=>[J,Q,X]}};function zJ(J,Q){return[Q==="float"?1:J==="rgb"?255:360,Q==="float"?1:J==="rgb"?255:100,Q==="float"?1:J==="rgb"?255:100]}function w1(J,Q){return J===Q?Q:pX(J,Q)}function pZ(J,Q,X){var Z;let q=zJ(Q,X);return[Q==="rgb"?w(J[0],0,q[0]):w1(J[0],q[0]),w(J[1],0,q[1]),w(J[2],0,q[2]),w((Z=J[3])!==null&&Z!==void 0?Z:1,0,1)]}function MX(J,Q,X,Z){let q=zJ(Q,X),Y=zJ(Q,Z);return J.map((W,U)=>W/q[U]*Y[U])}function cZ(J,Q,X){let Z=MX(J,Q.mode,Q.type,"int"),q=A1[Q.mode][X.mode](...Z);return MX(q,X.mode,"int",X.type)}class F{static black(){return new F([0,0,0],"rgb")}constructor(J,Q){this.type="int",this.mode=Q,this.comps_=pZ(J,Q,this.type)}getComponents(J){return JQ(cZ(b(this.comps_),{mode:this.mode,type:this.type},{mode:J!==null&&J!==void 0?J:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let J=this.getComponents("rgb");return{r:J[0],g:J[1],b:J[2],a:J[3]}}}var i=$("colp");class sZ{constructor(J,Q){this.alphaViews_=null,this.element=J.createElement("div"),this.element.classList.add(i()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(i("hsv"));let Z=J.createElement("div");Z.classList.add(i("sv")),this.svPaletteView_=Q.svPaletteView,Z.appendChild(this.svPaletteView_.element),X.appendChild(Z);let q=J.createElement("div");q.classList.add(i("h")),this.hPaletteView_=Q.hPaletteView,q.appendChild(this.hPaletteView_.element),X.appendChild(q),this.element.appendChild(X);let Y=J.createElement("div");if(Y.classList.add(i("rgb")),this.textsView_=Q.textsView,Y.appendChild(this.textsView_.element),this.element.appendChild(Y),Q.alphaViews){this.alphaViews_={palette:Q.alphaViews.palette,text:Q.alphaViews.text};let W=J.createElement("div");W.classList.add(i("a"));let U=J.createElement("div");U.classList.add(i("ap")),U.appendChild(this.alphaViews_.palette.element),W.appendChild(U);let G=J.createElement("div");G.classList.add(i("at")),G.appendChild(this.alphaViews_.text.element),W.appendChild(G),this.element.appendChild(W)}}get allFocusableElements(){let J=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map((Q)=>Q.inputElement)];if(this.alphaViews_)J.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement);return J}}function N1(J){return J==="int"?"int":J==="float"?"float":void 0}function dQ(J){return j(J,(Q)=>({color:Q.optional.object({alpha:Q.optional.boolean,type:Q.optional.custom(N1)}),expanded:Q.optional.boolean,picker:Q.optional.custom(vZ),readonly:Q.optional.constant(!1)}))}function qJ(J){return J?0.1:1}function iZ(J){var Q;return(Q=J.color)===null||Q===void 0?void 0:Q.type}class QQ{constructor(J,Q){this.type="float",this.mode=Q,this.comps_=pZ(J,Q,this.type)}getComponents(J){return JQ(cZ(b(this.comps_),{mode:this.mode,type:this.type},{mode:J!==null&&J!==void 0?J:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let J=this.getComponents("rgb");return{r:J[0],g:J[1],b:J[2],a:J[3]}}}var R1={int:(J,Q)=>new F(J,Q),float:(J,Q)=>new QQ(J,Q)};function mQ(J,Q,X){return R1[X](J,Q)}function k1(J){return J.type==="float"}function T1(J){return J.type==="int"}function P1(J){let Q=J.getComponents(),X=zJ(J.mode,"int");return new F([Math.round(L(Q[0],0,1,0,X[0])),Math.round(L(Q[1],0,1,0,X[1])),Math.round(L(Q[2],0,1,0,X[2])),Q[3]],J.mode)}function V1(J){let Q=J.getComponents(),X=zJ(J.mode,"int");return new QQ([L(Q[0],0,X[0],0,1),L(Q[1],0,X[1],0,1),L(Q[2],0,X[2],0,1),Q[3]],J.mode)}function N(J,Q){if(J.type===Q)return J;if(T1(J)&&Q==="float")return V1(J);if(k1(J)&&Q==="int")return P1(J);throw M.shouldNeverHappen()}function y1(J,Q){return J.alpha===Q.alpha&&J.mode===Q.mode&&J.notation===Q.notation&&J.type===Q.type}function h(J,Q){let X=J.match(/^(.+)%$/);if(!X)return Math.min(parseFloat(J),Q);return Math.min(parseFloat(X[1])*0.01*Q,Q)}var _1={deg:(J)=>J,grad:(J)=>J*360/400,rad:(J)=>J*360/(2*Math.PI),turn:(J)=>J*360};function lZ(J){let Q=J.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!Q)return parseFloat(J);let X=parseFloat(Q[1]),Z=Q[2];return _1[Z](X)}function nZ(J){let Q=J.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Q)return null;let X=[h(Q[1],255),h(Q[2],255),h(Q[3],255)];if(isNaN(X[0])||isNaN(X[1])||isNaN(X[2]))return null;return X}function h1(J){let Q=nZ(J);return Q?new F(Q,"rgb"):null}function tZ(J){let Q=J.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Q)return null;let X=[h(Q[1],255),h(Q[2],255),h(Q[3],255),h(Q[4],1)];if(isNaN(X[0])||isNaN(X[1])||isNaN(X[2])||isNaN(X[3]))return null;return X}function E1(J){let Q=tZ(J);return Q?new F(Q,"rgb"):null}function rZ(J){let Q=J.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Q)return null;let X=[lZ(Q[1]),h(Q[2],100),h(Q[3],100)];if(isNaN(X[0])||isNaN(X[1])||isNaN(X[2]))return null;return X}function C1(J){let Q=rZ(J);return Q?new F(Q,"hsl"):null}function oZ(J){let Q=J.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Q)return null;let X=[lZ(Q[1]),h(Q[2],100),h(Q[3],100),h(Q[4],1)];if(isNaN(X[0])||isNaN(X[1])||isNaN(X[2])||isNaN(X[3]))return null;return X}function x1(J){let Q=oZ(J);return Q?new F(Q,"hsl"):null}function aZ(J){let Q=J.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(Q)return[parseInt(Q[1]+Q[1],16),parseInt(Q[2]+Q[2],16),parseInt(Q[3]+Q[3],16)];let X=J.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);if(X)return[parseInt(X[1],16),parseInt(X[2],16),parseInt(X[3],16)];return null}function b1(J){let Q=aZ(J);return Q?new F(Q,"rgb"):null}function eZ(J){let Q=J.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(Q)return[parseInt(Q[1]+Q[1],16),parseInt(Q[2]+Q[2],16),parseInt(Q[3]+Q[3],16),L(parseInt(Q[4]+Q[4],16),0,255,0,1)];let X=J.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);if(X)return[parseInt(X[1],16),parseInt(X[2],16),parseInt(X[3],16),L(parseInt(X[4],16),0,255,0,1)];return null}function f1(J){let Q=eZ(J);return Q?new F(Q,"rgb"):null}function J7(J){let Q=J.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!Q)return null;let X=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])];if(isNaN(X[0])||isNaN(X[1])||isNaN(X[2]))return null;return X}function BX(J){return(Q)=>{let X=J7(Q);return X?mQ(X,"rgb",J):null}}function Q7(J){let Q=J.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!Q)return null;let X=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3]),parseFloat(Q[4])];if(isNaN(X[0])||isNaN(X[1])||isNaN(X[2])||isNaN(X[3]))return null;return X}function SX(J){return(Q)=>{let X=Q7(Q);return X?mQ(X,"rgb",J):null}}var v1=[{parser:aZ,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:eZ,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:nZ,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:tZ,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:rZ,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:oZ,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:J7,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Q7,result:{alpha:!0,mode:"rgb",notation:"object"}}];function u1(J){return v1.reduce((Q,{parser:X,result:Z})=>{if(Q)return Q;return X(J)?Z:null},null)}function d1(J,Q="int"){let X=u1(J);if(!X)return null;if(X.notation==="hex"&&Q!=="float")return Object.assign(Object.assign({},X),{type:"int"});if(X.notation==="func")return Object.assign(Object.assign({},X),{type:Q});return null}function CJ(J){let Q=[b1,f1,h1,E1,C1,x1];if(J==="int")Q.push(BX("int"),SX("int"));if(J==="float")Q.push(BX("float"),SX("float"));let X=z1(Q);return(Z)=>{let q=X(Z);return q?N(q,J):null}}function m1(J){let Q=CJ("int");if(typeof J!=="string")return F.black();let X=Q(J);return X!==null&&X!==void 0?X:F.black()}function X7(J){let Q=w(Math.floor(J),0,255).toString(16);return Q.length===1?`0${Q}`:Q}function gQ(J,Q="#"){let X=b(J.getComponents("rgb")).map(X7).join("");return`${Q}${X}`}function pQ(J,Q="#"){let X=J.getComponents("rgb"),Z=[X[0],X[1],X[2],X[3]*255].map(X7).join("");return`${Q}${Z}`}function Z7(J){let Q=T(0),X=N(J,"int");return`rgb(${b(X.getComponents("rgb")).map((q)=>Q(q)).join(", ")})`}function mJ(J){let Q=T(2),X=T(0);return`rgba(${N(J,"int").getComponents("rgb").map((Y,W)=>{return(W===3?Q:X)(Y)}).join(", ")})`}function g1(J){let Q=[T(0),nJ,nJ],X=N(J,"int");return`hsl(${b(X.getComponents("hsl")).map((q,Y)=>Q[Y](q)).join(", ")})`}function p1(J){let Q=[T(0),nJ,nJ,T(2)];return`hsla(${N(J,"int").getComponents("hsl").map((q,Y)=>Q[Y](q)).join(", ")})`}function q7(J,Q){let X=T(Q==="float"?2:0),Z=["r","g","b"],q=N(J,Q);return`{${b(q.getComponents("rgb")).map((W,U)=>`${Z[U]}: ${X(W)}`).join(", ")}}`}function c1(J){return(Q)=>q7(Q,J)}function Y7(J,Q){let X=T(2),Z=T(Q==="float"?2:0),q=["r","g","b","a"];return`{${N(J,Q).getComponents("rgb").map((U,G)=>{let D=G===3?X:Z;return`${q[G]}: ${D(U)}`}).join(", ")}}`}function s1(J){return(Q)=>Y7(Q,J)}var i1=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:gQ},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:pQ},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Z7},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:mJ},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:g1},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:p1},...["int","float"].reduce((J,Q)=>{return[...J,{format:{alpha:!1,mode:"rgb",notation:"object",type:Q},stringifier:c1(Q)},{format:{alpha:!0,mode:"rgb",notation:"object",type:Q},stringifier:s1(Q)}]},[])];function W7(J){return i1.reduce((Q,X)=>{if(Q)return Q;return y1(X.format,J)?X.stringifier:null},null)}var wJ=$("apl");class U7{constructor(J,Q){this.onValueChange_=this.onValueChange_.bind(this),this.value=Q.value,this.value.emitter.on("change",this.onValueChange_),this.element=J.createElement("div"),this.element.classList.add(wJ()),Q.viewProps.bindClassModifiers(this.element),Q.viewProps.bindTabIndex(this.element);let X=J.createElement("div");X.classList.add(wJ("b")),this.element.appendChild(X);let Z=J.createElement("div");Z.classList.add(wJ("c")),X.appendChild(Z),this.colorElem_=Z;let q=J.createElement("div");q.classList.add(wJ("m")),this.element.appendChild(q),this.markerElem_=q;let Y=J.createElement("div");Y.classList.add(wJ("p")),this.markerElem_.appendChild(Y),this.previewElem_=Y,this.update_()}update_(){let J=this.value.rawValue,Q=J.getComponents("rgb"),X=new F([Q[0],Q[1],Q[2],0],"rgb"),Z=new F([Q[0],Q[1],Q[2],255],"rgb"),q=["to right",mJ(X),mJ(Z)];this.colorElem_.style.background=`linear-gradient(${q.join(",")})`,this.previewElem_.style.backgroundColor=mJ(J);let Y=L(Q[3],0,1,0,100);this.markerElem_.style.left=`${Y}%`}onValueChange_(){this.update_()}}class D7{constructor(J,Q){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.view=new U7(J,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(J,Q){if(!J.point)return;let X=J.point.x/J.bounds.width,Z=this.value.rawValue,[q,Y,W]=Z.getComponents("hsv");this.value.setRawValue(new F([q,Y,W,X],"hsv"),Q)}onPointerDown_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerMove_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerUp_(J){this.handlePointerEvent_(J.data,{forceEmit:!0,last:!0})}onKeyDown_(J){let Q=k(qJ(!0),p(J));if(Q===0)return;let X=this.value.rawValue,[Z,q,Y,W]=X.getComponents("hsv");this.value.setRawValue(new F([Z,q,Y,W+Q],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(J){if(k(qJ(!0),p(J))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var WJ=$("coltxt");function l1(J){let Q=J.createElement("select"),X=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return Q.appendChild(X.reduce((Z,q)=>{let Y=J.createElement("option");return Y.textContent=q.text,Y.value=q.value,Z.appendChild(Y),Z},J.createDocumentFragment())),Q}class G7{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(WJ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(WJ("m")),this.modeElem_=l1(J),this.modeElem_.classList.add(WJ("ms")),X.appendChild(this.modeSelectElement),Q.viewProps.bindDisabled(this.modeElem_);let Z=J.createElement("div");Z.classList.add(WJ("mm")),Z.appendChild(tJ(J,"dropdown")),X.appendChild(Z),this.element.appendChild(X);let q=J.createElement("div");q.classList.add(WJ("w")),this.element.appendChild(q),this.inputsElem_=q,this.inputViews_=Q.inputViews,this.applyInputViews_(),u(Q.mode,(Y)=>{this.modeElem_.value=Y})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(J){this.inputViews_=J,this.applyInputViews_()}applyInputViews_(){XZ(this.inputsElem_);let J=this.element.ownerDocument;this.inputViews_.forEach((Q)=>{let X=J.createElement("div");X.classList.add(WJ("c")),X.appendChild(Q.element),this.inputsElem_.appendChild(X)})}}function n1(J){return T(J==="float"?2:0)}function t1(J,Q,X){let Z=zJ(J,Q)[X];return new KJ({min:0,max:Z})}function r1(J,Q,X){return new MJ(J,{arrayPosition:X===0?"fst":X===2?"lst":"mid",parser:Q.parser,props:H.fromObject({formatter:n1(Q.colorType),keyScale:qJ(!1),pointerScale:Q.colorType==="float"?0.01:1}),value:I(0,{constraint:t1(Q.colorMode,Q.colorType,X)}),viewProps:Q.viewProps})}function o1(J,Q){let X={colorMode:Q.colorMode,colorType:Q.colorType,parser:m,viewProps:Q.viewProps};return[0,1,2].map((Z)=>{let q=r1(J,X,Z);return jJ({primary:Q.value,secondary:q.value,forward(Y){return N(Y,Q.colorType).getComponents(Q.colorMode)[Z]},backward(Y,W){let U=Q.colorMode,D=N(Y,Q.colorType).getComponents(U);D[Z]=W;let z=mQ(JQ(b(D),D[3]),U,Q.colorType);return N(z,"int")}}),q})}function a1(J,Q){let X=new GJ(J,{parser:CJ("int"),props:H.fromObject({formatter:gQ}),value:I(F.black()),viewProps:Q.viewProps});return jJ({primary:Q.value,secondary:X.value,forward:(Z)=>new F(b(Z.getComponents()),Z.mode),backward:(Z,q)=>new F(JQ(b(q.getComponents(Z.mode)),Z.getComponents()[3]),Z.mode)}),[X]}function e1(J){return J!=="hex"}class z7{constructor(J,Q){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=Q.colorType,this.value=Q.value,this.viewProps=Q.viewProps,this.colorMode=I(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(J),this.view=new G7(J,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(J){let Q=this.colorMode.rawValue;if(e1(Q))return o1(J,{colorMode:Q,colorType:this.colorType_,value:this.value,viewProps:this.viewProps});return a1(J,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(J){let Q=J.currentTarget;this.colorMode.rawValue=Q.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map((X)=>X.view)}}var HQ=$("hpl");class K7{constructor(J,Q){this.onValueChange_=this.onValueChange_.bind(this),this.value=Q.value,this.value.emitter.on("change",this.onValueChange_),this.element=J.createElement("div"),this.element.classList.add(HQ()),Q.viewProps.bindClassModifiers(this.element),Q.viewProps.bindTabIndex(this.element);let X=J.createElement("div");X.classList.add(HQ("c")),this.element.appendChild(X);let Z=J.createElement("div");Z.classList.add(HQ("m")),this.element.appendChild(Z),this.markerElem_=Z,this.update_()}update_(){let J=this.value.rawValue,[Q]=J.getComponents("hsv");this.markerElem_.style.backgroundColor=Z7(new F([Q,100,100],"hsv"));let X=L(Q,0,360,0,100);this.markerElem_.style.left=`${X}%`}onValueChange_(){this.update_()}}class H7{constructor(J,Q){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.view=new K7(J,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(J,Q){if(!J.point)return;let X=L(w(J.point.x,0,J.bounds.width),0,J.bounds.width,0,360),Z=this.value.rawValue,[,q,Y,W]=Z.getComponents("hsv");this.value.setRawValue(new F([X,q,Y,W],"hsv"),Q)}onPointerDown_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerMove_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerUp_(J){this.handlePointerEvent_(J.data,{forceEmit:!0,last:!0})}onKeyDown_(J){let Q=k(qJ(!1),p(J));if(Q===0)return;let X=this.value.rawValue,[Z,q,Y,W]=X.getComponents("hsv");this.value.setRawValue(new F([Z+Q,q,Y,W],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(J){if(k(qJ(!1),p(J))===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}var $Q=$("svp"),AX=64;class $7{constructor(J,Q){this.onValueChange_=this.onValueChange_.bind(this),this.value=Q.value,this.value.emitter.on("change",this.onValueChange_),this.element=J.createElement("div"),this.element.classList.add($Q()),Q.viewProps.bindClassModifiers(this.element),Q.viewProps.bindTabIndex(this.element);let X=J.createElement("canvas");X.height=AX,X.width=AX,X.classList.add($Q("c")),this.element.appendChild(X),this.canvasElement=X;let Z=J.createElement("div");Z.classList.add($Q("m")),this.element.appendChild(Z),this.markerElem_=Z,this.update_()}update_(){let J=f0(this.canvasElement);if(!J)return;let X=this.value.rawValue.getComponents("hsv"),Z=this.canvasElement.width,q=this.canvasElement.height,Y=J.getImageData(0,0,Z,q),W=Y.data;for(let D=0;D<q;D++)for(let z=0;z<Z;z++){let K=L(z,0,Z,0,100),B=L(D,0,q,100,0),A=gZ(X[0],K,B),E=(D*Z+z)*4;W[E]=A[0],W[E+1]=A[1],W[E+2]=A[2],W[E+3]=255}J.putImageData(Y,0,0);let U=L(X[1],0,100,0,100);this.markerElem_.style.left=`${U}%`;let G=L(X[2],0,100,100,0);this.markerElem_.style.top=`${G}%`}onValueChange_(){this.update_()}}class F7{constructor(J,Q){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.view=new $7(J,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(J,Q){if(!J.point)return;let X=L(J.point.x,0,J.bounds.width,0,100),Z=L(J.point.y,0,J.bounds.height,100,0),[q,,,Y]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new F([q,X,Z,Y],"hsv"),Q)}onPointerDown_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerMove_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerUp_(J){this.handlePointerEvent_(J.data,{forceEmit:!0,last:!0})}onKeyDown_(J){if(_Z(J.key))J.preventDefault();let[Q,X,Z,q]=this.value.rawValue.getComponents("hsv"),Y=qJ(!1),W=k(Y,p(J)),U=k(Y,kJ(J));if(W===0&&U===0)return;this.value.setRawValue(new F([Q,X+W,Z+U,q],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(J){let Q=qJ(!1),X=k(Q,p(J)),Z=k(Q,kJ(J));if(X===0&&Z===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class L7{constructor(J,Q){if(this.value=Q.value,this.viewProps=Q.viewProps,this.hPaletteC_=new H7(J,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new F7(J,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=Q.supportsAlpha?{palette:new D7(J,{value:this.value,viewProps:this.viewProps}),text:new MJ(J,{parser:m,props:H.fromObject({pointerScale:0.01,keyScale:0.1,formatter:T(2)}),value:I(0,{constraint:new KJ({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_)jJ({primary:this.value,secondary:this.alphaIcs_.text.value,forward:(X)=>X.getComponents()[3],backward:(X,Z)=>{let q=X.getComponents();return q[3]=Z,new F(q,X.mode)}});this.textsC_=new z7(J,{colorType:Q.colorType,value:this.value,viewProps:this.viewProps}),this.view=new sZ(J,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:Q.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}var FQ=$("colsw");class O7{constructor(J,Q){this.onValueChange_=this.onValueChange_.bind(this),Q.value.emitter.on("change",this.onValueChange_),this.value=Q.value,this.element=J.createElement("div"),this.element.classList.add(FQ()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(FQ("sw")),this.element.appendChild(X),this.swatchElem_=X;let Z=J.createElement("button");Z.classList.add(FQ("b")),Q.viewProps.bindDisabled(Z),this.element.appendChild(Z),this.buttonElement=Z,this.update_()}update_(){let J=this.value.rawValue;this.swatchElem_.style.backgroundColor=pQ(J)}onValueChange_(){this.update_()}}class I7{constructor(J,Q){this.value=Q.value,this.viewProps=Q.viewProps,this.view=new O7(J,{value:this.value,viewProps:this.viewProps})}}class XQ{constructor(J,Q){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.foldable_=_J.create(Q.expanded),this.swatchC_=new I7(J,{value:this.value,viewProps:this.viewProps});let X=this.swatchC_.view.buttonElement;X.addEventListener("blur",this.onButtonBlur_),X.addEventListener("click",this.onButtonClick_),this.textC_=new GJ(J,{parser:Q.parser,props:H.fromObject({formatter:Q.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new mZ(J,{foldable:this.foldable_,pickerLayout:Q.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=Q.pickerLayout==="popup"?new uQ(J,{viewProps:this.viewProps}):null;let Z=new L7(J,{colorType:Q.colorType,supportsAlpha:Q.supportsAlpha,value:this.value,viewProps:this.viewProps});if(Z.view.allFocusableElements.forEach((q)=>{q.addEventListener("blur",this.onPopupChildBlur_),q.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=Z,this.popC_)this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(Z.view.element),jJ({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:(q)=>q,backward:(q,Y)=>Y});else if(this.view.pickerElement)this.view.pickerElement.appendChild(this.pickerC_.view.element),xQ(this.foldable_,this.view.pickerElement)}get textController(){return this.textC_}onButtonBlur_(J){if(!this.popC_)return;let Q=this.view.element,X=P(J.relatedTarget);if(!X||!Q.contains(X))this.popC_.shows.rawValue=!1}onButtonClick_(){if(this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded"))this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(J){if(!this.popC_)return;let Q=this.popC_.view.element,X=ZZ(J);if(X&&Q.contains(X))return;if(X&&X===this.swatchC_.view.buttonElement&&!PQ(Q.ownerDocument))return;this.popC_.shows.rawValue=!1}onPopupChildKeydown_(J){if(this.popC_){if(J.key==="Escape")this.popC_.shows.rawValue=!1}else if(this.view.pickerElement){if(J.key==="Escape")this.swatchC_.view.buttonElement.focus()}}}function J8(J){return b(J.getComponents("rgb")).reduce((Q,X)=>{return Q<<8|Math.floor(X)&255},0)}function Q8(J){return J.getComponents("rgb").reduce((Q,X,Z)=>{let q=Math.floor(Z===3?X*255:X)&255;return Q<<8|q},0)>>>0}function X8(J){return new F([J>>16&255,J>>8&255,J&255],"rgb")}function Z8(J){return new F([J>>24&255,J>>16&255,J>>8&255,L(J&255,0,255,0,1)],"rgb")}function q8(J){if(typeof J!=="number")return F.black();return X8(J)}function Y8(J){if(typeof J!=="number")return F.black();return Z8(J)}function gJ(J,Q){if(typeof J!=="object"||O(J))return!1;return Q in J&&typeof J[Q]==="number"}function j7(J){return gJ(J,"r")&&gJ(J,"g")&&gJ(J,"b")}function M7(J){return j7(J)&&gJ(J,"a")}function B7(J){return j7(J)}function cQ(J,Q){if(J.mode!==Q.mode)return!1;if(J.type!==Q.type)return!1;let X=J.getComponents(),Z=Q.getComponents();for(let q=0;q<X.length;q++)if(X[q]!==Z[q])return!1;return!0}function wX(J){return"a"in J?[J.r,J.g,J.b,J.a]:[J.r,J.g,J.b]}function W8(J){let Q=W7(J);return Q?(X,Z)=>{EJ(X,Q(Z))}:null}function U8(J){let Q=J?Q8:J8;return(X,Z)=>{EJ(X,Q(Z))}}function D8(J,Q,X){let q=N(Q,X).toRgbaObject();J.writeProperty("r",q.r),J.writeProperty("g",q.g),J.writeProperty("b",q.b),J.writeProperty("a",q.a)}function G8(J,Q,X){let q=N(Q,X).toRgbaObject();J.writeProperty("r",q.r),J.writeProperty("g",q.g),J.writeProperty("b",q.b)}function z8(J,Q){return(X,Z)=>{if(J)D8(X,Z,Q);else G8(X,Z,Q)}}function K8(J){var Q;if((Q=J===null||J===void 0?void 0:J.color)===null||Q===void 0?void 0:Q.alpha)return!0;return!1}function H8(J){return J?(Q)=>pQ(Q,"0x"):(Q)=>gQ(Q,"0x")}function $8(J){if("color"in J)return!0;if(J.view==="color")return!0;return!1}var F8=R({id:"input-color-number",type:"input",accept:(J,Q)=>{if(typeof J!=="number")return null;if(!$8(Q))return null;let X=dQ(Q);return X?{initialValue:J,params:Object.assign(Object.assign({},X),{supportsAlpha:K8(Q)})}:null},binding:{reader:(J)=>{return J.params.supportsAlpha?Y8:q8},equals:cQ,writer:(J)=>{return U8(J.params.supportsAlpha)}},controller:(J)=>{var Q,X;return new XQ(J.document,{colorType:"int",expanded:(Q=J.params.expanded)!==null&&Q!==void 0?Q:!1,formatter:H8(J.params.supportsAlpha),parser:CJ("int"),pickerLayout:(X=J.params.picker)!==null&&X!==void 0?X:"popup",supportsAlpha:J.params.supportsAlpha,value:J.value,viewProps:J.viewProps})}});function L8(J,Q){if(!B7(J))return N(F.black(),Q);if(Q==="int"){let X=wX(J);return new F(X,"rgb")}if(Q==="float"){let X=wX(J);return new QQ(X,"rgb")}return N(F.black(),"int")}function O8(J){return M7(J)}function I8(J){return(Q)=>{let X=L8(Q,J);return N(X,"int")}}function j8(J,Q){return(X)=>{if(J)return Y7(X,Q);return q7(X,Q)}}var M8=R({id:"input-color-object",type:"input",accept:(J,Q)=>{var X;if(!B7(J))return null;let Z=dQ(Q);return Z?{initialValue:J,params:Object.assign(Object.assign({},Z),{colorType:(X=iZ(Q))!==null&&X!==void 0?X:"int"})}:null},binding:{reader:(J)=>I8(J.params.colorType),equals:cQ,writer:(J)=>z8(O8(J.initialValue),J.params.colorType)},controller:(J)=>{var Q,X;let Z=M7(J.initialValue);return new XQ(J.document,{colorType:J.params.colorType,expanded:(Q=J.params.expanded)!==null&&Q!==void 0?Q:!1,formatter:j8(Z,J.params.colorType),parser:CJ("int"),pickerLayout:(X=J.params.picker)!==null&&X!==void 0?X:"popup",supportsAlpha:Z,value:J.value,viewProps:J.viewProps})}}),B8=R({id:"input-color-string",type:"input",accept:(J,Q)=>{if(typeof J!=="string")return null;if(Q.view==="text")return null;let X=d1(J,iZ(Q));if(!X)return null;let Z=W7(X);if(!Z)return null;let q=dQ(Q);return q?{initialValue:J,params:Object.assign(Object.assign({},q),{format:X,stringifier:Z})}:null},binding:{reader:()=>m1,equals:cQ,writer:(J)=>{let Q=W8(J.params.format);if(!Q)throw M.notBindable();return Q}},controller:(J)=>{var Q,X;return new XQ(J.document,{colorType:J.params.format.type,expanded:(Q=J.params.expanded)!==null&&Q!==void 0?Q:!1,formatter:J.params.stringifier,parser:CJ("int"),pickerLayout:(X=J.params.picker)!==null&&X!==void 0?X:"popup",supportsAlpha:J.params.format.alpha,value:J.value,viewProps:J.viewProps})}});class ZQ{constructor(J){this.components=J.components,this.asm_=J.assembly}constrain(J){let Q=this.asm_.toComponents(J).map((X,Z)=>{var q,Y;return(Y=(q=this.components[Z])===null||q===void 0?void 0:q.constrain(X))!==null&&Y!==void 0?Y:X});return this.asm_.fromComponents(Q)}}var NX=$("pndtxt");class S7{constructor(J,Q){this.textViews=Q.textViews,this.element=J.createElement("div"),this.element.classList.add(NX()),this.textViews.forEach((X)=>{let Z=J.createElement("div");Z.classList.add(NX("a")),Z.appendChild(X.element),this.element.appendChild(Z)})}}function S8(J,Q,X){return new MJ(J,{arrayPosition:X===0?"fst":X===Q.axes.length-1?"lst":"mid",parser:Q.parser,props:Q.axes[X].textProps,value:I(0,{constraint:Q.axes[X].constraint}),viewProps:Q.viewProps})}class qQ{constructor(J,Q){this.value=Q.value,this.viewProps=Q.viewProps,this.acs_=Q.axes.map((X,Z)=>S8(J,Q,Z)),this.acs_.forEach((X,Z)=>{jJ({primary:this.value,secondary:X.value,forward:(q)=>Q.assembly.toComponents(q)[Z],backward:(q,Y)=>{let W=Q.assembly.toComponents(q);return W[Z]=Y,Q.assembly.fromComponents(W)}})}),this.view=new S7(J,{textViews:this.acs_.map((X)=>X.view)})}get textControllers(){return this.acs_}}class A7 extends DJ{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(J){this.controller.valueController.sliderController.props.set("max",J)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(J){this.controller.valueController.sliderController.props.set("min",J)}}function A8(J,Q){let X=[],Z=iX(J,Q);if(Z)X.push(Z);let q=lX(J);if(q)X.push(q);let Y=vQ(J.options);if(Y)X.push(Y);return new OJ(X)}var w8=R({id:"input-number",type:"input",accept:(J,Q)=>{if(typeof J!=="number")return null;let X=j(Q,(Z)=>Object.assign(Object.assign({},tX(Z)),{options:Z.optional.custom(hJ),readonly:Z.optional.constant(!1)}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>gX,constraint:(J)=>A8(J.params,J.initialValue),writer:(J)=>EJ},controller:(J)=>{let{value:Q,constraint:X}=J,Z=X&&lJ(X,IJ);if(Z)return new g(J.document,{props:new H({options:Z.values.value("options")}),value:Q,viewProps:J.viewProps});let q=nX(J.params,Q.rawValue),Y=X&&lJ(X,KJ);if(Y)return new TJ(J.document,Object.assign(Object.assign({},bZ(Object.assign(Object.assign({},q),{keyScale:I(q.keyScale),max:Y.values.value("max"),min:Y.values.value("min")}))),{parser:m,value:Q,viewProps:J.viewProps}));return new MJ(J.document,{parser:m,props:H.fromObject(q),value:Q,viewProps:J.viewProps})},api(J){if(typeof J.controller.value.rawValue!=="number")return null;if(J.controller.valueController instanceof TJ)return new A7(J.controller);if(J.controller.valueController instanceof g)return new eJ(J.controller);return null}});class d{constructor(J=0,Q=0){this.x=J,this.y=Q}getComponents(){return[this.x,this.y]}static isObject(J){if(O(J))return!1;let{x:Q,y:X}=J;if(typeof Q!=="number"||typeof X!=="number")return!1;return!0}static equals(J,Q){return J.x===Q.x&&J.y===Q.y}toObject(){return{x:this.x,y:this.y}}}var w7={toComponents:(J)=>J.getComponents(),fromComponents:(J)=>new d(...J)},UJ=$("p2d");class N7{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(UJ()),Q.viewProps.bindClassModifiers(this.element),u(Q.expanded,$J(this.element,UJ(void 0,"expanded")));let X=J.createElement("div");X.classList.add(UJ("h")),this.element.appendChild(X);let Z=J.createElement("button");Z.classList.add(UJ("b")),Z.appendChild(tJ(J,"p2dpad")),Q.viewProps.bindDisabled(Z),X.appendChild(Z),this.buttonElement=Z;let q=J.createElement("div");if(q.classList.add(UJ("t")),X.appendChild(q),this.textElement=q,Q.pickerLayout==="inline"){let Y=J.createElement("div");Y.classList.add(UJ("p")),this.element.appendChild(Y),this.pickerElement=Y}else this.pickerElement=null}}var l=$("p2dp");class R7{constructor(J,Q){if(this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=Q.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=J.createElement("div"),this.element.classList.add(l()),Q.layout==="popup")this.element.classList.add(l(void 0,"p"));Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("div");X.classList.add(l("p")),Q.viewProps.bindTabIndex(X),this.element.appendChild(X),this.padElement=X;let Z=J.createElementNS(C,"svg");Z.classList.add(l("g")),this.padElement.appendChild(Z),this.svgElem_=Z;let q=J.createElementNS(C,"line");q.classList.add(l("ax")),q.setAttributeNS(null,"x1","0"),q.setAttributeNS(null,"y1","50%"),q.setAttributeNS(null,"x2","100%"),q.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(q);let Y=J.createElementNS(C,"line");Y.classList.add(l("ax")),Y.setAttributeNS(null,"x1","50%"),Y.setAttributeNS(null,"y1","0"),Y.setAttributeNS(null,"x2","50%"),Y.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(Y);let W=J.createElementNS(C,"line");W.classList.add(l("l")),W.setAttributeNS(null,"x1","50%"),W.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(W),this.lineElem_=W;let U=J.createElement("div");U.classList.add(l("m")),this.padElement.appendChild(U),this.markerElem_=U,Q.value.emitter.on("change",this.onValueChange_),this.value=Q.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){let[J,Q]=this.value.rawValue.getComponents(),X=this.props_.get("max"),Z=L(J,-X,+X,0,100),q=L(Q,-X,+X,0,100),Y=this.props_.get("invertsY")?100-q:q;this.lineElem_.setAttributeNS(null,"x2",`${Z}%`),this.lineElem_.setAttributeNS(null,"y2",`${Y}%`),this.markerElem_.style.left=`${Z}%`,this.markerElem_.style.top=`${Y}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function RX(J,Q,X){return[k(Q[0],p(J)),k(Q[1],kJ(J))*(X?1:-1)]}class k7{constructor(J,Q){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=Q.props,this.value=Q.value,this.viewProps=Q.viewProps,this.view=new R7(J,{layout:Q.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new a(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(J,Q){if(!J.point)return;let X=this.props.get("max"),Z=L(J.point.x,0,J.bounds.width,-X,+X),q=L(this.props.get("invertsY")?J.bounds.height-J.point.y:J.point.y,0,J.bounds.height,-X,+X);this.value.setRawValue(new d(Z,q),Q)}onPointerDown_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerMove_(J){this.handlePointerEvent_(J.data,{forceEmit:!1,last:!1})}onPointerUp_(J){this.handlePointerEvent_(J.data,{forceEmit:!0,last:!0})}onPadKeyDown_(J){if(_Z(J.key))J.preventDefault();let[Q,X]=RX(J,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));if(Q===0&&X===0)return;this.value.setRawValue(new d(this.value.rawValue.x+Q,this.value.rawValue.y+X),{forceEmit:!1,last:!1})}onPadKeyUp_(J){let[Q,X]=RX(J,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));if(Q===0&&X===0)return;this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class T7{constructor(J,Q){var X,Z;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=Q.value,this.viewProps=Q.viewProps,this.foldable_=_J.create(Q.expanded),this.popC_=Q.pickerLayout==="popup"?new uQ(J,{viewProps:this.viewProps}):null;let q=new k7(J,{layout:Q.pickerLayout,props:new H({invertsY:I(Q.invertsY),max:I(Q.max),xKeyScale:Q.axes[0].textProps.value("keyScale"),yKeyScale:Q.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});if(q.view.allFocusableElements.forEach((Y)=>{Y.addEventListener("blur",this.onPopupChildBlur_),Y.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=q,this.textC_=new qQ(J,{assembly:w7,axes:Q.axes,parser:Q.parser,value:this.value,viewProps:this.viewProps}),this.view=new N7(J,{expanded:this.foldable_.value("expanded"),pickerLayout:Q.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(X=this.view.buttonElement)===null||X===void 0||X.addEventListener("blur",this.onPadButtonBlur_),(Z=this.view.buttonElement)===null||Z===void 0||Z.addEventListener("click",this.onPadButtonClick_),this.popC_)this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),jJ({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:(Y)=>Y,backward:(Y,W)=>W});else if(this.view.pickerElement)this.view.pickerElement.appendChild(this.pickerC_.view.element),xQ(this.foldable_,this.view.pickerElement)}get textController(){return this.textC_}onPadButtonBlur_(J){if(!this.popC_)return;let Q=this.view.element,X=P(J.relatedTarget);if(!X||!Q.contains(X))this.popC_.shows.rawValue=!1}onPadButtonClick_(){if(this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded"))this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(J){if(!this.popC_)return;let Q=this.popC_.view.element,X=ZZ(J);if(X&&Q.contains(X))return;if(X&&X===this.view.buttonElement&&!PQ(Q.ownerDocument))return;this.popC_.shows.rawValue=!1}onPopupChildKeydown_(J){if(this.popC_){if(J.key==="Escape")this.popC_.shows.rawValue=!1}else if(this.view.pickerElement){if(J.key==="Escape")this.view.buttonElement.focus()}}}function N8(J){return d.isObject(J)?new d(J.x,J.y):new d}function R8(J,Q){J.writeProperty("x",Q.x),J.writeProperty("y",Q.y)}function k8(J,Q){return new ZQ({assembly:w7,components:[v(Object.assign(Object.assign({},J),J.x),Q.x),v(Object.assign(Object.assign({},J),J.y),Q.y)]})}function kX(J,Q){var X,Z;if(!O(J.min)||!O(J.max))return Math.max(Math.abs((X=J.min)!==null&&X!==void 0?X:0),Math.abs((Z=J.max)!==null&&Z!==void 0?Z:0));let q=cX(J);return Math.max(Math.abs(q)*10,Math.abs(Q)*10)}function T8(J,Q){var X,Z;let q=kX(ZJ(J,(X=J.x)!==null&&X!==void 0?X:{}),Q.x),Y=kX(ZJ(J,(Z=J.y)!==null&&Z!==void 0?Z:{}),Q.y);return Math.max(q,Y)}function P8(J){if(!("y"in J))return!1;let Q=J.y;if(!Q)return!1;return"inverted"in Q?!!Q.inverted:!1}var V8=R({id:"input-point2d",type:"input",accept:(J,Q)=>{if(!d.isObject(J))return null;let X=j(Q,(Z)=>Object.assign(Object.assign({},PJ(Z)),{expanded:Z.optional.boolean,picker:Z.optional.custom(vZ),readonly:Z.optional.constant(!1),x:Z.optional.custom(t),y:Z.optional.object(Object.assign(Object.assign({},PJ(Z)),{inverted:Z.optional.boolean}))}));return X?{initialValue:J,params:X}:null},binding:{reader:()=>N8,constraint:(J)=>k8(J.params,J.initialValue),equals:d.equals,writer:()=>R8},controller:(J)=>{var Q,X;let{document:Z,value:q,constraint:Y}=J,W=[J.params.x,J.params.y];return new T7(Z,{axes:q.rawValue.getComponents().map((U,G)=>{var D;return TQ({constraint:Y.components[G],initialValue:U,params:ZJ(J.params,(D=W[G])!==null&&D!==void 0?D:{})})}),expanded:(Q=J.params.expanded)!==null&&Q!==void 0?Q:!1,invertsY:P8(J.params),max:T8(J.params,q.rawValue),parser:m,pickerLayout:(X=J.params.picker)!==null&&X!==void 0?X:"popup",value:q,viewProps:J.viewProps})}});class QJ{constructor(J=0,Q=0,X=0){this.x=J,this.y=Q,this.z=X}getComponents(){return[this.x,this.y,this.z]}static isObject(J){if(O(J))return!1;let{x:Q,y:X,z:Z}=J;if(typeof Q!=="number"||typeof X!=="number"||typeof Z!=="number")return!1;return!0}static equals(J,Q){return J.x===Q.x&&J.y===Q.y&&J.z===Q.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}var P7={toComponents:(J)=>J.getComponents(),fromComponents:(J)=>new QJ(...J)};function y8(J){return QJ.isObject(J)?new QJ(J.x,J.y,J.z):new QJ}function _8(J,Q){J.writeProperty("x",Q.x),J.writeProperty("y",Q.y),J.writeProperty("z",Q.z)}function h8(J,Q){return new ZQ({assembly:P7,components:[v(Object.assign(Object.assign({},J),J.x),Q.x),v(Object.assign(Object.assign({},J),J.y),Q.y),v(Object.assign(Object.assign({},J),J.z),Q.z)]})}var E8=R({id:"input-point3d",type:"input",accept:(J,Q)=>{if(!QJ.isObject(J))return null;let X=j(Q,(Z)=>Object.assign(Object.assign({},PJ(Z)),{readonly:Z.optional.constant(!1),x:Z.optional.custom(t),y:Z.optional.custom(t),z:Z.optional.custom(t)}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>y8,constraint:(J)=>h8(J.params,J.initialValue),equals:QJ.equals,writer:(J)=>_8},controller:(J)=>{let{value:Q,constraint:X}=J,Z=[J.params.x,J.params.y,J.params.z];return new qQ(J.document,{assembly:P7,axes:Q.rawValue.getComponents().map((q,Y)=>{var W;return TQ({constraint:X.components[Y],initialValue:q,params:ZJ(J.params,(W=Z[Y])!==null&&W!==void 0?W:{})})}),parser:m,value:Q,viewProps:J.viewProps})}});class XJ{constructor(J=0,Q=0,X=0,Z=0){this.x=J,this.y=Q,this.z=X,this.w=Z}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(J){if(O(J))return!1;let{x:Q,y:X,z:Z,w:q}=J;if(typeof Q!=="number"||typeof X!=="number"||typeof Z!=="number"||typeof q!=="number")return!1;return!0}static equals(J,Q){return J.x===Q.x&&J.y===Q.y&&J.z===Q.z&&J.w===Q.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}var V7={toComponents:(J)=>J.getComponents(),fromComponents:(J)=>new XJ(...J)};function C8(J){return XJ.isObject(J)?new XJ(J.x,J.y,J.z,J.w):new XJ}function x8(J,Q){J.writeProperty("x",Q.x),J.writeProperty("y",Q.y),J.writeProperty("z",Q.z),J.writeProperty("w",Q.w)}function b8(J,Q){return new ZQ({assembly:V7,components:[v(Object.assign(Object.assign({},J),J.x),Q.x),v(Object.assign(Object.assign({},J),J.y),Q.y),v(Object.assign(Object.assign({},J),J.z),Q.z),v(Object.assign(Object.assign({},J),J.w),Q.w)]})}var f8=R({id:"input-point4d",type:"input",accept:(J,Q)=>{if(!XJ.isObject(J))return null;let X=j(Q,(Z)=>Object.assign(Object.assign({},PJ(Z)),{readonly:Z.optional.constant(!1),w:Z.optional.custom(t),x:Z.optional.custom(t),y:Z.optional.custom(t),z:Z.optional.custom(t)}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>C8,constraint:(J)=>b8(J.params,J.initialValue),equals:XJ.equals,writer:(J)=>x8},controller:(J)=>{let{value:Q,constraint:X}=J,Z=[J.params.x,J.params.y,J.params.z,J.params.w];return new qQ(J.document,{assembly:V7,axes:Q.rawValue.getComponents().map((q,Y)=>{var W;return TQ({constraint:X.components[Y],initialValue:q,params:ZJ(J.params,(W=Z[Y])!==null&&W!==void 0?W:{})})}),parser:m,value:Q,viewProps:J.viewProps})}});function v8(J){let Q=[],X=vQ(J.options);if(X)Q.push(X);return new OJ(Q)}var u8=R({id:"input-string",type:"input",accept:(J,Q)=>{if(typeof J!=="string")return null;let X=j(Q,(Z)=>({readonly:Z.optional.constant(!1),options:Z.optional.custom(hJ)}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>yZ,constraint:(J)=>v8(J.params),writer:(J)=>EJ},controller:(J)=>{let{document:Q,value:X,constraint:Z}=J,q=Z&&lJ(Z,IJ);if(q)return new g(Q,{props:new H({options:q.values.value("options")}),value:X,viewProps:J.viewProps});return new GJ(Q,{parser:(Y)=>Y,props:H.fromObject({formatter:BQ}),value:X,viewProps:J.viewProps})},api(J){if(typeof J.controller.value.rawValue!=="string")return null;if(J.controller.valueController instanceof g)return new eJ(J.controller);return null}}),xJ={monitor:{defaultInterval:200,defaultRows:3}},TX=$("mll");class y7{constructor(J,Q){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=Q.formatter,this.element=J.createElement("div"),this.element.classList.add(TX()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("textarea");X.classList.add(TX("i")),X.style.height=`calc(var(${fZ("containerUnitSize")}) * ${Q.rows})`,X.readOnly=!0,Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.textareaElem_=X,Q.value.emitter.on("change",this.onValueUpdate_),this.value=Q.value,this.update_()}update_(){let J=this.textareaElem_,Q=J.scrollTop===J.scrollHeight-J.clientHeight,X=[];if(this.value.rawValue.forEach((Z)=>{if(Z!==void 0)X.push(this.formatter_(Z))}),J.textContent=X.join(`
`),Q)J.scrollTop=J.scrollHeight}onValueUpdate_(){this.update_()}}class YQ{constructor(J,Q){this.value=Q.value,this.viewProps=Q.viewProps,this.view=new y7(J,{formatter:Q.formatter,rows:Q.rows,value:this.value,viewProps:this.viewProps})}}var PX=$("sgl");class _7{constructor(J,Q){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=Q.formatter,this.element=J.createElement("div"),this.element.classList.add(PX()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("input");X.classList.add(PX("i")),X.readOnly=!0,X.type="text",Q.viewProps.bindDisabled(X),this.element.appendChild(X),this.inputElement=X,Q.value.emitter.on("change",this.onValueUpdate_),this.value=Q.value,this.update_()}update_(){let J=this.value.rawValue,Q=J[J.length-1];this.inputElement.value=Q!==void 0?this.formatter_(Q):""}onValueUpdate_(){this.update_()}}class WQ{constructor(J,Q){this.value=Q.value,this.viewProps=Q.viewProps,this.view=new _7(J,{formatter:Q.formatter,value:this.value,viewProps:this.viewProps})}}var d8=R({id:"monitor-bool",type:"monitor",accept:(J,Q)=>{if(typeof J!=="boolean")return null;let X=j(Q,(Z)=>({readonly:Z.required.constant(!0),rows:Z.optional.number}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>VZ},controller:(J)=>{var Q;if(J.value.rawValue.length===1)return new WQ(J.document,{formatter:jX,value:J.value,viewProps:J.viewProps});return new YQ(J.document,{formatter:jX,rows:(Q=J.params.rows)!==null&&Q!==void 0?Q:xJ.monitor.defaultRows,value:J.value,viewProps:J.viewProps})}});class h7 extends DJ{get max(){return this.controller.valueController.props.get("max")}set max(J){this.controller.valueController.props.set("max",J)}get min(){return this.controller.valueController.props.get("min")}set min(J){this.controller.valueController.props.set("min",J)}}var n=$("grl");class E7{constructor(J,Q){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=J.createElement("div"),this.element.classList.add(n()),Q.viewProps.bindClassModifiers(this.element),this.formatter_=Q.formatter,this.props_=Q.props,this.cursor_=Q.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);let X=J.createElementNS(C,"svg");X.classList.add(n("g")),X.style.height=`calc(var(${fZ("containerUnitSize")}) * ${Q.rows})`,this.element.appendChild(X),this.svgElem_=X;let Z=J.createElementNS(C,"polyline");this.svgElem_.appendChild(Z),this.lineElem_=Z;let q=J.createElement("div");q.classList.add(n("t"),$("tt")()),this.element.appendChild(q),this.tooltipElem_=q,Q.value.emitter.on("change",this.onValueUpdate_),this.value=Q.value,this.update_()}get graphElement(){return this.svgElem_}update_(){let{clientWidth:J,clientHeight:Q}=this.element,X=this.value.rawValue.length-1,Z=this.props_.get("min"),q=this.props_.get("max"),Y=[];this.value.rawValue.forEach((z,K)=>{if(z===void 0)return;let B=L(K,0,X,0,J),A=L(z,Z,q,Q,0);Y.push([B,A].join(","))}),this.lineElem_.setAttributeNS(null,"points",Y.join(" "));let W=this.tooltipElem_,U=this.value.rawValue[this.cursor_.rawValue];if(U===void 0){W.classList.remove(n("t","a"));return}let G=L(this.cursor_.rawValue,0,X,0,J),D=L(U,Z,q,Q,0);if(W.style.left=`${G}px`,W.style.top=`${D}px`,W.textContent=`${this.formatter_(U)}`,!W.classList.contains(n("t","a")))W.classList.add(n("t","a"),n("t","in")),cJ(W),W.classList.remove(n("t","in"))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class sQ{constructor(J,Q){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=Q.props,this.value=Q.value,this.viewProps=Q.viewProps,this.cursor_=I(-1),this.view=new E7(J,{cursor:this.cursor_,formatter:Q.formatter,rows:Q.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!PQ(J))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{let X=new a(this.view.element);X.emitter.on("down",this.onGraphPointerDown_),X.emitter.on("move",this.onGraphPointerMove_),X.emitter.on("up",this.onGraphPointerUp_)}}importProps(J){return V(J,null,(Q)=>({max:Q.required.number,min:Q.required.number}),(Q)=>{return this.props.set("max",Q.max),this.props.set("min",Q.min),!0})}exportProps(){return y(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(J){let{clientWidth:Q}=this.view.element;this.cursor_.rawValue=Math.floor(L(J.offsetX,0,Q,0,this.value.rawValue.length))}onGraphPointerDown_(J){this.onGraphPointerMove_(J)}onGraphPointerMove_(J){if(!J.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(L(J.data.point.x,0,J.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function SQ(J){return!O(J.format)?J.format:T(2)}function m8(J){var Q;if(J.value.rawValue.length===1)return new WQ(J.document,{formatter:SQ(J.params),value:J.value,viewProps:J.viewProps});return new YQ(J.document,{formatter:SQ(J.params),rows:(Q=J.params.rows)!==null&&Q!==void 0?Q:xJ.monitor.defaultRows,value:J.value,viewProps:J.viewProps})}function g8(J){var Q,X,Z;return new sQ(J.document,{formatter:SQ(J.params),rows:(Q=J.params.rows)!==null&&Q!==void 0?Q:xJ.monitor.defaultRows,props:H.fromObject({max:(X=J.params.max)!==null&&X!==void 0?X:100,min:(Z=J.params.min)!==null&&Z!==void 0?Z:0}),value:J.value,viewProps:J.viewProps})}function VX(J){return J.view==="graph"}var p8=R({id:"monitor-number",type:"monitor",accept:(J,Q)=>{if(typeof J!=="number")return null;let X=j(Q,(Z)=>({format:Z.optional.function,max:Z.optional.number,min:Z.optional.number,readonly:Z.required.constant(!0),rows:Z.optional.number,view:Z.optional.string}));return X?{initialValue:J,params:X}:null},binding:{defaultBufferSize:(J)=>VX(J)?64:1,reader:(J)=>gX},controller:(J)=>{if(VX(J.params))return g8(J);return m8(J)},api:(J)=>{if(J.controller.valueController instanceof sQ)return new h7(J.controller);return null}}),c8=R({id:"monitor-string",type:"monitor",accept:(J,Q)=>{if(typeof J!=="string")return null;let X=j(Q,(Z)=>({multiline:Z.optional.boolean,readonly:Z.required.constant(!0),rows:Z.optional.number}));return X?{initialValue:J,params:X}:null},binding:{reader:(J)=>yZ},controller:(J)=>{var Q;let X=J.value;if(X.rawValue.length>1||J.params.multiline)return new YQ(J.document,{formatter:BQ,rows:(Q=J.params.rows)!==null&&Q!==void 0?Q:xJ.monitor.defaultRows,value:X,viewProps:J.viewProps});return new WQ(J.document,{formatter:BQ,value:X,viewProps:J.viewProps})}});class C7{constructor(){this.map_=new Map}get(J){var Q;return(Q=this.map_.get(J))!==null&&Q!==void 0?Q:null}has(J){return this.map_.has(J)}add(J,Q){return this.map_.set(J,Q),J.viewProps.handleDispose(()=>{this.map_.delete(J)}),Q}}class x7{constructor(J){this.target=J.target,this.reader_=J.reader,this.writer_=J.writer}read(){return this.reader_(this.target.read())}write(J){this.writer_(this.target,J)}inject(J){this.write(this.reader_(J))}}function s8(J,Q){var X;let Z=J.accept(Q.target.read(),Q.params);if(O(Z))return null;let q={target:Q.target,initialValue:Z.initialValue,params:Z.params},Y=j(Q.params,(K)=>({disabled:K.optional.boolean,hidden:K.optional.boolean,label:K.optional.string,tag:K.optional.string})),W=J.binding.reader(q),U=J.binding.constraint?J.binding.constraint(q):void 0,G=new x7({reader:W,target:Q.target,writer:J.binding.writer(q)}),D=new eX(I(W(Z.initialValue),{constraint:U,equals:J.binding.equals}),G),z=J.controller({constraint:U,document:Q.document,initialValue:Z.initialValue,params:Z.params,value:D,viewProps:c.create({disabled:Y===null||Y===void 0?void 0:Y.disabled,hidden:Y===null||Y===void 0?void 0:Y.hidden})});return new qZ(Q.document,{blade:LJ(),props:H.fromObject({label:"label"in Q.params?(X=Y===null||Y===void 0?void 0:Y.label)!==null&&X!==void 0?X:null:Q.target.key}),tag:Y===null||Y===void 0?void 0:Y.tag,value:D,valueController:z})}class b7{constructor(J){this.target=J.target,this.reader_=J.reader}read(){return this.reader_(this.target.read())}}function i8(J,Q){return Q===0?new NZ:new RZ(J,Q!==null&&Q!==void 0?Q:xJ.monitor.defaultInterval)}function l8(J,Q){var X,Z,q;let Y=J.accept(Q.target.read(),Q.params);if(O(Y))return null;let W={target:Q.target,initialValue:Y.initialValue,params:Y.params},U=j(Q.params,(B)=>({bufferSize:B.optional.number,disabled:B.optional.boolean,hidden:B.optional.boolean,interval:B.optional.number,label:B.optional.string})),G=J.binding.reader(W),D=(Z=(X=U===null||U===void 0?void 0:U.bufferSize)!==null&&X!==void 0?X:J.binding.defaultBufferSize&&J.binding.defaultBufferSize(Y.params))!==null&&Z!==void 0?Z:1,z=new WZ({binding:new b7({reader:G,target:Q.target}),bufferSize:D,ticker:i8(Q.document,U===null||U===void 0?void 0:U.interval)}),K=J.controller({document:Q.document,params:Y.params,value:z,viewProps:c.create({disabled:U===null||U===void 0?void 0:U.disabled,hidden:U===null||U===void 0?void 0:U.hidden})});return K.viewProps.bindDisabled(z.ticker),K.viewProps.handleDispose(()=>{z.ticker.dispose()}),new UZ(Q.document,{blade:LJ(),props:H.fromObject({label:"label"in Q.params?(q=U===null||U===void 0?void 0:U.label)!==null&&q!==void 0?q:null:Q.target.key}),value:z,valueController:K})}class f7{constructor(J){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=J}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(J,Q){if(!F1(Q.core))throw M.notCompatible(J,Q.id);if(Q.type==="blade")this.pluginsMap_.blades.unshift(Q);else if(Q.type==="input")this.pluginsMap_.inputs.unshift(Q);else if(Q.type==="monitor")this.pluginsMap_.monitors.unshift(Q)}createInput_(J,Q,X){return this.pluginsMap_.inputs.reduce((Z,q)=>Z!==null&&Z!==void 0?Z:s8(q,{document:J,target:Q,params:X}),null)}createMonitor_(J,Q,X){return this.pluginsMap_.monitors.reduce((Z,q)=>Z!==null&&Z!==void 0?Z:l8(q,{document:J,params:X,target:Q}),null)}createBinding(J,Q,X){let Z=Q.read();if(O(Z))throw new M({context:{key:Q.key},type:"nomatchingcontroller"});let q=this.createInput_(J,Q,X);if(q)return q;let Y=this.createMonitor_(J,Q,X);if(Y)return Y;throw new M({context:{key:Q.key},type:"nomatchingcontroller"})}createBlade(J,Q){let X=this.pluginsMap_.blades.reduce((Z,q)=>Z!==null&&Z!==void 0?Z:D1(q,{document:J,params:Q}),null);if(!X)throw new M({type:"nomatchingview",context:{params:Q}});return X}createInputBindingApi_(J){let Q=this.pluginsMap_.inputs.reduce((X,Z)=>{var q,Y;if(X)return X;return(Y=(q=Z.api)===null||q===void 0?void 0:q.call(Z,{controller:J}))!==null&&Y!==void 0?Y:null},null);return this.apiCache_.add(J,Q!==null&&Q!==void 0?Q:new DJ(J))}createMonitorBindingApi_(J){let Q=this.pluginsMap_.monitors.reduce((X,Z)=>{var q,Y;if(X)return X;return(Y=(q=Z.api)===null||q===void 0?void 0:q.call(Z,{controller:J}))!==null&&Y!==void 0?Y:null},null);return this.apiCache_.add(J,Q!==null&&Q!==void 0?Q:new DJ(J))}createBindingApi(J){if(this.apiCache_.has(J))return this.apiCache_.get(J);if(c0(J))return this.createInputBindingApi_(J);if(t0(J))return this.createMonitorBindingApi_(J);throw M.shouldNeverHappen()}createApi(J){if(this.apiCache_.has(J))return this.apiCache_.get(J);if(p0(J))return this.createBindingApi(J);let Q=this.pluginsMap_.blades.reduce((X,Z)=>X!==null&&X!==void 0?X:Z.api({controller:J,pool:this}),null);if(!Q)throw M.shouldNeverHappen();return this.apiCache_.add(J,Q)}}var n8=new C7;function t8(){let J=new f7(n8);return[V8,E8,f8,u8,w8,B8,M8,F8,O1,d8,c8,p8,o0,W1,wZ].forEach((Q)=>{J.register("core",Q)}),J}class v7 extends o{constructor(J){super(J);this.emitter_=new S,this.controller.value.emitter.on("change",(Q)=>{this.emitter_.emit("change",new HJ(this,Q.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(J){this.controller.labelController.props.set("label",J)}get options(){return this.controller.valueController.props.get("options")}set options(J){this.controller.valueController.props.set("options",J)}get value(){return this.controller.value.rawValue}set value(J){this.controller.value.rawValue=J}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}}class u7 extends o{}class d7 extends o{constructor(J){super(J);this.emitter_=new S,this.controller.value.emitter.on("change",(Q)=>{this.emitter_.emit("change",new HJ(this,Q.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(J){this.controller.labelController.props.set("label",J)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(J){this.controller.valueController.sliderController.props.set("max",J)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(J){this.controller.valueController.sliderController.props.set("min",J)}get value(){return this.controller.value.rawValue}set value(J){this.controller.value.rawValue=J}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}}class m7 extends o{constructor(J){super(J);this.emitter_=new S,this.controller.value.emitter.on("change",(Q)=>{this.emitter_.emit("change",new HJ(this,Q.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(J){this.controller.labelController.props.set("label",J)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(J){this.controller.valueController.props.set("formatter",J)}get value(){return this.controller.value.rawValue}set value(J){this.controller.value.rawValue=J}on(J,Q){let X=Q.bind(this);return this.emitter_.on(J,(Z)=>{X(Z)},{key:Q}),this}off(J,Q){return this.emitter_.off(J,Q),this}}var r8=function(){return{id:"list",type:"blade",core:FJ,accept(J){let Q=j(J,(X)=>({options:X.required.custom(hJ),value:X.required.raw,view:X.required.constant("list"),label:X.optional.string}));return Q?{params:Q}:null},controller(J){let Q=new IJ(fQ(J.params.options)),X=I(J.params.value,{constraint:Q}),Z=new g(J.document,{props:new H({options:Q.values.value("options")}),value:X,viewProps:J.viewProps});return new r(J.document,{blade:J.blade,props:H.fromObject({label:J.params.label}),value:X,valueController:Z})},api(J){if(!(J.controller instanceof r))return null;if(!(J.controller.valueController instanceof g))return null;return new v7(J.controller)}}}();class g7 extends bQ{constructor(J,Q){super(J,Q)}get element(){return this.controller.view.element}}class p7 extends sJ{constructor(J,Q){super(J,{expanded:Q.expanded,blade:Q.blade,props:Q.props,root:!0,viewProps:Q.viewProps})}}var yX=$("spr");class c7{constructor(J,Q){this.element=J.createElement("div"),this.element.classList.add(yX()),Q.viewProps.bindClassModifiers(this.element);let X=J.createElement("hr");X.classList.add(yX("r")),this.element.appendChild(X)}}class AQ extends yJ{constructor(J,Q){super(Object.assign(Object.assign({},Q),{view:new c7(J,{viewProps:Q.viewProps})}))}}var o8={id:"separator",type:"blade",core:FJ,accept(J){let Q=j(J,(X)=>({view:X.required.constant("separator")}));return Q?{params:Q}:null},controller(J){return new AQ(J.document,{blade:J.blade,viewProps:J.viewProps})},api(J){if(!(J.controller instanceof AQ))return null;return new u7(J.controller)}},a8={id:"slider",type:"blade",core:FJ,accept(J){let Q=j(J,(X)=>({max:X.required.number,min:X.required.number,view:X.required.constant("slider"),format:X.optional.function,label:X.optional.string,value:X.optional.number}));return Q?{params:Q}:null},controller(J){var Q,X;let Z=(Q=J.params.value)!==null&&Q!==void 0?Q:0,q=new KJ({max:J.params.max,min:J.params.min}),Y=I(Z,{constraint:q}),W=new TJ(J.document,Object.assign(Object.assign({},bZ({formatter:(X=J.params.format)!==null&&X!==void 0?X:P0,keyScale:I(1),max:q.values.value("max"),min:q.values.value("min"),pointerScale:sX(J.params,Z)})),{parser:m,value:Y,viewProps:J.viewProps}));return new r(J.document,{blade:J.blade,props:H.fromObject({label:J.params.label}),value:Y,valueController:W})},api(J){if(!(J.controller instanceof r))return null;if(!(J.controller.valueController instanceof TJ))return null;return new d7(J.controller)}},e8=function(){return{id:"text",type:"blade",core:FJ,accept(J){let Q=j(J,(X)=>({parse:X.required.function,value:X.required.raw,view:X.required.constant("text"),format:X.optional.function,label:X.optional.string}));return Q?{params:Q}:null},controller(J){var Q;let X=I(J.params.value),Z=new GJ(J.document,{parser:J.params.parse,props:H.fromObject({formatter:(Q=J.params.format)!==null&&Q!==void 0?Q:(q)=>String(q)}),value:X,viewProps:J.viewProps});return new r(J.document,{blade:J.blade,props:H.fromObject({label:J.params.label}),value:X,valueController:Z})},api(J){if(!(J.controller instanceof r))return null;if(!(J.controller.valueController instanceof GJ))return null;return new m7(J.controller)}}}();function J9(J){let Q=J.createElement("div");if(Q.classList.add($("dfw")()),J.body)J.body.appendChild(Q);return Q}function Q9(J,Q,X){if(J.querySelector(`style[data-tp-style=${Q}]`))return;let Z=J.createElement("style");Z.dataset.tpStyle=Q,Z.textContent=X,J.head.appendChild(Z)}class iQ extends g7{constructor(J){var Q,X;let Z=J!==null&&J!==void 0?J:{},q=(Q=Z.document)!==null&&Q!==void 0?Q:b0(),Y=t8(),W=new p7(q,{expanded:Z.expanded,blade:LJ(),props:H.fromObject({title:Z.title}),viewProps:c.create()});super(W,Y);this.pool_=Y,this.containerElem_=(X=Z.container)!==null&&X!==void 0?X:J9(q),this.containerElem_.appendChild(this.element),this.doc_=q,this.usesDefaultWrapper_=!Z.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw M.alreadyDisposed();return this.doc_}dispose(){let J=this.containerElem_;if(!J)throw M.alreadyDisposed();if(this.usesDefaultWrapper_){let Q=J.parentElement;if(Q)Q.removeChild(J)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(J){if(J.css)Q9(this.document,`plugin-${J.id}`,J.css);("plugin"in J?[J.plugin]:("plugins"in J)?J.plugins:[]).forEach((X)=>{this.pool_.register(J.id,X)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:".tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:\"\";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:\"\";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}",plugins:[r8,o8,a8,wZ,e8]})}}var G9=new CQ("4.0.5");var bJ={cssVariables:{"--bg":"#0a0e14","--bg-elevated":"#0f1419","--muted":"#1a2332","--text":"#e6edf3","--text-secondary":"#8b949e","--accent":"#58d5ff","--accent-2":"#42a5cc","--border":"#21262d","--border-hover":"#30363d","--success":"#3fb950","--error":"#f85149"},tweakpane:{"--tp-base-background-color":"var(--bg-elevated)","--tp-base-shadow-color":"rgba(0, 0, 0, 0.4)","--tp-button-background-color":"var(--muted)","--tp-button-background-color-active":"var(--accent-2)","--tp-button-background-color-focus":"var(--accent)","--tp-button-background-color-hover":"var(--border-hover)","--tp-button-foreground-color":"var(--text)","--tp-container-background-color":"rgba(15, 20, 25, 0.6)","--tp-container-background-color-active":"rgba(15, 20, 25, 0.8)","--tp-container-background-color-focus":"rgba(15, 20, 25, 0.9)","--tp-container-background-color-hover":"rgba(15, 20, 25, 0.7)","--tp-container-foreground-color":"var(--text)","--tp-groove-foreground-color":"var(--border)","--tp-input-background-color":"rgba(26, 35, 50, 0.5)","--tp-input-background-color-active":"rgba(26, 35, 50, 0.7)","--tp-input-background-color-focus":"rgba(26, 35, 50, 0.8)","--tp-input-background-color-hover":"rgba(26, 35, 50, 0.6)","--tp-input-foreground-color":"var(--text)","--tp-label-foreground-color":"var(--text-secondary)","--tp-monitor-background-color":"rgba(26, 35, 50, 0.5)","--tp-monitor-foreground-color":"var(--text)"}};function fJ(){let J=document.createElement("style");J.id="hypertool-theme";let Q=Object.entries({...bJ.cssVariables,...bJ.tweakpane}).map(([X,Z])=>`  ${X}: ${Z};`).join(`
`);J.textContent=`
  body {
   margin: 0;
   padding: 0;
  }
  
:root {
${Q}
}

/* Tweakpane container styling */
.tp-dfwv {
  width: 300px !important;
  max-height: calc(100vh - 40px);
  display: flex;
  
  
  backdrop-filter: blur(12px);
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 12px;
  // overflow: auto;
}

/* Title styling */
.tp-dfwv .tp-rotv_t {
  color: var(--accent);
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.3px;
}

/* Folder styling */
.tp-dfwv .tp-fldv_t {
  color: var(--text);
  font-weight: 500;
}

/* Scrollbar styling */
.tp-dfwv ::-webkit-scrollbar {
  width: 8px;
}

.tp-dfwv ::-webkit-scrollbar-track {
  background: transparent;
}

.tp-dfwv ::-webkit-scrollbar-thumb {
  background: var(--border-hover);
  border-radius: 4px;
}

.tp-dfwv ::-webkit-scrollbar-thumb:hover {
  background: #3a4149;
}

/* Animation */
.tp-dfwv {
  animation: slideIn 0.2s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
`,document.head.appendChild(J)}class YJ{constructor(J,Q={}){this.pane=null,this.definitions=J,this.options={title:Q.title||"Controls",position:Q.position||"top-right",expanded:Q.expanded!==void 0?Q.expanded:!0,container:Q.container!==void 0?Q.container:null,onChange:Q.onChange||(()=>{}),onReady:Q.onReady||(()=>{})},this.params=this.extractInitialValues(J),this.init()}extractInitialValues(J){let Q={};for(let[X,Z]of Object.entries(J))Q[X]=Z.value;return Q}async init(){try{fJ(),await new Promise((J)=>setTimeout(J,50)),this.createPane(),this.positionPane(),this.addControls(),this.options.onReady(),console.log("[HypertoolControls] Initialized successfully")}catch(J){console.error("[HypertoolControls] Initialization error:",J)}}createPane(){let J=this.resolveContainer(),Q={title:this.options.title,expanded:this.options.expanded};if(J)Q.container=J;this.pane=new iQ(Q)}resolveContainer(){if(typeof document==="undefined")return null;let J=this.options.container;if(!J)return null;if(J instanceof HTMLElement)return J;let Q=document.querySelector(J);if(!Q)return console.warn(`[HypertoolControls] Container selector "${J}" did not match any elements`),null;return Q}positionPane(){if(!this.pane||this.options.container)return;let J=this.pane.element;J.style.position="fixed",J.style.zIndex="10000",{"top-right":()=>{J.style.top="20px",J.style.right="20px"},"top-left":()=>{J.style.top="20px",J.style.left="20px"},"bottom-right":()=>{J.style.bottom="20px",J.style.right="20px"},"bottom-left":()=>{J.style.bottom="20px",J.style.left="20px"}}[this.options.position]()}addControls(){if(!this.pane)return;for(let[J,Q]of Object.entries(this.definitions))try{this.addControl(J,Q)}catch(X){console.error(`[HypertoolControls] Error adding control "${J}":`,X)}}addControl(J,Q){if(!this.pane)return;let X={label:Q.label||J};switch(Q.type){case"number":if(Q.min!==void 0)X.min=Q.min;if(Q.max!==void 0)X.max=Q.max;if(Q.step!==void 0)X.step=Q.step;break;case"select":X.options=Q.options;break;case"color":case"boolean":case"string":break;default:console.warn(`[HypertoolControls] Unknown control type: ${Q.type}`);return}this.pane.addBinding(this.params,J,X).on("change",(q)=>{let Y=J;this.params[Y]=q.value;let W={key:Y,value:q.value,event:q};this.options.onChange(this.values,W)})}addFolder(J){if(!this.pane)return null;return this.pane.addFolder({title:J})}set(J,Q){if(J in this.params){if(this.params[J]=Q,this.pane)this.pane.refresh()}}get values(){return{...this.params}}destroy(){if(this.pane)this.pane.dispose(),this.pane=null;let J=document.getElementById("hypertool-theme");if(J)J.remove()}setVisible(J){if(!this.pane)return;this.pane.element.style.display=J?"block":"none"}refresh(){if(this.pane)this.pane.refresh()}}function lQ(J,Q){return new YJ(J,Q).params}function nQ(J,Q){return new YJ(J,Q)}var e7={};WX(e7,{startThreeSketch:()=>a7,startP5Sketch:()=>r7,runThreeSketch:()=>JX,runP5Sketch:()=>oQ,mountThreeSketch:()=>eQ,mountP5Sketch:()=>tQ});function X9(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let J=window.p5;if(typeof J!=="function")throw new Error("[hyper-frame] p5 constructor not found on window. Ensure p5 is loaded before hyper-frame.");return J}function tQ(J,Q){if(typeof document==="undefined")throw new Error("mountP5Sketch cannot run outside a browser environment");var X=Q||{},Z={...J},q=n7(X),Y=q.element,W=q.createdInternally,U=null;function G(A){if(U=A,i7(A,Z),X.onReady)X.onReady({p5:A,container:Y})}var D=X9(),z=new D(G,Y);if(!U)U=z;function K(A){if(Z={...A},U)i7(U,Z)}function B(){if(U)U.remove(),U=null;if(W)Y.remove()}return{container:Y,getInstance:function A(){return U},setHandlers:K,destroy:B}}function i7(J,Q){for(let X in Q)if(Object.prototype.hasOwnProperty.call(Q,X)){let Z=Q[X];if(typeof Z==="function")J[X]=function q(...Y){return Z(J,...Y)}}}function n7(J){let Q=J.containerClassName||"hypertool-sketch",X=J.target;if(X instanceof HTMLElement)return X.classList.add(Q),{element:X,createdInternally:!1};if(typeof X==="string"&&X.trim().length>0){let q=document.querySelector(X);if(q)return q.classList.add(Q),{element:q,createdInternally:!1};console.warn(`[hyper-frame] Could not find container for selector "${X}", creating one instead.`)}let Z=document.createElement("div");return Z.classList.add(Q),document.body.appendChild(Z),{element:Z,createdInternally:!0}}function rQ(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let J=window;if(!J.hypertoolControls)throw new Error("[hyper-frame] hypertool controls are not available on window");return J.hypertoolControls}function l7(J,Q,X){let Z={};return Object.entries(J).forEach(function q([Y,W]){if(typeof W==="function")Z[Y]=function U(G,...D){return X(G),W(G,Q,...D)}}),Z}function oQ(J){let Q=rQ(),X=J.controls||{},Z=Q.createControlPanel(J.controlDefinitions,{title:X.title,position:X.position,expanded:X.expanded,container:X.container,onChange:(D,z)=>{if(typeof X.onChange==="function"){let K={key:z.key,value:z.value,event:z.event};X.onChange(K,q)}}}),q={params:Z.params,controls:Z,getP5Instance:function D(){return Y}},Y=null;function W(D){Y=D}let U=tQ(l7(J.handlers,q,W),J.mount||{});function G(D){U.setHandlers(l7(D,q,W))}return{params:Z.params,controls:Z,context:q,destroy(){U.destroy()},setHandlers:G,getInstance(){return U.getInstance()}}}function Z9(J){if(typeof requestAnimationFrame==="function")requestAnimationFrame(J);else setTimeout(J,16)}function aQ(J,Q,X){return new Promise((Z,q)=>{let Y=0;function W(){Y+=1;try{if(J()){Z();return}}catch(U){}if(Y>=Q){q(new Error(`[hyper-frame] Timed out waiting for ${X}`));return}Z9(W)}W()})}var q9="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js",Y9='script[data-hypertool="p5"]';function W9(J,Q){if(typeof window==="undefined")return Promise.reject(new Error("[hyper-frame] window is not available"));if(typeof window.p5==="function")return Promise.resolve();return new Promise((X,Z)=>{let q=!1;function Y(){if(q)return;q=!0,X()}function W(z){if(q)return;q=!0,Z(z)}aQ(()=>typeof window.p5==="function",Q,"p5 constructor").then(Y).catch(W);function U(){W(new Error(`[hyper-frame] Failed to load p5 script from ${J}`))}let G=document.querySelector(Y9);if(G){G.addEventListener("error",U,{once:!0});return}let D=document.createElement("script");D.src=J,D.async=!0,D.dataset.hypertool="p5",D.addEventListener("error",U,{once:!0}),document.head.appendChild(D)})}function t7(J){return aQ(function Q(){try{return rQ(),!0}catch(X){return!1}},J,"hypertool controls")}async function r7(J){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let Q=J.readiness||{},X=J.p5||{},Z=typeof Q.maxAttempts==="number"?Q.maxAttempts:600,q=typeof X.maxAttempts==="number"?X.maxAttempts:Z,Y=typeof X.url==="string"&&X.url.trim().length>0?X.url:q9;return await W9(Y,q),await t7(Z),oQ({controlDefinitions:J.controlDefinitions,handlers:J.handlers,controls:J.controls,mount:J.mount})}function o7(){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let J=window.THREE;if(typeof J!=="object")throw new Error("[hyper-frame] THREE not found on window. Make sure to import and expose Three.js on window in your sketch.");return J}function eQ(J,Q){if(typeof document==="undefined")throw new Error("mountThreeSketch cannot run outside a browser environment");let X=Q||{},Z=o7(),q=n7({target:X.target,containerClassName:X.containerClassName||"hypertool-three-sketch"}),Y=q.element,W=q.createdInternally,U=new Z.Scene,G=X.camera||{},D=G.type||"perspective",z;if(D==="perspective")z=new Z.PerspectiveCamera(G.fov||75,window.innerWidth/window.innerHeight,G.near||0.1,G.far||1000);else{let s=window.innerWidth/window.innerHeight;z=new Z.OrthographicCamera(-s,s,1,-1,G.near||0.1,G.far||1000)}if(G.position)z.position.set(...G.position);else z.position.z=5;let K=X.renderer||{},B=new Z.WebGLRenderer({antialias:K.antialias!==!1,alpha:K.alpha||!1,preserveDrawingBuffer:K.preserveDrawingBuffer||!1});B.setSize(Y.clientWidth||window.innerWidth,Y.clientHeight||window.innerHeight),B.setPixelRatio(window.devicePixelRatio),Y.appendChild(B.domElement);let A=null;if(X.orbitControls){let s=window.OrbitControls||Z.OrbitControls;if(s)A=new s(z,B.domElement);else console.warn("[hyper-frame] OrbitControls not found. Make sure to import and expose it on window.")}let E={scene:U,camera:z,renderer:B,controls:A},vJ=null,uJ=!1;function QX(){let s=Y.clientWidth||window.innerWidth,YX=Y.clientHeight||window.innerHeight;if(z.aspect=s/YX,z.updateProjectionMatrix(),B.setSize(s,YX),J.resize)J.resize(E,{})}window.addEventListener("resize",QX);function XX(){if(!uJ)return;if(vJ=requestAnimationFrame(XX),A)A.update();if(J.animate)J.animate(E,{});B.render(U,z)}if(J.setup)J.setup(E,{});if(X.onReady)X.onReady(E);function ZX(){if(!uJ)uJ=!0,XX()}function qX(){if(uJ=!1,vJ!==null)cancelAnimationFrame(vJ),vJ=null}function J0(){if(qX(),window.removeEventListener("resize",QX),J.dispose)J.dispose();if(A)A.dispose();if(B.dispose(),Y.removeChild(B.domElement),W)Y.remove()}return ZX(),{container:Y,getContext:()=>E,destroy:J0,startAnimation:ZX,stopAnimation:qX}}function JX(J){let Q=rQ(),X=J.controls||{},Z={params:{},controls:null,getThreeContext:()=>U},q=Q.createControlPanel(J.controlDefinitions,{title:X.title,position:X.position,expanded:X.expanded,container:X.container,onChange:(G,D)=>{if(Z.params=G,typeof X.onChange==="function"){let z={key:D.key,value:D.value,event:D.event};X.onChange(z,Z)}}});Z.params=q.params,Z.controls=q;let Y={};if(J.handlers.setup){let G=J.handlers.setup;Y.setup=(D,z)=>{G(D,Z)}}if(J.handlers.animate){let G=J.handlers.animate;Y.animate=(D,z)=>{G(D,Z)}}if(J.handlers.resize){let G=J.handlers.resize;Y.resize=(D,z)=>{G(D,Z)}}if(J.handlers.dispose)Y.dispose=J.handlers.dispose;let W=eQ(Y,J.mount||{}),U=W.getContext();return{params:q.params,controls:q,context:Z,threeContext:U,destroy(){W.destroy()},getInstance(){return W.getContext()}}}function U9(J){return aQ(function Q(){try{return o7(),!0}catch(X){return!1}},J,"THREE constructor")}async function a7(J){if(typeof window==="undefined")throw new Error("[hyper-frame] window is not available");let Q=J.readiness||{},X=typeof Q.maxAttempts==="number"?Q.maxAttempts:600;return await U9(X),await t7(X),JX({controlDefinitions:J.controlDefinitions,handlers:J.handlers,controls:J.controls,mount:J.mount})}export{bJ as studioTheme,a7 as startThreeSketch,r7 as startP5Sketch,JX as runThreeSketch,oQ as runP5Sketch,eQ as mountThreeSketch,tQ as mountP5Sketch,fJ as injectThemeVariables,e7 as frame,lQ as createControls,nQ as createControlPanel,s7 as controls,YJ as HypertoolControls};

//# debugId=F9DA297AC1444BBD64756E2164756E21
