{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": [
    "export type P5Instance = any;\n\nexport type P5Handler = (instance: P5Instance, ...args: any[]) => void;\n\nexport type P5HandlerMap = Record<string, P5Handler | undefined>;\n\nexport interface MountOptions {\n  /**\n   * Target element or selector to mount into.\n   * When omitted, a container div will be created and appended to body.\n   */\n  target?: HTMLElement | string | null;\n  /**\n   * Class name to apply to the container.\n   * Defaults to `hypertool-sketch`.\n   */\n  containerClassName?: string;\n  /**\n   * Called when the p5 instance has been created.\n   */\n  onReady?: (context: { p5: P5Instance; container: HTMLElement }) => void;\n}\n\nexport interface MountResult {\n  /**\n   * Root container element used by p5.\n   */\n  container: HTMLElement;\n  /**\n   * Retrieve the active p5 instance, if available.\n   */\n  getInstance(): P5Instance | null;\n  /**\n   * Replace lifecycle handlers with new implementations.\n   * Existing p5 event bindings are refreshed immediately.\n   */\n  setHandlers(handlers: P5HandlerMap): void;\n  /**\n   * Dispose of the p5 sketch and remove the container if it was created automatically.\n   */\n  destroy(): void;\n}\n\ntype P5Constructor = new (sketch: (p5: P5Instance) => void, node?: HTMLElement) => P5Instance;\n\nfunction getP5Constructor(): P5Constructor {\n  if (typeof window === 'undefined') {\n    throw new Error('[hyper-frame] window is not available');\n  }\n\n  const ctor = (window as any).p5;\n\n  if (typeof ctor !== 'function') {\n    throw new Error('[hyper-frame] p5 constructor not found on window. Ensure p5 is loaded before hyper-frame.');\n  }\n\n  return ctor as P5Constructor;\n}\n\n/**\n * Mount a p5 sketch with the provided lifecycle handlers.\n */\nexport function mountP5Sketch(initialHandlers: P5HandlerMap, options?: MountOptions): MountResult {\n  if (typeof document === 'undefined') {\n    throw new Error('mountP5Sketch cannot run outside a browser environment');\n  }\n\n  var opts: MountOptions = options || {};\n  var currentHandlers: P5HandlerMap = { ...initialHandlers };\n  var containerInfo = resolveContainer(opts);\n  var container = containerInfo.element;\n  var createdInternally = containerInfo.createdInternally;\n\n  var instance: P5Instance | null = null;\n\n  function sketch(p5Instance: P5Instance) {\n    instance = p5Instance;\n    applyHandlers(p5Instance, currentHandlers);\n    if (opts.onReady) {\n      opts.onReady({ p5: p5Instance, container });\n    }\n  }\n\n  var P5Ctor = getP5Constructor();\n  var p5Controller = new P5Ctor(sketch, container);\n  if (!instance) {\n    // Fallback in case P5 constructor behaved differently\n    instance = (p5Controller as unknown) as P5Instance;\n  }\n\n  function setHandlers(nextHandlers: P5HandlerMap) {\n    currentHandlers = { ...nextHandlers };\n    if (instance) {\n      applyHandlers(instance, currentHandlers);\n    }\n  }\n\n  function destroy() {\n    if (instance) {\n      instance.remove();\n      instance = null;\n    }\n\n    if (createdInternally) {\n      // Remove container only when library created it\n      container.remove();\n    }\n  }\n\n  return {\n    container: container,\n    getInstance: function getInstance() {\n      return instance;\n    },\n    setHandlers: setHandlers,\n    destroy: destroy,\n  };\n}\n\nfunction applyHandlers(instance: P5Instance, handlers: P5HandlerMap) {\n  for (const key in handlers) {\n    if (Object.prototype.hasOwnProperty.call(handlers, key)) {\n      const handler = handlers[key];\n      if (typeof handler === 'function') {\n        (instance as Record<string, unknown>)[key] = function handlerWrapper(...args: any[]) {\n          return (handler as P5Handler)(instance, ...args);\n        };\n      }\n    }\n  }\n}\n\nfunction resolveContainer(options: MountOptions): { element: HTMLElement; createdInternally: boolean } {\n  const className = options.containerClassName || 'hypertool-sketch';\n  const target = options.target;\n\n  if (target instanceof HTMLElement) {\n    target.classList.add(className);\n    return { element: target, createdInternally: false };\n  }\n\n  if (typeof target === 'string' && target.trim().length > 0) {\n    const node = document.querySelector<HTMLElement>(target);\n    if (node) {\n      node.classList.add(className);\n      return { element: node, createdInternally: false };\n    }\n    console.warn(`[hyper-frame] Could not find container for selector \"${target}\", creating one instead.`);\n  }\n\n  const container = document.createElement('div');\n  container.classList.add(className);\n  container.classList.add('hyper-frame-container');\n  document.body.appendChild(container);\n  return { element: container, createdInternally: true };\n}\n\nexport type ControlType = 'number' | 'color' | 'boolean' | 'string' | 'select';\n\nexport interface BaseControlDefinition {\n  label?: string;\n  value: any;\n}\n\nexport interface NumberControlDefinition extends BaseControlDefinition {\n  type: 'number';\n  value: number;\n  min?: number;\n  max?: number;\n  step?: number;\n}\n\nexport interface ColorControlDefinition extends BaseControlDefinition {\n  type: 'color';\n  value: string;\n}\n\nexport interface BooleanControlDefinition extends BaseControlDefinition {\n  type: 'boolean';\n  value: boolean;\n}\n\nexport interface StringControlDefinition extends BaseControlDefinition {\n  type: 'string';\n  value: string;\n}\n\nexport interface SelectControlDefinition extends BaseControlDefinition {\n  type: 'select';\n  value: string | number;\n  options: Record<string, string | number> | Array<string | number>;\n}\n\nexport type ControlDefinition =\n  | NumberControlDefinition\n  | ColorControlDefinition\n  | BooleanControlDefinition\n  | StringControlDefinition\n  | SelectControlDefinition;\n\nexport type ControlDefinitions = Record<string, ControlDefinition>;\n\nexport interface ControlChangePayload {\n  key: string;\n  value: any;\n  event: any;\n}\n\nexport interface P5SketchContext {\n  params: Record<string, any>;\n  controls: any;\n  getP5Instance(): P5Instance | null;\n}\n\nexport type P5SketchHandler = (p5: P5Instance, context: P5SketchContext, ...args: any[]) => void;\n\nexport type P5SketchHandlers = Record<string, P5SketchHandler | undefined>;\n\nexport interface ControlPanelOptions {\n  title?: string;\n  position?: string;\n  expanded?: boolean;\n  container?: HTMLElement | string | null;\n  onChange?: (change: ControlChangePayload, context: P5SketchContext) => void;\n}\n\nexport interface RunP5SketchOptions {\n  controlDefinitions: ControlDefinitions;\n  handlers: P5SketchHandlers;\n  controls?: ControlPanelOptions;\n  mount?: MountOptions;\n}\n\nexport interface RunP5SketchResult {\n  params: Record<string, any>;\n  controls: any;\n  context: P5SketchContext;\n  destroy(): void;\n  setHandlers(handlers: P5SketchHandlers): void;\n  getInstance(): P5Instance | null;\n}\n\nfunction getHypertoolControls(): any {\n  if (typeof window === 'undefined') {\n    throw new Error('[hyper-frame] window is not available');\n  }\n  const hyperWindow = window as unknown as {\n    hypertoolControls?: any;\n  };\n\n  if (!hyperWindow.hypertoolControls) {\n    throw new Error('[hyper-frame] hypertool controls are not available on window');\n  }\n\n  return hyperWindow.hypertoolControls;\n}\n\nfunction wrapHandlers(\n  handlers: P5SketchHandlers,\n  context: P5SketchContext,\n  setActiveInstance: (instance: P5Instance) => void\n): P5HandlerMap {\n  const wrapped: P5HandlerMap = {};\n\n  Object.entries(handlers).forEach(function entry([key, handler]) {\n    if (typeof handler === 'function') {\n      wrapped[key] = function wrappedHandler(instance: P5Instance, ...args: any[]) {\n        setActiveInstance(instance);\n        return (handler as P5SketchHandler)(instance, context, ...args);\n      };\n    }\n  });\n\n  return wrapped;\n}\n\n/**\n * High level helper that wires up controls-lib and p5 mounting in one call.\n */\nexport function runP5Sketch(options: RunP5SketchOptions): RunP5SketchResult {\n  const controlsApi = getHypertoolControls();\n  const controlOptions = options.controls || {};\n\n  const controls = controlsApi.createControlPanel(options.controlDefinitions, {\n    title: controlOptions.title,\n    position: controlOptions.position,\n    expanded: controlOptions.expanded,\n    container: controlOptions.container,\n    onChange: (params: Record<string, any>, changeContext: any) => {\n      if (typeof controlOptions.onChange === 'function') {\n        const change: ControlChangePayload = {\n          key: changeContext.key,\n          value: changeContext.value,\n          event: changeContext.event,\n        };\n        controlOptions.onChange(change, sketchContext);\n      }\n    },\n  });\n\n  const sketchContext: P5SketchContext = {\n    params: controls.params,\n    controls,\n    getP5Instance: function getP5Instance() {\n      return activeInstance;\n    },\n  };\n\n  let activeInstance: P5Instance | null = null;\n\n  function setActiveInstance(instance: P5Instance) {\n    activeInstance = instance;\n  }\n\n  const mounted = mountP5Sketch(\n    wrapHandlers(options.handlers, sketchContext, setActiveInstance),\n    options.mount || {}\n  );\n\n  function setHandlers(handlers: P5SketchHandlers) {\n    mounted.setHandlers(wrapHandlers(handlers, sketchContext, setActiveInstance));\n  }\n\n  return {\n    params: controls.params,\n    controls,\n    context: sketchContext,\n    destroy() {\n      mounted.destroy();\n    },\n    setHandlers,\n    getInstance() {\n      return mounted.getInstance();\n    },\n  };\n}\n\nfunction nextFrame(callback: () => void) {\n  if (typeof requestAnimationFrame === 'function') {\n    requestAnimationFrame(callback);\n  } else {\n    setTimeout(callback, 16);\n  }\n}\n\nfunction waitForCondition(condition: () => boolean, maxAttempts: number, label: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    let attempts = 0;\n\n    function tick() {\n      attempts += 1;\n\n      try {\n        if (condition()) {\n          resolve();\n          return;\n        }\n      } catch (error) {\n        // ignore errors from condition evaluation and keep waiting\n      }\n\n      if (attempts >= maxAttempts) {\n        reject(new Error(`[hyper-frame] Timed out waiting for ${label}`));\n        return;\n      }\n\n      nextFrame(tick);\n    }\n\n    tick();\n  });\n}\n\nconst DEFAULT_P5_CDN_URL = 'https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js';\nconst P5_SCRIPT_SELECTOR = 'script[data-hypertool=\"p5\"]';\n\nfunction ensureP5Script(url: string, maxAttempts: number): Promise<void> {\n  if (typeof window === 'undefined') {\n    return Promise.reject(new Error('[hyper-frame] window is not available'));\n  }\n\n  if (typeof (window as any).p5 === 'function') {\n    return Promise.resolve();\n  }\n\n  return new Promise((resolve, reject) => {\n    let settled = false;\n\n    function fulfill() {\n      if (settled) return;\n      settled = true;\n      resolve();\n    }\n\n    function fail(error: Error) {\n      if (settled) return;\n      settled = true;\n      reject(error);\n    }\n\n    waitForCondition(\n      () => typeof (window as any).p5 === 'function',\n      maxAttempts,\n      'p5 constructor'\n    )\n      .then(fulfill)\n      .catch(fail);\n\n    function handleScriptError() {\n      fail(new Error(`[hyper-frame] Failed to load p5 script from ${url}`));\n    }\n\n    const existing = document.querySelector<HTMLScriptElement>(P5_SCRIPT_SELECTOR);\n    if (existing) {\n      existing.addEventListener('error', handleScriptError, { once: true });\n      return;\n    }\n\n    const script = document.createElement('script');\n    script.src = url;\n    script.async = true;\n    script.dataset.hypertool = 'p5';\n    script.addEventListener('error', handleScriptError, { once: true });\n    document.head.appendChild(script);\n  });\n}\n\nfunction ensureControlsReady(maxAttempts: number): Promise<void> {\n  return waitForCondition(function condition() {\n    try {\n      getHypertoolControls();\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }, maxAttempts, 'hypertool controls');\n}\n\nexport interface StartP5SketchOptions extends RunP5SketchOptions {\n  p5?: {\n    url?: string;\n    maxAttempts?: number;\n  };\n  readiness?: {\n    maxAttempts?: number;\n  };\n}\n\n/**\n * Bootstrap a p5 sketch by ensuring p5 and the controls library are ready.\n */\nexport async function startP5Sketch(options: StartP5SketchOptions): Promise<RunP5SketchResult> {\n  if (typeof window === 'undefined') {\n    throw new Error('[hyper-frame] window is not available');\n  }\n\n  const readinessOptions = options.readiness || {};\n  const p5Options = options.p5 || {};\n\n  const readinessAttempts = typeof readinessOptions.maxAttempts === 'number'\n    ? readinessOptions.maxAttempts\n    : 600;\n\n  const p5Attempts = typeof p5Options.maxAttempts === 'number'\n    ? p5Options.maxAttempts\n    : readinessAttempts;\n\n  const p5Url = typeof p5Options.url === 'string' && p5Options.url.trim().length > 0\n    ? p5Options.url\n    : DEFAULT_P5_CDN_URL;\n\n  await ensureP5Script(p5Url, p5Attempts);\n  await ensureControlsReady(readinessAttempts);\n\n  return runP5Sketch({\n    controlDefinitions: options.controlDefinitions,\n    handlers: options.handlers,\n    controls: options.controls,\n    mount: options.mount,\n  });\n}\n\n// ============================================================================\n// THREE.JS INTEGRATION\n// ============================================================================\n\nexport type ThreeInstance = any;\n\nexport interface ThreeContext {\n  scene: any;\n  camera: any;\n  renderer: any;\n  controls?: any;\n}\n\nexport interface ThreeSketchContext {\n  params: Record<string, any>;\n  controls: any;\n  getThreeContext(): ThreeContext | null;\n}\n\nexport type ThreeSketchHandler = (three: ThreeContext, context: ThreeSketchContext, ...args: any[]) => void;\n\nexport interface ThreeLifecycleHandlers {\n  setup?: ThreeSketchHandler;\n  animate?: ThreeSketchHandler;\n  resize?: ThreeSketchHandler;\n  dispose?: () => void;\n}\n\nexport interface MountThreeOptions {\n  target?: HTMLElement | string | null;\n  containerClassName?: string;\n  camera?: {\n    type?: 'perspective' | 'orthographic';\n    fov?: number;\n    near?: number;\n    far?: number;\n    position?: [number, number, number];\n  };\n  renderer?: {\n    antialias?: boolean;\n    alpha?: boolean;\n    preserveDrawingBuffer?: boolean;\n  };\n  orbitControls?: boolean;\n  onReady?: (context: ThreeContext) => void;\n}\n\nexport interface MountThreeResult {\n  container: HTMLElement;\n  getContext(): ThreeContext | null;\n  destroy(): void;\n  startAnimation(): void;\n  stopAnimation(): void;\n}\n\nfunction getThreeConstructors(): any {\n  if (typeof window === 'undefined') {\n    throw new Error('[hyper-frame] window is not available');\n  }\n\n  const THREE = (window as any).THREE;\n\n  if (typeof THREE !== 'object') {\n    throw new Error('[hyper-frame] THREE not found on window. Make sure to import and expose Three.js on window in your sketch.');\n  }\n\n  return THREE;\n}\n\n/**\n * Mount a Three.js scene with basic setup\n */\nexport function mountThreeSketch(handlers: ThreeLifecycleHandlers, options?: MountThreeOptions): MountThreeResult {\n  if (typeof document === 'undefined') {\n    throw new Error('mountThreeSketch cannot run outside a browser environment');\n  }\n\n  const opts: MountThreeOptions = options || {};\n  const THREE = getThreeConstructors();\n\n  const containerInfo = resolveContainer({\n    target: opts.target,\n    containerClassName: opts.containerClassName || 'hypertool-three-sketch'\n  });\n  const container = containerInfo.element;\n  const createdInternally = containerInfo.createdInternally;\n\n  // Create scene\n  const scene = new THREE.Scene();\n\n  // Create camera\n  const cameraOpts = opts.camera || {};\n  const cameraType = cameraOpts.type || 'perspective';\n  let camera: any;\n\n  if (cameraType === 'perspective') {\n    camera = new THREE.PerspectiveCamera(\n      cameraOpts.fov || 75,\n      window.innerWidth / window.innerHeight,\n      cameraOpts.near || 0.1,\n      cameraOpts.far || 1000\n    );\n  } else {\n    const aspect = window.innerWidth / window.innerHeight;\n    camera = new THREE.OrthographicCamera(\n      -aspect, aspect, 1, -1,\n      cameraOpts.near || 0.1,\n      cameraOpts.far || 1000\n    );\n  }\n\n  if (cameraOpts.position) {\n    camera.position.set(...cameraOpts.position);\n  } else {\n    camera.position.z = 5;\n  }\n\n  // Create renderer\n  const rendererOpts = opts.renderer || {};\n  const renderer = new THREE.WebGLRenderer({\n    antialias: rendererOpts.antialias !== false,\n    alpha: rendererOpts.alpha || false,\n    preserveDrawingBuffer: rendererOpts.preserveDrawingBuffer || false,\n  });\n  renderer.setSize(container.clientWidth || window.innerWidth, container.clientHeight || window.innerHeight);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  container.appendChild(renderer.domElement);\n\n  // Optional orbit controls\n  let orbitControls: any = null;\n  if (opts.orbitControls) {\n    const OrbitControls = (window as any).OrbitControls || THREE.OrbitControls;\n    if (OrbitControls) {\n      orbitControls = new OrbitControls(camera, renderer.domElement);\n    } else {\n      console.warn('[hyper-frame] OrbitControls not found. Make sure to import and expose it on window.');\n    }\n  }\n\n  const threeContext: ThreeContext = {\n    scene,\n    camera,\n    renderer,\n    controls: orbitControls,\n  };\n\n  let animationId: number | null = null;\n  let isAnimating = false;\n\n  // Handle window resize\n  function handleResize() {\n    const width = container.clientWidth || window.innerWidth;\n    const height = container.clientHeight || window.innerHeight;\n\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n    renderer.setSize(width, height);\n\n    if (handlers.resize) {\n      handlers.resize(threeContext, {} as ThreeSketchContext);\n    }\n  }\n\n  window.addEventListener('resize', handleResize);\n\n  // Animation loop\n  function animate() {\n    if (!isAnimating) return;\n\n    animationId = requestAnimationFrame(animate);\n\n    if (orbitControls) {\n      orbitControls.update();\n    }\n\n    if (handlers.animate) {\n      handlers.animate(threeContext, {} as ThreeSketchContext);\n    }\n\n    renderer.render(scene, camera);\n  }\n\n  // Call setup if provided\n  if (handlers.setup) {\n    handlers.setup(threeContext, {} as ThreeSketchContext);\n  }\n\n  if (opts.onReady) {\n    opts.onReady(threeContext);\n  }\n\n  function startAnimation() {\n    if (!isAnimating) {\n      isAnimating = true;\n      animate();\n    }\n  }\n\n  function stopAnimation() {\n    isAnimating = false;\n    if (animationId !== null) {\n      cancelAnimationFrame(animationId);\n      animationId = null;\n    }\n  }\n\n  function destroy() {\n    stopAnimation();\n    window.removeEventListener('resize', handleResize);\n\n    if (handlers.dispose) {\n      handlers.dispose();\n    }\n\n    if (orbitControls) {\n      orbitControls.dispose();\n    }\n\n    renderer.dispose();\n    container.removeChild(renderer.domElement);\n\n    if (createdInternally) {\n      container.remove();\n    }\n  }\n\n  // Start animation by default\n  startAnimation();\n\n  return {\n    container,\n    getContext: () => threeContext,\n    destroy,\n    startAnimation,\n    stopAnimation,\n  };\n}\n\nexport interface RunThreeSketchOptions {\n  controlDefinitions: ControlDefinitions;\n  handlers: ThreeLifecycleHandlers;\n  controls?: ControlPanelOptions;\n  mount?: MountThreeOptions;\n}\n\nexport interface RunThreeSketchResult {\n  params: Record<string, any>;\n  controls: any;\n  context: ThreeSketchContext;\n  threeContext: ThreeContext;\n  destroy(): void;\n  getInstance(): ThreeContext | null;\n}\n\n/**\n * High level helper that wires up controls-lib and Three.js mounting in one call.\n */\nexport function runThreeSketch(options: RunThreeSketchOptions): RunThreeSketchResult {\n  const controlsApi = getHypertoolControls();\n  const controlOptions = options.controls || {};\n\n  const sketchContext: ThreeSketchContext = {\n    params: {},\n    controls: null as any,\n    getThreeContext: () => threeContext,\n  };\n\n  const controls = controlsApi.createControlPanel(options.controlDefinitions, {\n    title: controlOptions.title,\n    position: controlOptions.position,\n    expanded: controlOptions.expanded,\n    container: controlOptions.container,\n    onChange: (params: Record<string, any>, changeContext: any) => {\n      sketchContext.params = params;\n      if (typeof controlOptions.onChange === 'function') {\n        const change: ControlChangePayload = {\n          key: changeContext.key,\n          value: changeContext.value,\n          event: changeContext.event,\n        };\n        (controlOptions.onChange as any)(change, sketchContext);\n      }\n    },\n  });\n\n  sketchContext.params = controls.params;\n  sketchContext.controls = controls;\n\n  // Wrap handlers with context\n  const wrappedHandlers: ThreeLifecycleHandlers = {};\n\n  if (options.handlers.setup) {\n    const originalSetup = options.handlers.setup;\n    wrappedHandlers.setup = (three: ThreeContext, _ctx: ThreeSketchContext) => {\n      originalSetup(three, sketchContext);\n    };\n  }\n\n  if (options.handlers.animate) {\n    const originalAnimate = options.handlers.animate;\n    wrappedHandlers.animate = (three: ThreeContext, _ctx: ThreeSketchContext) => {\n      originalAnimate(three, sketchContext);\n    };\n  }\n\n  if (options.handlers.resize) {\n    const originalResize = options.handlers.resize;\n    wrappedHandlers.resize = (three: ThreeContext, _ctx: ThreeSketchContext) => {\n      originalResize(three, sketchContext);\n    };\n  }\n\n  if (options.handlers.dispose) {\n    wrappedHandlers.dispose = options.handlers.dispose;\n  }\n\n  const mounted = mountThreeSketch(wrappedHandlers, options.mount || {});\n  const threeContext = mounted.getContext()!;\n\n  return {\n    params: controls.params,\n    controls,\n    context: sketchContext,\n    threeContext,\n    destroy() {\n      mounted.destroy();\n    },\n    getInstance() {\n      return mounted.getContext();\n    },\n  };\n}\n\nfunction ensureThreeReady(maxAttempts: number): Promise<void> {\n  return waitForCondition(function condition() {\n    try {\n      getThreeConstructors();\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }, maxAttempts, 'THREE constructor');\n}\n\nexport interface StartThreeSketchOptions extends RunThreeSketchOptions {\n  readiness?: {\n    maxAttempts?: number;\n  };\n}\n\n/**\n * Bootstrap a Three.js sketch by ensuring Three.js and the controls library are ready.\n *\n * Note: Three.js should be imported as a module and exposed on window.THREE\n * in your sketch entry point.\n */\nexport async function startThreeSketch(options: StartThreeSketchOptions): Promise<RunThreeSketchResult> {\n  if (typeof window === 'undefined') {\n    throw new Error('[hyper-frame] window is not available');\n  }\n\n  const readinessOptions = options.readiness || {};\n\n  const readinessAttempts = typeof readinessOptions.maxAttempts === 'number'\n    ? readinessOptions.maxAttempts\n    : 600;\n\n  await ensureThreeReady(readinessAttempts);\n  await ensureControlsReady(readinessAttempts);\n\n  return runThreeSketch({\n    controlDefinitions: options.controlDefinitions,\n    handlers: options.handlers,\n    controls: options.controls,\n    mount: options.mount,\n  });\n}\n"
  ],
  "mappings": "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",
  "debugId": "76B38852BF03781564756E2164756E21",
  "names": []
}